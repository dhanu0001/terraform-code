!function(r,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("lodash-es/toPath"),require("lodash-es/isObject"),require("lodash-es/clone"),require("@rjsf/utils"),require("ajv8"),require("ajv-formats")):"function"==typeof define&&define.amd?define(["exports","lodash-es/toPath","lodash-es/isObject","lodash-es/clone","@rjsf/utils","ajv8","ajv-formats"],e):e((r="undefined"!=typeof globalThis?globalThis:r||self)["@rjsf/validator-ajv8"]={},r.toPath,r.isObject,r.clone,r.utils,r.Ajv,r.addFormats)}(this,(function(r,e,t,a,i,o,n){"use strict";function s(r){return r&&"object"==typeof r&&"default"in r?r:{default:r}}var c=s(e),d=s(t),u=s(a),f=s(o),l=s(n);function h(){return h=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=t[a])}return r},h.apply(this,arguments)}var v={allErrors:!0,multipleOfPrecision:8,strict:!1},m=/^(#?([0-9A-Fa-f]{3}){1,2}\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\)))$/,p=/^data:([a-z]+\/[a-z0-9-+.]+)?;(?:name=(.*);)?base64,(.*)$/,y="__rjsf_rootSchema",j=function(){function r(r,e){this.ajv=void 0,this.localizer=void 0,this.ajv=function(r,e,t,a,o){void 0===t&&(t={}),void 0===o&&(o=f.default);var n=new o(h({},v,t));return a?l.default(n,a):!1!==a&&l.default(n),n.addFormat("data-url",p),n.addFormat("color",m),n.addKeyword(i.ADDITIONAL_PROPERTY_FLAG),n.addKeyword(i.RJSF_ADDITONAL_PROPERTIES_FLAG),Array.isArray(r)&&n.addMetaSchema(r),d.default(e)&&Object.keys(e).forEach((function(r){n.addFormat(r,e[r])})),n}(r.additionalMetaSchemas,r.customFormats,r.ajvOptionsOverrides,r.ajvFormatOptions,r.AjvClass),this.localizer=e}var e=r.prototype;return e.toErrorSchema=function(r){var e=new i.ErrorSchemaBuilder;return r.length&&r.forEach((function(r){var t=r.message,a=c.default(r.property);a.length>0&&""===a[0]&&a.splice(0,1),t&&e.addErrors(t,a)})),e.ErrorSchema},e.toErrorList=function(r,e){var t=this;if(void 0===e&&(e=[]),!r)return[];var a=[];return i.ERRORS_KEY in r&&(a=a.concat(r[i.ERRORS_KEY].map((function(r){var t="."+e.join(".");return{property:t,message:r,stack:t+" "+r}})))),Object.keys(r).reduce((function(a,o){return o!==i.ERRORS_KEY&&(a=a.concat(t.toErrorList(r[o],[].concat(e,[o])))),a}),a)},e.createErrorHandler=function(r){var e=this,t={__errors:[],addError:function(r){this.__errors.push(r)}};if(Array.isArray(r))return r.reduce((function(r,t,a){var i;return h({},r,((i={})[a]=e.createErrorHandler(t),i))}),t);if(d.default(r)){var a=r;return Object.keys(a).reduce((function(r,t){var i;return h({},r,((i={})[t]=e.createErrorHandler(a[t]),i))}),t)}return t},e.unwrapErrorHandler=function(r){var e=this;return Object.keys(r).reduce((function(t,a){var o,n;return"addError"===a?t:h({},t,a===i.ERRORS_KEY?((n={})[a]=r[a],n):((o={})[a]=e.unwrapErrorHandler(r[a]),o))}),{})},e.transformRJSFValidationErrors=function(r){return void 0===r&&(r=[]),r.map((function(r){var e=r.keyword,t=r.message,a=r.params,i=r.schemaPath,o=r.instancePath.replace(/\//g,"."),n=(o+" "+t).trim();return"missingProperty"in a&&(o=o?o+"."+a.missingProperty:a.missingProperty,n=t),{name:e,property:o,message:t,params:a,stack:n,schemaPath:i}}))},e.rawValidation=function(r,e){var t,a,i=void 0;r.$id&&(t=this.ajv.getSchema(r.$id));try{void 0===t&&(t=this.ajv.compile(r)),t(e)}catch(r){i=r}return t&&("function"==typeof this.localizer&&this.localizer(t.errors),a=t.errors||void 0,t.errors=null),{errors:a,validationError:i}},e.validateFormData=function(r,e,t,a){var o=this.rawValidation(e,r),n=o.validationError,s=this.transformRJSFValidationErrors(o.errors);n&&(s=[].concat(s,[{stack:n.message}])),"function"==typeof a&&(s=a(s));var c=this.toErrorSchema(s);if(n&&(c=h({},c,{$schema:{__errors:[n.message]}})),"function"!=typeof t)return{errors:s,errorSchema:c};var d=i.getDefaultFormState(this,e,r,e,!0),u=t(d,this.createErrorHandler(d)),f=this.unwrapErrorHandler(u);return i.mergeValidationData(this,{errors:s,errorSchema:c},f)},e.withIdRefPrefixObject=function(r){for(var e in r){var t=r[e];r[e]=e===i.REF_KEY&&"string"==typeof t&&t.startsWith("#")?y+t:this.withIdRefPrefix(t)}return r},e.withIdRefPrefixArray=function(r){for(var e=0;e<r.length;e++)r[e]=this.withIdRefPrefix(r[e]);return r},e.isValid=function(r,e,t){var a,i=null!=(a=t.$id)?a:y;try{void 0===this.ajv.getSchema(i)&&this.ajv.addSchema(t,i);var o,n=this.withIdRefPrefix(r);return n.$id&&(o=this.ajv.getSchema(n.$id)),void 0===o&&(o=this.ajv.compile(n)),o(e)}catch(r){return console.warn("Error encountered compiling schema:",r),!1}finally{this.ajv.removeSchema(i)}},e.withIdRefPrefix=function(r){return Array.isArray(r)?this.withIdRefPrefixArray([].concat(r)):d.default(r)?this.withIdRefPrefixObject(u.default(r)):r},r}();function E(r,e){return void 0===r&&(r={}),new j(r,e)}var b=E();r.customizeValidator=E,r.default=b,Object.defineProperty(r,"__esModule",{value:!0})}));
//# sourceMappingURL=validator-ajv8.umd.production.min.js.map
