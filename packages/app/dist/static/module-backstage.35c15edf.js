"use strict";(()=>{(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1850],{86456:function(Nt,u,e){e.d(u,{r:function(){return zt}});var n=e(53907),i=e(30705),m=e(56563),d=e(2784),a=e(77277),l=e(49558),y=e(73557),b=e(39857),t=e(43642),_=e(80079),g=e(90941),F=e(32915),j=e(40562),V=e(21853),re=e(60744),w=e(66569),A=e(30254),D=e(13384),f=e(15933),x=e(58838),R=e(86737),c=e(4989),O=e(44407),T=e(18628),Ce=e(84219),we=e(98685),nt=e(39781),ot=e(73689),$t=e(48032),ct=e(34505);const St={wave:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='1368' height='401' x='0' y='0' maskUnits='userSpaceOnUse'%3e%3cpath fill='url(%23paint0_linear)' d='M437 116C223 116 112 0 112 0h1256v400c-82 0-225-21-282-109-112-175-436-175-649-175z'/%3e%3cpath fill='url(%23paint1_linear)' d='M1368 400V282C891-29 788 40 711 161 608 324 121 372 0 361v39h1368z'/%3e%3cpath fill='url(%23paint2_linear)' d='M1368 244v156H0V94c92-24 198-46 375 0l135 41c176 51 195 109 858 109z'/%3e%3cpath fill='url(%23paint3_linear)' d='M1252 400h116c-14-7-35-14-116-16-663-14-837-128-1013-258l-85-61C98 28 46 8 0 0v400h1252z'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M-172-98h1671v601H-172z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='602' x2='1093.5' y1='-960.5' y2='272' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='482' x2='480' y1='1058.5' y2='70.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='424' x2='446.1' y1='-587.5' y2='274.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint3_linear' x1='587' x2='349' y1='-1120.5' y2='341' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e")`,wave2:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='1764' height='479' x='-229' y='-6' maskUnits='userSpaceOnUse'%3e%3cpath fill='url(%23paint0_linear)' d='M0 400h1350C1321 336 525 33 179-2c-345-34-395 236-408 402H0z'/%3e%3cpath fill='url(%23paint1_linear)' d='M1378 177v223H0V217s219 75 327 52C436 246 717-35 965 45s254 144 413 132z'/%3e%3cpath fill='url(%23paint2_linear)' d='M26 400l-78-16c-170 205-44-6-137-30l-4-1 4 1 137 30c37-45 89-110 159-201 399-514-45 238 1176-50 275-65 354-39 91 267H26z'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M0 0h1368v400H0z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='431' x2='397.3' y1='-599' y2='372.8' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='236.5' x2='446.6' y1='-586' y2='381.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='851.8' x2='640.4' y1='-867.2' y2='363.7' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e")`,round:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='2269' height='1408' x='-610' y='-509' maskUnits='userSpaceOnUse'%3e%3ccircle cx='1212.8' cy='74.8' r='317.5' fill='url(%23paint0_linear)' transform='rotate(-52 1213 75)'/%3e%3ccircle cx='737.8' cy='445.8' r='317.5' fill='url(%23paint1_linear)' transform='rotate(-116 738 446)'/%3e%3ccircle cx='601.8' cy='52.8' r='418.6' fill='url(%23paint2_linear)' transform='rotate(-117 602 53)'/%3e%3ccircle cx='999.8' cy='364' r='389.1' fill='url(%23paint3_linear)' transform='rotate(31 1000 364)'/%3e%3cellipse cx='-109.2' cy='263.5' fill='url(%23paint4_linear)' rx='429.2' ry='465.8' transform='rotate(-85 -109 264)'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M0 0h1368v400H0z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='1301.2' x2='161.4' y1='-1879.7' y2='-969.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='826.2' x2='-313.6' y1='-1508.7' y2='-598.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='718.4' x2='-784.3' y1='-2524' y2='-1324.2' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint3_linear' x1='1108.2' x2='-288.6' y1='-2031.1' y2='-915.9' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint4_linear' x1='10.4' x2='-1626.5' y1='-2603.8' y2='-1399.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e")`},xt={darkGrey:["#171717","#383838"],marineBlue:["#006D8F","#0049A1"],veryBlue:["#0027AF","#270094"],rubyRed:["#98002B","#8D1134"],toastyOrange:["#BE2200","#A41D00"],purpleSky:["#8912CA","#3E00EA"],eveningSea:["#00FFF2","#035355"],teal:["#005B4B"],pinkSea:["#C8077A","#C2297D"],greens:["#4BB8A5","#187656"]};function Q(Le){var Pt;const{colors:Rt,shape:sn,options:un}=Le,Ht=`linear-gradient(90deg, ${(Rt.length===1?[Rt[0],Rt[0]]:Rt).join(", ")})`,nn=`${sn},  ${Ht}`,Te=(Pt=un==null?void 0:un.fontColor)!=null?Pt:"#FFFFFF";return{colors:Rt,shape:sn,backgroundImage:nn,fontColor:Te}}const pn={home:Q({colors:xt.teal,shape:St.wave}),documentation:Q({colors:xt.pinkSea,shape:St.wave2}),tool:Q({colors:xt.purpleSky,shape:St.round}),service:Q({colors:xt.marineBlue,shape:St.wave}),website:Q({colors:xt.veryBlue,shape:St.wave}),library:Q({colors:xt.rubyRed,shape:St.wave}),other:Q({colors:xt.darkGrey,shape:St.wave}),app:Q({colors:xt.toastyOrange,shape:St.wave}),apis:Q({colors:xt.teal,shape:St.wave2}),card:Q({colors:xt.greens,shape:St.wave})},Ct=16,Ge='"Helvetica Neue", Helvetica, Roboto, Arial, sans-serif';function C(Le){const{palette:Pt,htmlFontSize:Rt=Ct,fontFamily:sn=Ge,defaultPageTheme:un,pageTheme:Lt=pn}=Le;if(!Lt[un])throw new Error(`${un} is not defined in pageTheme.`);return{palette:Pt,props:{MuiGrid:{spacing:2},MuiSwitch:{color:"primary"}},typography:{htmlFontSize:Rt,fontFamily:sn,h6:{fontWeight:700,fontSize:20,marginBottom:2},h5:{fontWeight:700,fontSize:24,marginBottom:4},h4:{fontWeight:700,fontSize:28,marginBottom:6},h3:{fontSize:32,fontWeight:700,marginBottom:6},h2:{fontSize:40,fontWeight:700,marginBottom:8},h1:{fontSize:54,fontWeight:700,marginBottom:10}},page:Lt[un],getPageTheme:({themeId:Ht})=>{var nn;return(nn=Lt[Ht])!=null?nn:Lt[un]}}}function Fe(Le){return{MuiCssBaseline:{"@global":{html:{height:"100%",fontFamily:Le.typography.fontFamily},body:{height:"100%",fontFamily:Le.typography.fontFamily,"overscroll-behavior-y":"none"},a:{color:"inherit",textDecoration:"none"}}},MuiTableRow:{root:{"&:nth-of-type(odd)":{backgroundColor:Le.palette.background.default}},hover:{"&:hover":{cursor:"pointer"}},head:{"&:nth-of-type(odd)":{backgroundColor:Le.palette.background.paper}}},MuiTableCell:{root:{wordBreak:"break-word",overflow:"hidden",verticalAlign:"middle",lineHeight:"1",margin:0,padding:Le.spacing(3,2,3,2.5),borderBottom:0},sizeSmall:{padding:Le.spacing(1.5,2,1.5,2.5)},head:{wordBreak:"break-word",overflow:"hidden",color:"rgb(179, 179, 179)",fontWeight:"normal",lineHeight:"1"}},MuiTabs:{root:{minHeight:24}},MuiTab:{root:{color:Le.palette.link,minHeight:24,textTransform:"initial",letterSpacing:"0.07em","&:hover":{color:(0,$t.darken)(Le.palette.link,.3),background:(0,$t.lighten)(Le.palette.link,.95)},[Le.breakpoints.up("md")]:{minWidth:120,fontSize:Le.typography.pxToRem(14),fontWeight:500}},textColorPrimary:{color:Le.palette.link}},MuiTableSortLabel:{root:{color:"inherit","&:hover":{color:"inherit"},"&:focus":{color:"inherit"}},active:{fontWeight:"bold",color:"inherit"}},MuiListItemText:{dense:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},MuiButton:{text:{padding:void 0}},MuiChip:{root:{backgroundColor:"#D9D9D9",marginRight:Le.spacing(1),marginBottom:Le.spacing(1),color:Le.palette.grey[900]},outlined:{color:Le.palette.text.primary},label:{lineHeight:`${Le.spacing(2.5)}px`,fontWeight:Le.typography.fontWeightMedium,fontSize:`${Le.spacing(1.75)}px`},labelSmall:{fontSize:`${Le.spacing(1.5)}px`},deleteIcon:{color:Le.palette.grey[500],width:`${Le.spacing(3)}px`,height:`${Le.spacing(3)}px`,margin:`0 ${Le.spacing(.75)}px 0 -${Le.spacing(.75)}px`},deleteIconSmall:{width:`${Le.spacing(2)}px`,height:`${Le.spacing(2)}px`,margin:`0 ${Le.spacing(.5)}px 0 -${Le.spacing(.5)}px`}},MuiCard:{root:{display:"flex",flexDirection:"column"}},MuiCardHeader:{root:{paddingBottom:0}},MuiCardContent:{root:{flexGrow:1,"&:last-child":{paddingBottom:void 0}}},MuiCardActions:{root:{justifyContent:"flex-end"}}}}function ve(Le){const Pt=C(Le),Rt=(0,ot.Z)(Pt),sn=Fe(Rt);return{...Rt,overrides:sn}}const M=ve({palette:{type:"light",background:{default:"#F8F8F8"},status:{ok:"#1DB954",warning:"#FF9800",error:"#E22134",running:"#2E77D0",pending:"#FFED51",aborted:"#757575"},bursts:{fontColor:"#FEFEFE",slackChannelText:"#ddd",backgroundColor:{default:"#7C3699"},gradient:{linear:"linear-gradient(-137deg, #4BB8A5 0%, #187656 100%)"}},primary:{main:"#2E77D0"},banner:{info:"#2E77D0",error:"#E22134",text:"#FFFFFF",link:"#000000",warning:"#FF9800"},border:"#E6E6E6",textContrast:"#000000",textVerySubtle:"#DDD",textSubtle:"#6E6E6E",highlight:"#FFFBCC",errorBackground:"#FFEBEE",warningBackground:"#F59B23",infoBackground:"#ebf5ff",errorText:"#CA001B",infoText:"#004e8a",warningText:"#000000",linkHover:"#2196F3",link:"#0A6EBE",gold:ct.Z.A700,navigation:{background:"#171717",indicator:"#9BF0E1",color:"#b5b5b5",selectedColor:"#FFF",navItem:{hoverBackground:"#404040"},submenu:{background:"#404040"}},pinSidebarButton:{icon:"#181818",background:"#BDBDBD"},tabbar:{indicator:"#9BF0E1"}},defaultPageTheme:"home",pageTheme:pn}),G=ve({palette:{type:"dark",background:{default:"#333333"},status:{ok:"#71CF88",warning:"#FFB84D",error:"#F84C55",running:"#3488E3",pending:"#FEF071",aborted:"#9E9E9E"},bursts:{fontColor:"#FEFEFE",slackChannelText:"#ddd",backgroundColor:{default:"#7C3699"},gradient:{linear:"linear-gradient(-137deg, #4BB8A5 0%, #187656 100%)"}},primary:{main:"#9CC9FF",dark:"#82BAFD"},secondary:{main:"#FF88B2"},banner:{info:"#2E77D0",error:"#E22134",text:"#FFFFFF",link:"#000000",warning:"#FF9800"},border:"#E6E6E6",textContrast:"#FFFFFF",textVerySubtle:"#727272",textSubtle:"#CCCCCC",highlight:"#FFFBCC",errorBackground:"#FFEBEE",warningBackground:"#F59B23",infoBackground:"#ebf5ff",errorText:"#CA001B",infoText:"#004e8a",warningText:"#000000",linkHover:"#82BAFD",link:"#9CC9FF",gold:ct.Z.A700,navigation:{background:"#424242",indicator:"#9BF0E1",color:"#b5b5b5",selectedColor:"#FFF",navItem:{hoverBackground:"#404040"},submenu:{background:"#404040"}},pinSidebarButton:{icon:"#404040",background:"#BDBDBD"},tabbar:{indicator:"#9BF0E1"}},defaultPageTheme:"home",pageTheme:pn});var Re=e(98192),Ne=e(15222),Me=e(41547),Xe=e(87561);const vt=[(0,i.ni)({api:i.NW,deps:{configApi:i.Ds},factory:({configApi:Le})=>n.pM.compile(`${Le.getString("backend.baseUrl")}/api/{{ pluginId }}`)}),(0,i.ni)({api:i.$v,deps:{},factory:()=>new n.CX}),(0,i.ni)({api:i.v_,deps:{},factory:()=>new n.gN}),(0,i.ni)({api:i.VE,deps:{alertApi:i.$v},factory:({alertApi:Le})=>{const Pt=new n.KN(Le,new n.gr);return n.Jv.forward(Pt,{hidden:!1}),Pt}}),(0,i.ni)({api:i.E6,deps:{errorApi:i.VE},factory:({errorApi:Le})=>n.CJ.create({errorApi:Le})}),(0,i.ni)({api:i.gP,deps:{configApi:i.Ds,identityApi:i.$4,discoveryApi:i.NW},factory:({configApi:Le,identityApi:Pt,discoveryApi:Rt})=>(0,n.jJ)({middleware:[n.II.resolvePluginProtocol({discoveryApi:Rt}),n.II.injectIdentityAuth({identityApi:Pt,config:Le})]})}),(0,i.ni)({api:i.ZM,deps:{},factory:()=>new n.YM}),(0,i.ni)({api:i.Kp,deps:{discoveryApi:i.NW,oauthRequestApi:i.ZM,configApi:i.Ds},factory:({discoveryApi:Le,oauthRequestApi:Pt,configApi:Rt})=>n.eE.create({discoveryApi:Le,oauthRequestApi:Pt,environment:Rt.getOptionalString("auth.environment")})}),(0,i.ni)({api:i.p_,deps:{discoveryApi:i.NW,oauthRequestApi:i.ZM,configApi:i.Ds},factory:({discoveryApi:Le,oauthRequestApi:Pt,configApi:Rt})=>n._i.create({discoveryApi:Le,oauthRequestApi:Pt,environment:Rt.getOptionalString("auth.environment")})}),(0,i.ni)({api:i.F4,deps:{discoveryApi:i.NW,oauthRequestApi:i.ZM,configApi:i.Ds},factory:({discoveryApi:Le,oauthRequestApi:Pt,configApi:Rt})=>n.Td.create({discoveryApi:Le,oauthRequestApi:Pt,defaultScopes:["read:user"],environment:Rt.getOptionalString("auth.environment")})}),(0,i.ni)({api:i.D,deps:{discoveryApi:i.NW,oauthRequestApi:i.ZM,configApi:i.Ds},factory:({discoveryApi:Le,oauthRequestApi:Pt,configApi:Rt})=>n.sn.create({discoveryApi:Le,oauthRequestApi:Pt,environment:Rt.getOptionalString("auth.environment")})}),(0,i.ni)({api:i.ux,deps:{discoveryApi:i.NW,oauthRequestApi:i.ZM,configApi:i.Ds},factory:({discoveryApi:Le,oauthRequestApi:Pt,configApi:Rt})=>n.aq.create({discoveryApi:Le,oauthRequestApi:Pt,environment:Rt.getOptionalString("auth.environment")})}),(0,i.ni)({api:i.gW,deps:{discoveryApi:i.NW,oauthRequestApi:i.ZM,configApi:i.Ds},factory:({discoveryApi:Le,oauthRequestApi:Pt,configApi:Rt})=>n.$_.create({discoveryApi:Le,oauthRequestApi:Pt,environment:Rt.getOptionalString("auth.environment")})}),(0,i.ni)({api:i.bq,deps:{discoveryApi:i.NW,oauthRequestApi:i.ZM,configApi:i.Ds},factory:({discoveryApi:Le,oauthRequestApi:Pt,configApi:Rt})=>n.xP.create({discoveryApi:Le,oauthRequestApi:Pt,defaultScopes:["team"],environment:Rt.getOptionalString("auth.environment")})}),(0,i.ni)({api:i.uB,deps:{discoveryApi:i.NW,oauthRequestApi:i.ZM,configApi:i.Ds},factory:({discoveryApi:Le,oauthRequestApi:Pt,configApi:Rt})=>n.uC.create({discoveryApi:Le,oauthRequestApi:Pt,environment:Rt.getOptionalString("auth.environment")})}),(0,i.ni)({api:m.RV,deps:{discovery:i.NW,identity:i.$4,config:i.Ds},factory:({config:Le,discovery:Pt,identity:Rt})=>m.iM.create({config:Le,discovery:Pt,identity:Rt})})];function ee({children:Le}){return(0,y.GV)()?d.createElement(d.Fragment,null,Le):d.createElement(y.VA,null,Le)}const ue=()=>d.createElement(l.mf,{status:"404",statusMessage:"PAGE NOT FOUND"}),Pe=({step:Le,error:Pt})=>{let Rt="";return Le==="load-config"?Rt=`The configuration failed to load, someone should have a look at this error: ${Pt.message}`:Le==="load-chunk"&&(Rt=`Lazy loaded chunk failed to load, try to reload the page: ${Pt.message}`),d.createElement(ee,null,d.createElement(l.mf,{status:"501",statusMessage:Rt}))},at=({error:Le,resetError:Pt,plugin:Rt})=>d.createElement(l.yu,{title:`Error in ${Rt==null?void 0:Rt.getId()}`,defaultExpanded:!0,error:Le},d.createElement(a.Z,{variant:"outlined",onClick:Pt},"Retry")),bt={Progress:l.Ex,Router:b.VK,NotFoundErrorPage:ue,BootErrorPage:Pe,ErrorBoundaryFallback:at},Wt={brokenImage:_.Z,catalog:T.Z,scaffolder:F.Z,techdocs:j.Z,search:V.Z,chat:re.Z,dashboard:w.Z,docs:A.Z,email:D.Z,github:x.Z,group:Ce.Z,help:R.Z,"kind:api":f.Z,"kind:component":O.Z,"kind:domain":t.Z,"kind:group":Ce.Z,"kind:location":c.Z,"kind:system":g.Z,"kind:user":we.Z,user:we.Z,warning:nt.Z},on=[{id:"light",title:"Light Theme",variant:"light",icon:d.createElement(Ne.Z,null),Provider:({children:Le})=>d.createElement(Me.Z,{theme:M},d.createElement(Xe.ZP,null,Le))},{id:"dark",title:"Dark Theme",variant:"dark",icon:d.createElement(Re.Z,null),Provider:({children:Le})=>d.createElement(Me.Z,{theme:G},d.createElement(Xe.ZP,null,Le))}];function zt(Le){var Pt,Rt,sn;return(0,n.bg)({...Le,apis:(Pt=Le==null?void 0:Le.apis)!=null?Pt:[],bindRoutes:Le==null?void 0:Le.bindRoutes,components:{...bt,...Le==null?void 0:Le.components},configLoader:Le==null?void 0:Le.configLoader,defaultApis:vt,icons:{...Wt,...Le==null?void 0:Le.icons},plugins:(Rt=Le==null?void 0:Le.plugins)!=null?Rt:[],themes:(sn=Le==null?void 0:Le.themes)!=null?sn:on})}},88285:function(Nt,u,e){e.d(u,{MS:function(){return l},mk:function(){return y},n3:function(){return a}});var n=e(34520),i=e(32272),m=e(96279),d=e.n(m);const a=Symbol.for("CATALOG_FILTER_EXISTS_0e15b590c0b343a2bae3e787e84c2111");class l{constructor(t){this.discoveryApi=t.discoveryApi,this.fetchApi=t.fetchApi||{fetch:d()}}async getEntityAncestors(t,_){const{kind:g,namespace:F,name:j}=(0,n.of)(t.entityRef);return await this.requestRequired("GET",`/entities/by-name/${encodeURIComponent(g)}/${encodeURIComponent(F)}/${encodeURIComponent(j)}/ancestry`,_)}async getLocationById(t,_){return await this.requestOptional("GET",`/locations/${encodeURIComponent(t)}`,_)}async getEntities(t,_){const{filter:g=[],fields:F=[],offset:j,limit:V,after:re}=t!=null?t:{},w=[];for(const x of[g].flat()){const R=[];for(const[c,O]of Object.entries(x))for(const T of[O].flat())T===a?R.push(encodeURIComponent(c)):typeof T=="string"&&R.push(`${encodeURIComponent(c)}=${encodeURIComponent(T)}`);R.length&&w.push(`filter=${R.join(",")}`)}F.length&&w.push(`fields=${F.map(encodeURIComponent).join(",")}`),j!==void 0&&w.push(`offset=${j}`),V!==void 0&&w.push(`limit=${V}`),re!==void 0&&w.push(`after=${encodeURIComponent(re)}`);const A=w.length?`?${w.join("&")}`:"",D=await this.requestRequired("GET",`/entities${A}`,_),f=(x,R)=>{var c,O;if(((c=x.metadata)==null?void 0:c.name)===void 0||x.kind===void 0||((O=R.metadata)==null?void 0:O.name)===void 0||R.kind===void 0)return 0;const T=(0,n.eE)(x),Ce=(0,n.eE)(R);return T<Ce?-1:T>Ce?1:0};return{items:D.sort(f)}}async getEntitiesByRefs(t,_){var g;const F=[];(g=t.fields)!=null&&g.length&&F.push(`fields=${t.fields.map(encodeURIComponent).join(",")}`);const j=await this.discoveryApi.getBaseUrl("catalog"),V=F.length?`?${F.join("&")}`:"",re=`${j}/entities/by-refs${V}`,w=await this.fetchApi.fetch(re,{headers:{"Content-Type":"application/json",...(_==null?void 0:_.token)&&{Authorization:`Bearer ${_==null?void 0:_.token}`}},method:"POST",body:JSON.stringify({entityRefs:t.entityRefs})});if(!w.ok)throw await i.VL.fromResponse(w);const{items:A}=await w.json();return{items:A}}async getEntityByRef(t,_){const{kind:g,namespace:F,name:j}=(0,n.of)(t);return this.requestOptional("GET",`/entities/by-name/${encodeURIComponent(g)}/${encodeURIComponent(F)}/${encodeURIComponent(j)}`,_)}async getEntityByName(t,_){const{kind:g,namespace:F="default",name:j}=t;return this.requestOptional("GET",`/entities/by-name/${encodeURIComponent(g)}/${encodeURIComponent(F)}/${encodeURIComponent(j)}`,_)}async refreshEntity(t,_){const g=await this.fetchApi.fetch(`${await this.discoveryApi.getBaseUrl("catalog")}/refresh`,{headers:{"Content-Type":"application/json",...(_==null?void 0:_.token)&&{Authorization:`Bearer ${_==null?void 0:_.token}`}},method:"POST",body:JSON.stringify({entityRef:t})});if(g.status!==200)throw new Error(await g.text())}async getEntityFacets(t,_){const{filter:g=[],facets:F}=t,j=[];for(const re of[g].flat()){const w=[];for(const[A,D]of Object.entries(re))for(const f of[D].flat())f===a?w.push(encodeURIComponent(A)):typeof f=="string"&&w.push(`${encodeURIComponent(A)}=${encodeURIComponent(f)}`);w.length&&j.push(`filter=${w.join(",")}`)}for(const re of F)j.push(`facet=${encodeURIComponent(re)}`);const V=j.length?`?${j.join("&")}`:"";return await this.requestOptional("GET",`/entity-facets${V}`,_)}async addLocation(t,_){const{type:g="url",target:F,dryRun:j}=t,V=await this.fetchApi.fetch(`${await this.discoveryApi.getBaseUrl("catalog")}/locations${j?"?dryRun=true":""}`,{headers:{"Content-Type":"application/json",...(_==null?void 0:_.token)&&{Authorization:`Bearer ${_==null?void 0:_.token}`}},method:"POST",body:JSON.stringify({type:g,target:F})});if(V.status!==201)throw new Error(await V.text());const{location:re,entities:w,exists:A}=await V.json();if(!re)throw new Error(`Location wasn't added: ${F}`);return{location:re,entities:w,exists:A}}async getLocationByRef(t,_){return(await this.requestRequired("GET","/locations",_)).map(F=>F.data).find(F=>t===(0,n.NZ)(F))}async removeLocationById(t,_){await this.requestIgnored("DELETE",`/locations/${encodeURIComponent(t)}`,_)}async removeEntityByUid(t,_){await this.requestIgnored("DELETE",`/entities/by-uid/${encodeURIComponent(t)}`,_)}async validateEntity(t,_,g){const F=await this.fetchApi.fetch(`${await this.discoveryApi.getBaseUrl("catalog")}/validate-entity`,{headers:{"Content-Type":"application/json",...(g==null?void 0:g.token)&&{Authorization:`Bearer ${g==null?void 0:g.token}`}},method:"POST",body:JSON.stringify({entity:t,location:_})});if(F.ok)return{valid:!0};if(F.status!==400)throw await i.VL.fromResponse(F);const{errors:j=[]}=await F.json();return{valid:!1,errors:j}}async requestIgnored(t,_,g){const F=`${await this.discoveryApi.getBaseUrl("catalog")}${_}`,j=g!=null&&g.token?{Authorization:`Bearer ${g.token}`}:{},V=await this.fetchApi.fetch(F,{method:t,headers:j});if(!V.ok)throw await i.VL.fromResponse(V)}async requestRequired(t,_,g){const F=`${await this.discoveryApi.getBaseUrl("catalog")}${_}`,j=g!=null&&g.token?{Authorization:`Bearer ${g.token}`}:{},V=await this.fetchApi.fetch(F,{method:t,headers:j});if(!V.ok)throw await i.VL.fromResponse(V);return await V.json()}async requestOptional(t,_,g){const F=`${await this.discoveryApi.getBaseUrl("catalog")}${_}`,j=g!=null&&g.token?{Authorization:`Bearer ${g.token}`}:{},V=await this.fetchApi.fetch(F,{method:t,headers:j});if(!V.ok){if(V.status===404)return;throw await i.VL.fromResponse(V)}return await V.json()}}const y="backstage.io/catalog-processing"},34520:function(Nt,u,e){e.d(u,{$1:function(){return or},CV:function(){return xe},Dg:function(){return gr},In:function(){return de},KS:function(){return me},M6:function(){return p},M_:function(){return Se},NZ:function(){return X},Ou:function(){return I},P1:function(){return K},S4:function(){return Xn},Tf:function(){return re},X9:function(){return fr},Zj:function(){return ne},_b:function(){return ge},aS:function(){return wt},cz:function(){return et},eE:function(){return O},hr:function(){return N},iB:function(){return R},l2:function(){return V},nP:function(){return ae},of:function(){return c},q1:function(){return s},w$:function(){return S},wP:function(){return L},y$:function(){return B},zG:function(){return j}});var n=e(76635),i=e.n(n),m=e(53911),d=e.n(m);function a(se){return se.kind.toLocaleUpperCase("en-US")==="API"}function l(se){return se.kind.toLocaleUpperCase("en-US")==="COMPONENT"}function y(se){return se.kind.toLocaleUpperCase("en-US")==="DOMAIN"}function b(se){return se.kind.toLocaleUpperCase("en-US")==="GROUP"}function t(se){return se.kind.toLocaleUpperCase("en-US")==="LOCATION"}function _(se){return se.kind.toLocaleUpperCase("en-US")==="RESOURCE"}function g(se){return se.kind.toLocaleUpperCase("en-US")==="SYSTEM"}function F(se){return se.kind.toLocaleUpperCase("en-US")==="USER"}const j="default",V="backstage.io/view-url",re="backstage.io/edit-url",w="kubernetes.io/api-server",A="kubernetes.io/api-server-certificate-authority",D="kubernetes.io/auth-provider";class f{constructor(U=j){this.namespace=U}async enforce(U){return U.metadata.namespace?U:lodash.merge({metadata:{namespace:this.namespace}},U)}}function x(se){let U=se.indexOf(":");const ye=se.indexOf("/");ye!==-1&&ye<U&&(U=-1);const it=U===-1?void 0:se.slice(0,U),Bt=ye===-1?void 0:se.slice(U+1,ye),Yt=se.slice(Math.max(U+1,ye+1));if(it===""||Bt===""||Yt==="")throw new TypeError(`Entity reference "${se}" was not on the form [<kind>:][<namespace>/]<name>`);return{kind:it,namespace:Bt,name:Yt}}function R(se){return{kind:se.kind,namespace:se.metadata.namespace||j,name:se.metadata.name}}function c(se,U){var ye,it,Bt,Yt;if(!se)throw new Error("Entity reference must not be empty");const fn=U==null?void 0:U.defaultKind,In=(U==null?void 0:U.defaultNamespace)||j;let Vn,Bn,Gn;if(typeof se=="string"){const Wn=x(se);Vn=(ye=Wn.kind)!=null?ye:fn,Bn=(it=Wn.namespace)!=null?it:In,Gn=Wn.name}else Vn=(Bt=se.kind)!=null?Bt:fn,Bn=(Yt=se.namespace)!=null?Yt:In,Gn=se.name;if(Vn)if(Bn){if(!Gn){const Wn=JSON.stringify(se);throw new Error(`Entity reference ${Wn} had missing or empty name`)}}else{const Wn=JSON.stringify(se);throw new Error(`Entity reference ${Wn} had missing or empty namespace`)}else{const Wn=JSON.stringify(se);throw new Error(`Entity reference ${Wn} had missing or empty kind (e.g. did not start with "component:" or similar)`)}return{kind:Vn,namespace:Bn,name:Gn}}function O(se){var U,ye;let it,Bt,Yt;return"metadata"in se?(it=se.kind,Bt=(U=se.metadata.namespace)!=null?U:j,Yt=se.metadata.name):(it=se.kind,Bt=(ye=se.namespace)!=null?ye:j,Yt=se.name),`${it.toLocaleLowerCase("en-US")}:${Bt.toLocaleLowerCase("en-US")}/${Yt.toLocaleLowerCase("en-US")}`}class T{constructor(U){const{kind:ye,namespace:it,name:Bt}=c(U,{defaultKind:"Group",defaultNamespace:j});if(ye.toLocaleUpperCase("en-US")!=="GROUP")throw new TypeError("group parent must be a group");this.parentRef=O({kind:ye,namespace:it,name:Bt})}async enforce(U){if(U.kind!=="Group")return U;const ye=U;return ye.spec.parent||O(ye)!==this.parentRef&&(ye.spec.parent=this.parentRef),ye}}class Ce{static isValidPrefixAndOrSuffix(U,ye,it,Bt){if(typeof U!="string")return!1;const Yt=U.split(ye);return Yt.length===1?Bt(Yt[0]):Yt.length===2?it(Yt[0])&&Bt(Yt[1]):!1}static isJsonSafe(U){try{return i().isEqual(U,JSON.parse(JSON.stringify(U)))}catch{return!1}}static isValidDnsSubdomain(U){return typeof U=="string"&&U.length>=1&&U.length<=253&&U.split(".").every(Ce.isValidDnsLabel)}static isValidDnsLabel(U){return typeof U=="string"&&U.length>=1&&U.length<=63&&/^[a-z0-9]+(\-[a-z0-9]+)*$/.test(U)}static isValidTag(U){return typeof U=="string"&&U.length>=1&&U.length<=63&&/^[a-z0-9+#]+(\-[a-z0-9+#]+)*$/.test(U)}static isValidUrl(U){if(typeof U!="string")return!1;try{return new URL(U),!0}catch{return!1}}static isValidString(U){var ye;return typeof U=="string"&&((ye=U==null?void 0:U.trim())==null?void 0:ye.length)>=1}static isNonEmptyString(U){var ye;return typeof U=="string"&&((ye=U==null?void 0:U.trim())==null?void 0:ye.length)>=1}}var we="http://json-schema.org/draft-07/schema",nt="EntityEnvelope",ot="The envelope skeleton parts of an entity - whatever is necessary to be able to give it a ref and pass to further validation / policy checking.",$t=[{apiVersion:"backstage.io/v1alpha1",kind:"Component",metadata:{name:"LoremService"}}],ct="object",St=["apiVersion","kind","metadata"],xt=!0,Q={apiVersion:{type:"string",description:"The version of specification format for this particular entity that this is written against.",minLength:1,examples:["backstage.io/v1alpha1","my-company.net/v1","1.0"]},kind:{type:"string",description:"The high level entity type being described.",minLength:1,examples:["API","Component","Domain","Group","Location","Resource","System","Template","User"]},metadata:{type:"object",required:["name"],additionalProperties:!0,properties:{name:{type:"string",description:"The name of the entity. Must be unique within the catalog at any given point in time, for any given namespace + kind pair.",examples:["metadata-proxy"],minLength:1},namespace:{type:"string",description:"The namespace that the entity belongs to.",default:"default",examples:["default","admin"],minLength:1}}}},pn={$schema:we,$id:nt,description:ot,examples:$t,type:ct,required:St,additionalProperties:xt,properties:Q},Ct="http://json-schema.org/draft-07/schema",Ge="Entity",C="The parts of the format that's common to all versions/kinds of entity.",Fe=[{apiVersion:"backstage.io/v1alpha1",kind:"Component",metadata:{name:"LoremService",description:"Creates Lorems like a pro.",labels:{product_name:"Random value Generator"},annotations:{docs:"https://github.com/..../tree/develop/doc"}},spec:{type:"service",lifecycle:"production",owner:"tools"}}],ve="object",M=["apiVersion","kind","metadata"],G=!1,Re={apiVersion:{type:"string",description:"The version of specification format for this particular entity that this is written against.",minLength:1,examples:["backstage.io/v1alpha1","my-company.net/v1","1.0"]},kind:{type:"string",description:"The high level entity type being described.",minLength:1,examples:["API","Component","Domain","Group","Location","Resource","System","Template","User"]},metadata:{$ref:"EntityMeta"},spec:{type:"object",description:"The specification data describing the entity itself."},relations:{type:"array",description:"The relations that this entity has with other entities.",items:{$ref:"common#relation"}},status:{$ref:"common#status"}},Ne={$schema:Ct,$id:Ge,description:C,examples:Fe,type:ve,required:M,additionalProperties:G,properties:Re},Me="http://json-schema.org/draft-07/schema",Xe="EntityMeta",vt="Metadata fields common to all versions/kinds of entity.",ee=[{uid:"e01199ab-08cc-44c2-8e19-5c29ded82521",etag:"lsndfkjsndfkjnsdfkjnsd==",name:"my-component-yay",namespace:"the-namespace",labels:{"backstage.io/custom":"ValueStuff"},annotations:{"example.com/bindings":"are-secret"},tags:["java","data"]}],ue="object",Pe=["name"],at=!0,bt={uid:{type:"string",description:"A globally unique ID for the entity. This field can not be set by the user at creation time, and the server will reject an attempt to do so. The field will be populated in read operations. The field can (optionally) be specified when performing update or delete operations, but the server is free to reject requests that do so in such a way that it breaks semantics.",examples:["e01199ab-08cc-44c2-8e19-5c29ded82521"],minLength:1},etag:{type:"string",description:"An opaque string that changes for each update operation to any part of the entity, including metadata. This field can not be set by the user at creation time, and the server will reject an attempt to do so. The field will be populated in read operations. The field can (optionally) be specified when performing update or delete operations, and the server will then reject the operation if it does not match the current stored value.",examples:["lsndfkjsndfkjnsdfkjnsd=="],minLength:1},name:{type:"string",description:"The name of the entity. Must be unique within the catalog at any given point in time, for any given namespace + kind pair.",examples:["metadata-proxy"],minLength:1},namespace:{type:"string",description:"The namespace that the entity belongs to.",default:"default",examples:["default","admin"],minLength:1},title:{type:"string",description:"A display name of the entity, to be presented in user interfaces instead of the name property, when available.",examples:["React SSR Template"],minLength:1},description:{type:"string",description:"A short (typically relatively few words, on one line) description of the entity."},labels:{type:"object",description:"Key/value pairs of identifying information attached to the entity.",additionalProperties:!0,patternProperties:{"^.+$":{type:"string"}}},annotations:{type:"object",description:"Key/value pairs of non-identifying auxiliary information attached to the entity.",additionalProperties:!0,patternProperties:{"^.+$":{type:"string"}}},tags:{type:"array",description:"A list of single-valued strings, to for example classify catalog entities in various ways.",items:{type:"string",minLength:1}},links:{type:"array",description:"A list of external hyperlinks related to the entity. Links can provide additional contextual information that may be located outside of Backstage itself. For example, an admin dashboard or external CMS page.",items:{type:"object",required:["url"],properties:{url:{type:"string",description:"A url in a standard uri format.",examples:["https://admin.example-org.com"],minLength:1},title:{type:"string",description:"A user friendly display name for the link.",examples:["Admin Dashboard"],minLength:1},icon:{type:"string",description:"A key representing a visual icon to be displayed in the UI.",examples:["dashboard"],minLength:1},type:{type:"string",description:"An optional value to categorize links into specific groups.",examples:["runbook","documentation","logs","dashboard"],minLength:1}}}}},Wt={$schema:Me,$id:Xe,description:vt,examples:ee,type:ue,required:Pe,additionalProperties:at,properties:bt},on="http://json-schema.org/draft-07/schema",zt="common",Le="object",Pt="Common definitions to import from other schemas",Rt={reference:{$id:"#reference",type:"object",description:"A reference by name to another entity.",required:["kind","namespace","name"],additionalProperties:!1,properties:{kind:{type:"string",description:"The kind field of the entity.",minLength:1},namespace:{type:"string",description:"The metadata.namespace field of the entity.",minLength:1},name:{type:"string",description:"The metadata.name field of the entity.",minLength:1}}},relation:{$id:"#relation",type:"object",description:"A directed relation from one entity to another.",required:["type","target"],additionalProperties:!1,properties:{type:{type:"string",minLength:1,pattern:"^\\w+$",description:"The type of relation."},target:{$ref:"#reference"},targetRef:{type:"string",minLength:1,description:"The entity ref of the target of this relation."}}},status:{$id:"#status",type:"object",description:"The current status of the entity, as claimed by various sources.",required:[],additionalProperties:!0,properties:{items:{type:"array",items:{$ref:"#statusItem"}}}},statusItem:{$id:"#statusItem",type:"object",description:"A specific status item on a well known format.",required:["type","level","message"],additionalProperties:!0,properties:{type:{type:"string",minLength:1},level:{$ref:"#statusLevel",description:"The status level / severity of the status item."},message:{type:"string",description:"A brief message describing the status, intended for human consumption."},error:{$ref:"#error",description:"An optional serialized error object related to the status."}}},statusLevel:{$id:"#statusLevel",type:"string",description:"A status level / severity.",enum:["info","warning","error"]},error:{$id:"#error",type:"object",description:"A serialized error object.",required:["name","message"],additionalProperties:!0,properties:{name:{type:"string",examples:["Error","InputError"],description:"The type name of the error",minLength:1},message:{type:"string",description:"The message of the error"},code:{type:"string",description:"An error code associated with the error"},stack:{type:"string",description:"An error stack trace"}}}},sn={$schema:on,$id:zt,type:Le,description:Pt,definitions:Rt};const un=new Map,Lt=[pn,Ne,Wt,sn];function Ht(se){if(!(se!=null&&se.length))throw new TypeError("Unknown error");const U=se[0];throw new TypeError(`${U.instancePath||"<root>"} ${U.message}${U.params?` - ${Object.entries(U.params).map(([ye,it])=>`${ye}: ${it}`).join(", ")}`:""}`)}function nn(se,U={}){var ye;const it=(ye=U==null?void 0:U.disableCache)!=null?ye:!1,Bt=it?"":JSON.stringify(se);if(!it){const Vn=un.get(Bt);if(Vn)return Vn}const Yt=Te(se),fn=new(d())({allowUnionTypes:!0,allErrors:!0,validateSchema:!0});Yt.length&&fn.addSchema(Yt,void 0,void 0,!0);const In=fn.compile(se);return it||un.set(Bt,In),In}function Te(se){if(typeof se!="object")return[];const U=new Set;se.$id&&U.add(se.$id);const ye=new Array,it=[se];for(;it.length;){const Bt=it.pop();for(const Yt of st(Bt))if(!U.has(Yt)){U.add(Yt);const fn=Lt.find(In=>In.$id===Yt);fn&&(ye.push(fn),it.push(fn))}}return ye}function*st(se){const U=[se];for(;U.length;){const ye=U.pop();if(typeof ye=="object"&&ye)for(const[it,Bt]of Object.entries(ye))it==="$ref"&&typeof Bt=="string"?yield Bt.split("#")[0]:U.push(Bt)}}function le(se){const U=nn(se||pn);return ye=>{if(U(ye)===!0)return ye;throw Ht(U.errors)}}function ie(se){const U=nn(se);return ye=>{var it;if(U(ye)===!0)return ye;const Yt=(it=U.errors)==null?void 0:it.filter(fn=>["/kind","/apiVersion"].includes(fn.instancePath));if((Yt==null?void 0:Yt.length)&&Yt.every(fn=>fn.keyword==="enum"))return!1;throw Ht(U.errors)}}function Z(se){const U=nn(se||Ne);return ye=>{if(U(ye)===!0)return ye;throw Ht(U.errors)}}class B{static isValidApiVersion(U){return Ce.isValidPrefixAndOrSuffix(U,"/",Ce.isValidDnsSubdomain,ye=>ye.length>=1&&ye.length<=63&&/^[a-z0-9A-Z]+$/.test(ye))}static isValidKind(U){return typeof U=="string"&&U.length>=1&&U.length<=63&&/^[a-zA-Z][a-z0-9A-Z]*$/.test(U)}static isValidObjectName(U){return typeof U=="string"&&U.length>=1&&U.length<=63&&/^([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9]$/.test(U)}static isValidNamespace(U){return Ce.isValidDnsLabel(U)}static isValidLabelKey(U){return Ce.isValidPrefixAndOrSuffix(U,"/",Ce.isValidDnsSubdomain,B.isValidObjectName)}static isValidLabelValue(U){return U===""||B.isValidObjectName(U)}static isValidAnnotationKey(U){return Ce.isValidPrefixAndOrSuffix(U,"/",Ce.isValidDnsSubdomain,B.isValidObjectName)}static isValidAnnotationValue(U){return typeof U=="string"}}const _e={isValidApiVersion:B.isValidApiVersion,isValidKind:B.isValidKind,isValidEntityName:B.isValidObjectName,isValidNamespace:B.isValidNamespace,isValidLabelKey:B.isValidLabelKey,isValidLabelValue:B.isValidLabelValue,isValidAnnotationKey:B.isValidAnnotationKey,isValidAnnotationValue:B.isValidAnnotationValue,isValidTag:se=>typeof se=="string"&&se.length>=1&&se.length<=63&&/^[a-z0-9:+#]+(\-[a-z0-9:+#]+)*$/.test(se)};function de(se={}){return{..._e,...se}}class Ie{constructor(U=de()){this.validators=U}async enforce(U){var ye,it,Bt,Yt,fn,In,Vn;function Bn(Hn,yr,Ir){if(yr==null)throw new Error(`${Hn} must have a value`);let Y;try{Y=Ir(yr)}catch(pe){throw new Error(`${Hn} could not be validated, ${pe}`)}if(!Y){let pe;switch(Ir.name){case"isValidLabelValue":case"isValidObjectName":pe="a string that is sequences of [a-zA-Z0-9] separated by any of [-_.], at most 63 characters in total";break;case"isValidLabelKey":case"isValidApiVersion":case"isValidAnnotationKey":pe="a valid prefix and/or suffix";break;case"isValidNamespace":case"isValidDnsLabel":pe="a string that is sequences of [a-z0-9] separated by [-], at most 63 characters in total";break;case"isValidTag":pe="a string that is sequences of [a-z0-9+#] separated by [-], at most 63 characters in total";break;case"isValidAnnotationValue":pe="a string";break;case"isValidKind":pe="a string that is a sequence of [a-zA-Z][a-z0-9A-Z], at most 63 characters in total";break;case"isValidUrl":pe="a string that is a valid url";break;case"isValidString":case"isNonEmptyString":pe="a non empty string";break;default:pe=void 0;break}const ke=pe?` expected ${pe} but found "${yr}".`:"";throw new Error(`"${Hn}" is not valid;${ke} To learn more about catalog file format, visit: https://github.com/backstage/backstage/blob/master/docs/architecture-decisions/adr002-default-catalog-file-format.md`)}}function Gn(Hn,yr,Ir){return yr===void 0||Bn(Hn,yr,Ir)}Bn("apiVersion",U.apiVersion,this.validators.isValidApiVersion),Bn("kind",U.kind,this.validators.isValidKind),Bn("metadata.name",U.metadata.name,this.validators.isValidEntityName),Gn("metadata.namespace",U.metadata.namespace,this.validators.isValidNamespace);for(const[Hn,yr]of Object.entries((ye=U.metadata.labels)!=null?ye:[]))Bn(`labels.${Hn}`,Hn,this.validators.isValidLabelKey),Bn(`labels.${Hn}`,yr,this.validators.isValidLabelValue);for(const[Hn,yr]of Object.entries((it=U.metadata.annotations)!=null?it:[]))Bn(`annotations.${Hn}`,Hn,this.validators.isValidAnnotationKey),Bn(`annotations.${Hn}`,yr,this.validators.isValidAnnotationValue);const Wn=(Bt=U.metadata.tags)!=null?Bt:[];for(let Hn=0;Hn<Wn.length;++Hn)Bn(`tags.${Hn}`,Wn[Hn],this.validators.isValidTag);const Er=(Yt=U.metadata.links)!=null?Yt:[];for(let Hn=0;Hn<Er.length;++Hn)Bn(`links.${Hn}.url`,(fn=Er[Hn])==null?void 0:fn.url,Ce.isValidUrl),Gn(`links.${Hn}.title`,(In=Er[Hn])==null?void 0:In.title,Ce.isNonEmptyString),Gn(`links.${Hn}.icon`,(Vn=Er[Hn])==null?void 0:Vn.icon,B.isValidObjectName);return U}}const ze=null;class rt{constructor(U=ze){this.knownFields=U}async enforce(U){for(const ye of Object.keys(U))if(!this.knownFields.includes(ye))throw new Error(`Unknown field ${ye}`);return U}}class kt{async enforce(U){if(!this.validate){const Bt=new Ajv({allowUnionTypes:!0});this.validate=Bt.addSchema([sn,Wt],void 0,void 0,!0).compile(Ne)}if(this.validate(U)===!0)return U;const[it]=this.validate.errors||[];throw it?new Error(`Malformed envelope, ${it.instancePath||"<root>"} ${it.message}`):new Error("Malformed envelope, Unknown error")}}class He{constructor(U){this.policies=U}async enforce(U){let ye=U;for(const it of this.policies){const Bt=await it.enforce(ye);if(!Bt)throw new Error(`Policy ${it.constructor.name} did not return a result`);ye=Bt}return ye}}class z{constructor(U){this.policies=U}async enforce(U){for(const ye of this.policies){const it=await ye.enforce(U);if(it)return it}throw new Error("The entity did not match any known policy")}}const be={allOf(se){return new He(se)},oneOf(se){return new z(se)}};var je="http://json-schema.org/draft-07/schema",ut="ApiV1alpha1",Et="An API describes an interface that can be exposed by a component. The API can be defined in different formats, like OpenAPI, AsyncAPI, GraphQL, gRPC, or other formats.",Mt=[{apiVersion:"backstage.io/v1alpha1",kind:"API",metadata:{name:"artist-api",description:"Retrieve artist details",labels:{product_name:"Random value Generator"},annotations:{docs:"https://github.com/..../tree/develop/doc"}},spec:{type:"openapi",lifecycle:"production",owner:"artist-relations-team",system:"artist-engagement-portal",definition:`openapi: "3.0.0"
info:...`}}],rn=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["API"]},spec:{type:"object",required:["type","lifecycle","owner","definition"],properties:{type:{type:"string",description:"The type of the API definition.",examples:["openapi","asyncapi","graphql","grpc"],minLength:1},lifecycle:{type:"string",description:"The lifecycle state of the API.",examples:["experimental","production","deprecated"],minLength:1},owner:{type:"string",description:"An entity reference to the owner of the API.",examples:["artist-relations-team","user:john.johnson"],minLength:1},system:{type:"string",description:"An entity reference to the system that the API belongs to.",minLength:1},definition:{type:"string",description:"The definition of the API, based on the format defined by the type.",minLength:1}}}}}],ln={$schema:je,$id:ut,description:Et,examples:Mt,allOf:rn};function Rn(se){let U;return{async check(ye){return U||(U=ie(se)),U(ye)===ye}}}const Mn=Rn(ln);var Ke="http://json-schema.org/draft-07/schema",Je="ComponentV1alpha1",Qe='A Component describes a software component. It is typically intimately linked to the source code that constitutes the component, and should be what a developer may regard a "unit of software", usually with a distinct deployable or linkable artifact.',oe=[{apiVersion:"backstage.io/v1alpha1",kind:"Component",metadata:{name:"LoremService",description:"Creates Lorems like a pro.",labels:{product_name:"Random value Generator"},annotations:{docs:"https://github.com/..../tree/develop/doc"}},spec:{type:"service",lifecycle:"production",owner:"tools"}}],fe=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Component"]},spec:{type:"object",required:["type","lifecycle","owner"],properties:{type:{type:"string",description:"The type of component.",examples:["service","website","library"],minLength:1},lifecycle:{type:"string",description:"The lifecycle state of the component.",examples:["experimental","production","deprecated"],minLength:1},owner:{type:"string",description:"An entity reference to the owner of the component.",examples:["artist-relations-team","user:john.johnson"],minLength:1},system:{type:"string",description:"An entity reference to the system that the component belongs to.",minLength:1},subcomponentOf:{type:"string",description:"An entity reference to another component of which the component is a part.",minLength:1},providesApis:{type:"array",description:"An array of entity references to the APIs that are provided by the component.",items:{type:"string",minLength:1}},consumesApis:{type:"array",description:"An array of entity references to the APIs that are consumed by the component.",items:{type:"string",minLength:1}},dependsOn:{type:"array",description:"An array of references to other entities that the component depends on to function.",items:{type:"string",minLength:1}}}}}}],We={$schema:Ke,$id:Je,description:Qe,examples:oe,allOf:fe};const Be=Rn(We);var Ze="http://json-schema.org/draft-07/schema",gt="DomainV1alpha1",It="A Domain groups a collection of systems that share terminology, domain models, business purpose, or documentation, i.e. form a bounded context.",jt=[{apiVersion:"backstage.io/v1alpha1",kind:"Domain",metadata:{name:"artists",description:"Everything about artists"},spec:{owner:"artist-relations-team"}}],Zt=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Domain"]},spec:{type:"object",required:["owner"],properties:{owner:{type:"string",description:"An entity reference to the owner of the component.",examples:["artist-relations-team","user:john.johnson"],minLength:1}}}}}],Ot={$schema:Ze,$id:gt,description:It,examples:jt,allOf:Zt};const Vt=Rn(Ot);var mn="http://json-schema.org/draft-07/schema",bn="GroupV1alpha1",hn="A group describes an organizational entity, such as for example a team, a business unit, or a loose collection of people in an interest group. Members of these groups are modeled in the catalog as kind User.",wn=[{apiVersion:"backstage.io/v1alpha1",kind:"Group",metadata:{name:"infrastructure",description:"The infra business unit"},spec:{type:"business-unit",profile:{displayName:"Infrastructure",email:"infrastructure@example.com",picture:"https://example.com/groups/bu-infrastructure.jpeg"},parent:"ops",children:["backstage","other"]}}],gn=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Group"]},spec:{type:"object",required:["type","children"],properties:{type:{type:"string",description:"The type of group. There is currently no enforced set of values for this field, so it is left up to the adopting organization to choose a nomenclature that matches their org hierarchy.",examples:["team","business-unit","product-area","root"],minLength:1},profile:{type:"object",description:"Optional profile information about the group, mainly for display purposes. All fields of this structure are also optional. The email would be a group email of some form, that the group may wish to be used for contacting them. The picture is expected to be a URL pointing to an image that's representative of the group, and that a browser could fetch and render on a group page or similar.",properties:{displayName:{type:"string",description:"A simple display name to present to users.",examples:["Infrastructure"],minLength:1},email:{type:"string",description:"An email where this entity can be reached.",examples:["infrastructure@example.com"],minLength:1},picture:{type:"string",description:"The URL of an image that represents this entity.",examples:["https://example.com/groups/bu-infrastructure.jpeg"],minLength:1}}},parent:{type:"string",description:"The immediate parent group in the hierarchy, if any. Not all groups must have a parent; the catalog supports multi-root hierarchies. Groups may however not have more than one parent. This field is an entity reference.",examples:["ops"],minLength:1},children:{type:"array",description:"The immediate child groups of this group in the hierarchy (whose parent field points to this group). The list must be present, but may be empty if there are no child groups. The items are not guaranteed to be ordered in any particular way. The entries of this array are entity references.",items:{type:"string",examples:["backstage","other"],minLength:1}},members:{type:"array",description:"The users that are members of this group. The entries of this array are entity references.",items:{type:"string",examples:["jdoe"],minLength:1}}}}}}],Tn={$schema:mn,$id:bn,description:hn,examples:wn,allOf:gn};const kn=Rn(Tn);var $n="http://json-schema.org/draft-07/schema",Cn="LocationV1alpha1",zn="A location is a marker that references other places to look for catalog data.",Sn=[{apiVersion:"backstage.io/v1alpha1",kind:"Location",metadata:{name:"org-data"},spec:{type:"url",targets:["http://github.com/myorg/myproject/org-data-dump/catalog-info-staff.yaml","http://github.com/myorg/myproject/org-data-dump/catalog-info-consultants.yaml"]}}],Zn=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Location"]},spec:{type:"object",required:[],properties:{type:{type:"string",description:"The single location type, that's common to the targets specified in the spec. If it is left out, it is inherited from the location type that originally read the entity data.",examples:["url"],minLength:1},target:{type:"string",description:"A single target as a string. Can be either an absolute path/URL (depending on the type), or a relative path such as ./details/catalog-info.yaml which is resolved relative to the location of this Location entity itself.",examples:["./details/catalog-info.yaml"],minLength:1},targets:{type:"array",description:"A list of targets as strings. They can all be either absolute paths/URLs (depending on the type), or relative paths such as ./details/catalog-info.yaml which are resolved relative to the location of this Location entity itself.",items:{type:"string",examples:["./details/catalog-info.yaml","http://github.com/myorg/myproject/org-data-dump/catalog-info-staff.yaml"],minLength:1}},presence:{type:"string",description:"Whether the presence of the location target is required and it should be considered an error if it can not be found",default:"required",examples:["required"],enum:["required","optional"]}}}}}],Ln={$schema:$n,$id:Cn,description:zn,examples:Sn,allOf:Zn};const jn=Rn(Ln),Xn="ownedBy",or="ownerOf",gr="consumesApi",fr="apiConsumedBy",Se="providesApi",ne="apiProvidedBy",ae="dependsOn",S="dependencyOf",ge="parentOf",L="childOf",N="memberOf",me="hasMember",et="partOf",wt="hasPart";var h="http://json-schema.org/draft-07/schema",v="ResourceV1alpha1",k="A resource describes the infrastructure a system needs to operate, like BigTable databases, Pub/Sub topics, S3 buckets or CDNs. Modelling them together with components and systems allows to visualize resource footprint, and create tooling around them.",te=[{apiVersion:"backstage.io/v1alpha1",kind:"Resource",metadata:{name:"artists-db",description:"Stores artist details"},spec:{type:"database",owner:"artist-relations-team",system:"artist-engagement-portal"}}],Ee=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Resource"]},spec:{type:"object",required:["type","owner"],properties:{type:{type:"string",description:"The type of resource.",examples:["database","s3-bucket","cluster"],minLength:1},owner:{type:"string",description:"An entity reference to the owner of the resource.",examples:["artist-relations-team","user:john.johnson"],minLength:1},dependsOn:{type:"array",description:"An array of references to other entities that the resource depends on to function.",items:{type:"string",minLength:1}},system:{type:"string",description:"An entity reference to the system that the resource belongs to.",minLength:1}}}}}],Ye={$schema:h,$id:v,description:k,examples:te,allOf:Ee};const H=Rn(Ye);var W="http://json-schema.org/draft-07/schema",Ae="SystemV1alpha1",De="A system is a collection of resources and components. The system may expose or consume one or several APIs. It is viewed as abstraction level that provides potential consumers insights into exposed features without needing a too detailed view into the details of all components. This also gives the owning team the possibility to decide about published artifacts and APIs.",pt=[{apiVersion:"backstage.io/v1alpha1",kind:"System",metadata:{name:"artist-engagement-portal",description:"Handy tools to keep artists in the loop"},spec:{owner:"artist-relations-team",domain:"artists"}}],dt=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["System"]},spec:{type:"object",required:["owner"],properties:{owner:{type:"string",description:"An entity reference to the owner of the component.",examples:["artist-relations-team","user:john.johnson"],minLength:1},domain:{type:"string",description:"An entity reference to the domain that the system belongs to.",examples:["artists"],minLength:1}}}}}],ft={$schema:W,$id:Ae,description:De,examples:pt,allOf:dt};const yt=Rn(ft);var Ft="http://json-schema.org/draft-07/schema",an="UserV1alpha1",en="A user describes a person, such as an employee, a contractor, or similar. Users belong to Group entities in the catalog. These catalog user entries are connected to the way that authentication within the Backstage ecosystem works. See the auth section of the docs for a discussion of these concepts.",cn=[{apiVersion:"backstage.io/v1alpha1",kind:"User",metadata:{name:"jdoe"},spec:{profile:{displayName:"Jenny Doe",email:"jenny-doe@example.com",picture:"https://example.com/staff/jenny-with-party-hat.jpeg"},memberOf:["team-b","employees"]}}],xn=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["User"]},spec:{type:"object",required:["memberOf"],properties:{profile:{type:"object",description:"Optional profile information about the user, mainly for display purposes. All fields of this structure are also optional. The email would be a primary email of some form, that the user may wish to be used for contacting them. The picture is expected to be a URL pointing to an image that's representative of the user, and that a browser could fetch and render on a profile page or similar.",properties:{displayName:{type:"string",description:"A simple display name to present to users.",examples:["Jenny Doe"],minLength:1},email:{type:"string",description:"An email where this user can be reached.",examples:["jenny-doe@example.com"],minLength:1},picture:{type:"string",description:"The URL of an image that represents this user.",examples:["https://example.com/staff/jenny-with-party-hat.jpeg"],minLength:1}}},memberOf:{type:"array",description:"The list of groups that the user is a direct member of (i.e., no transitive memberships are listed here). The list must be present, but may be empty if the user is not member of any groups. The items are not guaranteed to be ordered in any particular way. The entries of this array are entity references.",items:{type:"string",examples:["team-b","employees"],minLength:1}}}}}}],Dn={$schema:Ft,$id:an,description:en,examples:cn,allOf:xn};const Nn=Rn(Dn),K="backstage.io/managed-by-location",s="backstage.io/managed-by-origin-location",p="backstage.io/source-location";function I(se){if(typeof se!="string")throw new TypeError(`Unable to parse location ref '${se}', unexpected argument ${typeof se}`);const U=se.indexOf(":");if(U<0)throw new TypeError(`Unable to parse location ref '${se}', expected '<type>:<target>', e.g. 'url:https://host/path'`);const ye=se.substring(0,U).trim(),it=se.substring(U+1).trim();if(!ye||!it)throw new TypeError(`Unable to parse location ref '${se}', expected '<type>:<target>', e.g. 'url:https://host/path'`);if(ye==="http"||ye==="https")throw new TypeError(`Invalid location ref '${se}', please prefix it with 'url:', e.g. 'url:${se}'`);return{type:ye,target:it}}function X(se){const{type:U,target:ye}=se;if(U){if(!ye)throw new TypeError("Unable to stringify location ref, empty target")}else throw new TypeError("Unable to stringify location ref, empty type");return`${U}:${ye}`}function xe(se){var U,ye,it,Bt,Yt;const fn=(Yt=(ye=(U=se.metadata)==null?void 0:U.annotations)==null?void 0:ye[p])!=null?Yt:(Bt=(it=se.metadata)==null?void 0:it.annotations)==null?void 0:Bt[K];if(!fn)throw new Error(`Entity '${O(se)}' is missing location`);return I(fn)}},53911:function(Nt,u,e){Object.defineProperty(u,"__esModule",{value:!0}),u.MissingRefError=u.ValidationError=u.CodeGen=u.Name=u.nil=u.stringify=u.str=u._=u.KeywordCxt=void 0;const n=e(61889),i=e(57993),m=e(99908),d=e(51020),a=["/properties"],l="http://json-schema.org/draft-07/schema";class y extends n.default{_addVocabularies(){super._addVocabularies(),i.default.forEach(j=>this.addVocabulary(j)),this.opts.discriminator&&this.addKeyword(m.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const j=this.opts.$data?this.$dataMetaSchema(d,a):d;this.addMetaSchema(j,l,!1),this.refs["http://json-schema.org/schema"]=l}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(l)?l:void 0)}}Nt.exports=u=y,Object.defineProperty(u,"__esModule",{value:!0}),u.default=y;var b=e(4371);Object.defineProperty(u,"KeywordCxt",{enumerable:!0,get:function(){return b.KeywordCxt}});var t=e(82481);Object.defineProperty(u,"_",{enumerable:!0,get:function(){return t._}}),Object.defineProperty(u,"str",{enumerable:!0,get:function(){return t.str}}),Object.defineProperty(u,"stringify",{enumerable:!0,get:function(){return t.stringify}}),Object.defineProperty(u,"nil",{enumerable:!0,get:function(){return t.nil}}),Object.defineProperty(u,"Name",{enumerable:!0,get:function(){return t.Name}}),Object.defineProperty(u,"CodeGen",{enumerable:!0,get:function(){return t.CodeGen}});var _=e(14319);Object.defineProperty(u,"ValidationError",{enumerable:!0,get:function(){return _.default}});var g=e(30283);Object.defineProperty(u,"MissingRefError",{enumerable:!0,get:function(){return g.default}})},91475:function(Nt,u){Object.defineProperty(u,"__esModule",{value:!0}),u.regexpCode=u.getEsmExportName=u.getProperty=u.safeStringify=u.stringify=u.strConcat=u.addCodeArg=u.str=u._=u.nil=u._Code=u.Name=u.IDENTIFIER=u._CodeOrName=void 0;class e{}u._CodeOrName=e,u.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends e{constructor(A){if(super(),!u.IDENTIFIER.test(A))throw new Error("CodeGen: name must be a valid identifier");this.str=A}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}u.Name=n;class i extends e{constructor(A){super(),this._items=typeof A=="string"?[A]:A}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const A=this._items[0];return A===""||A==='""'}get str(){var A;return(A=this._str)!==null&&A!==void 0?A:this._str=this._items.reduce((D,f)=>`${D}${f}`,"")}get names(){var A;return(A=this._names)!==null&&A!==void 0?A:this._names=this._items.reduce((D,f)=>(f instanceof n&&(D[f.str]=(D[f.str]||0)+1),D),{})}}u._Code=i,u.nil=new i("");function m(w,...A){const D=[w[0]];let f=0;for(;f<A.length;)l(D,A[f]),D.push(w[++f]);return new i(D)}u._=m;const d=new i("+");function a(w,...A){const D=[F(w[0])];let f=0;for(;f<A.length;)D.push(d),l(D,A[f]),D.push(d,F(w[++f]));return y(D),new i(D)}u.str=a;function l(w,A){A instanceof i?w.push(...A._items):A instanceof n?w.push(A):w.push(_(A))}u.addCodeArg=l;function y(w){let A=1;for(;A<w.length-1;){if(w[A]===d){const D=b(w[A-1],w[A+1]);if(D!==void 0){w.splice(A-1,3,D);continue}w[A++]="+"}A++}}function b(w,A){if(A==='""')return w;if(w==='""')return A;if(typeof w=="string")return A instanceof n||w[w.length-1]!=='"'?void 0:typeof A!="string"?`${w.slice(0,-1)}${A}"`:A[0]==='"'?w.slice(0,-1)+A.slice(1):void 0;if(typeof A=="string"&&A[0]==='"'&&!(w instanceof n))return`"${w}${A.slice(1)}`}function t(w,A){return A.emptyStr()?w:w.emptyStr()?A:a`${w}${A}`}u.strConcat=t;function _(w){return typeof w=="number"||typeof w=="boolean"||w===null?w:F(Array.isArray(w)?w.join(","):w)}function g(w){return new i(F(w))}u.stringify=g;function F(w){return JSON.stringify(w).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}u.safeStringify=F;function j(w){return typeof w=="string"&&u.IDENTIFIER.test(w)?new i(`.${w}`):m`[${w}]`}u.getProperty=j;function V(w){if(typeof w=="string"&&u.IDENTIFIER.test(w))return new i(`${w}`);throw new Error(`CodeGen: invalid export name: ${w}, use explicit $id name mapping`)}u.getEsmExportName=V;function re(w){return new i(w.toString())}u.regexpCode=re},82481:function(Nt,u,e){Object.defineProperty(u,"__esModule",{value:!0}),u.or=u.and=u.not=u.CodeGen=u.operators=u.varKinds=u.ValueScopeName=u.ValueScope=u.Scope=u.Name=u.regexpCode=u.stringify=u.getProperty=u.nil=u.strConcat=u.str=u._=void 0;const n=e(91475),i=e(66162);var m=e(91475);Object.defineProperty(u,"_",{enumerable:!0,get:function(){return m._}}),Object.defineProperty(u,"str",{enumerable:!0,get:function(){return m.str}}),Object.defineProperty(u,"strConcat",{enumerable:!0,get:function(){return m.strConcat}}),Object.defineProperty(u,"nil",{enumerable:!0,get:function(){return m.nil}}),Object.defineProperty(u,"getProperty",{enumerable:!0,get:function(){return m.getProperty}}),Object.defineProperty(u,"stringify",{enumerable:!0,get:function(){return m.stringify}}),Object.defineProperty(u,"regexpCode",{enumerable:!0,get:function(){return m.regexpCode}}),Object.defineProperty(u,"Name",{enumerable:!0,get:function(){return m.Name}});var d=e(66162);Object.defineProperty(u,"Scope",{enumerable:!0,get:function(){return d.Scope}}),Object.defineProperty(u,"ValueScope",{enumerable:!0,get:function(){return d.ValueScope}}),Object.defineProperty(u,"ValueScopeName",{enumerable:!0,get:function(){return d.ValueScopeName}}),Object.defineProperty(u,"varKinds",{enumerable:!0,get:function(){return d.varKinds}}),u.operators={GT:new n._Code(">"),GTE:new n._Code(">="),LT:new n._Code("<"),LTE:new n._Code("<="),EQ:new n._Code("==="),NEQ:new n._Code("!=="),NOT:new n._Code("!"),OR:new n._Code("||"),AND:new n._Code("&&"),ADD:new n._Code("+")};class a{optimizeNodes(){return this}optimizeNames(M,G){return this}}class l extends a{constructor(M,G,Re){super(),this.varKind=M,this.name=G,this.rhs=Re}render({es5:M,_n:G}){const Re=M?i.varKinds.var:this.varKind,Ne=this.rhs===void 0?"":` = ${this.rhs}`;return`${Re} ${this.name}${Ne};`+G}optimizeNames(M,G){if(!!M[this.name.str])return this.rhs&&(this.rhs=ct(this.rhs,M,G)),this}get names(){return this.rhs instanceof n._CodeOrName?this.rhs.names:{}}}class y extends a{constructor(M,G,Re){super(),this.lhs=M,this.rhs=G,this.sideEffects=Re}render({_n:M}){return`${this.lhs} = ${this.rhs};`+M}optimizeNames(M,G){if(!(this.lhs instanceof n.Name&&!M[this.lhs.str]&&!this.sideEffects))return this.rhs=ct(this.rhs,M,G),this}get names(){const M=this.lhs instanceof n.Name?{}:{...this.lhs.names};return $t(M,this.rhs)}}class b extends y{constructor(M,G,Re,Ne){super(M,Re,Ne),this.op=G}render({_n:M}){return`${this.lhs} ${this.op}= ${this.rhs};`+M}}class t extends a{constructor(M){super(),this.label=M,this.names={}}render({_n:M}){return`${this.label}:`+M}}class _ extends a{constructor(M){super(),this.label=M,this.names={}}render({_n:M}){return`break${this.label?` ${this.label}`:""};`+M}}class g extends a{constructor(M){super(),this.error=M}render({_n:M}){return`throw ${this.error};`+M}get names(){return this.error.names}}class F extends a{constructor(M){super(),this.code=M}render({_n:M}){return`${this.code};`+M}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(M,G){return this.code=ct(this.code,M,G),this}get names(){return this.code instanceof n._CodeOrName?this.code.names:{}}}class j extends a{constructor(M=[]){super(),this.nodes=M}render(M){return this.nodes.reduce((G,Re)=>G+Re.render(M),"")}optimizeNodes(){const{nodes:M}=this;let G=M.length;for(;G--;){const Re=M[G].optimizeNodes();Array.isArray(Re)?M.splice(G,1,...Re):Re?M[G]=Re:M.splice(G,1)}return M.length>0?this:void 0}optimizeNames(M,G){const{nodes:Re}=this;let Ne=Re.length;for(;Ne--;){const Me=Re[Ne];Me.optimizeNames(M,G)||(St(M,Me.names),Re.splice(Ne,1))}return Re.length>0?this:void 0}get names(){return this.nodes.reduce((M,G)=>ot(M,G.names),{})}}class V extends j{render(M){return"{"+M._n+super.render(M)+"}"+M._n}}class re extends j{}class w extends V{}w.kind="else";class A extends V{constructor(M,G){super(G),this.condition=M}render(M){let G=`if(${this.condition})`+super.render(M);return this.else&&(G+="else "+this.else.render(M)),G}optimizeNodes(){super.optimizeNodes();const M=this.condition;if(M===!0)return this.nodes;let G=this.else;if(G){const Re=G.optimizeNodes();G=this.else=Array.isArray(Re)?new w(Re):Re}if(G)return M===!1?G instanceof A?G:G.nodes:this.nodes.length?this:new A(xt(M),G instanceof A?[G]:G.nodes);if(!(M===!1||!this.nodes.length))return this}optimizeNames(M,G){var Re;if(this.else=(Re=this.else)===null||Re===void 0?void 0:Re.optimizeNames(M,G),!!(super.optimizeNames(M,G)||this.else))return this.condition=ct(this.condition,M,G),this}get names(){const M=super.names;return $t(M,this.condition),this.else&&ot(M,this.else.names),M}}A.kind="if";class D extends V{}D.kind="for";class f extends D{constructor(M){super(),this.iteration=M}render(M){return`for(${this.iteration})`+super.render(M)}optimizeNames(M,G){if(!!super.optimizeNames(M,G))return this.iteration=ct(this.iteration,M,G),this}get names(){return ot(super.names,this.iteration.names)}}class x extends D{constructor(M,G,Re,Ne){super(),this.varKind=M,this.name=G,this.from=Re,this.to=Ne}render(M){const G=M.es5?i.varKinds.var:this.varKind,{name:Re,from:Ne,to:Me}=this;return`for(${G} ${Re}=${Ne}; ${Re}<${Me}; ${Re}++)`+super.render(M)}get names(){const M=$t(super.names,this.from);return $t(M,this.to)}}class R extends D{constructor(M,G,Re,Ne){super(),this.loop=M,this.varKind=G,this.name=Re,this.iterable=Ne}render(M){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(M)}optimizeNames(M,G){if(!!super.optimizeNames(M,G))return this.iterable=ct(this.iterable,M,G),this}get names(){return ot(super.names,this.iterable.names)}}class c extends V{constructor(M,G,Re){super(),this.name=M,this.args=G,this.async=Re}render(M){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(M)}}c.kind="func";class O extends j{render(M){return"return "+super.render(M)}}O.kind="return";class T extends V{render(M){let G="try"+super.render(M);return this.catch&&(G+=this.catch.render(M)),this.finally&&(G+=this.finally.render(M)),G}optimizeNodes(){var M,G;return super.optimizeNodes(),(M=this.catch)===null||M===void 0||M.optimizeNodes(),(G=this.finally)===null||G===void 0||G.optimizeNodes(),this}optimizeNames(M,G){var Re,Ne;return super.optimizeNames(M,G),(Re=this.catch)===null||Re===void 0||Re.optimizeNames(M,G),(Ne=this.finally)===null||Ne===void 0||Ne.optimizeNames(M,G),this}get names(){const M=super.names;return this.catch&&ot(M,this.catch.names),this.finally&&ot(M,this.finally.names),M}}class Ce extends V{constructor(M){super(),this.error=M}render(M){return`catch(${this.error})`+super.render(M)}}Ce.kind="catch";class we extends V{render(M){return"finally"+super.render(M)}}we.kind="finally";class nt{constructor(M,G={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...G,_n:G.lines?`
`:""},this._extScope=M,this._scope=new i.Scope({parent:M}),this._nodes=[new re]}toString(){return this._root.render(this.opts)}name(M){return this._scope.name(M)}scopeName(M){return this._extScope.name(M)}scopeValue(M,G){const Re=this._extScope.value(M,G);return(this._values[Re.prefix]||(this._values[Re.prefix]=new Set)).add(Re),Re}getScopeValue(M,G){return this._extScope.getValue(M,G)}scopeRefs(M){return this._extScope.scopeRefs(M,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(M,G,Re,Ne){const Me=this._scope.toName(G);return Re!==void 0&&Ne&&(this._constants[Me.str]=Re),this._leafNode(new l(M,Me,Re)),Me}const(M,G,Re){return this._def(i.varKinds.const,M,G,Re)}let(M,G,Re){return this._def(i.varKinds.let,M,G,Re)}var(M,G,Re){return this._def(i.varKinds.var,M,G,Re)}assign(M,G,Re){return this._leafNode(new y(M,G,Re))}add(M,G){return this._leafNode(new b(M,u.operators.ADD,G))}code(M){return typeof M=="function"?M():M!==n.nil&&this._leafNode(new F(M)),this}object(...M){const G=["{"];for(const[Re,Ne]of M)G.length>1&&G.push(","),G.push(Re),(Re!==Ne||this.opts.es5)&&(G.push(":"),(0,n.addCodeArg)(G,Ne));return G.push("}"),new n._Code(G)}if(M,G,Re){if(this._blockNode(new A(M)),G&&Re)this.code(G).else().code(Re).endIf();else if(G)this.code(G).endIf();else if(Re)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(M){return this._elseNode(new A(M))}else(){return this._elseNode(new w)}endIf(){return this._endBlockNode(A,w)}_for(M,G){return this._blockNode(M),G&&this.code(G).endFor(),this}for(M,G){return this._for(new f(M),G)}forRange(M,G,Re,Ne,Me=this.opts.es5?i.varKinds.var:i.varKinds.let){const Xe=this._scope.toName(M);return this._for(new x(Me,Xe,G,Re),()=>Ne(Xe))}forOf(M,G,Re,Ne=i.varKinds.const){const Me=this._scope.toName(M);if(this.opts.es5){const Xe=G instanceof n.Name?G:this.var("_arr",G);return this.forRange("_i",0,(0,n._)`${Xe}.length`,vt=>{this.var(Me,(0,n._)`${Xe}[${vt}]`),Re(Me)})}return this._for(new R("of",Ne,Me,G),()=>Re(Me))}forIn(M,G,Re,Ne=this.opts.es5?i.varKinds.var:i.varKinds.const){if(this.opts.ownProperties)return this.forOf(M,(0,n._)`Object.keys(${G})`,Re);const Me=this._scope.toName(M);return this._for(new R("in",Ne,Me,G),()=>Re(Me))}endFor(){return this._endBlockNode(D)}label(M){return this._leafNode(new t(M))}break(M){return this._leafNode(new _(M))}return(M){const G=new O;if(this._blockNode(G),this.code(M),G.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(O)}try(M,G,Re){if(!G&&!Re)throw new Error('CodeGen: "try" without "catch" and "finally"');const Ne=new T;if(this._blockNode(Ne),this.code(M),G){const Me=this.name("e");this._currNode=Ne.catch=new Ce(Me),G(Me)}return Re&&(this._currNode=Ne.finally=new we,this.code(Re)),this._endBlockNode(Ce,we)}throw(M){return this._leafNode(new g(M))}block(M,G){return this._blockStarts.push(this._nodes.length),M&&this.code(M).endBlock(G),this}endBlock(M){const G=this._blockStarts.pop();if(G===void 0)throw new Error("CodeGen: not in self-balancing block");const Re=this._nodes.length-G;if(Re<0||M!==void 0&&Re!==M)throw new Error(`CodeGen: wrong number of nodes: ${Re} vs ${M} expected`);return this._nodes.length=G,this}func(M,G=n.nil,Re,Ne){return this._blockNode(new c(M,G,Re)),Ne&&this.code(Ne).endFunc(),this}endFunc(){return this._endBlockNode(c)}optimize(M=1){for(;M-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(M){return this._currNode.nodes.push(M),this}_blockNode(M){this._currNode.nodes.push(M),this._nodes.push(M)}_endBlockNode(M,G){const Re=this._currNode;if(Re instanceof M||G&&Re instanceof G)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${G?`${M.kind}/${G.kind}`:M.kind}"`)}_elseNode(M){const G=this._currNode;if(!(G instanceof A))throw new Error('CodeGen: "else" without "if"');return this._currNode=G.else=M,this}get _root(){return this._nodes[0]}get _currNode(){const M=this._nodes;return M[M.length-1]}set _currNode(M){const G=this._nodes;G[G.length-1]=M}}u.CodeGen=nt;function ot(ve,M){for(const G in M)ve[G]=(ve[G]||0)+(M[G]||0);return ve}function $t(ve,M){return M instanceof n._CodeOrName?ot(ve,M.names):ve}function ct(ve,M,G){if(ve instanceof n.Name)return Re(ve);if(!Ne(ve))return ve;return new n._Code(ve._items.reduce((Me,Xe)=>(Xe instanceof n.Name&&(Xe=Re(Xe)),Xe instanceof n._Code?Me.push(...Xe._items):Me.push(Xe),Me),[]));function Re(Me){const Xe=G[Me.str];return Xe===void 0||M[Me.str]!==1?Me:(delete M[Me.str],Xe)}function Ne(Me){return Me instanceof n._Code&&Me._items.some(Xe=>Xe instanceof n.Name&&M[Xe.str]===1&&G[Xe.str]!==void 0)}}function St(ve,M){for(const G in M)ve[G]=(ve[G]||0)-(M[G]||0)}function xt(ve){return typeof ve=="boolean"||typeof ve=="number"||ve===null?!ve:(0,n._)`!${Fe(ve)}`}u.not=xt;const Q=C(u.operators.AND);function pn(...ve){return ve.reduce(Q)}u.and=pn;const Ct=C(u.operators.OR);function Ge(...ve){return ve.reduce(Ct)}u.or=Ge;function C(ve){return(M,G)=>M===n.nil?G:G===n.nil?M:(0,n._)`${Fe(M)} ${ve} ${Fe(G)}`}function Fe(ve){return ve instanceof n.Name?ve:(0,n._)`(${ve})`}},66162:function(Nt,u,e){Object.defineProperty(u,"__esModule",{value:!0}),u.ValueScope=u.ValueScopeName=u.Scope=u.varKinds=u.UsedValueState=void 0;const n=e(91475);class i extends Error{constructor(t){super(`CodeGen: "code" for ${t} not defined`),this.value=t.value}}var m;(function(b){b[b.Started=0]="Started",b[b.Completed=1]="Completed"})(m=u.UsedValueState||(u.UsedValueState={})),u.varKinds={const:new n.Name("const"),let:new n.Name("let"),var:new n.Name("var")};class d{constructor({prefixes:t,parent:_}={}){this._names={},this._prefixes=t,this._parent=_}toName(t){return t instanceof n.Name?t:this.name(t)}name(t){return new n.Name(this._newName(t))}_newName(t){const _=this._names[t]||this._nameGroup(t);return`${t}${_.index++}`}_nameGroup(t){var _,g;if(((g=(_=this._parent)===null||_===void 0?void 0:_._prefixes)===null||g===void 0?void 0:g.has(t))||this._prefixes&&!this._prefixes.has(t))throw new Error(`CodeGen: prefix "${t}" is not allowed in this scope`);return this._names[t]={prefix:t,index:0}}}u.Scope=d;class a extends n.Name{constructor(t,_){super(_),this.prefix=t}setValue(t,{property:_,itemIndex:g}){this.value=t,this.scopePath=(0,n._)`.${new n.Name(_)}[${g}]`}}u.ValueScopeName=a;const l=(0,n._)`\n`;class y extends d{constructor(t){super(t),this._values={},this._scope=t.scope,this.opts={...t,_n:t.lines?l:n.nil}}get(){return this._scope}name(t){return new a(t,this._newName(t))}value(t,_){var g;if(_.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const F=this.toName(t),{prefix:j}=F,V=(g=_.key)!==null&&g!==void 0?g:_.ref;let re=this._values[j];if(re){const D=re.get(V);if(D)return D}else re=this._values[j]=new Map;re.set(V,F);const w=this._scope[j]||(this._scope[j]=[]),A=w.length;return w[A]=_.ref,F.setValue(_,{property:j,itemIndex:A}),F}getValue(t,_){const g=this._values[t];if(!!g)return g.get(_)}scopeRefs(t,_=this._values){return this._reduceValues(_,g=>{if(g.scopePath===void 0)throw new Error(`CodeGen: name "${g}" has no value`);return(0,n._)`${t}${g.scopePath}`})}scopeCode(t=this._values,_,g){return this._reduceValues(t,F=>{if(F.value===void 0)throw new Error(`CodeGen: name "${F}" has no value`);return F.value.code},_,g)}_reduceValues(t,_,g={},F){let j=n.nil;for(const V in t){const re=t[V];if(!re)continue;const w=g[V]=g[V]||new Map;re.forEach(A=>{if(w.has(A))return;w.set(A,m.Started);let D=_(A);if(D){const f=this.opts.es5?u.varKinds.var:u.varKinds.const;j=(0,n._)`${j}${f} ${A} = ${D};${this.opts._n}`}else if(D=F==null?void 0:F(A))j=(0,n._)`${j}${D}${this.opts._n}`;else throw new i(A);w.set(A,m.Completed)})}return j}}u.ValueScope=y},59428:function(Nt,u,e){Object.defineProperty(u,"__esModule",{value:!0}),u.extendErrors=u.resetErrorsCount=u.reportExtraError=u.reportError=u.keyword$DataError=u.keywordError=void 0;const n=e(82481),i=e(1849),m=e(99583);u.keywordError={message:({keyword:w})=>(0,n.str)`must pass "${w}" keyword validation`},u.keyword$DataError={message:({keyword:w,schemaType:A})=>A?(0,n.str)`"${w}" keyword must be ${A} ($data)`:(0,n.str)`"${w}" keyword is invalid ($data)`};function d(w,A=u.keywordError,D,f){const{it:x}=w,{gen:R,compositeRule:c,allErrors:O}=x,T=g(w,A,D);(f!=null?f:c||O)?b(R,T):t(x,(0,n._)`[${T}]`)}u.reportError=d;function a(w,A=u.keywordError,D){const{it:f}=w,{gen:x,compositeRule:R,allErrors:c}=f,O=g(w,A,D);b(x,O),R||c||t(f,m.default.vErrors)}u.reportExtraError=a;function l(w,A){w.assign(m.default.errors,A),w.if((0,n._)`${m.default.vErrors} !== null`,()=>w.if(A,()=>w.assign((0,n._)`${m.default.vErrors}.length`,A),()=>w.assign(m.default.vErrors,null)))}u.resetErrorsCount=l;function y({gen:w,keyword:A,schemaValue:D,data:f,errsCount:x,it:R}){if(x===void 0)throw new Error("ajv implementation error");const c=w.name("err");w.forRange("i",x,m.default.errors,O=>{w.const(c,(0,n._)`${m.default.vErrors}[${O}]`),w.if((0,n._)`${c}.instancePath === undefined`,()=>w.assign((0,n._)`${c}.instancePath`,(0,n.strConcat)(m.default.instancePath,R.errorPath))),w.assign((0,n._)`${c}.schemaPath`,(0,n.str)`${R.errSchemaPath}/${A}`),R.opts.verbose&&(w.assign((0,n._)`${c}.schema`,D),w.assign((0,n._)`${c}.data`,f))})}u.extendErrors=y;function b(w,A){const D=w.const("err",A);w.if((0,n._)`${m.default.vErrors} === null`,()=>w.assign(m.default.vErrors,(0,n._)`[${D}]`),(0,n._)`${m.default.vErrors}.push(${D})`),w.code((0,n._)`${m.default.errors}++`)}function t(w,A){const{gen:D,validateName:f,schemaEnv:x}=w;x.$async?D.throw((0,n._)`new ${w.ValidationError}(${A})`):(D.assign((0,n._)`${f}.errors`,A),D.return(!1))}const _={keyword:new n.Name("keyword"),schemaPath:new n.Name("schemaPath"),params:new n.Name("params"),propertyName:new n.Name("propertyName"),message:new n.Name("message"),schema:new n.Name("schema"),parentSchema:new n.Name("parentSchema")};function g(w,A,D){const{createErrors:f}=w.it;return f===!1?(0,n._)`{}`:F(w,A,D)}function F(w,A,D={}){const{gen:f,it:x}=w,R=[j(x,D),V(w,D)];return re(w,A,R),f.object(...R)}function j({errorPath:w},{instancePath:A}){const D=A?(0,n.str)`${w}${(0,i.getErrorPath)(A,i.Type.Str)}`:w;return[m.default.instancePath,(0,n.strConcat)(m.default.instancePath,D)]}function V({keyword:w,it:{errSchemaPath:A}},{schemaPath:D,parentSchema:f}){let x=f?A:(0,n.str)`${A}/${w}`;return D&&(x=(0,n.str)`${x}${(0,i.getErrorPath)(D,i.Type.Str)}`),[_.schemaPath,x]}function re(w,{params:A,message:D},f){const{keyword:x,data:R,schemaValue:c,it:O}=w,{opts:T,propertyName:Ce,topSchemaRef:we,schemaPath:nt}=O;f.push([_.keyword,x],[_.params,typeof A=="function"?A(w):A||(0,n._)`{}`]),T.messages&&f.push([_.message,typeof D=="function"?D(w):D]),T.verbose&&f.push([_.schema,c],[_.parentSchema,(0,n._)`${we}${nt}`],[m.default.data,R]),Ce&&f.push([_.propertyName,Ce])}},62902:function(Nt,u,e){Object.defineProperty(u,"__esModule",{value:!0}),u.resolveSchema=u.getCompilingSchema=u.resolveRef=u.compileSchema=u.SchemaEnv=void 0;const n=e(82481),i=e(14319),m=e(99583),d=e(2710),a=e(1849),l=e(4371);class y{constructor(D){var f;this.refs={},this.dynamicAnchors={};let x;typeof D.schema=="object"&&(x=D.schema),this.schema=D.schema,this.schemaId=D.schemaId,this.root=D.root||this,this.baseId=(f=D.baseId)!==null&&f!==void 0?f:(0,d.normalizeId)(x==null?void 0:x[D.schemaId||"$id"]),this.schemaPath=D.schemaPath,this.localRefs=D.localRefs,this.meta=D.meta,this.$async=x==null?void 0:x.$async,this.refs={}}}u.SchemaEnv=y;function b(A){const D=g.call(this,A);if(D)return D;const f=(0,d.getFullPath)(this.opts.uriResolver,A.root.baseId),{es5:x,lines:R}=this.opts.code,{ownProperties:c}=this.opts,O=new n.CodeGen(this.scope,{es5:x,lines:R,ownProperties:c});let T;A.$async&&(T=O.scopeValue("Error",{ref:i.default,code:(0,n._)`require("ajv/dist/runtime/validation_error").default`}));const Ce=O.scopeName("validate");A.validateName=Ce;const we={gen:O,allErrors:this.opts.allErrors,data:m.default.data,parentData:m.default.parentData,parentDataProperty:m.default.parentDataProperty,dataNames:[m.default.data],dataPathArr:[n.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:O.scopeValue("schema",this.opts.code.source===!0?{ref:A.schema,code:(0,n.stringify)(A.schema)}:{ref:A.schema}),validateName:Ce,ValidationError:T,schema:A.schema,schemaEnv:A,rootId:f,baseId:A.baseId||f,schemaPath:n.nil,errSchemaPath:A.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,n._)`""`,opts:this.opts,self:this};let nt;try{this._compilations.add(A),(0,l.validateFunctionCode)(we),O.optimize(this.opts.code.optimize);const ot=O.toString();nt=`${O.scopeRefs(m.default.scope)}return ${ot}`,this.opts.code.process&&(nt=this.opts.code.process(nt,A));const ct=new Function(`${m.default.self}`,`${m.default.scope}`,nt)(this,this.scope.get());if(this.scope.value(Ce,{ref:ct}),ct.errors=null,ct.schema=A.schema,ct.schemaEnv=A,A.$async&&(ct.$async=!0),this.opts.code.source===!0&&(ct.source={validateName:Ce,validateCode:ot,scopeValues:O._values}),this.opts.unevaluated){const{props:St,items:xt}=we;ct.evaluated={props:St instanceof n.Name?void 0:St,items:xt instanceof n.Name?void 0:xt,dynamicProps:St instanceof n.Name,dynamicItems:xt instanceof n.Name},ct.source&&(ct.source.evaluated=(0,n.stringify)(ct.evaluated))}return A.validate=ct,A}catch(ot){throw delete A.validate,delete A.validateName,nt&&this.logger.error("Error compiling schema, function code:",nt),ot}finally{this._compilations.delete(A)}}u.compileSchema=b;function t(A,D,f){var x;f=(0,d.resolveUrl)(this.opts.uriResolver,D,f);const R=A.refs[f];if(R)return R;let c=j.call(this,A,f);if(c===void 0){const O=(x=A.localRefs)===null||x===void 0?void 0:x[f],{schemaId:T}=this.opts;O&&(c=new y({schema:O,schemaId:T,root:A,baseId:D}))}if(c!==void 0)return A.refs[f]=_.call(this,c)}u.resolveRef=t;function _(A){return(0,d.inlineRef)(A.schema,this.opts.inlineRefs)?A.schema:A.validate?A:b.call(this,A)}function g(A){for(const D of this._compilations)if(F(D,A))return D}u.getCompilingSchema=g;function F(A,D){return A.schema===D.schema&&A.root===D.root&&A.baseId===D.baseId}function j(A,D){let f;for(;typeof(f=this.refs[D])=="string";)D=f;return f||this.schemas[D]||V.call(this,A,D)}function V(A,D){const f=this.opts.uriResolver.parse(D),x=(0,d._getFullPath)(this.opts.uriResolver,f);let R=(0,d.getFullPath)(this.opts.uriResolver,A.baseId,void 0);if(Object.keys(A.schema).length>0&&x===R)return w.call(this,f,A);const c=(0,d.normalizeId)(x),O=this.refs[c]||this.schemas[c];if(typeof O=="string"){const T=V.call(this,A,O);return typeof(T==null?void 0:T.schema)!="object"?void 0:w.call(this,f,T)}if(typeof(O==null?void 0:O.schema)=="object"){if(O.validate||b.call(this,O),c===(0,d.normalizeId)(D)){const{schema:T}=O,{schemaId:Ce}=this.opts,we=T[Ce];return we&&(R=(0,d.resolveUrl)(this.opts.uriResolver,R,we)),new y({schema:T,schemaId:Ce,root:A,baseId:R})}return w.call(this,f,O)}}u.resolveSchema=V;const re=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function w(A,{baseId:D,schema:f,root:x}){var R;if(((R=A.fragment)===null||R===void 0?void 0:R[0])!=="/")return;for(const T of A.fragment.slice(1).split("/")){if(typeof f=="boolean")return;const Ce=f[(0,a.unescapeFragment)(T)];if(Ce===void 0)return;f=Ce;const we=typeof f=="object"&&f[this.opts.schemaId];!re.has(T)&&we&&(D=(0,d.resolveUrl)(this.opts.uriResolver,D,we))}let c;if(typeof f!="boolean"&&f.$ref&&!(0,a.schemaHasRulesButRef)(f,this.RULES)){const T=(0,d.resolveUrl)(this.opts.uriResolver,D,f.$ref);c=V.call(this,x,T)}const{schemaId:O}=this.opts;if(c=c||new y({schema:f,schemaId:O,root:x,baseId:D}),c.schema!==c.root.schema)return c}},99583:function(Nt,u,e){Object.defineProperty(u,"__esModule",{value:!0});const n=e(82481),i={data:new n.Name("data"),valCxt:new n.Name("valCxt"),instancePath:new n.Name("instancePath"),parentData:new n.Name("parentData"),parentDataProperty:new n.Name("parentDataProperty"),rootData:new n.Name("rootData"),dynamicAnchors:new n.Name("dynamicAnchors"),vErrors:new n.Name("vErrors"),errors:new n.Name("errors"),this:new n.Name("this"),self:new n.Name("self"),scope:new n.Name("scope"),json:new n.Name("json"),jsonPos:new n.Name("jsonPos"),jsonLen:new n.Name("jsonLen"),jsonPart:new n.Name("jsonPart")};u.default=i},30283:function(Nt,u,e){Object.defineProperty(u,"__esModule",{value:!0});const n=e(2710);class i extends Error{constructor(d,a,l,y){super(y||`can't resolve reference ${l} from id ${a}`),this.missingRef=(0,n.resolveUrl)(d,a,l),this.missingSchema=(0,n.normalizeId)((0,n.getFullPath)(d,this.missingRef))}}u.default=i},2710:function(Nt,u,e){Object.defineProperty(u,"__esModule",{value:!0}),u.getSchemaRefs=u.resolveUrl=u.normalizeId=u._getFullPath=u.getFullPath=u.inlineRef=void 0;const n=e(1849),i=e(69378),m=e(19522),d=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function a(w,A=!0){return typeof w=="boolean"?!0:A===!0?!y(w):A?b(w)<=A:!1}u.inlineRef=a;const l=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function y(w){for(const A in w){if(l.has(A))return!0;const D=w[A];if(Array.isArray(D)&&D.some(y)||typeof D=="object"&&y(D))return!0}return!1}function b(w){let A=0;for(const D in w){if(D==="$ref")return 1/0;if(A++,!d.has(D)&&(typeof w[D]=="object"&&(0,n.eachItem)(w[D],f=>A+=b(f)),A===1/0))return 1/0}return A}function t(w,A="",D){D!==!1&&(A=F(A));const f=w.parse(A);return _(w,f)}u.getFullPath=t;function _(w,A){return w.serialize(A).split("#")[0]+"#"}u._getFullPath=_;const g=/#\/?$/;function F(w){return w?w.replace(g,""):""}u.normalizeId=F;function j(w,A,D){return D=F(D),w.resolve(A,D)}u.resolveUrl=j;const V=/^[a-z_][-a-z0-9._]*$/i;function re(w,A){if(typeof w=="boolean")return{};const{schemaId:D,uriResolver:f}=this.opts,x=F(w[D]||A),R={"":x},c=t(f,x,!1),O={},T=new Set;return m(w,{allKeys:!0},(nt,ot,$t,ct)=>{if(ct===void 0)return;const St=c+ot;let xt=R[ct];typeof nt[D]=="string"&&(xt=Q.call(this,nt[D])),pn.call(this,nt.$anchor),pn.call(this,nt.$dynamicAnchor),R[ot]=xt;function Q(Ct){const Ge=this.opts.uriResolver.resolve;if(Ct=F(xt?Ge(xt,Ct):Ct),T.has(Ct))throw we(Ct);T.add(Ct);let C=this.refs[Ct];return typeof C=="string"&&(C=this.refs[C]),typeof C=="object"?Ce(nt,C.schema,Ct):Ct!==F(St)&&(Ct[0]==="#"?(Ce(nt,O[Ct],Ct),O[Ct]=nt):this.refs[Ct]=St),Ct}function pn(Ct){if(typeof Ct=="string"){if(!V.test(Ct))throw new Error(`invalid anchor "${Ct}"`);Q.call(this,`#${Ct}`)}}}),O;function Ce(nt,ot,$t){if(ot!==void 0&&!i(nt,ot))throw we($t)}function we(nt){return new Error(`reference "${nt}" resolves to more than one schema`)}}u.getSchemaRefs=re},18288:function(Nt,u){Object.defineProperty(u,"__esModule",{value:!0}),u.getRules=u.isJSONType=void 0;const e=["string","number","integer","boolean","null","object","array"],n=new Set(e);function i(d){return typeof d=="string"&&n.has(d)}u.isJSONType=i;function m(){const d={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...d,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},d.number,d.string,d.array,d.object],post:{rules:[]},all:{},keywords:{}}}u.getRules=m},1849:function(Nt,u,e){Object.defineProperty(u,"__esModule",{value:!0}),u.checkStrictMode=u.getErrorPath=u.Type=u.useFunc=u.setEvaluated=u.evaluatedPropsToName=u.mergeEvaluated=u.eachItem=u.unescapeJsonPointer=u.escapeJsonPointer=u.escapeFragment=u.unescapeFragment=u.schemaRefOrVal=u.schemaHasRulesButRef=u.schemaHasRules=u.checkUnknownRules=u.alwaysValidSchema=u.toHash=void 0;const n=e(82481),i=e(91475);function m(c){const O={};for(const T of c)O[T]=!0;return O}u.toHash=m;function d(c,O){return typeof O=="boolean"?O:Object.keys(O).length===0?!0:(a(c,O),!l(O,c.self.RULES.all))}u.alwaysValidSchema=d;function a(c,O=c.schema){const{opts:T,self:Ce}=c;if(!T.strictSchema||typeof O=="boolean")return;const we=Ce.RULES.keywords;for(const nt in O)we[nt]||R(c,`unknown keyword: "${nt}"`)}u.checkUnknownRules=a;function l(c,O){if(typeof c=="boolean")return!c;for(const T in c)if(O[T])return!0;return!1}u.schemaHasRules=l;function y(c,O){if(typeof c=="boolean")return!c;for(const T in c)if(T!=="$ref"&&O.all[T])return!0;return!1}u.schemaHasRulesButRef=y;function b({topSchemaRef:c,schemaPath:O},T,Ce,we){if(!we){if(typeof T=="number"||typeof T=="boolean")return T;if(typeof T=="string")return(0,n._)`${T}`}return(0,n._)`${c}${O}${(0,n.getProperty)(Ce)}`}u.schemaRefOrVal=b;function t(c){return F(decodeURIComponent(c))}u.unescapeFragment=t;function _(c){return encodeURIComponent(g(c))}u.escapeFragment=_;function g(c){return typeof c=="number"?`${c}`:c.replace(/~/g,"~0").replace(/\//g,"~1")}u.escapeJsonPointer=g;function F(c){return c.replace(/~1/g,"/").replace(/~0/g,"~")}u.unescapeJsonPointer=F;function j(c,O){if(Array.isArray(c))for(const T of c)O(T);else O(c)}u.eachItem=j;function V({mergeNames:c,mergeToName:O,mergeValues:T,resultToName:Ce}){return(we,nt,ot,$t)=>{const ct=ot===void 0?nt:ot instanceof n.Name?(nt instanceof n.Name?c(we,nt,ot):O(we,nt,ot),ot):nt instanceof n.Name?(O(we,ot,nt),nt):T(nt,ot);return $t===n.Name&&!(ct instanceof n.Name)?Ce(we,ct):ct}}u.mergeEvaluated={props:V({mergeNames:(c,O,T)=>c.if((0,n._)`${T} !== true && ${O} !== undefined`,()=>{c.if((0,n._)`${O} === true`,()=>c.assign(T,!0),()=>c.assign(T,(0,n._)`${T} || {}`).code((0,n._)`Object.assign(${T}, ${O})`))}),mergeToName:(c,O,T)=>c.if((0,n._)`${T} !== true`,()=>{O===!0?c.assign(T,!0):(c.assign(T,(0,n._)`${T} || {}`),w(c,T,O))}),mergeValues:(c,O)=>c===!0?!0:{...c,...O},resultToName:re}),items:V({mergeNames:(c,O,T)=>c.if((0,n._)`${T} !== true && ${O} !== undefined`,()=>c.assign(T,(0,n._)`${O} === true ? true : ${T} > ${O} ? ${T} : ${O}`)),mergeToName:(c,O,T)=>c.if((0,n._)`${T} !== true`,()=>c.assign(T,O===!0?!0:(0,n._)`${T} > ${O} ? ${T} : ${O}`)),mergeValues:(c,O)=>c===!0?!0:Math.max(c,O),resultToName:(c,O)=>c.var("items",O)})};function re(c,O){if(O===!0)return c.var("props",!0);const T=c.var("props",(0,n._)`{}`);return O!==void 0&&w(c,T,O),T}u.evaluatedPropsToName=re;function w(c,O,T){Object.keys(T).forEach(Ce=>c.assign((0,n._)`${O}${(0,n.getProperty)(Ce)}`,!0))}u.setEvaluated=w;const A={};function D(c,O){return c.scopeValue("func",{ref:O,code:A[O.code]||(A[O.code]=new i._Code(O.code))})}u.useFunc=D;var f;(function(c){c[c.Num=0]="Num",c[c.Str=1]="Str"})(f=u.Type||(u.Type={}));function x(c,O,T){if(c instanceof n.Name){const Ce=O===f.Num;return T?Ce?(0,n._)`"[" + ${c} + "]"`:(0,n._)`"['" + ${c} + "']"`:Ce?(0,n._)`"/" + ${c}`:(0,n._)`"/" + ${c}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return T?(0,n.getProperty)(c).toString():"/"+g(c)}u.getErrorPath=x;function R(c,O,T=c.opts.strictSchema){if(!!T){if(O=`strict mode: ${O}`,T===!0)throw new Error(O);c.self.logger.warn(O)}}u.checkStrictMode=R},66557:function(Nt,u){Object.defineProperty(u,"__esModule",{value:!0}),u.shouldUseRule=u.shouldUseGroup=u.schemaHasRulesForType=void 0;function e({schema:m,self:d},a){const l=d.RULES.types[a];return l&&l!==!0&&n(m,l)}u.schemaHasRulesForType=e;function n(m,d){return d.rules.some(a=>i(m,a))}u.shouldUseGroup=n;function i(m,d){var a;return m[d.keyword]!==void 0||((a=d.definition.implements)===null||a===void 0?void 0:a.some(l=>m[l]!==void 0))}u.shouldUseRule=i},74616:function(Nt,u,e){Object.defineProperty(u,"__esModule",{value:!0}),u.boolOrEmptySchema=u.topBoolOrEmptySchema=void 0;const n=e(59428),i=e(82481),m=e(99583),d={message:"boolean schema is false"};function a(b){const{gen:t,schema:_,validateName:g}=b;_===!1?y(b,!1):typeof _=="object"&&_.$async===!0?t.return(m.default.data):(t.assign((0,i._)`${g}.errors`,null),t.return(!0))}u.topBoolOrEmptySchema=a;function l(b,t){const{gen:_,schema:g}=b;g===!1?(_.var(t,!1),y(b)):_.var(t,!0)}u.boolOrEmptySchema=l;function y(b,t){const{gen:_,data:g}=b,F={gen:_,keyword:"false schema",data:g,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:b};(0,n.reportError)(F,d,void 0,t)}},93277:function(Nt,u,e){Object.defineProperty(u,"__esModule",{value:!0}),u.reportTypeError=u.checkDataTypes=u.checkDataType=u.coerceAndCheckDataType=u.getJSONTypes=u.getSchemaTypes=u.DataType=void 0;const n=e(18288),i=e(66557),m=e(59428),d=e(82481),a=e(1849);var l;(function(f){f[f.Correct=0]="Correct",f[f.Wrong=1]="Wrong"})(l=u.DataType||(u.DataType={}));function y(f){const x=b(f.type);if(x.includes("null")){if(f.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!x.length&&f.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');f.nullable===!0&&x.push("null")}return x}u.getSchemaTypes=y;function b(f){const x=Array.isArray(f)?f:f?[f]:[];if(x.every(n.isJSONType))return x;throw new Error("type must be JSONType or JSONType[]: "+x.join(","))}u.getJSONTypes=b;function t(f,x){const{gen:R,data:c,opts:O}=f,T=g(x,O.coerceTypes),Ce=x.length>0&&!(T.length===0&&x.length===1&&(0,i.schemaHasRulesForType)(f,x[0]));if(Ce){const we=re(x,c,O.strictNumbers,l.Wrong);R.if(we,()=>{T.length?F(f,x,T):A(f)})}return Ce}u.coerceAndCheckDataType=t;const _=new Set(["string","number","integer","boolean","null"]);function g(f,x){return x?f.filter(R=>_.has(R)||x==="array"&&R==="array"):[]}function F(f,x,R){const{gen:c,data:O,opts:T}=f,Ce=c.let("dataType",(0,d._)`typeof ${O}`),we=c.let("coerced",(0,d._)`undefined`);T.coerceTypes==="array"&&c.if((0,d._)`${Ce} == 'object' && Array.isArray(${O}) && ${O}.length == 1`,()=>c.assign(O,(0,d._)`${O}[0]`).assign(Ce,(0,d._)`typeof ${O}`).if(re(x,O,T.strictNumbers),()=>c.assign(we,O))),c.if((0,d._)`${we} !== undefined`);for(const ot of R)(_.has(ot)||ot==="array"&&T.coerceTypes==="array")&&nt(ot);c.else(),A(f),c.endIf(),c.if((0,d._)`${we} !== undefined`,()=>{c.assign(O,we),j(f,we)});function nt(ot){switch(ot){case"string":c.elseIf((0,d._)`${Ce} == "number" || ${Ce} == "boolean"`).assign(we,(0,d._)`"" + ${O}`).elseIf((0,d._)`${O} === null`).assign(we,(0,d._)`""`);return;case"number":c.elseIf((0,d._)`${Ce} == "boolean" || ${O} === null
              || (${Ce} == "string" && ${O} && ${O} == +${O})`).assign(we,(0,d._)`+${O}`);return;case"integer":c.elseIf((0,d._)`${Ce} === "boolean" || ${O} === null
              || (${Ce} === "string" && ${O} && ${O} == +${O} && !(${O} % 1))`).assign(we,(0,d._)`+${O}`);return;case"boolean":c.elseIf((0,d._)`${O} === "false" || ${O} === 0 || ${O} === null`).assign(we,!1).elseIf((0,d._)`${O} === "true" || ${O} === 1`).assign(we,!0);return;case"null":c.elseIf((0,d._)`${O} === "" || ${O} === 0 || ${O} === false`),c.assign(we,null);return;case"array":c.elseIf((0,d._)`${Ce} === "string" || ${Ce} === "number"
              || ${Ce} === "boolean" || ${O} === null`).assign(we,(0,d._)`[${O}]`)}}}function j({gen:f,parentData:x,parentDataProperty:R},c){f.if((0,d._)`${x} !== undefined`,()=>f.assign((0,d._)`${x}[${R}]`,c))}function V(f,x,R,c=l.Correct){const O=c===l.Correct?d.operators.EQ:d.operators.NEQ;let T;switch(f){case"null":return(0,d._)`${x} ${O} null`;case"array":T=(0,d._)`Array.isArray(${x})`;break;case"object":T=(0,d._)`${x} && typeof ${x} == "object" && !Array.isArray(${x})`;break;case"integer":T=Ce((0,d._)`!(${x} % 1) && !isNaN(${x})`);break;case"number":T=Ce();break;default:return(0,d._)`typeof ${x} ${O} ${f}`}return c===l.Correct?T:(0,d.not)(T);function Ce(we=d.nil){return(0,d.and)((0,d._)`typeof ${x} == "number"`,we,R?(0,d._)`isFinite(${x})`:d.nil)}}u.checkDataType=V;function re(f,x,R,c){if(f.length===1)return V(f[0],x,R,c);let O;const T=(0,a.toHash)(f);if(T.array&&T.object){const Ce=(0,d._)`typeof ${x} != "object"`;O=T.null?Ce:(0,d._)`!${x} || ${Ce}`,delete T.null,delete T.array,delete T.object}else O=d.nil;T.number&&delete T.integer;for(const Ce in T)O=(0,d.and)(O,V(Ce,x,R,c));return O}u.checkDataTypes=re;const w={message:({schema:f})=>`must be ${f}`,params:({schema:f,schemaValue:x})=>typeof f=="string"?(0,d._)`{type: ${f}}`:(0,d._)`{type: ${x}}`};function A(f){const x=D(f);(0,m.reportError)(x,w)}u.reportTypeError=A;function D(f){const{gen:x,data:R,schema:c}=f,O=(0,a.schemaRefOrVal)(f,c,"type");return{gen:x,keyword:"type",data:R,schema:c.type,schemaCode:O,schemaValue:O,parentSchema:c,params:{},it:f}}},35192:function(Nt,u,e){Object.defineProperty(u,"__esModule",{value:!0}),u.assignDefaults=void 0;const n=e(82481),i=e(1849);function m(a,l){const{properties:y,items:b}=a.schema;if(l==="object"&&y)for(const t in y)d(a,t,y[t].default);else l==="array"&&Array.isArray(b)&&b.forEach((t,_)=>d(a,_,t.default))}u.assignDefaults=m;function d(a,l,y){const{gen:b,compositeRule:t,data:_,opts:g}=a;if(y===void 0)return;const F=(0,n._)`${_}${(0,n.getProperty)(l)}`;if(t){(0,i.checkStrictMode)(a,`default is ignored for: ${F}`);return}let j=(0,n._)`${F} === undefined`;g.useDefaults==="empty"&&(j=(0,n._)`${j} || ${F} === null || ${F} === ""`),b.if(j,(0,n._)`${F} = ${(0,n.stringify)(y)}`)}},4371:function(Nt,u,e){Object.defineProperty(u,"__esModule",{value:!0}),u.getData=u.KeywordCxt=u.validateFunctionCode=void 0;const n=e(74616),i=e(93277),m=e(66557),d=e(93277),a=e(35192),l=e(83558),y=e(20521),b=e(82481),t=e(99583),_=e(2710),g=e(1849),F=e(59428);function j(ee){if(c(ee)&&(T(ee),R(ee))){A(ee);return}V(ee,()=>(0,n.topBoolOrEmptySchema)(ee))}u.validateFunctionCode=j;function V({gen:ee,validateName:ue,schema:Pe,schemaEnv:at,opts:bt},Wt){bt.code.es5?ee.func(ue,(0,b._)`${t.default.data}, ${t.default.valCxt}`,at.$async,()=>{ee.code((0,b._)`"use strict"; ${f(Pe,bt)}`),w(ee,bt),ee.code(Wt)}):ee.func(ue,(0,b._)`${t.default.data}, ${re(bt)}`,at.$async,()=>ee.code(f(Pe,bt)).code(Wt))}function re(ee){return(0,b._)`{${t.default.instancePath}="", ${t.default.parentData}, ${t.default.parentDataProperty}, ${t.default.rootData}=${t.default.data}${ee.dynamicRef?(0,b._)`, ${t.default.dynamicAnchors}={}`:b.nil}}={}`}function w(ee,ue){ee.if(t.default.valCxt,()=>{ee.var(t.default.instancePath,(0,b._)`${t.default.valCxt}.${t.default.instancePath}`),ee.var(t.default.parentData,(0,b._)`${t.default.valCxt}.${t.default.parentData}`),ee.var(t.default.parentDataProperty,(0,b._)`${t.default.valCxt}.${t.default.parentDataProperty}`),ee.var(t.default.rootData,(0,b._)`${t.default.valCxt}.${t.default.rootData}`),ue.dynamicRef&&ee.var(t.default.dynamicAnchors,(0,b._)`${t.default.valCxt}.${t.default.dynamicAnchors}`)},()=>{ee.var(t.default.instancePath,(0,b._)`""`),ee.var(t.default.parentData,(0,b._)`undefined`),ee.var(t.default.parentDataProperty,(0,b._)`undefined`),ee.var(t.default.rootData,t.default.data),ue.dynamicRef&&ee.var(t.default.dynamicAnchors,(0,b._)`{}`)})}function A(ee){const{schema:ue,opts:Pe,gen:at}=ee;V(ee,()=>{Pe.$comment&&ue.$comment&&ct(ee),nt(ee),at.let(t.default.vErrors,null),at.let(t.default.errors,0),Pe.unevaluated&&D(ee),Ce(ee),St(ee)})}function D(ee){const{gen:ue,validateName:Pe}=ee;ee.evaluated=ue.const("evaluated",(0,b._)`${Pe}.evaluated`),ue.if((0,b._)`${ee.evaluated}.dynamicProps`,()=>ue.assign((0,b._)`${ee.evaluated}.props`,(0,b._)`undefined`)),ue.if((0,b._)`${ee.evaluated}.dynamicItems`,()=>ue.assign((0,b._)`${ee.evaluated}.items`,(0,b._)`undefined`))}function f(ee,ue){const Pe=typeof ee=="object"&&ee[ue.schemaId];return Pe&&(ue.code.source||ue.code.process)?(0,b._)`/*# sourceURL=${Pe} */`:b.nil}function x(ee,ue){if(c(ee)&&(T(ee),R(ee))){O(ee,ue);return}(0,n.boolOrEmptySchema)(ee,ue)}function R({schema:ee,self:ue}){if(typeof ee=="boolean")return!ee;for(const Pe in ee)if(ue.RULES.all[Pe])return!0;return!1}function c(ee){return typeof ee.schema!="boolean"}function O(ee,ue){const{schema:Pe,gen:at,opts:bt}=ee;bt.$comment&&Pe.$comment&&ct(ee),ot(ee),$t(ee);const Wt=at.const("_errs",t.default.errors);Ce(ee,Wt),at.var(ue,(0,b._)`${Wt} === ${t.default.errors}`)}function T(ee){(0,g.checkUnknownRules)(ee),we(ee)}function Ce(ee,ue){if(ee.opts.jtd)return Q(ee,[],!1,ue);const Pe=(0,i.getSchemaTypes)(ee.schema),at=(0,i.coerceAndCheckDataType)(ee,Pe);Q(ee,Pe,!at,ue)}function we(ee){const{schema:ue,errSchemaPath:Pe,opts:at,self:bt}=ee;ue.$ref&&at.ignoreKeywordsWithRef&&(0,g.schemaHasRulesButRef)(ue,bt.RULES)&&bt.logger.warn(`$ref: keywords ignored in schema at path "${Pe}"`)}function nt(ee){const{schema:ue,opts:Pe}=ee;ue.default!==void 0&&Pe.useDefaults&&Pe.strictSchema&&(0,g.checkStrictMode)(ee,"default is ignored in the schema root")}function ot(ee){const ue=ee.schema[ee.opts.schemaId];ue&&(ee.baseId=(0,_.resolveUrl)(ee.opts.uriResolver,ee.baseId,ue))}function $t(ee){if(ee.schema.$async&&!ee.schemaEnv.$async)throw new Error("async schema in sync schema")}function ct({gen:ee,schemaEnv:ue,schema:Pe,errSchemaPath:at,opts:bt}){const Wt=Pe.$comment;if(bt.$comment===!0)ee.code((0,b._)`${t.default.self}.logger.log(${Wt})`);else if(typeof bt.$comment=="function"){const on=(0,b.str)`${at}/$comment`,zt=ee.scopeValue("root",{ref:ue.root});ee.code((0,b._)`${t.default.self}.opts.$comment(${Wt}, ${on}, ${zt}.schema)`)}}function St(ee){const{gen:ue,schemaEnv:Pe,validateName:at,ValidationError:bt,opts:Wt}=ee;Pe.$async?ue.if((0,b._)`${t.default.errors} === 0`,()=>ue.return(t.default.data),()=>ue.throw((0,b._)`new ${bt}(${t.default.vErrors})`)):(ue.assign((0,b._)`${at}.errors`,t.default.vErrors),Wt.unevaluated&&xt(ee),ue.return((0,b._)`${t.default.errors} === 0`))}function xt({gen:ee,evaluated:ue,props:Pe,items:at}){Pe instanceof b.Name&&ee.assign((0,b._)`${ue}.props`,Pe),at instanceof b.Name&&ee.assign((0,b._)`${ue}.items`,at)}function Q(ee,ue,Pe,at){const{gen:bt,schema:Wt,data:on,allErrors:zt,opts:Le,self:Pt}=ee,{RULES:Rt}=Pt;if(Wt.$ref&&(Le.ignoreKeywordsWithRef||!(0,g.schemaHasRulesButRef)(Wt,Rt))){bt.block(()=>Ne(ee,"$ref",Rt.all.$ref.definition));return}Le.jtd||Ct(ee,ue),bt.block(()=>{for(const un of Rt.rules)sn(un);sn(Rt.post)});function sn(un){!(0,m.shouldUseGroup)(Wt,un)||(un.type?(bt.if((0,d.checkDataType)(un.type,on,Le.strictNumbers)),pn(ee,un),ue.length===1&&ue[0]===un.type&&Pe&&(bt.else(),(0,d.reportTypeError)(ee)),bt.endIf()):pn(ee,un),zt||bt.if((0,b._)`${t.default.errors} === ${at||0}`))}}function pn(ee,ue){const{gen:Pe,schema:at,opts:{useDefaults:bt}}=ee;bt&&(0,a.assignDefaults)(ee,ue.type),Pe.block(()=>{for(const Wt of ue.rules)(0,m.shouldUseRule)(at,Wt)&&Ne(ee,Wt.keyword,Wt.definition,ue.type)})}function Ct(ee,ue){ee.schemaEnv.meta||!ee.opts.strictTypes||(Ge(ee,ue),ee.opts.allowUnionTypes||C(ee,ue),Fe(ee,ee.dataTypes))}function Ge(ee,ue){if(!!ue.length){if(!ee.dataTypes.length){ee.dataTypes=ue;return}ue.forEach(Pe=>{M(ee.dataTypes,Pe)||G(ee,`type "${Pe}" not allowed by context "${ee.dataTypes.join(",")}"`)}),ee.dataTypes=ee.dataTypes.filter(Pe=>M(ue,Pe))}}function C(ee,ue){ue.length>1&&!(ue.length===2&&ue.includes("null"))&&G(ee,"use allowUnionTypes to allow union type keyword")}function Fe(ee,ue){const Pe=ee.self.RULES.all;for(const at in Pe){const bt=Pe[at];if(typeof bt=="object"&&(0,m.shouldUseRule)(ee.schema,bt)){const{type:Wt}=bt.definition;Wt.length&&!Wt.some(on=>ve(ue,on))&&G(ee,`missing type "${Wt.join(",")}" for keyword "${at}"`)}}}function ve(ee,ue){return ee.includes(ue)||ue==="number"&&ee.includes("integer")}function M(ee,ue){return ee.includes(ue)||ue==="integer"&&ee.includes("number")}function G(ee,ue){const Pe=ee.schemaEnv.baseId+ee.errSchemaPath;ue+=` at "${Pe}" (strictTypes)`,(0,g.checkStrictMode)(ee,ue,ee.opts.strictTypes)}class Re{constructor(ue,Pe,at){if((0,l.validateKeywordUsage)(ue,Pe,at),this.gen=ue.gen,this.allErrors=ue.allErrors,this.keyword=at,this.data=ue.data,this.schema=ue.schema[at],this.$data=Pe.$data&&ue.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,g.schemaRefOrVal)(ue,this.schema,at,this.$data),this.schemaType=Pe.schemaType,this.parentSchema=ue.schema,this.params={},this.it=ue,this.def=Pe,this.$data)this.schemaCode=ue.gen.const("vSchema",vt(this.$data,ue));else if(this.schemaCode=this.schemaValue,!(0,l.validSchemaType)(this.schema,Pe.schemaType,Pe.allowUndefined))throw new Error(`${at} value must be ${JSON.stringify(Pe.schemaType)}`);("code"in Pe?Pe.trackErrors:Pe.errors!==!1)&&(this.errsCount=ue.gen.const("_errs",t.default.errors))}result(ue,Pe,at){this.failResult((0,b.not)(ue),Pe,at)}failResult(ue,Pe,at){this.gen.if(ue),at?at():this.error(),Pe?(this.gen.else(),Pe(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(ue,Pe){this.failResult((0,b.not)(ue),void 0,Pe)}fail(ue){if(ue===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(ue),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(ue){if(!this.$data)return this.fail(ue);const{schemaCode:Pe}=this;this.fail((0,b._)`${Pe} !== undefined && (${(0,b.or)(this.invalid$data(),ue)})`)}error(ue,Pe,at){if(Pe){this.setParams(Pe),this._error(ue,at),this.setParams({});return}this._error(ue,at)}_error(ue,Pe){(ue?F.reportExtraError:F.reportError)(this,this.def.error,Pe)}$dataError(){(0,F.reportError)(this,this.def.$dataError||F.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,F.resetErrorsCount)(this.gen,this.errsCount)}ok(ue){this.allErrors||this.gen.if(ue)}setParams(ue,Pe){Pe?Object.assign(this.params,ue):this.params=ue}block$data(ue,Pe,at=b.nil){this.gen.block(()=>{this.check$data(ue,at),Pe()})}check$data(ue=b.nil,Pe=b.nil){if(!this.$data)return;const{gen:at,schemaCode:bt,schemaType:Wt,def:on}=this;at.if((0,b.or)((0,b._)`${bt} === undefined`,Pe)),ue!==b.nil&&at.assign(ue,!0),(Wt.length||on.validateSchema)&&(at.elseIf(this.invalid$data()),this.$dataError(),ue!==b.nil&&at.assign(ue,!1)),at.else()}invalid$data(){const{gen:ue,schemaCode:Pe,schemaType:at,def:bt,it:Wt}=this;return(0,b.or)(on(),zt());function on(){if(at.length){if(!(Pe instanceof b.Name))throw new Error("ajv implementation error");const Le=Array.isArray(at)?at:[at];return(0,b._)`${(0,d.checkDataTypes)(Le,Pe,Wt.opts.strictNumbers,d.DataType.Wrong)}`}return b.nil}function zt(){if(bt.validateSchema){const Le=ue.scopeValue("validate$data",{ref:bt.validateSchema});return(0,b._)`!${Le}(${Pe})`}return b.nil}}subschema(ue,Pe){const at=(0,y.getSubschema)(this.it,ue);(0,y.extendSubschemaData)(at,this.it,ue),(0,y.extendSubschemaMode)(at,ue);const bt={...this.it,...at,items:void 0,props:void 0};return x(bt,Pe),bt}mergeEvaluated(ue,Pe){const{it:at,gen:bt}=this;!at.opts.unevaluated||(at.props!==!0&&ue.props!==void 0&&(at.props=g.mergeEvaluated.props(bt,ue.props,at.props,Pe)),at.items!==!0&&ue.items!==void 0&&(at.items=g.mergeEvaluated.items(bt,ue.items,at.items,Pe)))}mergeValidEvaluated(ue,Pe){const{it:at,gen:bt}=this;if(at.opts.unevaluated&&(at.props!==!0||at.items!==!0))return bt.if(Pe,()=>this.mergeEvaluated(ue,b.Name)),!0}}u.KeywordCxt=Re;function Ne(ee,ue,Pe,at){const bt=new Re(ee,Pe,ue);"code"in Pe?Pe.code(bt,at):bt.$data&&Pe.validate?(0,l.funcKeywordCode)(bt,Pe):"macro"in Pe?(0,l.macroKeywordCode)(bt,Pe):(Pe.compile||Pe.validate)&&(0,l.funcKeywordCode)(bt,Pe)}const Me=/^\/(?:[^~]|~0|~1)*$/,Xe=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function vt(ee,{dataLevel:ue,dataNames:Pe,dataPathArr:at}){let bt,Wt;if(ee==="")return t.default.rootData;if(ee[0]==="/"){if(!Me.test(ee))throw new Error(`Invalid JSON-pointer: ${ee}`);bt=ee,Wt=t.default.rootData}else{const Pt=Xe.exec(ee);if(!Pt)throw new Error(`Invalid JSON-pointer: ${ee}`);const Rt=+Pt[1];if(bt=Pt[2],bt==="#"){if(Rt>=ue)throw new Error(Le("property/index",Rt));return at[ue-Rt]}if(Rt>ue)throw new Error(Le("data",Rt));if(Wt=Pe[ue-Rt],!bt)return Wt}let on=Wt;const zt=bt.split("/");for(const Pt of zt)Pt&&(Wt=(0,b._)`${Wt}${(0,b.getProperty)((0,g.unescapeJsonPointer)(Pt))}`,on=(0,b._)`${on} && ${Wt}`);return on;function Le(Pt,Rt){return`Cannot access ${Pt} ${Rt} levels up, current level is ${ue}`}}u.getData=vt},83558:function(Nt,u,e){Object.defineProperty(u,"__esModule",{value:!0}),u.validateKeywordUsage=u.validSchemaType=u.funcKeywordCode=u.macroKeywordCode=void 0;const n=e(82481),i=e(99583),m=e(9280),d=e(59428);function a(j,V){const{gen:re,keyword:w,schema:A,parentSchema:D,it:f}=j,x=V.macro.call(f.self,A,D,f),R=_(re,w,x);f.opts.validateSchema!==!1&&f.self.validateSchema(x,!0);const c=re.name("valid");j.subschema({schema:x,schemaPath:n.nil,errSchemaPath:`${f.errSchemaPath}/${w}`,topSchemaRef:R,compositeRule:!0},c),j.pass(c,()=>j.error(!0))}u.macroKeywordCode=a;function l(j,V){var re;const{gen:w,keyword:A,schema:D,parentSchema:f,$data:x,it:R}=j;t(R,V);const c=!x&&V.compile?V.compile.call(R.self,D,f,R):V.validate,O=_(w,A,c),T=w.let("valid");j.block$data(T,Ce),j.ok((re=V.valid)!==null&&re!==void 0?re:T);function Ce(){if(V.errors===!1)ot(),V.modifying&&y(j),$t(()=>j.error());else{const ct=V.async?we():nt();V.modifying&&y(j),$t(()=>b(j,ct))}}function we(){const ct=w.let("ruleErrs",null);return w.try(()=>ot((0,n._)`await `),St=>w.assign(T,!1).if((0,n._)`${St} instanceof ${R.ValidationError}`,()=>w.assign(ct,(0,n._)`${St}.errors`),()=>w.throw(St))),ct}function nt(){const ct=(0,n._)`${O}.errors`;return w.assign(ct,null),ot(n.nil),ct}function ot(ct=V.async?(0,n._)`await `:n.nil){const St=R.opts.passContext?i.default.this:i.default.self,xt=!("compile"in V&&!x||V.schema===!1);w.assign(T,(0,n._)`${ct}${(0,m.callValidateCode)(j,O,St,xt)}`,V.modifying)}function $t(ct){var St;w.if((0,n.not)((St=V.valid)!==null&&St!==void 0?St:T),ct)}}u.funcKeywordCode=l;function y(j){const{gen:V,data:re,it:w}=j;V.if(w.parentData,()=>V.assign(re,(0,n._)`${w.parentData}[${w.parentDataProperty}]`))}function b(j,V){const{gen:re}=j;re.if((0,n._)`Array.isArray(${V})`,()=>{re.assign(i.default.vErrors,(0,n._)`${i.default.vErrors} === null ? ${V} : ${i.default.vErrors}.concat(${V})`).assign(i.default.errors,(0,n._)`${i.default.vErrors}.length`),(0,d.extendErrors)(j)},()=>j.error())}function t({schemaEnv:j},V){if(V.async&&!j.$async)throw new Error("async keyword in sync schema")}function _(j,V,re){if(re===void 0)throw new Error(`keyword "${V}" failed to compile`);return j.scopeValue("keyword",typeof re=="function"?{ref:re}:{ref:re,code:(0,n.stringify)(re)})}function g(j,V,re=!1){return!V.length||V.some(w=>w==="array"?Array.isArray(j):w==="object"?j&&typeof j=="object"&&!Array.isArray(j):typeof j==w||re&&typeof j=="undefined")}u.validSchemaType=g;function F({schema:j,opts:V,self:re,errSchemaPath:w},A,D){if(Array.isArray(A.keyword)?!A.keyword.includes(D):A.keyword!==D)throw new Error("ajv implementation error");const f=A.dependencies;if(f!=null&&f.some(x=>!Object.prototype.hasOwnProperty.call(j,x)))throw new Error(`parent schema must have dependencies of ${D}: ${f.join(",")}`);if(A.validateSchema&&!A.validateSchema(j[D])){const R=`keyword "${D}" value is invalid at path "${w}": `+re.errorsText(A.validateSchema.errors);if(V.validateSchema==="log")re.logger.error(R);else throw new Error(R)}}u.validateKeywordUsage=F},20521:function(Nt,u,e){Object.defineProperty(u,"__esModule",{value:!0}),u.extendSubschemaMode=u.extendSubschemaData=u.getSubschema=void 0;const n=e(82481),i=e(1849);function m(l,{keyword:y,schemaProp:b,schema:t,schemaPath:_,errSchemaPath:g,topSchemaRef:F}){if(y!==void 0&&t!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(y!==void 0){const j=l.schema[y];return b===void 0?{schema:j,schemaPath:(0,n._)`${l.schemaPath}${(0,n.getProperty)(y)}`,errSchemaPath:`${l.errSchemaPath}/${y}`}:{schema:j[b],schemaPath:(0,n._)`${l.schemaPath}${(0,n.getProperty)(y)}${(0,n.getProperty)(b)}`,errSchemaPath:`${l.errSchemaPath}/${y}/${(0,i.escapeFragment)(b)}`}}if(t!==void 0){if(_===void 0||g===void 0||F===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:t,schemaPath:_,topSchemaRef:F,errSchemaPath:g}}throw new Error('either "keyword" or "schema" must be passed')}u.getSubschema=m;function d(l,y,{dataProp:b,dataPropType:t,data:_,dataTypes:g,propertyName:F}){if(_!==void 0&&b!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:j}=y;if(b!==void 0){const{errorPath:re,dataPathArr:w,opts:A}=y,D=j.let("data",(0,n._)`${y.data}${(0,n.getProperty)(b)}`,!0);V(D),l.errorPath=(0,n.str)`${re}${(0,i.getErrorPath)(b,t,A.jsPropertySyntax)}`,l.parentDataProperty=(0,n._)`${b}`,l.dataPathArr=[...w,l.parentDataProperty]}if(_!==void 0){const re=_ instanceof n.Name?_:j.let("data",_,!0);V(re),F!==void 0&&(l.propertyName=F)}g&&(l.dataTypes=g);function V(re){l.data=re,l.dataLevel=y.dataLevel+1,l.dataTypes=[],y.definedProperties=new Set,l.parentData=y.data,l.dataNames=[...y.dataNames,re]}}u.extendSubschemaData=d;function a(l,{jtdDiscriminator:y,jtdMetadata:b,compositeRule:t,createErrors:_,allErrors:g}){t!==void 0&&(l.compositeRule=t),_!==void 0&&(l.createErrors=_),g!==void 0&&(l.allErrors=g),l.jtdDiscriminator=y,l.jtdMetadata=b}u.extendSubschemaMode=a},61889:function(Nt,u,e){Object.defineProperty(u,"__esModule",{value:!0}),u.CodeGen=u.Name=u.nil=u.stringify=u.str=u._=u.KeywordCxt=void 0;var n=e(4371);Object.defineProperty(u,"KeywordCxt",{enumerable:!0,get:function(){return n.KeywordCxt}});var i=e(82481);Object.defineProperty(u,"_",{enumerable:!0,get:function(){return i._}}),Object.defineProperty(u,"str",{enumerable:!0,get:function(){return i.str}}),Object.defineProperty(u,"stringify",{enumerable:!0,get:function(){return i.stringify}}),Object.defineProperty(u,"nil",{enumerable:!0,get:function(){return i.nil}}),Object.defineProperty(u,"Name",{enumerable:!0,get:function(){return i.Name}}),Object.defineProperty(u,"CodeGen",{enumerable:!0,get:function(){return i.CodeGen}});const m=e(14319),d=e(30283),a=e(18288),l=e(62902),y=e(82481),b=e(2710),t=e(93277),_=e(1849),g=e(85310),F=e(3075),j=(Ge,C)=>new RegExp(Ge,C);j.code="new RegExp";const V=["removeAdditional","useDefaults","coerceTypes"],re=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),w={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},A={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},D=200;function f(Ge){var C,Fe,ve,M,G,Re,Ne,Me,Xe,vt,ee,ue,Pe,at,bt,Wt,on,zt,Le,Pt,Rt,sn,un,Lt,Ht;const nn=Ge.strict,Te=(C=Ge.code)===null||C===void 0?void 0:C.optimize,st=Te===!0||Te===void 0?1:Te||0,le=(ve=(Fe=Ge.code)===null||Fe===void 0?void 0:Fe.regExp)!==null&&ve!==void 0?ve:j,ie=(M=Ge.uriResolver)!==null&&M!==void 0?M:F.default;return{strictSchema:(Re=(G=Ge.strictSchema)!==null&&G!==void 0?G:nn)!==null&&Re!==void 0?Re:!0,strictNumbers:(Me=(Ne=Ge.strictNumbers)!==null&&Ne!==void 0?Ne:nn)!==null&&Me!==void 0?Me:!0,strictTypes:(vt=(Xe=Ge.strictTypes)!==null&&Xe!==void 0?Xe:nn)!==null&&vt!==void 0?vt:"log",strictTuples:(ue=(ee=Ge.strictTuples)!==null&&ee!==void 0?ee:nn)!==null&&ue!==void 0?ue:"log",strictRequired:(at=(Pe=Ge.strictRequired)!==null&&Pe!==void 0?Pe:nn)!==null&&at!==void 0?at:!1,code:Ge.code?{...Ge.code,optimize:st,regExp:le}:{optimize:st,regExp:le},loopRequired:(bt=Ge.loopRequired)!==null&&bt!==void 0?bt:D,loopEnum:(Wt=Ge.loopEnum)!==null&&Wt!==void 0?Wt:D,meta:(on=Ge.meta)!==null&&on!==void 0?on:!0,messages:(zt=Ge.messages)!==null&&zt!==void 0?zt:!0,inlineRefs:(Le=Ge.inlineRefs)!==null&&Le!==void 0?Le:!0,schemaId:(Pt=Ge.schemaId)!==null&&Pt!==void 0?Pt:"$id",addUsedSchema:(Rt=Ge.addUsedSchema)!==null&&Rt!==void 0?Rt:!0,validateSchema:(sn=Ge.validateSchema)!==null&&sn!==void 0?sn:!0,validateFormats:(un=Ge.validateFormats)!==null&&un!==void 0?un:!0,unicodeRegExp:(Lt=Ge.unicodeRegExp)!==null&&Lt!==void 0?Lt:!0,int32range:(Ht=Ge.int32range)!==null&&Ht!==void 0?Ht:!0,uriResolver:ie}}class x{constructor(C={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,C=this.opts={...C,...f(C)};const{es5:Fe,lines:ve}=this.opts.code;this.scope=new y.ValueScope({scope:{},prefixes:re,es5:Fe,lines:ve}),this.logger=ot(C.logger);const M=C.validateFormats;C.validateFormats=!1,this.RULES=(0,a.getRules)(),R.call(this,w,C,"NOT SUPPORTED"),R.call(this,A,C,"DEPRECATED","warn"),this._metaOpts=we.call(this),C.formats&&T.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),C.keywords&&Ce.call(this,C.keywords),typeof C.meta=="object"&&this.addMetaSchema(C.meta),O.call(this),C.validateFormats=M}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:C,meta:Fe,schemaId:ve}=this.opts;let M=g;ve==="id"&&(M={...g},M.id=M.$id,delete M.$id),Fe&&C&&this.addMetaSchema(M,M[ve],!1)}defaultMeta(){const{meta:C,schemaId:Fe}=this.opts;return this.opts.defaultMeta=typeof C=="object"?C[Fe]||C:void 0}validate(C,Fe){let ve;if(typeof C=="string"){if(ve=this.getSchema(C),!ve)throw new Error(`no schema with key or ref "${C}"`)}else ve=this.compile(C);const M=ve(Fe);return"$async"in ve||(this.errors=ve.errors),M}compile(C,Fe){const ve=this._addSchema(C,Fe);return ve.validate||this._compileSchemaEnv(ve)}compileAsync(C,Fe){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:ve}=this.opts;return M.call(this,C,Fe);async function M(vt,ee){await G.call(this,vt.$schema);const ue=this._addSchema(vt,ee);return ue.validate||Re.call(this,ue)}async function G(vt){vt&&!this.getSchema(vt)&&await M.call(this,{$ref:vt},!0)}async function Re(vt){try{return this._compileSchemaEnv(vt)}catch(ee){if(!(ee instanceof d.default))throw ee;return Ne.call(this,ee),await Me.call(this,ee.missingSchema),Re.call(this,vt)}}function Ne({missingSchema:vt,missingRef:ee}){if(this.refs[vt])throw new Error(`AnySchema ${vt} is loaded but ${ee} cannot be resolved`)}async function Me(vt){const ee=await Xe.call(this,vt);this.refs[vt]||await G.call(this,ee.$schema),this.refs[vt]||this.addSchema(ee,vt,Fe)}async function Xe(vt){const ee=this._loading[vt];if(ee)return ee;try{return await(this._loading[vt]=ve(vt))}finally{delete this._loading[vt]}}}addSchema(C,Fe,ve,M=this.opts.validateSchema){if(Array.isArray(C)){for(const Re of C)this.addSchema(Re,void 0,ve,M);return this}let G;if(typeof C=="object"){const{schemaId:Re}=this.opts;if(G=C[Re],G!==void 0&&typeof G!="string")throw new Error(`schema ${Re} must be string`)}return Fe=(0,b.normalizeId)(Fe||G),this._checkUnique(Fe),this.schemas[Fe]=this._addSchema(C,ve,Fe,M,!0),this}addMetaSchema(C,Fe,ve=this.opts.validateSchema){return this.addSchema(C,Fe,!0,ve),this}validateSchema(C,Fe){if(typeof C=="boolean")return!0;let ve;if(ve=C.$schema,ve!==void 0&&typeof ve!="string")throw new Error("$schema must be a string");if(ve=ve||this.opts.defaultMeta||this.defaultMeta(),!ve)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const M=this.validate(ve,C);if(!M&&Fe){const G="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(G);else throw new Error(G)}return M}getSchema(C){let Fe;for(;typeof(Fe=c.call(this,C))=="string";)C=Fe;if(Fe===void 0){const{schemaId:ve}=this.opts,M=new l.SchemaEnv({schema:{},schemaId:ve});if(Fe=l.resolveSchema.call(this,M,C),!Fe)return;this.refs[C]=Fe}return Fe.validate||this._compileSchemaEnv(Fe)}removeSchema(C){if(C instanceof RegExp)return this._removeAllSchemas(this.schemas,C),this._removeAllSchemas(this.refs,C),this;switch(typeof C){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const Fe=c.call(this,C);return typeof Fe=="object"&&this._cache.delete(Fe.schema),delete this.schemas[C],delete this.refs[C],this}case"object":{const Fe=C;this._cache.delete(Fe);let ve=C[this.opts.schemaId];return ve&&(ve=(0,b.normalizeId)(ve),delete this.schemas[ve],delete this.refs[ve]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(C){for(const Fe of C)this.addKeyword(Fe);return this}addKeyword(C,Fe){let ve;if(typeof C=="string")ve=C,typeof Fe=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),Fe.keyword=ve);else if(typeof C=="object"&&Fe===void 0){if(Fe=C,ve=Fe.keyword,Array.isArray(ve)&&!ve.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(ct.call(this,ve,Fe),!Fe)return(0,_.eachItem)(ve,G=>St.call(this,G)),this;Q.call(this,Fe);const M={...Fe,type:(0,t.getJSONTypes)(Fe.type),schemaType:(0,t.getJSONTypes)(Fe.schemaType)};return(0,_.eachItem)(ve,M.type.length===0?G=>St.call(this,G,M):G=>M.type.forEach(Re=>St.call(this,G,M,Re))),this}getKeyword(C){const Fe=this.RULES.all[C];return typeof Fe=="object"?Fe.definition:!!Fe}removeKeyword(C){const{RULES:Fe}=this;delete Fe.keywords[C],delete Fe.all[C];for(const ve of Fe.rules){const M=ve.rules.findIndex(G=>G.keyword===C);M>=0&&ve.rules.splice(M,1)}return this}addFormat(C,Fe){return typeof Fe=="string"&&(Fe=new RegExp(Fe)),this.formats[C]=Fe,this}errorsText(C=this.errors,{separator:Fe=", ",dataVar:ve="data"}={}){return!C||C.length===0?"No errors":C.map(M=>`${ve}${M.instancePath} ${M.message}`).reduce((M,G)=>M+Fe+G)}$dataMetaSchema(C,Fe){const ve=this.RULES.all;C=JSON.parse(JSON.stringify(C));for(const M of Fe){const G=M.split("/").slice(1);let Re=C;for(const Ne of G)Re=Re[Ne];for(const Ne in ve){const Me=ve[Ne];if(typeof Me!="object")continue;const{$data:Xe}=Me.definition,vt=Re[Ne];Xe&&vt&&(Re[Ne]=Ct(vt))}}return C}_removeAllSchemas(C,Fe){for(const ve in C){const M=C[ve];(!Fe||Fe.test(ve))&&(typeof M=="string"?delete C[ve]:M&&!M.meta&&(this._cache.delete(M.schema),delete C[ve]))}}_addSchema(C,Fe,ve,M=this.opts.validateSchema,G=this.opts.addUsedSchema){let Re;const{schemaId:Ne}=this.opts;if(typeof C=="object")Re=C[Ne];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof C!="boolean")throw new Error("schema must be object or boolean")}let Me=this._cache.get(C);if(Me!==void 0)return Me;ve=(0,b.normalizeId)(Re||ve);const Xe=b.getSchemaRefs.call(this,C,ve);return Me=new l.SchemaEnv({schema:C,schemaId:Ne,meta:Fe,baseId:ve,localRefs:Xe}),this._cache.set(Me.schema,Me),G&&!ve.startsWith("#")&&(ve&&this._checkUnique(ve),this.refs[ve]=Me),M&&this.validateSchema(C,!0),Me}_checkUnique(C){if(this.schemas[C]||this.refs[C])throw new Error(`schema with key or id "${C}" already exists`)}_compileSchemaEnv(C){if(C.meta?this._compileMetaSchema(C):l.compileSchema.call(this,C),!C.validate)throw new Error("ajv implementation error");return C.validate}_compileMetaSchema(C){const Fe=this.opts;this.opts=this._metaOpts;try{l.compileSchema.call(this,C)}finally{this.opts=Fe}}}u.default=x,x.ValidationError=m.default,x.MissingRefError=d.default;function R(Ge,C,Fe,ve="error"){for(const M in Ge){const G=M;G in C&&this.logger[ve](`${Fe}: option ${M}. ${Ge[G]}`)}}function c(Ge){return Ge=(0,b.normalizeId)(Ge),this.schemas[Ge]||this.refs[Ge]}function O(){const Ge=this.opts.schemas;if(!!Ge)if(Array.isArray(Ge))this.addSchema(Ge);else for(const C in Ge)this.addSchema(Ge[C],C)}function T(){for(const Ge in this.opts.formats){const C=this.opts.formats[Ge];C&&this.addFormat(Ge,C)}}function Ce(Ge){if(Array.isArray(Ge)){this.addVocabulary(Ge);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const C in Ge){const Fe=Ge[C];Fe.keyword||(Fe.keyword=C),this.addKeyword(Fe)}}function we(){const Ge={...this.opts};for(const C of V)delete Ge[C];return Ge}const nt={log(){},warn(){},error(){}};function ot(Ge){if(Ge===!1)return nt;if(Ge===void 0)return console;if(Ge.log&&Ge.warn&&Ge.error)return Ge;throw new Error("logger must implement log, warn and error methods")}const $t=/^[a-z_$][a-z0-9_$:-]*$/i;function ct(Ge,C){const{RULES:Fe}=this;if((0,_.eachItem)(Ge,ve=>{if(Fe.keywords[ve])throw new Error(`Keyword ${ve} is already defined`);if(!$t.test(ve))throw new Error(`Keyword ${ve} has invalid name`)}),!!C&&C.$data&&!("code"in C||"validate"in C))throw new Error('$data keyword must have "code" or "validate" function')}function St(Ge,C,Fe){var ve;const M=C==null?void 0:C.post;if(Fe&&M)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:G}=this;let Re=M?G.post:G.rules.find(({type:Me})=>Me===Fe);if(Re||(Re={type:Fe,rules:[]},G.rules.push(Re)),G.keywords[Ge]=!0,!C)return;const Ne={keyword:Ge,definition:{...C,type:(0,t.getJSONTypes)(C.type),schemaType:(0,t.getJSONTypes)(C.schemaType)}};C.before?xt.call(this,Re,Ne,C.before):Re.rules.push(Ne),G.all[Ge]=Ne,(ve=C.implements)===null||ve===void 0||ve.forEach(Me=>this.addKeyword(Me))}function xt(Ge,C,Fe){const ve=Ge.rules.findIndex(M=>M.keyword===Fe);ve>=0?Ge.rules.splice(ve,0,C):(Ge.rules.push(C),this.logger.warn(`rule ${Fe} is not defined`))}function Q(Ge){let{metaSchema:C}=Ge;C!==void 0&&(Ge.$data&&this.opts.$data&&(C=Ct(C)),Ge.validateSchema=this.compile(C,!0))}const pn={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function Ct(Ge){return{anyOf:[Ge,pn]}}},55947:function(Nt,u,e){Object.defineProperty(u,"__esModule",{value:!0});const n=e(69378);n.code='require("ajv/dist/runtime/equal").default',u.default=n},7836:function(Nt,u){Object.defineProperty(u,"__esModule",{value:!0});function e(n){const i=n.length;let m=0,d=0,a;for(;d<i;)m++,a=n.charCodeAt(d++),a>=55296&&a<=56319&&d<i&&(a=n.charCodeAt(d),(a&64512)===56320&&d++);return m}u.default=e,e.code='require("ajv/dist/runtime/ucs2length").default'},3075:function(Nt,u,e){Object.defineProperty(u,"__esModule",{value:!0});const n=e(12854);n.code='require("ajv/dist/runtime/uri").default',u.default=n},14319:function(Nt,u){Object.defineProperty(u,"__esModule",{value:!0});class e extends Error{constructor(i){super("validation failed"),this.errors=i,this.ajv=this.validation=!0}}u.default=e},52251:function(Nt,u,e){Object.defineProperty(u,"__esModule",{value:!0}),u.validateAdditionalItems=void 0;const n=e(82481),i=e(1849),d={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:l}})=>(0,n.str)`must NOT have more than ${l} items`,params:({params:{len:l}})=>(0,n._)`{limit: ${l}}`},code(l){const{parentSchema:y,it:b}=l,{items:t}=y;if(!Array.isArray(t)){(0,i.checkStrictMode)(b,'"additionalItems" is ignored when "items" is not an array of schemas');return}a(l,t)}};function a(l,y){const{gen:b,schema:t,data:_,keyword:g,it:F}=l;F.items=!0;const j=b.const("len",(0,n._)`${_}.length`);if(t===!1)l.setParams({len:y.length}),l.pass((0,n._)`${j} <= ${y.length}`);else if(typeof t=="object"&&!(0,i.alwaysValidSchema)(F,t)){const re=b.var("valid",(0,n._)`${j} <= ${y.length}`);b.if((0,n.not)(re),()=>V(re)),l.ok(re)}function V(re){b.forRange("i",y.length,j,w=>{l.subschema({keyword:g,dataProp:w,dataPropType:i.Type.Num},re),F.allErrors||b.if((0,n.not)(re),()=>b.break())})}}u.validateAdditionalItems=a,u.default=d},17831:function(Nt,u,e){Object.defineProperty(u,"__esModule",{value:!0});const n=e(9280),i=e(82481),m=e(99583),d=e(1849),l={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:y})=>(0,i._)`{additionalProperty: ${y.additionalProperty}}`},code(y){const{gen:b,schema:t,parentSchema:_,data:g,errsCount:F,it:j}=y;if(!F)throw new Error("ajv implementation error");const{allErrors:V,opts:re}=j;if(j.props=!0,re.removeAdditional!=="all"&&(0,d.alwaysValidSchema)(j,t))return;const w=(0,n.allSchemaProperties)(_.properties),A=(0,n.allSchemaProperties)(_.patternProperties);D(),y.ok((0,i._)`${F} === ${m.default.errors}`);function D(){b.forIn("key",g,O=>{!w.length&&!A.length?R(O):b.if(f(O),()=>R(O))})}function f(O){let T;if(w.length>8){const Ce=(0,d.schemaRefOrVal)(j,_.properties,"properties");T=(0,n.isOwnProperty)(b,Ce,O)}else w.length?T=(0,i.or)(...w.map(Ce=>(0,i._)`${O} === ${Ce}`)):T=i.nil;return A.length&&(T=(0,i.or)(T,...A.map(Ce=>(0,i._)`${(0,n.usePattern)(y,Ce)}.test(${O})`))),(0,i.not)(T)}function x(O){b.code((0,i._)`delete ${g}[${O}]`)}function R(O){if(re.removeAdditional==="all"||re.removeAdditional&&t===!1){x(O);return}if(t===!1){y.setParams({additionalProperty:O}),y.error(),V||b.break();return}if(typeof t=="object"&&!(0,d.alwaysValidSchema)(j,t)){const T=b.name("valid");re.removeAdditional==="failing"?(c(O,T,!1),b.if((0,i.not)(T),()=>{y.reset(),x(O)})):(c(O,T),V||b.if((0,i.not)(T),()=>b.break()))}}function c(O,T,Ce){const we={keyword:"additionalProperties",dataProp:O,dataPropType:d.Type.Str};Ce===!1&&Object.assign(we,{compositeRule:!0,createErrors:!1,allErrors:!1}),y.subschema(we,T)}}};u.default=l},15319:function(Nt,u,e){Object.defineProperty(u,"__esModule",{value:!0});const n=e(1849),i={keyword:"allOf",schemaType:"array",code(m){const{gen:d,schema:a,it:l}=m;if(!Array.isArray(a))throw new Error("ajv implementation error");const y=d.name("valid");a.forEach((b,t)=>{if((0,n.alwaysValidSchema)(l,b))return;const _=m.subschema({keyword:"allOf",schemaProp:t},y);m.ok(y),m.mergeEvaluated(_)})}};u.default=i},60513:function(Nt,u,e){Object.defineProperty(u,"__esModule",{value:!0});const i={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:e(9280).validateUnion,error:{message:"must match a schema in anyOf"}};u.default=i},51622:function(Nt,u,e){Object.defineProperty(u,"__esModule",{value:!0});const n=e(82481),i=e(1849),d={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:a,max:l}})=>l===void 0?(0,n.str)`must contain at least ${a} valid item(s)`:(0,n.str)`must contain at least ${a} and no more than ${l} valid item(s)`,params:({params:{min:a,max:l}})=>l===void 0?(0,n._)`{minContains: ${a}}`:(0,n._)`{minContains: ${a}, maxContains: ${l}}`},code(a){const{gen:l,schema:y,parentSchema:b,data:t,it:_}=a;let g,F;const{minContains:j,maxContains:V}=b;_.opts.next?(g=j===void 0?1:j,F=V):g=1;const re=l.const("len",(0,n._)`${t}.length`);if(a.setParams({min:g,max:F}),F===void 0&&g===0){(0,i.checkStrictMode)(_,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(F!==void 0&&g>F){(0,i.checkStrictMode)(_,'"minContains" > "maxContains" is always invalid'),a.fail();return}if((0,i.alwaysValidSchema)(_,y)){let x=(0,n._)`${re} >= ${g}`;F!==void 0&&(x=(0,n._)`${x} && ${re} <= ${F}`),a.pass(x);return}_.items=!0;const w=l.name("valid");F===void 0&&g===1?D(w,()=>l.if(w,()=>l.break())):g===0?(l.let(w,!0),F!==void 0&&l.if((0,n._)`${t}.length > 0`,A)):(l.let(w,!1),A()),a.result(w,()=>a.reset());function A(){const x=l.name("_valid"),R=l.let("count",0);D(x,()=>l.if(x,()=>f(R)))}function D(x,R){l.forRange("i",0,re,c=>{a.subschema({keyword:"contains",dataProp:c,dataPropType:i.Type.Num,compositeRule:!0},x),R()})}function f(x){l.code((0,n._)`${x}++`),F===void 0?l.if((0,n._)`${x} >= ${g}`,()=>l.assign(w,!0).break()):(l.if((0,n._)`${x} > ${F}`,()=>l.assign(w,!1).break()),g===1?l.assign(w,!0):l.if((0,n._)`${x} >= ${g}`,()=>l.assign(w,!0)))}}};u.default=d},8524:function(Nt,u,e){Object.defineProperty(u,"__esModule",{value:!0}),u.validateSchemaDeps=u.validatePropertyDeps=u.error=void 0;const n=e(82481),i=e(1849),m=e(9280);u.error={message:({params:{property:b,depsCount:t,deps:_}})=>{const g=t===1?"property":"properties";return(0,n.str)`must have ${g} ${_} when property ${b} is present`},params:({params:{property:b,depsCount:t,deps:_,missingProperty:g}})=>(0,n._)`{property: ${b},
    missingProperty: ${g},
    depsCount: ${t},
    deps: ${_}}`};const d={keyword:"dependencies",type:"object",schemaType:"object",error:u.error,code(b){const[t,_]=a(b);l(b,t),y(b,_)}};function a({schema:b}){const t={},_={};for(const g in b){if(g==="__proto__")continue;const F=Array.isArray(b[g])?t:_;F[g]=b[g]}return[t,_]}function l(b,t=b.schema){const{gen:_,data:g,it:F}=b;if(Object.keys(t).length===0)return;const j=_.let("missing");for(const V in t){const re=t[V];if(re.length===0)continue;const w=(0,m.propertyInData)(_,g,V,F.opts.ownProperties);b.setParams({property:V,depsCount:re.length,deps:re.join(", ")}),F.allErrors?_.if(w,()=>{for(const A of re)(0,m.checkReportMissingProp)(b,A)}):(_.if((0,n._)`${w} && (${(0,m.checkMissingProp)(b,re,j)})`),(0,m.reportMissingProp)(b,j),_.else())}}u.validatePropertyDeps=l;function y(b,t=b.schema){const{gen:_,data:g,keyword:F,it:j}=b,V=_.name("valid");for(const re in t)(0,i.alwaysValidSchema)(j,t[re])||(_.if((0,m.propertyInData)(_,g,re,j.opts.ownProperties),()=>{const w=b.subschema({keyword:F,schemaProp:re},V);b.mergeValidEvaluated(w,V)},()=>_.var(V,!0)),b.ok(V))}u.validateSchemaDeps=y,u.default=d},74413:function(Nt,u,e){Object.defineProperty(u,"__esModule",{value:!0});const n=e(82481),i=e(1849),d={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:l})=>(0,n.str)`must match "${l.ifClause}" schema`,params:({params:l})=>(0,n._)`{failingKeyword: ${l.ifClause}}`},code(l){const{gen:y,parentSchema:b,it:t}=l;b.then===void 0&&b.else===void 0&&(0,i.checkStrictMode)(t,'"if" without "then" and "else" is ignored');const _=a(t,"then"),g=a(t,"else");if(!_&&!g)return;const F=y.let("valid",!0),j=y.name("_valid");if(V(),l.reset(),_&&g){const w=y.let("ifClause");l.setParams({ifClause:w}),y.if(j,re("then",w),re("else",w))}else _?y.if(j,re("then")):y.if((0,n.not)(j),re("else"));l.pass(F,()=>l.error(!0));function V(){const w=l.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},j);l.mergeEvaluated(w)}function re(w,A){return()=>{const D=l.subschema({keyword:w},j);y.assign(F,j),l.mergeValidEvaluated(D,F),A?y.assign(A,(0,n._)`${w}`):l.setParams({ifClause:w})}}}};function a(l,y){const b=l.schema[y];return b!==void 0&&!(0,i.alwaysValidSchema)(l,b)}u.default=d},14226:function(Nt,u,e){Object.defineProperty(u,"__esModule",{value:!0});const n=e(52251),i=e(38968),m=e(3042),d=e(69719),a=e(51622),l=e(8524),y=e(53261),b=e(17831),t=e(81734),_=e(47673),g=e(73270),F=e(60513),j=e(84959),V=e(15319),re=e(74413),w=e(5095);function A(D=!1){const f=[g.default,F.default,j.default,V.default,re.default,w.default,y.default,b.default,l.default,t.default,_.default];return D?f.push(i.default,d.default):f.push(n.default,m.default),f.push(a.default),f}u.default=A},3042:function(Nt,u,e){Object.defineProperty(u,"__esModule",{value:!0}),u.validateTuple=void 0;const n=e(82481),i=e(1849),m=e(9280),d={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(l){const{schema:y,it:b}=l;if(Array.isArray(y))return a(l,"additionalItems",y);b.items=!0,!(0,i.alwaysValidSchema)(b,y)&&l.ok((0,m.validateArray)(l))}};function a(l,y,b=l.schema){const{gen:t,parentSchema:_,data:g,keyword:F,it:j}=l;w(_),j.opts.unevaluated&&b.length&&j.items!==!0&&(j.items=i.mergeEvaluated.items(t,b.length,j.items));const V=t.name("valid"),re=t.const("len",(0,n._)`${g}.length`);b.forEach((A,D)=>{(0,i.alwaysValidSchema)(j,A)||(t.if((0,n._)`${re} > ${D}`,()=>l.subschema({keyword:F,schemaProp:D,dataProp:D},V)),l.ok(V))});function w(A){const{opts:D,errSchemaPath:f}=j,x=b.length,R=x===A.minItems&&(x===A.maxItems||A[y]===!1);if(D.strictTuples&&!R){const c=`"${F}" is ${x}-tuple, but minItems or maxItems/${y} are not specified or different at path "${f}"`;(0,i.checkStrictMode)(j,c,D.strictTuples)}}}u.validateTuple=a,u.default=d},69719:function(Nt,u,e){Object.defineProperty(u,"__esModule",{value:!0});const n=e(82481),i=e(1849),m=e(9280),d=e(52251),l={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:y}})=>(0,n.str)`must NOT have more than ${y} items`,params:({params:{len:y}})=>(0,n._)`{limit: ${y}}`},code(y){const{schema:b,parentSchema:t,it:_}=y,{prefixItems:g}=t;_.items=!0,!(0,i.alwaysValidSchema)(_,b)&&(g?(0,d.validateAdditionalItems)(y,g):y.ok((0,m.validateArray)(y)))}};u.default=l},73270:function(Nt,u,e){Object.defineProperty(u,"__esModule",{value:!0});const n=e(1849),i={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(m){const{gen:d,schema:a,it:l}=m;if((0,n.alwaysValidSchema)(l,a)){m.fail();return}const y=d.name("valid");m.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},y),m.failResult(y,()=>m.reset(),()=>m.error())},error:{message:"must NOT be valid"}};u.default=i},84959:function(Nt,u,e){Object.defineProperty(u,"__esModule",{value:!0});const n=e(82481),i=e(1849),d={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:a})=>(0,n._)`{passingSchemas: ${a.passing}}`},code(a){const{gen:l,schema:y,parentSchema:b,it:t}=a;if(!Array.isArray(y))throw new Error("ajv implementation error");if(t.opts.discriminator&&b.discriminator)return;const _=y,g=l.let("valid",!1),F=l.let("passing",null),j=l.name("_valid");a.setParams({passing:F}),l.block(V),a.result(g,()=>a.reset(),()=>a.error(!0));function V(){_.forEach((re,w)=>{let A;(0,i.alwaysValidSchema)(t,re)?l.var(j,!0):A=a.subschema({keyword:"oneOf",schemaProp:w,compositeRule:!0},j),w>0&&l.if((0,n._)`${j} && ${g}`).assign(g,!1).assign(F,(0,n._)`[${F}, ${w}]`).else(),l.if(j,()=>{l.assign(g,!0),l.assign(F,w),A&&a.mergeEvaluated(A,n.Name)})})}}};u.default=d},47673:function(Nt,u,e){Object.defineProperty(u,"__esModule",{value:!0});const n=e(9280),i=e(82481),m=e(1849),d=e(1849),a={keyword:"patternProperties",type:"object",schemaType:"object",code(l){const{gen:y,schema:b,data:t,parentSchema:_,it:g}=l,{opts:F}=g,j=(0,n.allSchemaProperties)(b),V=j.filter(R=>(0,m.alwaysValidSchema)(g,b[R]));if(j.length===0||V.length===j.length&&(!g.opts.unevaluated||g.props===!0))return;const re=F.strictSchema&&!F.allowMatchingProperties&&_.properties,w=y.name("valid");g.props!==!0&&!(g.props instanceof i.Name)&&(g.props=(0,d.evaluatedPropsToName)(y,g.props));const{props:A}=g;D();function D(){for(const R of j)re&&f(R),g.allErrors?x(R):(y.var(w,!0),x(R),y.if(w))}function f(R){for(const c in re)new RegExp(R).test(c)&&(0,m.checkStrictMode)(g,`property ${c} matches pattern ${R} (use allowMatchingProperties)`)}function x(R){y.forIn("key",t,c=>{y.if((0,i._)`${(0,n.usePattern)(l,R)}.test(${c})`,()=>{const O=V.includes(R);O||l.subschema({keyword:"patternProperties",schemaProp:R,dataProp:c,dataPropType:d.Type.Str},w),g.opts.unevaluated&&A!==!0?y.assign((0,i._)`${A}[${c}]`,!0):!O&&!g.allErrors&&y.if((0,i.not)(w),()=>y.break())})})}}};u.default=a},38968:function(Nt,u,e){Object.defineProperty(u,"__esModule",{value:!0});const n=e(3042),i={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:m=>(0,n.validateTuple)(m,"items")};u.default=i},81734:function(Nt,u,e){Object.defineProperty(u,"__esModule",{value:!0});const n=e(4371),i=e(9280),m=e(1849),d=e(17831),a={keyword:"properties",type:"object",schemaType:"object",code(l){const{gen:y,schema:b,parentSchema:t,data:_,it:g}=l;g.opts.removeAdditional==="all"&&t.additionalProperties===void 0&&d.default.code(new n.KeywordCxt(g,d.default,"additionalProperties"));const F=(0,i.allSchemaProperties)(b);for(const A of F)g.definedProperties.add(A);g.opts.unevaluated&&F.length&&g.props!==!0&&(g.props=m.mergeEvaluated.props(y,(0,m.toHash)(F),g.props));const j=F.filter(A=>!(0,m.alwaysValidSchema)(g,b[A]));if(j.length===0)return;const V=y.name("valid");for(const A of j)re(A)?w(A):(y.if((0,i.propertyInData)(y,_,A,g.opts.ownProperties)),w(A),g.allErrors||y.else().var(V,!0),y.endIf()),l.it.definedProperties.add(A),l.ok(V);function re(A){return g.opts.useDefaults&&!g.compositeRule&&b[A].default!==void 0}function w(A){l.subschema({keyword:"properties",schemaProp:A,dataProp:A},V)}}};u.default=a},53261:function(Nt,u,e){Object.defineProperty(u,"__esModule",{value:!0});const n=e(82481),i=e(1849),d={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:a})=>(0,n._)`{propertyName: ${a.propertyName}}`},code(a){const{gen:l,schema:y,data:b,it:t}=a;if((0,i.alwaysValidSchema)(t,y))return;const _=l.name("valid");l.forIn("key",b,g=>{a.setParams({propertyName:g}),a.subschema({keyword:"propertyNames",data:g,dataTypes:["string"],propertyName:g,compositeRule:!0},_),l.if((0,n.not)(_),()=>{a.error(!0),t.allErrors||l.break()})}),a.ok(_)}};u.default=d},5095:function(Nt,u,e){Object.defineProperty(u,"__esModule",{value:!0});const n=e(1849),i={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:m,parentSchema:d,it:a}){d.if===void 0&&(0,n.checkStrictMode)(a,`"${m}" without "if" is ignored`)}};u.default=i},9280:function(Nt,u,e){Object.defineProperty(u,"__esModule",{value:!0}),u.validateUnion=u.validateArray=u.usePattern=u.callValidateCode=u.schemaProperties=u.allSchemaProperties=u.noPropertyInData=u.propertyInData=u.isOwnProperty=u.hasPropFunc=u.reportMissingProp=u.checkMissingProp=u.checkReportMissingProp=void 0;const n=e(82481),i=e(1849),m=e(99583),d=e(1849);function a(f,x){const{gen:R,data:c,it:O}=f;R.if(g(R,c,x,O.opts.ownProperties),()=>{f.setParams({missingProperty:(0,n._)`${x}`},!0),f.error()})}u.checkReportMissingProp=a;function l({gen:f,data:x,it:{opts:R}},c,O){return(0,n.or)(...c.map(T=>(0,n.and)(g(f,x,T,R.ownProperties),(0,n._)`${O} = ${T}`)))}u.checkMissingProp=l;function y(f,x){f.setParams({missingProperty:x},!0),f.error()}u.reportMissingProp=y;function b(f){return f.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,n._)`Object.prototype.hasOwnProperty`})}u.hasPropFunc=b;function t(f,x,R){return(0,n._)`${b(f)}.call(${x}, ${R})`}u.isOwnProperty=t;function _(f,x,R,c){const O=(0,n._)`${x}${(0,n.getProperty)(R)} !== undefined`;return c?(0,n._)`${O} && ${t(f,x,R)}`:O}u.propertyInData=_;function g(f,x,R,c){const O=(0,n._)`${x}${(0,n.getProperty)(R)} === undefined`;return c?(0,n.or)(O,(0,n.not)(t(f,x,R))):O}u.noPropertyInData=g;function F(f){return f?Object.keys(f).filter(x=>x!=="__proto__"):[]}u.allSchemaProperties=F;function j(f,x){return F(x).filter(R=>!(0,i.alwaysValidSchema)(f,x[R]))}u.schemaProperties=j;function V({schemaCode:f,data:x,it:{gen:R,topSchemaRef:c,schemaPath:O,errorPath:T},it:Ce},we,nt,ot){const $t=ot?(0,n._)`${f}, ${x}, ${c}${O}`:x,ct=[[m.default.instancePath,(0,n.strConcat)(m.default.instancePath,T)],[m.default.parentData,Ce.parentData],[m.default.parentDataProperty,Ce.parentDataProperty],[m.default.rootData,m.default.rootData]];Ce.opts.dynamicRef&&ct.push([m.default.dynamicAnchors,m.default.dynamicAnchors]);const St=(0,n._)`${$t}, ${R.object(...ct)}`;return nt!==n.nil?(0,n._)`${we}.call(${nt}, ${St})`:(0,n._)`${we}(${St})`}u.callValidateCode=V;const re=(0,n._)`new RegExp`;function w({gen:f,it:{opts:x}},R){const c=x.unicodeRegExp?"u":"",{regExp:O}=x.code,T=O(R,c);return f.scopeValue("pattern",{key:T.toString(),ref:T,code:(0,n._)`${O.code==="new RegExp"?re:(0,d.useFunc)(f,O)}(${R}, ${c})`})}u.usePattern=w;function A(f){const{gen:x,data:R,keyword:c,it:O}=f,T=x.name("valid");if(O.allErrors){const we=x.let("valid",!0);return Ce(()=>x.assign(we,!1)),we}return x.var(T,!0),Ce(()=>x.break()),T;function Ce(we){const nt=x.const("len",(0,n._)`${R}.length`);x.forRange("i",0,nt,ot=>{f.subschema({keyword:c,dataProp:ot,dataPropType:i.Type.Num},T),x.if((0,n.not)(T),we)})}}u.validateArray=A;function D(f){const{gen:x,schema:R,keyword:c,it:O}=f;if(!Array.isArray(R))throw new Error("ajv implementation error");if(R.some(nt=>(0,i.alwaysValidSchema)(O,nt))&&!O.opts.unevaluated)return;const Ce=x.let("valid",!1),we=x.name("_valid");x.block(()=>R.forEach((nt,ot)=>{const $t=f.subschema({keyword:c,schemaProp:ot,compositeRule:!0},we);x.assign(Ce,(0,n._)`${Ce} || ${we}`),f.mergeValidEvaluated($t,we)||x.if((0,n.not)(Ce))})),f.result(Ce,()=>f.reset(),()=>f.error(!0))}u.validateUnion=D},5671:function(Nt,u){Object.defineProperty(u,"__esModule",{value:!0});const e={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};u.default=e},10356:function(Nt,u,e){Object.defineProperty(u,"__esModule",{value:!0});const n=e(5671),i=e(24302),m=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",n.default,i.default];u.default=m},24302:function(Nt,u,e){Object.defineProperty(u,"__esModule",{value:!0}),u.callRef=u.getValidate=void 0;const n=e(30283),i=e(9280),m=e(82481),d=e(99583),a=e(62902),l=e(1849),y={keyword:"$ref",schemaType:"string",code(_){const{gen:g,schema:F,it:j}=_,{baseId:V,schemaEnv:re,validateName:w,opts:A,self:D}=j,{root:f}=re;if((F==="#"||F==="#/")&&V===f.baseId)return R();const x=a.resolveRef.call(D,f,V,F);if(x===void 0)throw new n.default(j.opts.uriResolver,V,F);if(x instanceof a.SchemaEnv)return c(x);return O(x);function R(){if(re===f)return t(_,w,re,re.$async);const T=g.scopeValue("root",{ref:f});return t(_,(0,m._)`${T}.validate`,f,f.$async)}function c(T){const Ce=b(_,T);t(_,Ce,T,T.$async)}function O(T){const Ce=g.scopeValue("schema",A.code.source===!0?{ref:T,code:(0,m.stringify)(T)}:{ref:T}),we=g.name("valid"),nt=_.subschema({schema:T,dataTypes:[],schemaPath:m.nil,topSchemaRef:Ce,errSchemaPath:F},we);_.mergeEvaluated(nt),_.ok(we)}}};function b(_,g){const{gen:F}=_;return g.validate?F.scopeValue("validate",{ref:g.validate}):(0,m._)`${F.scopeValue("wrapper",{ref:g})}.validate`}u.getValidate=b;function t(_,g,F,j){const{gen:V,it:re}=_,{allErrors:w,schemaEnv:A,opts:D}=re,f=D.passContext?d.default.this:m.nil;j?x():R();function x(){if(!A.$async)throw new Error("async schema referenced by sync schema");const T=V.let("valid");V.try(()=>{V.code((0,m._)`await ${(0,i.callValidateCode)(_,g,f)}`),O(g),w||V.assign(T,!0)},Ce=>{V.if((0,m._)`!(${Ce} instanceof ${re.ValidationError})`,()=>V.throw(Ce)),c(Ce),w||V.assign(T,!1)}),_.ok(T)}function R(){_.result((0,i.callValidateCode)(_,g,f),()=>O(g),()=>c(g))}function c(T){const Ce=(0,m._)`${T}.errors`;V.assign(d.default.vErrors,(0,m._)`${d.default.vErrors} === null ? ${Ce} : ${d.default.vErrors}.concat(${Ce})`),V.assign(d.default.errors,(0,m._)`${d.default.vErrors}.length`)}function O(T){var Ce;if(!re.opts.unevaluated)return;const we=(Ce=F==null?void 0:F.validate)===null||Ce===void 0?void 0:Ce.evaluated;if(re.props!==!0)if(we&&!we.dynamicProps)we.props!==void 0&&(re.props=l.mergeEvaluated.props(V,we.props,re.props));else{const nt=V.var("props",(0,m._)`${T}.evaluated.props`);re.props=l.mergeEvaluated.props(V,nt,re.props,m.Name)}if(re.items!==!0)if(we&&!we.dynamicItems)we.items!==void 0&&(re.items=l.mergeEvaluated.items(V,we.items,re.items));else{const nt=V.var("items",(0,m._)`${T}.evaluated.items`);re.items=l.mergeEvaluated.items(V,nt,re.items,m.Name)}}}u.callRef=t,u.default=y},99908:function(Nt,u,e){Object.defineProperty(u,"__esModule",{value:!0});const n=e(82481),i=e(521),m=e(62902),d=e(1849),l={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:y,tagName:b}})=>y===i.DiscrError.Tag?`tag "${b}" must be string`:`value of tag "${b}" must be in oneOf`,params:({params:{discrError:y,tag:b,tagName:t}})=>(0,n._)`{error: ${y}, tag: ${t}, tagValue: ${b}}`},code(y){const{gen:b,data:t,schema:_,parentSchema:g,it:F}=y,{oneOf:j}=g;if(!F.opts.discriminator)throw new Error("discriminator: requires discriminator option");const V=_.propertyName;if(typeof V!="string")throw new Error("discriminator: requires propertyName");if(_.mapping)throw new Error("discriminator: mapping is not supported");if(!j)throw new Error("discriminator: requires oneOf keyword");const re=b.let("valid",!1),w=b.const("tag",(0,n._)`${t}${(0,n.getProperty)(V)}`);b.if((0,n._)`typeof ${w} == "string"`,()=>A(),()=>y.error(!1,{discrError:i.DiscrError.Tag,tag:w,tagName:V})),y.ok(re);function A(){const x=f();b.if(!1);for(const R in x)b.elseIf((0,n._)`${w} === ${R}`),b.assign(re,D(x[R]));b.else(),y.error(!1,{discrError:i.DiscrError.Mapping,tag:w,tagName:V}),b.endIf()}function D(x){const R=b.name("valid"),c=y.subschema({keyword:"oneOf",schemaProp:x},R);return y.mergeEvaluated(c,n.Name),R}function f(){var x;const R={},c=T(g);let O=!0;for(let nt=0;nt<j.length;nt++){let ot=j[nt];(ot==null?void 0:ot.$ref)&&!(0,d.schemaHasRulesButRef)(ot,F.self.RULES)&&(ot=m.resolveRef.call(F.self,F.schemaEnv.root,F.baseId,ot==null?void 0:ot.$ref),ot instanceof m.SchemaEnv&&(ot=ot.schema));const $t=(x=ot==null?void 0:ot.properties)===null||x===void 0?void 0:x[V];if(typeof $t!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${V}"`);O=O&&(c||T(ot)),Ce($t,nt)}if(!O)throw new Error(`discriminator: "${V}" must be required`);return R;function T({required:nt}){return Array.isArray(nt)&&nt.includes(V)}function Ce(nt,ot){if(nt.const)we(nt.const,ot);else if(nt.enum)for(const $t of nt.enum)we($t,ot);else throw new Error(`discriminator: "properties/${V}" must have "const" or "enum"`)}function we(nt,ot){if(typeof nt!="string"||nt in R)throw new Error(`discriminator: "${V}" values must be unique strings`);R[nt]=ot}}}};u.default=l},521:function(Nt,u){Object.defineProperty(u,"__esModule",{value:!0}),u.DiscrError=void 0;var e;(function(n){n.Tag="tag",n.Mapping="mapping"})(e=u.DiscrError||(u.DiscrError={}))},57993:function(Nt,u,e){Object.defineProperty(u,"__esModule",{value:!0});const n=e(10356),i=e(16282),m=e(14226),d=e(6989),a=e(68373),l=[n.default,i.default,(0,m.default)(),d.default,a.metadataVocabulary,a.contentVocabulary];u.default=l},43202:function(Nt,u,e){Object.defineProperty(u,"__esModule",{value:!0});const n=e(82481),m={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:d})=>(0,n.str)`must match format "${d}"`,params:({schemaCode:d})=>(0,n._)`{format: ${d}}`},code(d,a){const{gen:l,data:y,$data:b,schema:t,schemaCode:_,it:g}=d,{opts:F,errSchemaPath:j,schemaEnv:V,self:re}=g;if(!F.validateFormats)return;b?w():A();function w(){const D=l.scopeValue("formats",{ref:re.formats,code:F.code.formats}),f=l.const("fDef",(0,n._)`${D}[${_}]`),x=l.let("fType"),R=l.let("format");l.if((0,n._)`typeof ${f} == "object" && !(${f} instanceof RegExp)`,()=>l.assign(x,(0,n._)`${f}.type || "string"`).assign(R,(0,n._)`${f}.validate`),()=>l.assign(x,(0,n._)`"string"`).assign(R,f)),d.fail$data((0,n.or)(c(),O()));function c(){return F.strictSchema===!1?n.nil:(0,n._)`${_} && !${R}`}function O(){const T=V.$async?(0,n._)`(${f}.async ? await ${R}(${y}) : ${R}(${y}))`:(0,n._)`${R}(${y})`,Ce=(0,n._)`(typeof ${R} == "function" ? ${T} : ${R}.test(${y}))`;return(0,n._)`${R} && ${R} !== true && ${x} === ${a} && !${Ce}`}}function A(){const D=re.formats[t];if(!D){c();return}if(D===!0)return;const[f,x,R]=O(D);f===a&&d.pass(T());function c(){if(F.strictSchema===!1){re.logger.warn(Ce());return}throw new Error(Ce());function Ce(){return`unknown format "${t}" ignored in schema at path "${j}"`}}function O(Ce){const we=Ce instanceof RegExp?(0,n.regexpCode)(Ce):F.code.formats?(0,n._)`${F.code.formats}${(0,n.getProperty)(t)}`:void 0,nt=l.scopeValue("formats",{key:t,ref:Ce,code:we});return typeof Ce=="object"&&!(Ce instanceof RegExp)?[Ce.type||"string",Ce.validate,(0,n._)`${nt}.validate`]:["string",Ce,nt]}function T(){if(typeof D=="object"&&!(D instanceof RegExp)&&D.async){if(!V.$async)throw new Error("async format in sync schema");return(0,n._)`await ${R}(${y})`}return typeof x=="function"?(0,n._)`${R}(${y})`:(0,n._)`${R}.test(${y})`}}}};u.default=m},6989:function(Nt,u,e){Object.defineProperty(u,"__esModule",{value:!0});const i=[e(43202).default];u.default=i},68373:function(Nt,u){Object.defineProperty(u,"__esModule",{value:!0}),u.contentVocabulary=u.metadataVocabulary=void 0,u.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],u.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]},80750:function(Nt,u,e){Object.defineProperty(u,"__esModule",{value:!0});const n=e(82481),i=e(1849),m=e(55947),a={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:l})=>(0,n._)`{allowedValue: ${l}}`},code(l){const{gen:y,data:b,$data:t,schemaCode:_,schema:g}=l;t||g&&typeof g=="object"?l.fail$data((0,n._)`!${(0,i.useFunc)(y,m.default)}(${b}, ${_})`):l.fail((0,n._)`${g} !== ${b}`)}};u.default=a},28109:function(Nt,u,e){Object.defineProperty(u,"__esModule",{value:!0});const n=e(82481),i=e(1849),m=e(55947),a={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:l})=>(0,n._)`{allowedValues: ${l}}`},code(l){const{gen:y,data:b,$data:t,schema:_,schemaCode:g,it:F}=l;if(!t&&_.length===0)throw new Error("enum must have non-empty array");const j=_.length>=F.opts.loopEnum;let V;const re=()=>V!=null?V:V=(0,i.useFunc)(y,m.default);let w;if(j||t)w=y.let("valid"),l.block$data(w,A);else{if(!Array.isArray(_))throw new Error("ajv implementation error");const f=y.const("vSchema",g);w=(0,n.or)(..._.map((x,R)=>D(f,R)))}l.pass(w);function A(){y.assign(w,!1),y.forOf("v",g,f=>y.if((0,n._)`${re()}(${b}, ${f})`,()=>y.assign(w,!0).break()))}function D(f,x){const R=_[x];return typeof R=="object"&&R!==null?(0,n._)`${re()}(${b}, ${f}[${x}])`:(0,n._)`${b} === ${R}`}}};u.default=a},16282:function(Nt,u,e){Object.defineProperty(u,"__esModule",{value:!0});const n=e(41619),i=e(36701),m=e(34660),d=e(72326),a=e(69354),l=e(60881),y=e(42632),b=e(41985),t=e(80750),_=e(28109),g=[n.default,i.default,m.default,d.default,a.default,l.default,y.default,b.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},t.default,_.default];u.default=g},42632:function(Nt,u,e){Object.defineProperty(u,"__esModule",{value:!0});const n=e(82481),m={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:d,schemaCode:a}){const l=d==="maxItems"?"more":"fewer";return(0,n.str)`must NOT have ${l} than ${a} items`},params:({schemaCode:d})=>(0,n._)`{limit: ${d}}`},code(d){const{keyword:a,data:l,schemaCode:y}=d,b=a==="maxItems"?n.operators.GT:n.operators.LT;d.fail$data((0,n._)`${l}.length ${b} ${y}`)}};u.default=m},34660:function(Nt,u,e){Object.defineProperty(u,"__esModule",{value:!0});const n=e(82481),i=e(1849),m=e(7836),a={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:l,schemaCode:y}){const b=l==="maxLength"?"more":"fewer";return(0,n.str)`must NOT have ${b} than ${y} characters`},params:({schemaCode:l})=>(0,n._)`{limit: ${l}}`},code(l){const{keyword:y,data:b,schemaCode:t,it:_}=l,g=y==="maxLength"?n.operators.GT:n.operators.LT,F=_.opts.unicode===!1?(0,n._)`${b}.length`:(0,n._)`${(0,i.useFunc)(l.gen,m.default)}(${b})`;l.fail$data((0,n._)`${F} ${g} ${t}`)}};u.default=a},41619:function(Nt,u,e){Object.defineProperty(u,"__esModule",{value:!0});const n=e(82481),i=n.operators,m={maximum:{okStr:"<=",ok:i.LTE,fail:i.GT},minimum:{okStr:">=",ok:i.GTE,fail:i.LT},exclusiveMaximum:{okStr:"<",ok:i.LT,fail:i.GTE},exclusiveMinimum:{okStr:">",ok:i.GT,fail:i.LTE}},d={message:({keyword:l,schemaCode:y})=>(0,n.str)`must be ${m[l].okStr} ${y}`,params:({keyword:l,schemaCode:y})=>(0,n._)`{comparison: ${m[l].okStr}, limit: ${y}}`},a={keyword:Object.keys(m),type:"number",schemaType:"number",$data:!0,error:d,code(l){const{keyword:y,data:b,schemaCode:t}=l;l.fail$data((0,n._)`${b} ${m[y].fail} ${t} || isNaN(${b})`)}};u.default=a},69354:function(Nt,u,e){Object.defineProperty(u,"__esModule",{value:!0});const n=e(82481),m={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:d,schemaCode:a}){const l=d==="maxProperties"?"more":"fewer";return(0,n.str)`must NOT have ${l} than ${a} properties`},params:({schemaCode:d})=>(0,n._)`{limit: ${d}}`},code(d){const{keyword:a,data:l,schemaCode:y}=d,b=a==="maxProperties"?n.operators.GT:n.operators.LT;d.fail$data((0,n._)`Object.keys(${l}).length ${b} ${y}`)}};u.default=m},36701:function(Nt,u,e){Object.defineProperty(u,"__esModule",{value:!0});const n=e(82481),m={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:d})=>(0,n.str)`must be multiple of ${d}`,params:({schemaCode:d})=>(0,n._)`{multipleOf: ${d}}`},code(d){const{gen:a,data:l,schemaCode:y,it:b}=d,t=b.opts.multipleOfPrecision,_=a.let("res"),g=t?(0,n._)`Math.abs(Math.round(${_}) - ${_}) > 1e-${t}`:(0,n._)`${_} !== parseInt(${_})`;d.fail$data((0,n._)`(${y} === 0 || (${_} = ${l}/${y}, ${g}))`)}};u.default=m},72326:function(Nt,u,e){Object.defineProperty(u,"__esModule",{value:!0});const n=e(9280),i=e(82481),d={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:a})=>(0,i.str)`must match pattern "${a}"`,params:({schemaCode:a})=>(0,i._)`{pattern: ${a}}`},code(a){const{data:l,$data:y,schema:b,schemaCode:t,it:_}=a,g=_.opts.unicodeRegExp?"u":"",F=y?(0,i._)`(new RegExp(${t}, ${g}))`:(0,n.usePattern)(a,b);a.fail$data((0,i._)`!${F}.test(${l})`)}};u.default=d},60881:function(Nt,u,e){Object.defineProperty(u,"__esModule",{value:!0});const n=e(9280),i=e(82481),m=e(1849),a={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:l}})=>(0,i.str)`must have required property '${l}'`,params:({params:{missingProperty:l}})=>(0,i._)`{missingProperty: ${l}}`},code(l){const{gen:y,schema:b,schemaCode:t,data:_,$data:g,it:F}=l,{opts:j}=F;if(!g&&b.length===0)return;const V=b.length>=j.loopRequired;if(F.allErrors?re():w(),j.strictRequired){const f=l.parentSchema.properties,{definedProperties:x}=l.it;for(const R of b)if((f==null?void 0:f[R])===void 0&&!x.has(R)){const c=F.schemaEnv.baseId+F.errSchemaPath,O=`required property "${R}" is not defined at "${c}" (strictRequired)`;(0,m.checkStrictMode)(F,O,F.opts.strictRequired)}}function re(){if(V||g)l.block$data(i.nil,A);else for(const f of b)(0,n.checkReportMissingProp)(l,f)}function w(){const f=y.let("missing");if(V||g){const x=y.let("valid",!0);l.block$data(x,()=>D(f,x)),l.ok(x)}else y.if((0,n.checkMissingProp)(l,b,f)),(0,n.reportMissingProp)(l,f),y.else()}function A(){y.forOf("prop",t,f=>{l.setParams({missingProperty:f}),y.if((0,n.noPropertyInData)(y,_,f,j.ownProperties),()=>l.error())})}function D(f,x){l.setParams({missingProperty:f}),y.forOf(f,t,()=>{y.assign(x,(0,n.propertyInData)(y,_,f,j.ownProperties)),y.if((0,i.not)(x),()=>{l.error(),y.break()})},i.nil)}}};u.default=a},41985:function(Nt,u,e){Object.defineProperty(u,"__esModule",{value:!0});const n=e(93277),i=e(82481),m=e(1849),d=e(55947),l={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:y,j:b}})=>(0,i.str)`must NOT have duplicate items (items ## ${b} and ${y} are identical)`,params:({params:{i:y,j:b}})=>(0,i._)`{i: ${y}, j: ${b}}`},code(y){const{gen:b,data:t,$data:_,schema:g,parentSchema:F,schemaCode:j,it:V}=y;if(!_&&!g)return;const re=b.let("valid"),w=F.items?(0,n.getSchemaTypes)(F.items):[];y.block$data(re,A,(0,i._)`${j} === false`),y.ok(re);function A(){const R=b.let("i",(0,i._)`${t}.length`),c=b.let("j");y.setParams({i:R,j:c}),b.assign(re,!0),b.if((0,i._)`${R} > 1`,()=>(D()?f:x)(R,c))}function D(){return w.length>0&&!w.some(R=>R==="object"||R==="array")}function f(R,c){const O=b.name("item"),T=(0,n.checkDataTypes)(w,O,V.opts.strictNumbers,n.DataType.Wrong),Ce=b.const("indices",(0,i._)`{}`);b.for((0,i._)`;${R}--;`,()=>{b.let(O,(0,i._)`${t}[${R}]`),b.if(T,(0,i._)`continue`),w.length>1&&b.if((0,i._)`typeof ${O} == "string"`,(0,i._)`${O} += "_"`),b.if((0,i._)`typeof ${Ce}[${O}] == "number"`,()=>{b.assign(c,(0,i._)`${Ce}[${O}]`),y.error(),b.assign(re,!1).break()}).code((0,i._)`${Ce}[${O}] = ${R}`)})}function x(R,c){const O=(0,m.useFunc)(b,d.default),T=b.name("outer");b.label(T).for((0,i._)`;${R}--;`,()=>b.for((0,i._)`${c} = ${R}; ${c}--;`,()=>b.if((0,i._)`${O}(${t}[${R}], ${t}[${c}])`,()=>{y.error(),b.assign(re,!1).break(T)})))}}};u.default=l},53907:function(Nt,u,e){e.d(u,{CX:function(){return ie},WY:function(){return bn},uC:function(){return le},xP:function(){return Te},KN:function(){return rt},gr:function(){return kt},II:function(){return Mn},wQ:function(){return Nn},Td:function(){return Ne},aq:function(){return Xe},eE:function(){return ue},_i:function(){return Rt},gN:function(){return B},YM:function(){return oe},sn:function(){return Wt},$_:function(){return Ht},Jv:function(){return He},pM:function(){return ze},CJ:function(){return Be},jJ:function(){return je},bg:function(){return xn}});var n=e(2784),i=e(13980),m=e.n(i),d=e(18473),a=e(82394),l=e.n(a),y=e(30705),b=e(30195),t=e(9850),_=e.n(t),g=e(12782),F=e.n(g);const j=/^[a-z][a-z0-9]*(?:[-_][a-z][a-z0-9]*)*$/i;function V(K){return typeof K=="object"&&K!==null&&!Array.isArray(K)}function re(K){if(K===null)return"null";if(Array.isArray(K))return"array";const s=typeof K;return s==="number"&&isNaN(K)?"nan":s==="string"&&K===""?"empty-string":s}const w={type(K,s,p,I){return`Invalid type in config for key '${K}' in '${s}', got ${p}, wanted ${I}`},missing(K){return`Missing required config value at '${K}'`},convert(K,s,p){return`Unable to convert config value for key '${K}' in '${s}' to a ${p}`}};class A{constructor(s,p="mock-config",I,X=""){this.data=s,this.context=p,this.fallback=I,this.prefix=X,this.notifiedFilteredKeys=new Set}static fromConfigs(s){return s.length===0?new A(void 0):s.reduce((p,{data:I,context:X,filteredKeys:xe,deprecatedKeys:se})=>{const U=new A(I,X,p);if(U.filteredKeys=xe,se)for(const{key:ye,description:it}of se)console.warn(`The configuration key '${ye}' of ${X} is deprecated and may be removed soon. ${it||""}`);return U},void 0)}has(s){var p,I;return this.readValue(s)!==void 0?!0:(I=(p=this.fallback)==null?void 0:p.has(s))!=null?I:!1}keys(){var s,p;const I=this.data?Object.keys(this.data):[],X=(p=(s=this.fallback)==null?void 0:s.keys())!=null?p:[];return[...new Set([...I,...X])]}get(s){const p=this.getOptional(s);if(p===void 0)throw new Error(w.missing(this.fullKey(s!=null?s:"")));return p}getOptional(s){var p,I;const X=_()(this.readValue(s)),xe=(p=this.fallback)==null?void 0:p.getOptional(s);return X===void 0?xe:xe===void 0?X:F()({},{value:xe},{value:X},(se,U)=>!V(U)||!V(se)?U:void 0).value}getConfig(s){const p=this.getOptionalConfig(s);if(p===void 0)throw new Error(w.missing(this.fullKey(s)));return p}getOptionalConfig(s){var p;const I=this.readValue(s),X=(p=this.fallback)==null?void 0:p.getOptionalConfig(s);if(V(I))return this.copy(I,s,X);if(I!==void 0)throw new TypeError(w.type(this.fullKey(s),this.context,re(I),"object"));return X}getConfigArray(s){const p=this.getOptionalConfigArray(s);if(p===void 0)throw new Error(w.missing(this.fullKey(s)));return p}getOptionalConfigArray(s){var p;const I=this.readConfigValue(s,X=>{if(!Array.isArray(X))return{expected:"object-array"};for(const[xe,se]of X.entries())if(!V(se))return{expected:"object-array",value:se,key:`${s}[${xe}]`};return!0});if(!!I)return I.map((X,xe)=>this.copy(X,`${s}[${xe}]`))}getNumber(s){const p=this.getOptionalNumber(s);if(p===void 0)throw new Error(w.missing(this.fullKey(s)));return p}getOptionalNumber(s){const p=this.readConfigValue(s,X=>typeof X=="number"||typeof X=="string"||{expected:"number"});if(typeof p=="number"||p===void 0)return p;const I=Number(p);if(!Number.isFinite(I))throw new Error(w.convert(this.fullKey(s),this.context,"number"));return I}getBoolean(s){const p=this.getOptionalBoolean(s);if(p===void 0)throw new Error(w.missing(this.fullKey(s)));return p}getOptionalBoolean(s){return this.readConfigValue(s,p=>typeof p=="boolean"||{expected:"boolean"})}getString(s){const p=this.getOptionalString(s);if(p===void 0)throw new Error(w.missing(this.fullKey(s)));return p}getOptionalString(s){return this.readConfigValue(s,p=>typeof p=="string"&&p!==""||{expected:"string"})}getStringArray(s){const p=this.getOptionalStringArray(s);if(p===void 0)throw new Error(w.missing(this.fullKey(s)));return p}getOptionalStringArray(s){return this.readConfigValue(s,p=>{if(!Array.isArray(p))return{expected:"string-array"};for(const[I,X]of p.entries())if(typeof X!="string"||X==="")return{expected:"string-array",value:X,key:`${s}[${I}]`};return!0})}fullKey(s){return`${this.prefix}${this.prefix?".":""}${s}`}copy(s,p,I){const X=new A(s,this.context,I,this.fullKey(p));return X.filteredKeys=this.filteredKeys,X}readConfigValue(s,p){var I,X;const xe=this.readValue(s);if(xe===void 0)return(X=this.fallback)==null?void 0:X.readConfigValue(s,p);const se=p(xe);if(se!==!0){const{key:U=s,value:ye=xe,expected:it}=se;throw new TypeError(w.type(this.fullKey(U),this.context,re(ye),it))}return xe}readValue(s){const p=s?s.split("."):[];for(const X of p)if(!j.test(X))throw new TypeError(`Invalid config key '${s}'`);if(this.data===void 0)return;let I=this.data;for(const[X,xe]of p.entries())if(V(I))I=I[xe];else if(I!==void 0){const se=this.fullKey(p.slice(0,X).join("."));throw new TypeError(w.type(se,this.context,re(I),"object"))}return I}}var D=e(73557),f=e(16060),x=e(64279),R=e(72164);class c{constructor(...s){this.holders=s}get(s){for(const p of this.holders){const I=p.get(s);if(I)return I}}}const O=(0,d.CT)("api-context"),T=K=>{var s;const{apis:p,children:I}=K,X=(s=(0,n.useContext)(O))==null?void 0:s.atVersion(1),xe=X?new c(p,X):p;return n.createElement(O.Provider,{value:(0,d.EI)({1:xe}),children:I})};T.propTypes={apis:m().shape({get:m().func.isRequired}).isRequired,children:m().node};class Ce{constructor(s){this.factories=s,this.apis=new Map}static validateFactories(s,p){for(const I of p){const X=[I],xe=new Set;for(;X.length;){const se=X.shift(),U=s.get(se);if(!!U)for(const ye of Object.values(U.deps)){if(ye.id===I.id)throw new Error(`Circular dependency of api factory for ${I}`);xe.has(ye)||(xe.add(ye),X.push(ye))}}}}get(s){return this.load(s)}load(s,p=[]){const I=this.apis.get(s.id);if(I)return I;const X=this.factories.get(s);if(!X)return;if(p.includes(X.api))throw new Error(`Circular dependency of api factory for ${X.api}`);const xe=this.loadDeps(s,X.deps,[...p,X.api]),se=X.factory(xe);return this.apis.set(s.id,se),se}loadDeps(s,p,I){const X={};for(const xe in p)if(p.hasOwnProperty(xe)){const se=p[xe],U=this.load(se,I);if(!U)throw new Error(`No API factory available for dependency ${se} of dependent ${s}`);X[xe]=U}return X}}var we=(K=>(K[K.default=10]="default",K[K.app=50]="app",K[K.static=100]="static",K))(we||{});class nt{constructor(){this.factories=new Map}register(s,p){const I=we[s],X=this.factories.get(p.api.id);return X&&X.priority>=I?!1:(this.factories.set(p.api.id,{priority:I,factory:p}),!0)}get(s){const p=this.factories.get(s.id);if(!!p)return p.factory}getAllApis(){const s=new Set;for(const{factory:p}of this.factories.values())s.add(p.api);return s}}function ot(K){return new Promise((s,p)=>{const I=K.width||500,X=K.height||700,xe=window.screen.width/2-I/2,se=window.screen.height/2-X/2,U=window.open(K.url,K.name,`menubar=no,location=no,resizable=no,scrollbars=no,status=no,width=${I},height=${X},top=${se},left=${xe}`);let ye="";if(!U||typeof U.closed=="undefined"||U.closed){const fn=new Error("Failed to open auth popup.");fn.name="PopupRejectedError",p(fn);return}const it=fn=>{if(fn.source!==U||fn.origin!==K.origin)return;const{data:In}=fn;if(In.type==="config_info"){ye=In.targetOrigin;return}if(In.type!=="authorization_response")return;const Vn=In;if("error"in Vn){const Bn=new Error(Vn.error.message);Bn.name=Vn.error.name,p(Bn)}else s(Vn.response);Yt()},Bt=setInterval(()=>{if(U.closed){const fn=`Login failed, ${ye&&ye!==window.location.origin?`Incorrect app origin, expected ${ye}`:"popup was closed"}`,In=new Error(fn);In.name="PopupClosedError",p(In),Yt()}},100);function Yt(){window.removeEventListener("message",it),clearInterval(Bt)}window.addEventListener("message",it)})}function $t(K){return[...K].join(" ")}class ct{constructor(s){const{discoveryApi:p,environment:I,provider:X,joinScopes:xe=$t,oauthRequestApi:se,sessionTransform:U=ye=>ye}=s;this.authRequester=se.createAuthRequester({provider:X,onAuthRequest:ye=>this.showPopup(ye)}),this.discoveryApi=p,this.environment=I,this.provider=X,this.joinScopesFunc=xe,this.sessionTransform=U}async createSession(s){return s.instantPopup?this.showPopup(s.scopes):this.authRequester(s.scopes)}async refreshSession(){const s=await fetch(await this.buildUrl("/refresh",{optional:!0}),{headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(I=>{throw new Error(`Auth refresh request failed, ${I}`)});if(!s.ok){const I=new Error(`Auth refresh request failed, ${s.statusText}`);throw I.status=s.status,I}const p=await s.json();if(p.error){const I=new Error(p.error.message);throw p.error.name&&(I.name=p.error.name),I}return await this.sessionTransform(p)}async removeSession(){const s=await fetch(await this.buildUrl("/logout"),{method:"POST",headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(p=>{throw new Error(`Logout request failed, ${p}`)});if(!s.ok){const p=new Error(`Logout request failed, ${s.statusText}`);throw p.status=s.status,p}}async showPopup(s){const p=this.joinScopesFunc(s),I=await this.buildUrl("/start",{scope:p,origin:window.location.origin}),X=await ot({url:I,name:`${this.provider.title} Login`,origin:new URL(I).origin,width:450,height:730});return await this.sessionTransform(X)}async buildUrl(s,p){const I=await this.discoveryApi.getBaseUrl("auth"),X=this.buildQueryString({...p,env:this.environment});return`${I}/${this.provider.id}${s}${X}`}buildQueryString(s){if(!s)return"";const p=Object.entries(s).map(([I,X])=>{if(typeof X=="string")return`${encodeURIComponent(I)}=${encodeURIComponent(X)}`;if(X)return encodeURIComponent(I)}).filter(Boolean).join("&");return p?`?${p}`:""}}class St{constructor(s){const{discoveryApi:p,environment:I,provider:X}=s;this.discoveryApi=p,this.environment=I,this.provider=X}async createSession(){const s=await this.buildUrl("/start"),p=await ot({url:s,name:`${this.provider.title} Login`,origin:new URL(s).origin,width:450,height:730});return{...p,id:p.profile.email}}async refreshSession(){}async removeSession(){const s=await fetch(await this.buildUrl("/logout"),{method:"POST",headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(p=>{throw new Error(`Logout request failed, ${p}`)});if(!s.ok){const p=new Error(`Logout request failed, ${s.statusText}`);throw p.status=s.status,p}}async buildUrl(s){return`${await this.discoveryApi.getBaseUrl("auth")}/${this.provider.id}${s}?env=${this.environment}`}}function xt(K,s){for(const p of s)if(!K.has(p))return!1;return!0}class Q{constructor(s){this.options=s}sessionExistsAndHasScope(s,p){if(!s)return!1;if(!p||this.options.sessionScopes===void 0)return!0;const I=this.options.sessionScopes(s);return xt(I,p)}getExtendedScope(s,p){const I=new Set(this.options.defaultScopes);if(s&&this.options.sessionScopes!==void 0){const X=this.options.sessionScopes(s);for(const xe of X)I.add(xe)}if(p)for(const X of p)I.add(X);return I}}class pn{constructor(){this.isClosed=!1,this.observable=new(l())(s=>this.isClosed?(this.terminatingError?s.error(this.terminatingError):s.complete(),()=>{}):(this.subscribers.add(s),()=>{this.subscribers.delete(s)})),this.subscribers=new Set}[Symbol.observable](){return this}get closed(){return this.isClosed}next(s){if(this.isClosed)throw new Error("PublishSubject is closed");this.subscribers.forEach(p=>p.next(s))}error(s){if(this.isClosed)throw new Error("PublishSubject is closed");this.isClosed=!0,this.terminatingError=s,this.subscribers.forEach(p=>p.error(s))}complete(){if(this.isClosed)throw new Error("PublishSubject is closed");this.isClosed=!0,this.subscribers.forEach(s=>s.complete())}subscribe(s,p,I){const X=typeof s=="function"?{next:s,error:p,complete:I}:s;return this.observable.subscribe(X)}}class Ct{constructor(s){this.subscribers=new Set,this.isClosed=!1,this.currentValue=s,this.terminatingError=void 0,this.observable=new(l())(p=>this.isClosed?(this.terminatingError?p.error(this.terminatingError):p.complete(),()=>{}):(p.next(this.currentValue),this.subscribers.add(p),()=>{this.subscribers.delete(p)}))}[Symbol.observable](){return this}get closed(){return this.isClosed}next(s){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.currentValue=s,this.subscribers.forEach(p=>p.next(s))}error(s){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.isClosed=!0,this.terminatingError=s,this.subscribers.forEach(p=>p.error(s))}complete(){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.isClosed=!0,this.subscribers.forEach(s=>s.complete())}subscribe(s,p,I){const X=typeof s=="function"?{next:s,error:p,complete:I}:s;return this.observable.subscribe(X)}}class Ge{constructor(){this.subject=new Ct(y.sM.SignedOut),this.signedIn=!1}setIsSignedIn(s){this.signedIn!==s&&(this.signedIn=s,this.subject.next(this.signedIn?y.sM.SignedIn:y.sM.SignedOut))}sessionState$(){return this.subject}}class C{constructor(s){this.stateTracker=new Ge;const{connector:p,defaultScopes:I=new Set,sessionScopes:X,sessionShouldRefresh:xe}=s;this.connector=p,this.sessionScopesFunc=X,this.sessionShouldRefreshFunc=xe,this.helper=new Q({sessionScopes:X,defaultScopes:I})}async getSession(s){if(this.helper.sessionExistsAndHasScope(this.currentSession,s.scopes)){if(!this.sessionShouldRefreshFunc(this.currentSession))return this.currentSession;try{const I=await this.collapsedSessionRefresh(),X=this.sessionScopesFunc(this.currentSession),xe=this.sessionScopesFunc(I);return xt(xe,X)&&(this.currentSession=I),I}catch(I){if(s.optional)return;throw I}}if(!this.currentSession&&!s.instantPopup)try{const p=await this.collapsedSessionRefresh();return this.currentSession=p,this.getSession(s)}catch{}if(!s.optional)return this.currentSession=await this.connector.createSession({...s,scopes:this.helper.getExtendedScope(this.currentSession,s.scopes)}),this.stateTracker.setIsSignedIn(!0),this.currentSession}async removeSession(){this.currentSession=void 0,await this.connector.removeSession(),this.stateTracker.setIsSignedIn(!1)}sessionState$(){return this.stateTracker.sessionState$()}async collapsedSessionRefresh(){if(this.refreshPromise)return this.refreshPromise;this.refreshPromise=this.connector.refreshSession();try{const s=await this.refreshPromise;return this.stateTracker.setIsSignedIn(!0),s}finally{delete this.refreshPromise}}}class Fe{constructor(s){this.stateTracker=new Ge;const{connector:p,defaultScopes:I=new Set,sessionScopes:X}=s;this.connector=p,this.helper=new Q({sessionScopes:X,defaultScopes:I})}setSession(s){this.currentSession=s,this.stateTracker.setIsSignedIn(Boolean(s))}async getSession(s){if(this.helper.sessionExistsAndHasScope(this.currentSession,s.scopes))return this.currentSession;if(!s.optional)return this.currentSession=await this.connector.createSession({...s,scopes:this.helper.getExtendedScope(this.currentSession,s.scopes)}),this.stateTracker.setIsSignedIn(!0),this.currentSession}async removeSession(){this.currentSession=void 0,this.stateTracker.setIsSignedIn(!1)}sessionState$(){return this.stateTracker.sessionState$()}}class ve{constructor(s){const{manager:p,storageKey:I,schema:X,sessionScopes:xe,sessionShouldRefresh:se=()=>!1}=s;this.manager=p,this.storageKey=I,this.schema=X,this.sessionShouldRefreshFunc=se,this.helper=new Q({sessionScopes:xe,defaultScopes:new Set})}setSession(s){this.manager.setSession(s),this.saveSession(s)}async getSession(s){const{scopes:p}=s,I=this.loadSession();if(this.helper.sessionExistsAndHasScope(I,p)&&!this.sessionShouldRefreshFunc(I))return this.manager.setSession(I),I;const X=await this.manager.getSession(s);return this.saveSession(X),X}async removeSession(){localStorage.removeItem(this.storageKey),await this.manager.removeSession()}sessionState$(){return this.manager.sessionState$()}loadSession(){try{const s=localStorage.getItem(this.storageKey);if(s){const p=JSON.parse(s,(I,X)=>(X==null?void 0:X.__type)==="Set"?new Set(X.__value):X);try{return this.schema.parse(p)}catch(I){throw console.log(`Failed to load session from local storage because it did not conform to the expected schema, ${I}`),I}}return}catch{localStorage.removeItem(this.storageKey);return}}saveSession(s){if(s===void 0){localStorage.removeItem(this.storageKey);return}try{this.schema.parse(s)}catch(p){console.warn(`Failed to save session to local storage because it did not conform to the expected schema, ${p}`);return}localStorage.setItem(this.storageKey,JSON.stringify(s,(p,I)=>I instanceof Set?{__type:"Set",__value:Array.from(I)}:I))}}const M={id:"oauth2",title:"Your Identity Provider",icon:()=>null};class G{static create(s){const{discoveryApi:p,environment:I="development",provider:X=M,oauthRequestApi:xe,defaultScopes:se=[],scopeTransform:U=Bt=>Bt}=s,ye=new ct({discoveryApi:p,environment:I,provider:X,oauthRequestApi:xe,sessionTransform(Bt){return{...Bt,providerInfo:{idToken:Bt.providerInfo.idToken,accessToken:Bt.providerInfo.accessToken,scopes:G.normalizeScopes(U,Bt.providerInfo.scope),expiresAt:new Date(Date.now()+Bt.providerInfo.expiresInSeconds*1e3)}}}}),it=new C({connector:ye,defaultScopes:new Set(se),sessionScopes:Bt=>Bt.providerInfo.scopes,sessionShouldRefresh:Bt=>(Bt.providerInfo.expiresAt.getTime()-Date.now())/1e3<60*5});return new G({sessionManager:it,scopeTransform:U})}constructor(s){this.sessionManager=s.sessionManager,this.scopeTransform=s.scopeTransform}async signIn(){await this.getAccessToken()}async signOut(){await this.sessionManager.removeSession()}sessionState$(){return this.sessionManager.sessionState$()}async getAccessToken(s,p){var I;const X=G.normalizeScopes(this.scopeTransform,s),xe=await this.sessionManager.getSession({...p,scopes:X});return(I=xe==null?void 0:xe.providerInfo.accessToken)!=null?I:""}async getIdToken(s={}){var p;const I=await this.sessionManager.getSession(s);return(p=I==null?void 0:I.providerInfo.idToken)!=null?p:""}async getBackstageIdentity(s={}){const p=await this.sessionManager.getSession(s);return p==null?void 0:p.backstageIdentity}async getProfile(s={}){const p=await this.sessionManager.getSession(s);return p==null?void 0:p.profile}static normalizeScopes(s,p){if(!p)return new Set;const I=Array.isArray(p)?p:p.split(/[\s|,]/).filter(Boolean);return new Set(s(I))}}const Re={id:"github",title:"GitHub",icon:()=>null};class Ne{static create(s){const{discoveryApi:p,environment:I="development",provider:X=Re,oauthRequestApi:xe,defaultScopes:se=["read:user"]}=s;return G.create({discoveryApi:p,oauthRequestApi:xe,provider:X,environment:I,defaultScopes:se})}}const Me={id:"gitlab",title:"GitLab",icon:()=>null};class Xe{static create(s){const{discoveryApi:p,environment:I="development",provider:X=Me,oauthRequestApi:xe,defaultScopes:se=["read_user"]}=s;return G.create({discoveryApi:p,oauthRequestApi:xe,provider:X,environment:I,defaultScopes:se})}}const vt={id:"google",title:"Google",icon:()=>null},ee="https://www.googleapis.com/auth/";class ue{static create(s){const{discoveryApi:p,oauthRequestApi:I,environment:X="development",provider:xe=vt,defaultScopes:se=["openid",`${ee}userinfo.email`,`${ee}userinfo.profile`]}=s;return G.create({discoveryApi:p,oauthRequestApi:I,provider:xe,environment:X,defaultScopes:se,scopeTransform(U){return U.map(ye=>ye==="openid"?ye:ye==="profile"||ye==="email"?`${ee}userinfo.${ye}`:ye.startsWith(ee)?ye:`${ee}${ye}`)}})}}const Pe={id:"okta",title:"Okta",icon:()=>null},at=new Set(["openid","profile","email","phone","address","groups","offline_access"]),bt="okta.";class Wt{static create(s){const{discoveryApi:p,environment:I="development",provider:X=Pe,oauthRequestApi:xe,defaultScopes:se=["openid","email","profile","offline_access"]}=s;return G.create({discoveryApi:p,oauthRequestApi:xe,provider:X,environment:I,defaultScopes:se,scopeTransform(U){return U.map(ye=>at.has(ye)||ye.startsWith(bt)?ye:`${bt}${ye}`)}})}}const on=b.z.object({profile:b.z.object({email:b.z.string().optional(),displayName:b.z.string().optional(),picture:b.z.string().optional()}),backstageIdentity:b.z.object({token:b.z.string(),identity:b.z.object({type:b.z.literal("user"),userEntityRef:b.z.string(),ownershipEntityRefs:b.z.array(b.z.string())})})}),zt={id:"saml",title:"SAML",icon:()=>null};class Le{constructor(s){this.sessionManager=s}static create(s){const{discoveryApi:p,environment:I="development",provider:X=zt}=s,xe=new St({discoveryApi:p,environment:I,provider:X}),se=new Fe({connector:xe}),U=new ve({manager:se,storageKey:`${X.id}Session`,schema:on});return new Le(U)}sessionState$(){return this.sessionManager.sessionState$()}async signIn(){await this.getBackstageIdentity({})}async signOut(){await this.sessionManager.removeSession()}async getBackstageIdentity(s={}){const p=await this.sessionManager.getSession(s);return p==null?void 0:p.backstageIdentity}async getProfile(s={}){const p=await this.sessionManager.getSession(s);return p==null?void 0:p.profile}}const Pt={id:"microsoft",title:"Microsoft",icon:()=>null};class Rt{static create(s){const{environment:p="development",provider:I=Pt,oauthRequestApi:X,discoveryApi:xe,defaultScopes:se=["openid","offline_access","profile","email","User.Read"]}=s;return G.create({discoveryApi:xe,oauthRequestApi:X,provider:I,environment:p,defaultScopes:se})}}const sn={id:"onelogin",title:"onelogin",icon:()=>null},un=new Set(["openid","profile","email","phone","address","groups","offline_access"]),Lt="onelogin.";class Ht{static create(s){const{discoveryApi:p,environment:I="development",provider:X=sn,oauthRequestApi:xe}=s;return G.create({discoveryApi:p,oauthRequestApi:xe,provider:X,environment:I,defaultScopes:["openid","email","profile","offline_access"],scopeTransform(se){return se.map(U=>un.has(U)||U.startsWith(Lt)?U:`${Lt}${U}`)}})}}const nn={id:"bitbucket",title:"Bitbucket",icon:()=>null};class Te{static create(s){const{discoveryApi:p,environment:I="development",provider:X=nn,oauthRequestApi:xe,defaultScopes:se=["team"]}=s;return G.create({discoveryApi:p,oauthRequestApi:xe,provider:X,environment:I,defaultScopes:se})}}const st={id:"atlassian",title:"Atlassian",icon:()=>null};class le{static create(s){const{discoveryApi:p,environment:I="development",provider:X=st,oauthRequestApi:xe}=s;return G.create({discoveryApi:p,oauthRequestApi:xe,provider:X,environment:I})}}class ie{constructor(){this.subject=new pn}post(s){this.subject.next(s)}alert$(){return this.subject}}class Z{constructor(s){this.actualApis=s}static fromApis(s){return new Z(s)}captureEvent(s){this.actualApis.forEach(p=>{try{p.captureEvent(s)}catch{}})}}class B{captureEvent(s){}}const _e="theme";class de{constructor(s){this.themes=s,this.subject=new Ct(void 0)}static createWithStorage(s){var p;const I=new de(s);if(!window.localStorage)return I;const X=(p=window.localStorage.getItem(_e))!=null?p:void 0;return I.setActiveThemeId(X),I.activeThemeId$().subscribe(xe=>{xe?window.localStorage.setItem(_e,xe):window.localStorage.removeItem(_e)}),window.addEventListener("storage",xe=>{var se;if(xe.key===_e){const U=(se=localStorage.getItem(_e))!=null?se:void 0;I.setActiveThemeId(U)}}),I}getInstalledThemes(){return this.themes.slice()}activeThemeId$(){return this.subject}getActiveThemeId(){return this.activeThemeId}setActiveThemeId(s){this.activeThemeId=s,this.subject.next(s)}}const Ie="Invalid discovery URL pattern,";class ze{constructor(s){this.parts=s}static compile(s){const p=s.split(/\{\{\s*pluginId\s*\}\}/),I=p.join("pluginId");let X;try{X=new URL(I)}catch{throw new Error(`${Ie} URL '${I}' is invalid`)}if(X.hash)throw new Error(`${Ie} URL must not have a hash`);if(X.search)throw new Error(`${Ie} URL must not have a query`);if(I.endsWith("/"))throw new Error(`${Ie} URL must not end with a slash`);return new ze(p)}async getBaseUrl(s){return this.parts.join(s)}}class rt{constructor(s,p){this.alertApi=s,this.errorApi=p}post(s,p){return p!=null&&p.hidden||this.alertApi.post({message:s.message,severity:"error"}),this.errorApi.post(s,p)}error$(){return this.errorApi.error$()}}class kt{constructor(){this.subject=new pn}post(s,p){this.subject.next({error:s,context:p})}error$(){return this.subject}}class He{static forward(s,p){window.addEventListener("unhandledrejection",I=>{s.post(I.reason,p)})}}function z(K){if(K.length<3)throw new Error(`The '${K}' feature flag must have a minimum length of three characters.`);if(K.length>150)throw new Error(`The '${K}' feature flag must not exceed 150 characters.`);if(!K.match(/^[a-z]+[a-z0-9-]+$/))throw new Error(`The '${K}' feature flag must start with a lowercase letter and only contain lowercase letters, numbers and hyphens. Examples: feature-flag-one, alpha, release-2020`)}class be{constructor(){this.registeredFeatureFlags=[]}registerFlag(s){z(s.name),this.registeredFeatureFlags.push(s)}getRegisteredFlags(){return this.registeredFeatureFlags.slice()}isActive(s){return this.flags||(this.flags=this.load()),this.flags.get(s)===y.CL.Active}save(s){this.flags||(this.flags=this.load()),s.merge||this.flags.clear();for(const[I,X]of Object.entries(s.states))this.flags.set(I,X);const p=Array.from(this.flags.entries()).filter(([,I])=>I===y.CL.Active);window.localStorage.setItem("featureFlags",JSON.stringify(Object.fromEntries(p)))}load(){try{const s=window.localStorage.getItem("featureFlags");if(!s)return new Map;const p=JSON.parse(s);if(typeof p!="object"||p===null||Array.isArray(p))return new Map;const I=Object.entries(p).filter(([X,xe])=>(z(X),xe===y.CL.Active));return new Map(I)}catch{return new Map}}}function je(K){var s;let p=K.baseImplementation||e.g.fetch;const I=[(s=K.middleware)!=null?s:[]].flat().reverse();for(const X of I)p=X.apply(p);return{fetch:p}}class ut{constructor(s,p,I,X){this.identityApi=s,this.allowUrl=p,this.headerName=I,this.headerValue=X}static create(s){var p,I;const X=Et(s),xe=((p=s.header)==null?void 0:p.name)||"authorization",se=((I=s.header)==null?void 0:I.value)||(U=>`Bearer ${U}`);return new ut(s.identityApi,X,xe,se)}apply(s){return async(p,I)=>{const X=new Request(p,I),{token:xe}=await this.identityApi.getCredentials();return X.headers.get(this.headerName)||typeof xe!="string"||!xe||!this.allowUrl(X.url)?s(p,I):(X.headers.set(this.headerName,this.headerValue(xe)),s(X))}}}function Et(K){return K.allowUrl?K.allowUrl:K.urlPrefixAllowlist?Mt(K.urlPrefixAllowlist):K.config?Mt([K.config.getString("backend.baseUrl")]):()=>!1}function Mt(K){const s=K.map(p=>p.replace(/\/$/,""));return p=>s.some(I=>p===I||p.startsWith(`${I}/`))}function rn(K,s){return!s||s==="/"?K:`${K.replace(/\/$/,"")}/${s.replace(/^\//,"")}`}class ln{constructor(s){this.discoveryApi=s}apply(s){return async(p,I)=>{const X=new Request(p,I),xe="plugin://";if(!X.url.startsWith(xe))return s(p,I);const{hostname:se,pathname:U,search:ye,hash:it,username:Bt,password:Yt}=new URL(`http://${X.url.substring(xe.length)}`);let fn=await this.discoveryApi.getBaseUrl(se);if(Bt||Yt){const Vn=new URL(fn),Bn=`${Bt}${Yt?`:${Yt}`:""}@`;fn=`${Vn.protocol}//${Bn}${Vn.host}${Vn.pathname}`}const In=`${rn(fn,U)}${ye}${it}`;return s(In,typeof p=="string"||Rn(p)?I:p)}}}function Rn(K){return typeof K=="object"&&(K==null?void 0:K.constructor)===URL}class Mn{static resolvePluginProtocol(s){return new ln(s.discoveryApi)}static injectIdentityAuth(s){return ut.create(s)}constructor(){}}function Ke(K,s){for(const p of s)if(!K.has(p))return!1;return!0}function Je(K,...s){const p=new Set(K);for(const I of s)for(const X of I)p.add(X);return p}class Qe{constructor(){this.requests=[],this.subject=new Ct(this.getCurrentPending())}request(s){return new Promise((p,I)=>{this.requests.push({scopes:s,resolve:p,reject:I}),this.subject.next(this.getCurrentPending())})}resolve(s,p){this.requests=this.requests.filter(I=>Ke(s,I.scopes)?(I.resolve(p),!1):!0),this.subject.next(this.getCurrentPending())}reject(s){this.requests.forEach(p=>p.reject(s)),this.requests=[],this.subject.next(this.getCurrentPending())}pending(){return this.subject}getCurrentPending(){const s=this.requests.length===0?void 0:this.requests.slice(1).reduce((p,I)=>Je(p,I.scopes),this.requests[0].scopes);return{scopes:s,resolve:p=>{s&&this.resolve(s,p)},reject:p=>{s&&this.reject(p)}}}}class oe{constructor(){this.subject=new Ct([]),this.currentRequests=[],this.handlerCount=0}createAuthRequester(s){const p=new Qe,I=this.handlerCount;return this.handlerCount++,p.pending().subscribe({next:X=>{const xe=this.currentRequests.slice(),se=this.makeAuthRequest(X,s);se?xe[I]=se:delete xe[I],this.currentRequests=xe,this.subject.next(xe.filter(Boolean))}}),X=>p.request(X)}makeAuthRequest(s,p){const{scopes:I}=s;if(!!I)return{provider:p.provider,trigger:async()=>{const X=await p.onAuthRequest(I);s.resolve(X)},reject:()=>{const X=new Error("Login failed, rejected by user");X.name="RejectedError",s.reject(X)}}}authRequest$(){return this.subject}}const fe=new Map,We=class{constructor(K,s){this.namespace=K,this.errorApi=s,this.subscribers=new Set,this.observable=new(l())(p=>(this.subscribers.add(p),()=>{this.subscribers.delete(p)}))}static create(K){var s;return new We((s=K.namespace)!=null?s:"",K.errorApi)}static addStorageEventListener(){window.addEventListener("storage",K=>{var s;for(const[p,I]of fe.entries())(s=K.key)!=null&&s.startsWith(p)&&I.handleStorageChange(K.key)})}get(K){return this.snapshot(K).value}snapshot(K){let s,p="absent";try{const I=localStorage.getItem(this.getKeyName(K));I&&(s=JSON.parse(I,(X,xe)=>(typeof xe=="object"&&xe!==null&&Object.freeze(xe),xe)),p="present")}catch{this.errorApi.post(new Error(`Error when parsing JSON config from storage for: ${K}`))}return{key:K,value:s,presence:p}}forBucket(K){const s=`${this.namespace}/${K}`;return fe.has(s)||fe.set(s,new We(s,this.errorApi)),fe.get(s)}async set(K,s){localStorage.setItem(this.getKeyName(K),JSON.stringify(s)),this.notifyChanges(K)}async remove(K){localStorage.removeItem(this.getKeyName(K)),this.notifyChanges(K)}observe$(K){return We.hasSubscribed||(We.addStorageEventListener(),We.hasSubscribed=!0),this.observable.filter(({key:s})=>s===K)}handleStorageChange(K){if(!(K!=null&&K.startsWith(this.namespace)))return;const s=K==null?void 0:K.slice(`${this.namespace}/`.length);s.includes("/")||this.notifyChanges(decodeURIComponent(s))}getKeyName(K){return`${this.namespace}/${encodeURIComponent(K)}`}notifyChanges(K){const s=this.snapshot(K);for(const p of this.subscribers)p.next(s)}};let Be=We;Be.hasSubscribed=!1;const Ze=(0,n.createContext)(void 0);function gt(){const[K]=(0,D.is)(n.createElement(D.AW,{index:!0,element:n.createElement("div",null)}));return!K.index}const It=(K,s)=>{var p,I;try{const X=(0,f.fp)(s,{pathname:K}),xe=(p=X==null?void 0:X.filter(U=>{var ye;return((ye=U==null?void 0:U.route.routeRefs)==null?void 0:ye.size)>0}).pop())==null?void 0:p.route;if(!xe)return{};let se;return xe.routeRefs.size===1&&(se=xe.routeRefs.values().next().value),{extension:"App",pluginId:((I=xe.plugin)==null?void 0:I.getId())||"root",...se?{routeRef:se.id}:{}}}catch{return{}}},jt=({pathname:K,search:s,hash:p})=>{const I=(0,y.z$)();return(0,n.useEffect)(()=>{I.captureEvent("navigate",`${K}${s}${p}`)},[I,K,s,p]),null},Zt=({routeObjects:K})=>{const{pathname:s,search:p,hash:I}=(0,D.TH)();return n.createElement(y.fC,{attributes:It(s,K)},n.createElement(jt,{pathname:s,search:p,hash:I}))};function Ot(K){return gt()?Vt(K):""}function Vt(K){var s;let{pathname:p}=new URL((s=K.getOptionalString("app.baseUrl"))!=null?s:"/","http://sample.dev");return p=p.replace(/\/*$/,""),p}function mn({component:K,appIdentityProxy:s,children:p}){const[I,X]=(0,n.useState)(),xe=(0,y.h_)(y.Ds),se=Ot(xe);return I?(s.setTarget(I,{signOutTargetUrl:se||"/"}),n.createElement(n.Fragment,null,p)):n.createElement(K,{onSignInSuccess:X})}function bn(K){const{Router:s,SignInPage:p}=(0,y.qD)().getComponents(),I=(0,y.h_)(y.Ds),X=Vt(I),xe=`${X}/*`,se=(0,n.useContext)(Ze);if(!se)throw new Error("AppRouter must be rendered within the AppProvider");const{routeObjects:U,appIdentityProxy:ye}=se;return p?gt()?n.createElement(s,null,n.createElement(Zt,{routeObjects:U}),n.createElement(mn,{component:p,appIdentityProxy:ye},n.createElement(D.Z5,null,n.createElement(D.AW,{path:xe,element:n.createElement(n.Fragment,null,K.children)})))):n.createElement(s,{basename:X},n.createElement(Zt,{routeObjects:U}),n.createElement(mn,{component:p,appIdentityProxy:ye},K.children)):(ye.setTarget({getUserId:()=>"guest",getIdToken:async()=>{},getProfile:()=>({email:"guest@example.com",displayName:"Guest"}),getProfileInfo:async()=>({email:"guest@example.com",displayName:"Guest"}),getBackstageIdentity:async()=>({type:"user",userEntityRef:"user:default/guest",ownershipEntityRefs:["user:default/guest"]}),getCredentials:async()=>({}),signOut:async()=>{}},{signOutTargetUrl:X||"/"}),gt()?n.createElement(s,null,n.createElement(Zt,{routeObjects:U}),n.createElement(D.Z5,null,n.createElement(D.AW,{path:xe,element:n.createElement(n.Fragment,null,K.children)}))):n.createElement(s,{basename:X},n.createElement(Zt,{routeObjects:U}),K.children))}function hn(K){const s={};for(const I in K.collectors)K.collectors.hasOwnProperty(I)&&(s[I]=K.collectors[I]());const p=[{node:n.Children.toArray(K.root),parent:void 0,contexts:{}}];for(;p.length!==0;){const{node:I,parent:X,contexts:xe}=p.shift();n.Children.forEach(I,se=>{if(!(0,n.isValidElement)(se))return;const U={};for(const ye in s)if(s.hasOwnProperty(ye)){const it=s[ye];U[ye]=it.visit(it.accumulator,se,X,xe[ye])}for(const ye of K.discoverers){const it=ye(se);it&&p.push({node:it,parent:se,contexts:U})}})}return Object.fromEntries(Object.entries(s).map(([I,X])=>[I,X.accumulator]))}function wn(K,s){return()=>({accumulator:K(),visit:s})}function gn(K){var s;return(s=K.props)==null?void 0:s.children}function Tn(K){var s,p,I;if(((s=K.props)==null?void 0:s.path)&&((p=K.props)==null?void 0:p.element))return(I=K.props)==null?void 0:I.element}const kn=wn(()=>new Set,(K,s)=>{const p=(0,y.IY)(s,"core.plugin");p&&K.add(p)}),$n=K=>{const{children:s}=K,p=(0,y.h_)(y.W0),I="with"in K?p.isActive(K.with):!p.isActive(K.without);return n.createElement(n.Fragment,null,I?s:null)};(0,y.R5)($n,"core.featureFlagged",!0);const Cn={caseSensitive:!1,path:"*",element:"match-all",routeRefs:new Set};function zn(K){var s,p;const I=K;return I!=null&&I.type?(p=(s=I.type.displayName)!=null?s:I.type.name)!=null?p:String(I.type):String(I)}function Sn(K,s=new Array){return n.Children.forEach(K,p=>{if(!(0,n.isValidElement)(p))return;const I=(0,y.IY)(p,"core.mountPoint");if(I){const X=(0,y.IY)(p,"core.plugin");s.push({routeRef:I,plugin:X})}Sn(p.props.children,s)}),s}const Zn=wn(()=>({paths:new Map,parents:new Map,objects:new Array}),(K,s,p,I)=>{var X,xe,se,U,ye,it;if(I!=null&&I.isElementAncestor)return I;if((p==null?void 0:p.props.element)===s)return{...I,isElementAncestor:!0};const Bt=(X=s.props)==null?void 0:X.path,Yt=(0,y.IY)(s,"core.mountPoint");if(Yt&&Bt)throw new Error(`Path property may not be set directly on a routable extension "${zn(s)}"`);const fn=(se=(xe=I==null?void 0:I.obj)==null?void 0:xe.children)!=null?se:K.objects;if(Bt!==void 0){if(typeof Bt!="string")throw new Error(`Element path must be a string at "${zn(s)}"`);const In=Bt.startsWith("/")?Bt.slice(1):Bt,Vn=s.props.element;if((0,y.IY)(s,"core.gatherMountPoints")){if(Vn)throw new Error(`Mount point gatherers may not have an element prop "${zn(s)}"`);const Bn={path:In,element:"gathered",routeRefs:new Set,caseSensitive:Boolean((U=s.props)==null?void 0:U.caseSensitive),children:[Cn],plugin:void 0};return fn.push(Bn),{obj:Bn,gatherPath:In,routeRef:I==null?void 0:I.routeRef,gatherRouteRef:I==null?void 0:I.routeRef}}if(Vn){const[Bn,...Gn]=Sn(Vn);if(Gn.length>0)throw new Error(`Route element with path "${Bt}" may not contain multiple routable extensions`);if(!Bn)return I;const{routeRef:Wn,plugin:Er}=Bn,Hn={path:In,element:"mounted",routeRefs:new Set([Wn]),caseSensitive:Boolean((ye=s.props)==null?void 0:ye.caseSensitive),children:[Cn],plugin:Er};return fn.push(Hn),K.paths.set(Wn,In),K.parents.set(Wn,I==null?void 0:I.routeRef),{obj:Hn,routeRef:Wn!=null?Wn:I==null?void 0:I.routeRef,gatherPath:In,gatherRouteRef:I==null?void 0:I.gatherRouteRef}}}if(Yt){if((I==null?void 0:I.gatherPath)===void 0)throw new Error(`Routable extension "${zn(s)}" with mount point "${Yt}" must be assigned a path`);return(it=I==null?void 0:I.obj)==null||it.routeRefs.add(Yt),K.paths.set(Yt,I.gatherPath),K.parents.set(Yt,I==null?void 0:I.gatherRouteRef),{...I,routeRef:Yt}}return I}),Ln=wn(()=>({paths:new Map,parents:new Map,objects:new Array}),(K,s,p,I)=>{var X,xe,se,U,ye;if((p==null?void 0:p.props.element)===s)return I;let it=I==null?void 0:I.obj,Bt=I==null?void 0:I.routeRef,Yt=I==null?void 0:I.sticky;const fn=(X=s.props)==null?void 0:X.path,In=(xe=it==null?void 0:it.children)!=null?xe:K.objects,Vn=Boolean((se=s.props)==null?void 0:se.caseSensitive);let Bn=I==null?void 0:I.path;if((0,y.IY)(s,"core.gatherMountPoints")){if(!fn)throw new Error("Mount point gatherer must have a path");Bn=fn}const Gn=(U=s.props)==null?void 0:U.element;let Wn=(0,y.IY)(s,"core.mountPoint");if(!Wn&&(0,n.isValidElement)(Gn)&&(Wn=(0,y.IY)(Gn,"core.mountPoint")),Wn){let Hn=fn;if(Bn&&(Hn?Bn=void 0:Hn=Bn),!Hn)throw new Error("Mounted routable extension must have a path");K.paths.set(Wn,Hn),Bt&&Yt?(K.parents.set(Wn,Bt),fn&&(Bt=Wn,Yt=!1)):(K.parents.set(Wn,Bt),Bt=Wn),fn?(it={caseSensitive:Vn,path:fn,element:"mounted",routeRefs:new Set([Wn]),children:[Cn],plugin:(0,y.IY)(s.props.element,"core.plugin")},In.push(it)):it==null||it.routeRefs.add(Wn)}if((0,y.IY)(s,"core.gatherMountPoints")&&(Yt=!0),(0,y.IY)(s,"core.gatherMountPoints")){if(!fn)throw new Error("Mount point gatherer must have a path");Wn||(it={caseSensitive:Vn,path:fn,element:"gathered",routeRefs:new Set,children:[Cn],plugin:(ye=I==null?void 0:I.obj)==null?void 0:ye.plugin},In.push(it))}return{obj:it,path:Bn,routeRef:Bt,sticky:Yt}}),jn=wn(()=>new Set,(K,s)=>{if(s.type===$n){const p=s.props;K.add("with"in p?p.with:p.without)}}),Xn=(0,d.uW)("route-ref-type",()=>Symbol("route-ref-type"));function or(K){return K[Xn]==="absolute"}function gr(K){return K[Xn]==="sub"}function fr(K){return K[Xn]==="external"}function Se(...K){const s=K.join("/").replace(/\/\/+/g,"/");return s!=="/"&&s.endsWith("/")?s.slice(0,-1):s}function ne(K,s,p){let I,X="";if(or(K))I=K;else if(gr(K))I=K.parent,X=K.path;else if(fr(K)){const U=p.get(K);if(!U)return[void 0,""];if(or(U))I=U;else if(gr(U))I=U.parent,X=U.path;else throw new Error(`ExternalRouteRef was bound to invalid target, ${U}`)}else throw K[Xn]?new Error(`Unknown or invalid route ref type, ${K[Xn]}`):new Error(`Unknown object passed to useRouteRef, got ${K}`);if(!I)return[void 0,""];const xe=s.get(I);if(xe===void 0)return[void 0,""];const se=Se(xe,X);return[I,se]}function ae(K,s,p,I,X){var xe;const se=(xe=(0,f.fp)(X,s))!=null?xe:[],U=Array();let ye=-1;for(let Yt=K;Yt&&(ye=se.findIndex(fn=>fn.route.routeRefs.has(Yt)),ye===-1);Yt=I.get(Yt))U.unshift(Yt);U.length===0&&(ye-=1);const it=ye===-1?"":se[ye].pathname,Bt=U.slice(0,-1).map(Yt=>{const fn=p.get(Yt);if(fn===void 0)throw new Error(`No path for ${Yt}`);if(fn.includes(":"))throw new Error(`Cannot route to ${K} with parent ${Yt} as it has parameters`);return fn});return`${Se(it,...Bt)}/`}class S{constructor(s,p,I,X,xe){this.routePaths=s,this.routeParents=p,this.routeObjects=I,this.routeBindings=X,this.appBasePath=xe}resolve(s,p){const[I,X]=ne(s,this.routePaths,this.routeBindings);if(!I)return;let xe;typeof p=="string"?xe=this.trimPath(p):p.pathname?xe={...p,pathname:this.trimPath(p.pathname)}:xe=p;const se=this.appBasePath+ae(I,xe,this.routePaths,this.routeParents,this.routeObjects);return(...[ye])=>Se(se,(0,f.Gn)(X,ye))}trimPath(s){return s&&(s.startsWith(this.appBasePath)?s.slice(this.appBasePath.length):s)}}const ge=(0,d.CT)("routing-context"),L=({routePaths:K,routeParents:s,routeObjects:p,routeBindings:I,basePath:X="",children:xe})=>{const se=new S(K,s,p,I,X),U=(0,d.EI)({1:se});return n.createElement(ge.Provider,{value:U},xe)};function N(K,s){const p=new Set(s.values());p.delete(void 0);for(const I of s.keys()){if(p.has(I))continue;let X=I,xe="";for(;X;){const U=K.get(X);if(U===void 0)throw new Error(`No path for ${X}`);xe=Se(U,xe),X=s.get(X)}const se=xe.match(/:(\w+)/g);if(se){for(let U=0;U<se.length;U++)for(let ye=U+1;ye<se.length;ye++)if(se[ye]===se[U])throw new Error(`Parameter ${se[ye]} is duplicated in path ${xe}`)}}}function me(K,s){for(const p of s)if(!!p.externalRoutes){for(const[I,X]of Object.entries(p.externalRoutes))if(!X.optional&&!K.has(X))throw new Error(`External route '${I}' of the '${p.getId()}' plugin must be bound to a target route. See https://backstage.io/link?bind-routes for details.`)}}const et=(0,d.CT)("app-context"),wt=({appContext:K,children:s})=>{const p=(0,d.EI)({1:K});return n.createElement(et.Provider,{value:p,children:s})};function h(K){return new Error(`Tried to access IdentityApi ${K} before app was loaded`)}function v(K){console.warn(`WARNING: Call to ${K} is deprecated and will break in the future`)}class k{constructor(){this.resolveTarget=()=>{},this.signOutTargetUrl="/",this.waitForTarget=new Promise(s=>{this.resolveTarget=s})}setTarget(s,p){this.target=s,this.signOutTargetUrl=p.signOutTargetUrl,this.resolveTarget(s)}getUserId(){if(!this.target)throw h("getUserId");if(!this.target.getUserId)throw new Error("IdentityApi does not implement getUserId");return v("getUserId"),this.target.getUserId()}getProfile(){if(!this.target)throw h("getProfile");if(!this.target.getProfile)throw new Error("IdentityApi does not implement getProfile");return v("getProfile"),this.target.getProfile()}async getProfileInfo(){return this.waitForTarget.then(s=>s.getProfileInfo())}async getBackstageIdentity(){const s=await this.waitForTarget.then(p=>p.getBackstageIdentity());return s.userEntityRef.match(/^.*:.*\/.*$/)||console.warn(`WARNING: The App IdentityApi provided an invalid userEntityRef, '${s.userEntityRef}'. It must be a full Entity Reference of the form '<kind>:<namespace>/<name>'.`),s}async getCredentials(){return this.waitForTarget.then(s=>s.getCredentials())}async getIdToken(){return this.waitForTarget.then(s=>{if(!s.getIdToken)throw new Error("IdentityApi does not implement getIdToken");return v("getIdToken"),s.getIdToken()})}async signOut(){await this.waitForTarget.then(s=>s.signOut()),window.location.href=this.signOutTargetUrl}}function te(K,s,p){if(K!==void 0){const X=p.find(xe=>xe.id===K);if(X)return X}if(s){const X=p.find(xe=>xe.variant==="dark");if(X)return X}const I=p.find(X=>X.variant==="light");return I||p[0]}const Ee=()=>{const K=(0,n.useMemo)(()=>window.matchMedia("(prefers-color-scheme: dark)"),[]),[s,p]=(0,n.useState)(K.matches);return(0,n.useEffect)(()=>{const I=X=>{p(X.matches)};return K.addListener(I),()=>{K.removeListener(I)}},[K]),s};function Ye({children:K}){const s=(0,y.h_)(y.hg),p=(0,R.Z)(s.activeThemeId$(),s.getActiveThemeId()),I=Boolean(window.matchMedia)?Ee():!1,X=te(p,I,s.getInstalledThemes());if(!X)throw new Error("App has no themes");return n.createElement(X.Provider,{children:K})}const H=async(K="__APP_INJECTED_RUNTIME_CONFIG__")=>{const s=[{context:"app-config.yaml",data:{app:{title:"Scaffolded Backstage App",baseUrl:"http://backstage-fargate-alb-2089742604.us-east-1.elb.amazonaws.com/"},organization:{name:"My Company"},backend:{baseUrl:"http://backstage-fargate-alb-2089742604.us-east-1.elb.amazonaws.com/"},integrations:{github:[{host:"github.com"}]},techdocs:{builder:"local"},auth:{environment:"development",providers:{github:{}}},catalog:{import:{entityFilename:"catalog-info.yaml",pullRequestBranchName:"backstage-integration"}}}}];if(!s)throw new Error("No static configuration provided");if(!Array.isArray(s))throw new Error("Static configuration has invalid format");const p=s.slice();if(K!=="__app_injected_runtime_config__".toLocaleUpperCase("en-US"))try{const X=JSON.parse(K);Array.isArray(X)?p.push(...X):p.push({data:X,context:"env"})}catch(X){throw new Error(`Failed to load runtime configuration, ${X}`)}const I=window.__APP_CONFIG__;return I&&p.push({context:"window",data:I}),p};class W{constructor(){this.apis=[]}add(s,p){return this.apis.push([s.id,p]),p}build(){return new Ae(new Map(this.apis))}}class Ae{constructor(s){this.apis=s}static builder(){return new W}static from(s){return new Ae(new Map(s.map(([p,I])=>[p.id,I])))}static with(s,p){return new Ae(new Map([[s.id,p]]))}with(s,p){return new Ae(new Map([...this.apis,[s.id,p]]))}get(s){return this.apis.get(s.id)}}function De(K){const s=new Map;return K&&K({bind:(I,X)=>{for(const[xe,se]of Object.entries(X)){const U=I[xe];if(!U)throw new Error(`Key ${xe} is not an existing external route`);if(!se&&!U.optional)throw new Error(`External route ${xe} is required but was undefined`);se&&s.set(U,se)}}}),s}var pt=(K,s,p)=>{if(!s.has(K))throw TypeError("Cannot "+p)},dt=(K,s,p)=>(pt(K,s,"read from private field"),p?p.call(K):s.get(K)),ft=(K,s,p)=>{if(s.has(K))throw TypeError("Cannot add the same private member more than once");s instanceof WeakSet?s.add(K):s.set(K,p)},yt=(K,s,p,I)=>(pt(K,s,"write to private field"),I?I.call(K,p):s.set(K,p),p),Ft;function an(K,s,p){var I;const X=Boolean(K),xe=(0,x.default)(K||(()=>Promise.resolve([])));let se;if(X&&xe.loading){const{Progress:it}=s;se=n.createElement(it,null)}else if(xe.error){const{BootErrorPage:it}=s;se=n.createElement(it,{step:"load-config",error:xe.error})}const{ThemeProvider:U=Ye}=s;if(se)return{node:n.createElement(T,{apis:Ae.with(y.hg,p)},n.createElement(U,null,se))};let ye;if((I=xe.value)!=null&&I.length){const it=A.fromConfigs(xe.value),Bt=Gn=>new URL(Gn).origin,Yt=Gn=>new URL(Gn.replace(Bt(Gn),""),document.location.origin).href.replace(/\/$/,""),fn=it.getOptionalString("app.baseUrl"),In=it.getOptionalString("backend.baseUrl");let Vn=xe.value;const Bn={data:{},context:"relative-resolver"};if(fn&&In){const Gn=Bt(fn),Wn=Bt(In);if(Gn===Wn){const Er=Yt(In);In!==Er&&(Bn.data.backend={baseUrl:Er})}}if(fn){const Gn=Yt(fn);fn!==Gn&&(Bn.data.app={baseUrl:Gn})}Object.keys(Bn.data).length&&(Vn=Vn.concat([Bn])),ye=A.fromConfigs(Vn)}else ye=A.fromConfigs([]);return{api:ye}}class en{constructor(s){this.app=s}getPlugins(){return this.app.getPlugins()}getSystemIcon(s){return this.app.getSystemIcon(s)}getSystemIcons(){return this.app.getSystemIcons()}getComponents(){return this.app.getComponents()}}class cn{constructor(s){this.appIdentityProxy=new k,ft(this,Ft,!1);var p,I,X,xe;this.apis=(p=s.apis)!=null?p:[],this.icons=s.icons,this.plugins=new Set((I=s.plugins)!=null?I:[]),this.components=s.components,this.themes=s.themes,this.configLoader=(X=s.configLoader)!=null?X:H,this.defaultApis=(xe=s.defaultApis)!=null?xe:[],this.bindRoutes=s.bindRoutes,this.apiFactoryRegistry=new nt}getPlugins(){return Array.from(this.plugins)}getSystemIcon(s){return this.icons[s]}getSystemIcons(){return this.icons}getComponents(){return this.components}createRoot(s){const p=this.getProvider();return()=>n.createElement(p,null,s)}getProvider(){if(dt(this,Ft))throw new Error("app.getProvider() or app.createRoot() has already been called, and can only be called once");yt(this,Ft,!0);const s=new en(this);let p=!1;return({children:X})=>{const xe=(0,n.useRef)(!0),se=(0,n.useMemo)(()=>de.createWithStorage(this.themes),[]),{routing:U,featureFlags:ye,routeBindings:it}=(0,n.useMemo)(()=>{const In=hn({root:X,discoverers:[gn,Tn],collectors:{routing:gt()?Ln:Zn,collectedPlugins:kn,featureFlags:jn}});return In.collectedPlugins.forEach(Vn=>this.plugins.add(Vn)),this.verifyPlugins(this.plugins),this.getApiHolder(),{...In,routeBindings:De(this.bindRoutes)}},[X]);p||(p=!0,N(U.paths,U.parents),me(it,this.plugins));const Bt=an(this.configLoader,this.components,se),Yt="api"in Bt;if(Yt){const{api:In}=Bt;this.configApi=In}if("node"in Bt)return Bt.node;if(Yt&&xe.current){xe.current=!1;const In=this.getApiHolder().get(y.W0);if(In){for(const Gn of this.plugins.values())if("getFeatureFlags"in Gn)for(const Wn of Gn.getFeatureFlags())In.registerFlag({name:Wn.name,pluginId:Gn.getId()});else for(const Wn of Gn.output())Wn.type==="feature-flag"&&In.registerFlag({name:Wn.name,pluginId:Gn.getId()});const Vn=In.getRegisteredFlags(),Bn=new Set(Vn.map(Gn=>Gn.name));for(const Gn of ye)Bn.has(Gn)||In.registerFlag({name:Gn,pluginId:""})}}const{ThemeProvider:fn=Ye}=this.components;return n.createElement(T,{apis:this.getApiHolder()},n.createElement(wt,{appContext:s},n.createElement(fn,null,n.createElement(L,{routePaths:U.paths,routeParents:U.parents,routeObjects:U.objects,routeBindings:it,basePath:Ot(Bt.api)},n.createElement(Ze.Provider,{value:{routeObjects:U.objects,appIdentityProxy:this.appIdentityProxy}},X)))))}}getRouter(){return bn}getApiHolder(){if(this.apiHolder){for(const s of this.plugins)for(const p of s.getApis())this.apiFactoryRegistry.get(p.api)||this.apiFactoryRegistry.register("default",p);return Ce.validateFactories(this.apiFactoryRegistry,this.apiFactoryRegistry.getAllApis()),this.apiHolder}this.apiFactoryRegistry.register("static",{api:y.hg,deps:{},factory:()=>de.createWithStorage(this.themes)}),this.apiFactoryRegistry.register("static",{api:y.Ds,deps:{},factory:()=>{if(!this.configApi)throw new Error("Tried to access config API before config was loaded");return this.configApi}}),this.apiFactoryRegistry.register("static",{api:y.$4,deps:{},factory:()=>this.appIdentityProxy}),this.apiFactoryRegistry.register("default",{api:y.W0,deps:{},factory:()=>new be});for(const s of this.defaultApis)this.apiFactoryRegistry.register("default",s);for(const s of this.plugins)for(const p of s.getApis())if(!this.apiFactoryRegistry.register("default",p))throw new Error(`Plugin ${s.getId()} tried to register duplicate or forbidden API factory for ${p.api}`);for(const s of this.apis)if(!this.apiFactoryRegistry.register("app",s))throw new Error(`Duplicate or forbidden API factory for ${s.api} in app`);return Ce.validateFactories(this.apiFactoryRegistry,this.apiFactoryRegistry.getAllApis()),this.apiHolder=new Ce(this.apiFactoryRegistry),this.apiHolder}verifyPlugins(s){const p=new Set;for(const I of s){const X=I.getId();if(p.has(X))throw new Error(`Duplicate plugin found '${X}'`);p.add(X)}}}Ft=new WeakMap;function xn(K){return new cn(K)}let Dn=!1;const Nn=K=>{const s=(0,y.qD)(),{NotFoundErrorPage:p}=s.getComponents(),I=(0,n.useMemo)(()=>gt(),[]),xe=[...(0,y.vJ)(K.children,se=>se.getElements().flatMap(U=>{var ye;let it=U.props.path;if(it==="")return[];it=(ye=it==null?void 0:it.replace(/\/\*$/,""))!=null?ye:"/";let Bt=I?U:U.props.element;return!I&&!Bt&&(Bt=U,Dn||(console.warn("DEPRECATION WARNING: All elements within <FlatRoutes> must be of type <Route> with an element prop. Existing usages of <Navigate key=[path] to=[to] /> should be replaced with <Route path=[path] element={<Navigate to=[to] />} />."),Dn=!0)),[{path:it,element:Bt,children:U.props.children?[{path:it==="/"?"/":"*",element:U.props.children}]:void 0}]}).sort((U,ye)=>ye.path.localeCompare(U.path)).map(U=>({...U,path:U.path==="/"?"/":`${U.path}/*`}))),{path:"*",element:n.createElement(p,null)}];return(0,D.V$)(xe)}},49558:function(Nt,u,e){e.d(u,{in:function(){return dt},qE:function(){return an},Oo:function(){return Do},zx:function(){return X},hB:function(){return Kl},db:function(){return js},Oi:function(){return se},VY:function(){return ma},yW:function(){return To},XF:function(){return U},mn:function(){return tn},NX:function(){return fn},SX:function(){return An},zG:function(){return Vs},ub:function(){return En},mf:function(){return cl},yu:function(){return _n},fy:function(){return Gs},h4:function(){return fa},M6:function(){return Uo},i9:function(){return yl},aR:function(){return bo},rJ:function(){return Xr},Oh:function(){return Pl},hu:function(){return Mo},Fw:function(){return zo},rU:function(){return p},nU:function(){return Vo},SA:function(){return Jo},sk:function(){return qe},J3:function(){return qo},Or:function(){return ts},T3:function(){return pa},g9:function(){return Rl},Ex:function(){return ia},Gk:function(){return dr},tn:function(){return _o},Ph:function(){return Wa},YE:function(){return pi},v7:function(){return yo},Hz:function(){return Pa},R6:function(){return Eo},tR:function(){return mi},oz:function(){return Ti},BV:function(){return Ai},k2:function(){return po},BT:function(){return Ei},dh:function(){return ws},vK:function(){return Ps},Kq:function(){return _s},wA:function(){return Ss},VC:function(){return Rs},Pd:function(){return Cs},xT:function(){return Ws},uw:function(){return Ni},qt:function(){return ei},oZ:function(){return Wl},iA:function(){return Oo},tB:function(){return Hs},GB:function(){return Pn},po:function(){return Lr},r0:function(){return Sa},mZ:function(){return na},Pf:function(){return ra}});var n=e(30705),i=e(61837),m=e(37265),d=e(90436),a=e(87685),l=e(99688),y=e(19928),b=e.n(y),t=e(2784),_=e(43434),g=e(79692),F=e(12420),j=e(60364),V=e(41128),re=e(15459),w=e(76600),A=e(41547),D=e(77277),f=e(86689),x=e(72779),R=e.n(x),c=e(76635),O=e(73557),T=e(39857),Ce=e(16060),we=e(95544),nt=e(56553),ot=e(26639),$t=e(39595),ct=e(80030),St=e(19353),xt=e(95074),Q=e(41156),pn=e(88188),Ct=e(13725),Ge=e(11105),C=e(97963),Fe=e(46506),ve=e.n(Fe),M=e(54073),G=e.n(M),Re=e(10368),Ne=e(76985),Me=e(39829),Xe=e(19574),vt=e.n(Xe),ee=e(72164),ue=e(93657),Pe=e(60905),at=e.p+"static/missingAnnotation.67f79e98..svg",bt=e.p+"static/noInformation.4b426325..svg",Wt=e.p+"static/createComponent.975d1e1e..svg",on=e.p+"static/noBuild.1715fa71..svg",zt=e(11776),Le=e(38402),Pt=e(49378),Rt=e(27616),sn=e(8284),un=e(70660),Lt=e(91750),Ht=e(38016),nn=e(85256),Te=e(1292),st=e(28316),le=e(35292),ie=e(48049),Z=e(51209),B=e(21353),_e=e(71215),de=e(8629),Ie=e(49429),ze=e(38724),rt=e(79249),kt=e(3806),He=e(32272),z=e(15277),be=e.n(z),je=e(29862),ut=e(67358),Et=e(94339),Mt=e(14503),rn=e(24579),ln=e(32552),Rn=e(27597),Mn=e(39307),Ke=e(21324),Je=e(7089),Qe=e(42494),oe=e(74603),fe=e(56939),We=e(12231),Be=e(73698),Ze=e(72379),gt=e(74600),It=e.n(gt),jt=e(37390),Zt=e(97485),Ot=e(15584),Vt=e(89571),mn=e(86136),bn=e(79784),hn=e(19126),wn=e.n(hn),gn=e(80079),Tn=e(18671),kn=e(50023),$n=e(4190),Cn=e(44882),zn=e(18473),Sn=e(57998),Zn=e(6487),Ln=e(99152),jn=e(67222),Xn=e(21070),or=e(90324),gr=e(98281),fr=e(33375),Se=e(44233),ne=e(27604),ae=e(36444),S=e(37971),ge=e(59709),L=e(17373),N=e(3702),me=e(93111),et=e(44311),wt=e(83543),h=e(59797),v=e(26739),k=e(86619),te=e(98989),Ee=e.p+"static/mic-drop.fe3ef4d0..svg",Ye=e(16173),H=e(30195),W=e(63955),Ae=e(74828),De=e(45455),pt=e.n(De);function dt(r){const[o,E]=(0,t.useState)([]),P=(0,n.h_)(n.$v),{anchorOrigin:$={vertical:"top",horizontal:"center"},transientTimeoutMs:q}=r,he=q!=null?q:5e3;(0,t.useEffect)(()=>{const Ve=P.alert$().subscribe(Tt=>E(_t=>_t.concat(Tt)));return()=>{Ve.unsubscribe()}},[P]);const[Ue]=o;if((0,t.useEffect)(()=>{if(Ue&&Ue.display==="transient"){const Ve=setTimeout(()=>{E(Tt=>{const _t=Tt.filter(Ut=>Ut!==Ue);return _t.length===Tt.length?Tt:_t})},he);return()=>clearTimeout(Ve)}},[Ue,he]),o.length===0)return null;const tt=()=>{E(Ve=>Ve.filter(Tt=>Tt!==Ue))};return t.createElement(m.Z,{open:!0,anchorOrigin:$},t.createElement(l.Z,{action:t.createElement(i.Z,{color:"inherit",size:"small",onClick:tt,"data-testid":"error-button-close"},t.createElement(a.Z,null)),severity:Ue.severity},t.createElement(d.Z,{component:"span"},String(Ue.message),o.length>1&&t.createElement("em",null,` (${o.length-1} older ${b()("message",o.length-1)})`))))}function ft(r){let o=0;for(let P=0;P<r.length;P++)o=r.charCodeAt(P)+((o<<5)-o);let E="#";for(let P=0;P<3;P++){const $=o>>P*8&255;E+=`00${$.toString(16)}`.substr(-2)}return E}function yt(r){var o;return(o=r.match(/\b\w/g))==null?void 0:o.join("").substring(0,2)}const Ft=(0,g.Z)(r=>(0,F.Z)({avatar:{width:"4rem",height:"4rem",color:"#fff"},avatarText:{fontWeight:r.typography.fontWeightBold,letterSpacing:"1px",textTransform:"uppercase"}}),{name:"BackstageAvatar"});function an(r){const{displayName:o,picture:E,customStyles:P}=r,$=Ft();let q={...P};const he={fontFamily:q.fontFamily,fontSize:q.fontSize,fontWeight:q.fontWeight};return E||(q={backgroundColor:ft(o||""),...P}),t.createElement(_.Z,{alt:o,src:E,className:$.avatar,style:q},o&&t.createElement(d.Z,{variant:"h6",component:"span",className:$.avatarText,style:he},yt(o)))}function en(){const[r]=(0,O.is)(t.createElement(O.AW,{index:!0,element:t.createElement("div",null)}));return!r.index}const cn=(0,g.Z)({visuallyHidden:{clip:"rect(0 0 0 0)",clipPath:"inset(50%)",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",height:1,width:1},externalLink:{position:"relative"}},{name:"Link"}),xn=r=>/^([a-z+.-]+):/.test(r),Dn=()=>{try{return(0,n.h_)(n.Ds).getOptionalString("app.baseUrl")}catch{return}},Nn=()=>{var r;const o="http://sample.dev",E=(r=Dn())!=null?r:"/",{pathname:P}=new URL(E,o);return(0,c.trimEnd)(P,"/")},K=r=>{let o=String(r);const E=Nn(),P=xn(o),$=o.startsWith(E);return!P&&!$&&(o=E.concat(o)),o},s=r=>{var o;return r instanceof Array?r.map(s).join(" ").trim():typeof r=="object"&&r?s((o=r==null?void 0:r.props)==null?void 0:o.children):["string","number"].includes(typeof r)?String(r):""},p=t.forwardRef(({onClick:r,noTrack:o,...E},P)=>{const $=cn(),q=(0,n.z$)(),he=en()?K(E.to):E.to,Ue=s(E.children)||he,tt=xn(he),Ve=tt&&!!/^https?:/.exec(he),Tt=_t=>{r==null||r(_t),o||q.captureEvent("click",Ue,{attributes:{to:he}})};return tt?t.createElement(f.Z,{...Ve?{target:"_blank",rel:"noopener"}:{},...E,ref:P,href:he,onClick:Tt,className:R()($.externalLink,E.className)},E.children,t.createElement(d.Z,{component:"span",className:$.visuallyHidden},", Opens in a new window")):t.createElement(f.Z,{...E,ref:P,component:T.rU,to:he,onClick:Tt})}),I=t.forwardRef((r,o)=>t.createElement(p,{ref:o,...r,color:"initial"})),X=t.forwardRef((r,o)=>t.createElement(D.Z,{ref:o,component:I,...r}));function xe(r){const{text:o,tooltipDelay:E=1e3,tooltipText:P="Text copied to clipboard","aria-label":$="Copy text"}=r,q=(0,n.h_)(n.VE),[he,Ue]=(0,t.useState)(!1),[{error:tt},Ve]=(0,xt.Z)();(0,t.useEffect)(()=>{tt&&q.post(tt)},[tt,q]);const Tt=_t=>{_t.stopPropagation(),Ue(!0),Ve(o)};return t.createElement(t.Fragment,null,t.createElement(ct.ZP,{id:"copy-test-tooltip",title:P,placement:"top",leaveDelay:E,onClose:()=>Ue(!1),open:he},t.createElement(i.Z,{onClick:Tt,"aria-label":$},t.createElement(St.Z,null))))}function se(r){const{text:o,language:E,showLineNumbers:P=!1,highlightedNumbers:$,customStyle:q,showCopyCodeButton:he=!1}=r,Ue=(0,j.Z)(),tt=Ue.palette.type==="dark"?ot.Z:$t.Z,Ve=Ue.palette.type==="dark"?"#256bf3":"#e6ffed";return t.createElement(we.Z,{position:"relative"},t.createElement(nt.Z,{customStyle:q,language:E,style:tt,showLineNumbers:P,wrapLines:!0,lineNumberStyle:{color:Ue.palette.textVerySubtle},lineProps:Tt=>$!=null&&$.includes(Tt)?{style:{backgroundColor:Ve}}:{}},o),he&&t.createElement(we.Z,{position:"absolute",top:0,right:0},t.createElement(xe,{text:o})))}function U(r){const{title:o,to:E}=r,P=(0,Q.Z)($=>$.breakpoints.down("xs"));return E?P?t.createElement(i.Z,{component:T.rU,color:"primary",title:o,size:"small",to:E},t.createElement(pn.Z,null)):t.createElement(D.Z,{component:T.rU,variant:"contained",color:"primary",to:E},o):null}var ye=(r=>(r.TOP_BOTTOM="TB",r.BOTTOM_TOP="BT",r.LEFT_RIGHT="LR",r.RIGHT_LEFT="RL",r))(ye||{}),it=(r=>(r.UP_LEFT="UL",r.UP_RIGHT="UR",r.DOWN_LEFT="DL",r.DOWN_RIGHT="DR",r))(it||{}),Bt=(r=>(r.NETWORK_SIMPLEX="network-simplex",r.TIGHT_TREE="tight-tree",r.LONGEST_PATH="longest-path",r))(Bt||{}),Yt=(r=>(r.LEFT="l",r.RIGHT="r",r.CENTER="c",r))(Yt||{}),fn=Object.freeze({__proto__:null,Direction:ye,Alignment:it,Ranker:Bt,LabelPosition:Yt});const In=(0,g.Z)(r=>({node:{fill:r.palette.primary.light,stroke:r.palette.primary.light},text:{fill:r.palette.primary.contrastText}}),{name:"BackstageDependencyGraphDefaultNode"});function Vn({node:{id:r}}){const o=In(),[E,P]=t.useState(0),[$,q]=t.useState(0),he=t.useRef(null);t.useLayoutEffect(()=>{if(he.current){let{height:Tt,width:_t}=he.current.getBBox();Tt=Math.round(Tt),_t=Math.round(_t),(Tt!==$||_t!==E)&&(P(_t),q(Tt))}},[E,$]);const Ue=10,tt=E+Ue*2,Ve=$+Ue*2;return t.createElement("g",null,t.createElement("rect",{className:o.node,width:tt,height:Ve,rx:10}),t.createElement("text",{ref:he,className:o.text,y:Ve/2,x:tt/2,textAnchor:"middle",alignmentBaseline:"middle"},r))}const Bn="arrow-marker",Gn="node",Wn="edge",Er="label",Hn=(0,Re.Z)(r=>({node:{transition:`${r.transitions.duration.shortest}ms`}}),{name:"BackstageDependencyGraphNode"}),yr=r=>t.createElement(Vn,{...r});function Ir({render:r=yr,setNode:o,node:E}){const{width:P,height:$,x:q=0,y:he=0}=E,Ue=E,tt=Hn(),Ve=t.useRef(null);return t.useLayoutEffect(()=>{if(Ve.current){let{height:Tt,width:_t}=Ve.current.getBBox();Tt=Math.round(Tt),_t=Math.round(_t),(Tt!==$||_t!==P)&&o(E.id,{...E,height:Tt,width:_t})}},[E,P,$,o]),t.createElement("g",{ref:Ve,"data-testid":Gn,className:tt.node,transform:`translate(${q-P/2},${he-$/2})`},r({node:Ue}))}const Y=(0,Re.Z)(r=>({text:{fill:r.palette.textContrast}}),{name:"BackstageDependencyGraphDefaultLabel"});function pe({edge:{label:r}}){const o=Y();return t.createElement("text",{className:o.text,textAnchor:"middle"},r)}const ke=(0,Re.Z)(r=>({path:{strokeWidth:1,stroke:r.palette.textSubtle,fill:"none",transition:`${r.transitions.duration.shortest}ms`},label:{transition:`${r.transitions.duration.shortest}ms`}}),{name:"BackstageDependencyGraphEdge"}),mt=r=>t.createElement(pe,{...r});function Dt({render:r=mt,setEdge:o,id:E,edge:P,curve:$}){const{x:q=0,y:he=0,width:Ue,height:tt,points:Ve}=P,Tt=P,_t=ke(),Ut=t.useRef(null);t.useLayoutEffect(()=>{if(Ut.current){let{height:vn,width:Jn}=Ut.current.getBBox();vn=Math.round(vn),Jn=Math.round(Jn),(vn!==tt||Jn!==Ue)&&o(E,{...P,height:vn,width:Jn})}},[P,tt,Ue,o,E]);let Gt="";const yn=t.useMemo(()=>Ne.Z().x(vn=>vn.x).y(vn=>vn.y).curve(Me[$]),[$]);if(Ve){const vn=Ve.filter(Jn=>vt()(Jn.x)&&vt()(Jn.y));Gt=yn(vn)||""}return t.createElement(t.Fragment,null,Gt&&t.createElement("path",{"data-testid":Wn,className:_t.path,d:Gt}),Tt.label?t.createElement("g",{ref:Ut,"data-testid":Er,className:_t.label,transform:`translate(${q},${he})`},r({edge:Tt})):null)}const Xt="workspace";function tn(r){var o,E;const{edges:P,nodes:$,renderNode:q,direction:he=ye.TOP_BOTTOM,align:Ue,nodeMargin:tt=50,edgeMargin:Ve=10,rankMargin:Tt=50,paddingX:_t=0,paddingY:Ut=0,acyclicer:Gt,ranker:yn=Bt.NETWORK_SIMPLEX,labelPosition:vn=Yt.RIGHT,labelOffset:Jn=10,edgeRanks:tr=1,edgeWeight:sr=1,renderLabel:ir,defs:Yn,zoom:lr="enabled",curve:nr="curveMonotoneX",fit:Zr="grow",...Nr}=r,xr=(0,C.Z)(),[kr,Da]=t.useState(100),[Wr,Ma]=t.useState(100),rr=t.useRef(new(ve()).graphlib.Graph),[ea,Ea]=t.useState(((o=rr.current.graph())==null?void 0:o.width)||0),[Fr,$a]=t.useState(((E=rr.current.graph())==null?void 0:E.height)||0),[br,Br]=t.useState([]),[Kr,zr]=t.useState([]),cr=Math.max(ea,kr),hr=Math.max(Fr,Wr),ta=Math.min(Fr,Wr),jr=Zr==="grow"?hr:ta,aa=t.useMemo(()=>G()(mr=>{if(!mr)return;const _r=Ge.Z(mr),ur=Ge.Z(mr.getElementById(Xt));function Dr(){_r.call(Ct.sP().scaleExtent([1,10]).on("zoom",Ur=>{Ur.transform.x=Math.min(0,Math.max(Ur.transform.x,cr-cr*Ur.transform.k)),Ur.transform.y=Math.min(0,Math.max(Ur.transform.y,hr-hr*Ur.transform.k)),ur.attr("transform",Ur.transform)}))}lr==="enabled"?Dr():lr==="enable-on-click"&&_r.on("click",()=>Dr());const{width:Mr,height:ya}=mr.getBoundingClientRect();kr!==Mr&&Da(Mr),Wr!==ya&&Ma(ya)},100),[Wr,kr,cr,hr,lr]),Bo=t.useCallback(()=>{const mr=rr.current.nodes(),_r=rr.current.edges();mr.forEach(ur=>{$.some(Mr=>Mr.id===ur)||rr.current.removeNode(ur)}),_r.forEach(ur=>{P.some(Mr=>Mr.from===ur.v&&Mr.to===ur.w)||rr.current.removeEdge(ur.v,ur.w)}),$.forEach(ur=>{const Dr=rr.current.nodes().find(Mr=>ur.id===Mr);if(Dr&&rr.current.node(Dr)){const{width:Mr,height:ya,x:Ur,y:Vl}=rr.current.node(Dr);rr.current.setNode(Dr,{...ur,width:Mr,height:ya,x:Ur,y:Vl})}else rr.current.setNode(ur.id,{...ur,width:0,height:0})}),P.forEach(ur=>{rr.current.setEdge(ur.from,ur.to,{...ur,label:ur.label,width:0,height:0,labelpos:vn,labeloffset:Jn,weight:sr,minlen:tr})})},[P,$,vn,Jn,sr,tr]),oa=t.useMemo(()=>G()(()=>{ve().layout(rr.current);const{height:mr,width:_r}=rr.current.graph(),ur=Math.max(0,mr||0),Dr=Math.max(0,_r||0);Ea(Dr),$a(ur),Br(rr.current.nodes()),zr(rr.current.edges())},250,{leading:!0}),[]);t.useEffect(()=>(rr.current.setGraph({rankdir:he,align:Ue,nodesep:tt,edgesep:Ve,ranksep:Tt,marginx:_t,marginy:Ut,acyclicer:Gt,ranker:yn}),Bo(),oa(),oa.cancel),[Gt,Ue,he,Ve,_t,Ut,tt,Tt,yn,Bo,oa]);function zl(mr,_r){return rr.current.setNode(mr,_r),oa(),rr.current}function jl(mr,_r){return rr.current.setEdge(mr,_r),oa(),rr.current}return t.createElement("svg",{ref:aa,...Nr,width:"100%",height:jr,viewBox:`0 0 ${cr} ${hr}`},t.createElement("defs",null,t.createElement("marker",{id:Bn,viewBox:"0 0 24 24",markerWidth:"14",markerHeight:"14",refX:"16",refY:"12",orient:"auto",markerUnits:"strokeWidth"},t.createElement("path",{fill:xr.palette.textSubtle,d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})),Yn),t.createElement("g",{id:Xt},t.createElement("svg",{width:ea,height:Fr,y:hr/2-Fr/2,x:cr/2-ea/2,viewBox:`0 0 ${ea} ${Fr}`},Kr.map(mr=>{const _r=rr.current.edge(mr);return _r?t.createElement(Dt,{key:`${mr.v}-${mr.w}`,id:mr,setEdge:jl,render:ir,edge:_r,curve:nr}):null}),br.map(mr=>{const _r=rr.current.node(mr);return _r?t.createElement(Ir,{key:mr,setNode:zl,render:q,node:_r}):null}))))}const dn=(0,g.Z)(r=>{var o;return{root:{padding:r.spacing(0),marginBottom:r.spacing(0),marginTop:r.spacing(0),display:"flex",flexFlow:"row nowrap"},topPosition:{position:"relative",marginBottom:r.spacing(6),marginTop:-r.spacing(3),zIndex:"unset"},icon:{fontSize:r.typography.h6.fontSize},content:{width:"100%",maxWidth:"inherit",flexWrap:"nowrap"},message:{display:"flex",alignItems:"center",color:r.palette.banner.text,"& a":{color:r.palette.banner.link}},info:{backgroundColor:r.palette.banner.info},error:{backgroundColor:r.palette.banner.error},warning:{backgroundColor:(o=r.palette.banner.warning)!=null?o:r.palette.banner.error}}},{name:"BackstageDismissableBanner"}),An=r=>{var o;const{variant:E,message:P,id:$,fixed:q=!1}=r,he=dn(),tt=(0,n.h_)(n.E6).forBucket("notifications"),Ve=(o=tt.snapshot("dismissedBanners").value)!=null?o:[],[Tt,_t]=(0,t.useState)(new Set(Ve)),Ut=(0,ee.Z)(tt.observe$("dismissedBanners"));(0,t.useEffect)(()=>{var yn;if(Ut!=null&&Ut.value){const vn=(yn=Ut==null?void 0:Ut.value)!=null?yn:[];_t(new Set(vn))}},[Ut==null?void 0:Ut.value]);const Gt=()=>{tt.set("dismissedBanners",[...Tt,$])};return t.createElement(m.Z,{anchorOrigin:q?{vertical:"bottom",horizontal:"center"}:{vertical:"top",horizontal:"center"},open:!Tt.has($),classes:{root:R()(he.root,!q&&he.topPosition)}},t.createElement(ue.Z,{classes:{root:R()(he.content,he[E]),message:he.message},message:P,action:[t.createElement(i.Z,{key:"dismiss",title:"Permanently dismiss this message",color:"inherit",onClick:Gt},t.createElement(a.Z,{className:he.icon}))]}))},On=(0,g.Z)({generalImg:{width:"95%",zIndex:2,position:"relative",left:"50%",top:"50%",transform:"translate(-50%, 15%)"}},{name:"BackstageEmptyStateImage"}),Fn=({missing:r})=>{const o=On();switch(r){case"field":return t.createElement("img",{src:at,className:o.generalImg,alt:"annotation is missing"});case"info":return t.createElement("img",{src:bt,alt:"no Information",className:o.generalImg});case"content":return t.createElement("img",{src:Wt,alt:"create Component",className:o.generalImg});case"data":return t.createElement("img",{src:on,alt:"no Build",className:o.generalImg});default:return null}},Un=(0,g.Z)(r=>({root:{backgroundColor:r.palette.background.default,padding:r.spacing(2,0,0,0)},action:{marginTop:r.spacing(2)},imageContainer:{position:"relative"}}),{name:"BackstageEmptyState"});function En(r){const{title:o,description:E,missing:P,action:$}=r,q=Un();return t.createElement(Pe.Z,{container:!0,direction:"row",justifyContent:"space-around",alignItems:"flex-start",className:q.root,spacing:2},t.createElement(Pe.Z,{item:!0,xs:12,md:6},t.createElement(Pe.Z,{container:!0,direction:"column"},t.createElement(Pe.Z,{item:!0,xs:!0},t.createElement(d.Z,{variant:"h5"},o)),t.createElement(Pe.Z,{item:!0,xs:!0},t.createElement(d.Z,{variant:"body1"},E)),t.createElement(Pe.Z,{item:!0,xs:!0,className:q.action},$))),t.createElement(Pe.Z,{item:!0,xs:12,md:6,className:q.imageContainer},typeof P=="string"?t.createElement(Fn,{missing:P}):P.customImage))}const ar=`apiVersion: backstage.io/v1alpha1
kind: Component
metadata:
  name: example
  description: example.com
  annotations:
    ANNOTATION: value
spec:
  type: website
  lifecycle: production
  owner: user:guest`,pr=/^.*ANNOTATION.*$/m,er=ar.match(pr)[0],vr=ar.split(`
`).findIndex(r=>pr.test(r)),J=(0,g.Z)(r=>({code:{borderRadius:6,margin:`${r.spacing(2)}px 0px`,background:r.palette.type==="dark"?"#444":"#fff"}}),{name:"BackstageMissingAnnotationEmptyState"});function ce(r){return Array.from(Array(r+1).keys(),o=>o+vr)}function $e(r){const o=r.map(E=>er.replace("ANNOTATION",E)).join(`
`);return ar.replace(er,o)}function Oe(r){const o=r.length<=1;return t.createElement(t.Fragment,null,"The ",o?"annotation":"annotations"," ",r.map(E=>t.createElement("code",null,E)).reduce((E,P)=>t.createElement(t.Fragment,null,E,", ",P))," ",o?"is":"are"," missing. You need to add the"," ",o?"annotation":"annotations"," to your component if you want to enable this tool.")}function qe(r){const{annotation:o,readMoreUrl:E}=r,P=Array.isArray(o)?o:[o],$=E||"https://backstage.io/docs/features/software-catalog/well-known-annotations",q=J();return t.createElement(En,{missing:"field",title:"Missing Annotation",description:Oe(P),action:t.createElement(t.Fragment,null,t.createElement(d.Z,{variant:"body1"},"Add the annotation to your component YAML as shown in the highlighted example below:"),t.createElement(we.Z,{className:q.code},t.createElement(se,{text:$e(P),language:"yaml",showLineNumbers:!0,highlightedNumbers:ce(P.length),customStyle:{background:"inherit",fontSize:"115%"}})),t.createElement(D.Z,{color:"primary",component:p,to:$},"Read more"))})}const ht=(r,o)=>(o.palette.type==="light"?V._j:V.$n)(o.palette[r].light,.6),lt=(r,o)=>(o.palette.type==="light"?V.$n:V._j)(o.palette[r].light,.9),At=(0,g.Z)(r=>({root:{marginRight:r.spacing(1),fill:({severity:o})=>ht(o,r)}})),Kt=({severity:r})=>{const o=At({severity:r});return t.createElement(Lt.Z,{classes:o})},Jt=({severity:r})=>{const o=At({severity:r});return t.createElement(Ht.Z,{classes:o})},Qt=(0,g.Z)(r=>({panel:{backgroundColor:({severity:o})=>lt(o,r),color:({severity:o})=>ht(o,r),verticalAlign:"middle"},summary:{display:"flex",flexDirection:"row"},summaryText:{color:({severity:o})=>ht(o,r),fontWeight:r.typography.fontWeightBold},message:{width:"100%",display:"block",color:({severity:o})=>ht(o,r),backgroundColor:({severity:o})=>lt(o,r)},details:{width:"100%",display:"block",color:r.palette.textContrast,backgroundColor:r.palette.background.default,border:`1px solid ${r.palette.border}`,padding:r.spacing(2),fontFamily:"sans-serif"}}),{name:"BackstageWarningPanel"}),qt=r=>r.charAt(0).toLocaleUpperCase("en-US")+r.slice(1);function Pn(r){const{severity:o="warning",title:E,message:P,children:$,defaultExpanded:q}=r,he=Qt({severity:o}),Ue=qt(o)+(E?`: ${E}`:"");return t.createElement(Rt.Z,{defaultExpanded:q!=null?q:!1,className:he.panel,role:"alert"},t.createElement(sn.Z,{expandIcon:t.createElement(Jt,{severity:o}),className:he.summary},t.createElement(Kt,{severity:o}),t.createElement(d.Z,{className:he.summaryText,variant:"subtitle1"},Ue)),(P||$)&&t.createElement(un.Z,null,t.createElement(Pe.Z,{container:!0},P&&t.createElement(Pe.Z,{item:!0,xs:12},t.createElement(d.Z,{className:he.message,variant:"body1"},P)),$&&t.createElement(Pe.Z,{item:!0,xs:12,className:he.details},$))))}const Qn=(0,g.Z)(r=>({text:{fontFamily:"monospace",whiteSpace:"pre",overflowX:"auto",marginRight:r.spacing(2)},divider:{margin:r.spacing(2)}}),{name:"BackstageErrorPanel"}),Kn=({error:r,message:o,stack:E,children:P})=>{const $=Qn();return t.createElement(zt.Z,{dense:!0},t.createElement(Le.Z,{alignItems:"flex-start"},t.createElement(Pt.Z,{classes:{secondary:$.text},primary:"Error",secondary:r}),t.createElement(xe,{text:r})),t.createElement(Le.Z,{alignItems:"flex-start"},t.createElement(Pt.Z,{classes:{secondary:$.text},primary:"Message",secondary:o}),t.createElement(xe,{text:o})),E&&t.createElement(Le.Z,{alignItems:"flex-start"},t.createElement(Pt.Z,{classes:{secondary:$.text},primary:"Stack Trace",secondary:E}),t.createElement(xe,{text:E})),P)};function _n(r){const{title:o,error:E,defaultExpanded:P,children:$}=r;return t.createElement(Pn,{severity:"error",title:o!=null?o:E.message,defaultExpanded:P},t.createElement(Kn,{error:E.name,message:E.message,stack:E.stack,children:$}))}const qn=(0,g.Z)(r=>({text:{fontFamily:"monospace",whiteSpace:"pre",overflowX:"auto",marginRight:r.spacing(2)},divider:{margin:r.spacing(2)}}),{name:"BackstageResponseErrorPanel"});function dr(r){var o;const{title:E,error:P,defaultExpanded:$}=r,q=qn();if(P.name!=="ResponseError")return t.createElement(_n,{title:E!=null?E:P.message,defaultExpanded:$,error:P});const{body:he,cause:Ue}=P,{request:tt,response:Ve}=he,Tt=`${Ve.statusCode}: ${Ue.name}`,_t=tt&&`${tt.method} ${tt.url}`,Ut=Ue.message.replace(/\\n/g,`
`),Gt=(o=Ue.stack)==null?void 0:o.replace(/\\n/g,`
`),yn=JSON.stringify(he,void 0,2);return t.createElement(_n,{title:E!=null?E:P.message,defaultExpanded:$,error:{name:Tt,message:Ut,stack:Gt}},_t&&t.createElement(Le.Z,{alignItems:"flex-start"},t.createElement(Pt.Z,{classes:{secondary:q.text},primary:"Request",secondary:tt?`${_t}`:void 0}),t.createElement(xe,{text:_t})),t.createElement(t.Fragment,null,t.createElement(nn.Z,{component:"li",className:q.divider}),t.createElement(Le.Z,{alignItems:"flex-start"},t.createElement(Pt.Z,{classes:{secondary:q.text},primary:"Full Error as JSON"})),t.createElement(se,{language:"json",text:yn,showCopyCodeButton:!0})))}function $r(r){const o=document.createElement("div");return o.setAttribute("id",r),o}function Or(r){document.body.insertBefore(r,document.body.lastElementChild.nextElementSibling)}function Ar(r){const o=useRef(null);useEffect(function(){const $=document.querySelector(`#${r}`),q=$||$r(r);return $||Or(q),q.appendChild(o.current),function(){o.current.remove(),q.childNodes.length===-1&&q.remove()}},[r]);function E(){return o.current||(o.current=document.createElement("div")),o.current}return E()}const Pr="core.calloutSeen";function Cr(){const[r,o]=useState(()=>{const P=localStorage.getItem(Pr);return P?JSON.parse(P):{}}),E=useCallback((P,$)=>{const q=localStorage.getItem(Pr),Ue={...q?JSON.parse(q):{},[P]:$};o(Ue),localStorage.setItem(Pr,JSON.stringify(Ue))},[]);return{states:r,setState:E}}function Vr(r){const{states:o,setState:E}=Cr(),P=useCallback(()=>{E(r,!0)},[E,r]);return{seen:o[r]===!0,markSeen:P}}function Gr(r){const{seen:o,markSeen:E}=Vr(r);return{show:o===!1,hide:E}}const Hr=(0,g.Z)({"@keyframes pulsateSlightly":{"0%":{transform:"scale(1.0)"},"100%":{transform:"scale(1.1)"}},"@keyframes pulsateAndFade":{"0%":{transform:"scale(1.0)",opacity:.9},"100%":{transform:"scale(1.5)",opacity:0}},featureWrapper:{position:"relative"},backdrop:{zIndex:2e3,position:"fixed",overflow:"hidden",left:0,right:0,top:0,bottom:0},dot:{position:"absolute",backgroundColor:"transparent",borderRadius:"100%",border:"1px solid rgba(103, 146, 180, 0.98)",boxShadow:"0px 0px 0px 20000px rgba(0, 0, 0, 0.5)",zIndex:2001,transformOrigin:"center center",animation:"$pulsateSlightly 1744ms 1.2s cubic-bezier(0.4, 0, 0.2, 1) alternate infinite"},pulseCircle:{width:"100%",height:"100%",backgroundColor:"transparent",borderRadius:"100%",border:"2px solid white",zIndex:2001,transformOrigin:"center center",animation:"$pulsateAndFade 872ms 1.2s cubic-bezier(0.4, 0, 0.2, 1) infinite"},text:{position:"absolute",color:"white",zIndex:2003}},{name:"BackstageFeatureCalloutCircular"});function Sr(r){const{featureId:o,title:E,description:P,children:$}=r,{show:q,hide:he}=Gr(o),Ue=Ar("core.callout"),tt=useRef(null),[Ve,Tt]=useState(),_t=Hr(),Ut=useCallback(()=>{if(tt.current){const Gt=tt.current.getBoundingClientRect(),yn=Math.max(Gt.width,Gt.height),vn=800,Jn=Gt.x-(yn-Gt.width)/2-vn,tr=Gt.y-(yn-Gt.height)/2-vn,sr=yn+2*vn,ir=450,Yn=Gt.x+Gt.width/2-ir,lr=Gt.y-(yn-Gt.height)/2+yn+20;Tt({dotLeft:Jn,dotTop:tr,dotSize:sr,borderWidth:vn,textTop:lr,textLeft:Yn,textWidth:ir})}},[]);return useEffect(()=>(window.addEventListener("resize",Ut),window.addEventListener("scroll",Ut),()=>{window.removeEventListener("resize",Ut),window.removeEventListener("scroll",Ut)}),[Ut]),useLayoutEffect(Ut,[tt.current,Ut]),q?React.createElement(React.Fragment,null,React.createElement(Box,{className:_t.featureWrapper,ref:tt},$),createPortal(React.createElement(Box,{className:_t.backdrop},React.createElement(ClickAwayListener,{onClickAway:he},React.createElement(React.Fragment,null,React.createElement(Box,{className:_t.dot,"data-testid":"dot",style:{left:Ve==null?void 0:Ve.dotLeft,top:Ve==null?void 0:Ve.dotTop,width:Ve==null?void 0:Ve.dotSize,height:Ve==null?void 0:Ve.dotSize,borderWidth:Ve==null?void 0:Ve.borderWidth},onClick:he,onKeyDown:he,role:"button",tabIndex:0},React.createElement(Box,{className:_t.pulseCircle})),React.createElement(Box,{className:_t.text,"data-testid":"text",style:{left:Ve==null?void 0:Ve.textLeft,top:Ve==null?void 0:Ve.textTop,width:Ve==null?void 0:Ve.textWidth}},React.createElement(Typography,{variant:"h2",paragraph:!0},E),React.createElement(Typography,null,P))))),Ue)):React.createElement(React.Fragment,null,$)}const Rr=(0,g.Z)(r=>({link:{display:"grid",justifyItems:"center",gridGap:4,textAlign:"center"},disabled:{color:r.palette.text.secondary,cursor:"default"},primary:{color:r.palette.primary.main},secondary:{color:r.palette.secondary.main},label:{textTransform:"uppercase",fontWeight:r.typography.fontWeightBold,letterSpacing:1.2}}),{name:"BackstageIconLinkVertical"});function Jr({color:r="primary",disabled:o=!1,href:E="#",icon:P=t.createElement(le.Z,null),label:$,onClick:q,title:he}){const Ue=Rr();return o?t.createElement(we.Z,{title:he,className:R()(Ue.link,Ue.disabled)},P,t.createElement(d.Z,{variant:"caption",component:"span",className:Ue.label},$)):t.createElement(p,{title:he,className:R()(Ue.link,Ue[r]),to:E,onClick:q},P,t.createElement(d.Z,{variant:"caption",component:"span",className:Ue.label},$))}const sa=(0,g.Z)(r=>({links:{margin:r.spacing(2,0),display:"grid",gridAutoFlow:"column",gridAutoColumns:"min-content",gridGap:r.spacing(3)}}),{name:"BackstageHeaderIconLinkRow"});function Uo(r){const{links:o}=r,E=sa();return t.createElement("nav",{className:E.links},o.map((P,$)=>t.createElement(Jr,{key:$+1,...P})))}const La=r=>{const o=r==="dark"?"16%":"97%";return`
    hsl(0, 0%, ${o}) 0%,
    hsla(0, 0%, ${o}, 0.987) 8.1%,
    hsla(0, 0%, ${o}, 0.951) 15.5%,
    hsla(0, 0%, ${o}, 0.896) 22.5%,
    hsla(0, 0%, ${o}, 0.825) 29%,
    hsla(0, 0%, ${o}, 0.741) 35.3%,
    hsla(0, 0%, ${o}, 0.648) 41.2%,
    hsla(0, 0%, ${o}, 0.55) 47.1%,
    hsla(0, 0%, ${o}, 0.45) 52.9%,
    hsla(0, 0%, ${o}, 0.352) 58.8%,
    hsla(0, 0%, ${o}, 0.259) 64.7%,
    hsla(0, 0%, ${o}, 0.175) 71%,
    hsla(0, 0%, ${o}, 0.104) 77.5%,
    hsla(0, 0%, ${o}, 0.049) 84.5%,
    hsla(0, 0%, ${o}, 0.013) 91.9%,
    hsla(0, 0%, ${o}, 0) 100%
  `},Zo=100,va=10,No=(0,g.Z)(r=>({root:{position:"relative",display:"flex",flexFlow:"row nowrap",alignItems:"center"},container:{overflow:"auto",scrollbarWidth:0,"&::-webkit-scrollbar":{display:"none"}},fade:{position:"absolute",width:Zo,height:`calc(100% + ${va}px)`,transition:"opacity 300ms",pointerEvents:"none"},fadeLeft:{left:-va,background:`linear-gradient(90deg, ${La(r.palette.type)})`},fadeRight:{right:-va,background:`linear-gradient(270deg, ${La(r.palette.type)})`},fadeHidden:{opacity:0},button:{position:"absolute"},buttonLeft:{left:-r.spacing(2)},buttonRight:{right:-r.spacing(2)}}),{name:"BackstageHorizontalScrollGrid"});function Wo(r){const[[o,E],P]=React.useState([0,0]);return React.useLayoutEffect(()=>{const $=r.current;if(!$){P([0,0]);return}const q=()=>{const he=$.scrollLeft,Ue=$.scrollWidth-$.offsetWidth-$.scrollLeft;P([he,Ue])};return q(),$.addEventListener("scroll",q),window.addEventListener("resize",q),()=>{$.removeEventListener("scroll",q),window.removeEventListener("resize",q)}},[r]),[o,E]}function Fo(r,o,E){const[P,$]=React.useState(0);return React.useLayoutEffect(()=>{if(P===0)return;const q=window.performance.now(),he=requestAnimationFrame(Ue=>{if(!r.current)return;const tt=Ue-q,Ve=Math.abs(P)*tt/o,_t=Math.max(E,Ve)*Math.sign(P);r.current.scrollBy({left:_t});const Ut=P-_t;Math.sign(P)!==Math.sign(Ut)?$(0):$(Ut)});return()=>cancelAnimationFrame(he)},[r,P,o,E]),$}function Gl(r){const{scrollStep:o=100,scrollSpeed:E=50,minScrollDistance:P=5,children:$,...q}=r,he=No(r),Ue=React.useRef(),[tt,Ve]=Wo(Ue),Tt=Fo(Ue,E,P),_t=Ut=>{!Ue.current||Tt(Ut?o:-o)};return React.createElement(Box,{...q,className:he.root},React.createElement(Grid,{container:!0,direction:"row",wrap:"nowrap",className:he.container,ref:Ue},$),React.createElement(Box,{className:classNames(he.fade,he.fadeLeft,{[he.fadeHidden]:tt===0})}),React.createElement(Box,{className:classNames(he.fade,he.fadeRight,{[he.fadeHidden]:Ve===0})}),tt>0&&React.createElement(IconButton,{title:"Scroll Left",onClick:()=>_t(!1),className:classNames(he.button,he.buttonLeft,{})},React.createElement(ChevronLeftIcon,null)),Ve>0&&React.createElement(IconButton,{title:"Scroll Right",onClick:()=>_t(!0),className:classNames(he.button,he.buttonRight,{})},React.createElement(ChevronRight,null)))}const Ko=(0,g.Z)({alpha:{color:"#ffffff",fontFamily:"serif",fontWeight:"normal",fontStyle:"italic"},beta:{color:"#4d65cc",fontFamily:"serif",fontWeight:"normal",fontStyle:"italic"}},{name:"BackstageLifecycle"});function zo(r){const o=Ko(r),{shorthand:E,alpha:P}=r;return E?t.createElement(d.Z,{component:"span",className:o[P?"alpha":"beta"],style:{fontSize:"120%"}},P?t.createElement(t.Fragment,null,"\u03B1"):t.createElement(t.Fragment,null,"\u03B2")):t.createElement(d.Z,{component:"span",className:o[P?"alpha":"beta"]},P?"Alpha":"Beta")}const jo=(0,t.lazy)(()=>e.e(6304).then(e.bind(e,36304)).then(r=>({default:r.RealLogViewer})));function Vo(r){const{Progress:o}=(0,n.qD)().getComponents();return t.createElement(t.Suspense,{fallback:t.createElement(o,null)},t.createElement(jo,{...r}))}const Go=(0,g.Z)(r=>({markdown:{"& table":{borderCollapse:"collapse",border:`1px solid ${r.palette.border}`},"& th, & td":{border:`1px solid ${r.palette.border}`,padding:r.spacing(1)},"& td":{wordBreak:"break-word",overflow:"hidden",verticalAlign:"middle",lineHeight:"1",margin:0,padding:r.spacing(3,2,3,2.5),borderBottom:0},"& th":{backgroundColor:r.palette.background.paper},"& tr":{backgroundColor:r.palette.background.paper},"& tr:nth-child(odd)":{backgroundColor:r.palette.background.default},"& a":{color:r.palette.link},"& img":{maxWidth:"100%"}}}),{name:"BackstageMarkdownContent"}),xa=(r,o)=>o?typeof o=="string"?r+o:t.Children.toArray(o.props.children).reduce(xa,r):r,Yr=({level:r,children:o})=>{const $=t.Children.toArray(o).reduce(xa,"").toLocaleLowerCase("en-US").replace(/\W/g,"-");return t.createElement(`h${r}`,{id:$},o)},Ho={code:({inline:r,className:o,children:E,...P})=>{const $=String(E).replace(/\n+$/,""),q=/language-(\w+)/.exec(o||"");return!r&&q?t.createElement(se,{language:q[1],text:$}):t.createElement("code",{className:o,...P},E)},h1:Yr,h2:Yr,h3:Yr,h4:Yr,h5:Yr,h6:Yr};function Jo(r){const{content:o,dialect:E="gfm",linkTarget:P,transformLinkUri:$,transformImageUri:q,className:he}=r,Ue=Go();return t.createElement(B.D,{remarkPlugins:E==="gfm"?[_e.Z]:[],className:`${Ue.markdown} ${he}`,children:o,components:Ho,linkTarget:P,transformLinkUri:$,transformImageUri:q})}const Yo=(0,g.Z)(r=>({root:{paddingLeft:r.spacing(3)}}),{name:"BackstageLoginRequestListItem"}),Xo=({request:r,busy:o,setBusy:E})=>{const P=Yo(),[$,q]=(0,t.useState)(),he=async()=>{E(!0);try{await r.trigger()}catch(tt){q((0,He.VZ)(tt)?tt.message:"An unspecified error occurred")}finally{E(!1)}},Ue=r.provider.icon;return t.createElement(Le.Z,{disabled:o,classes:{root:P.root}},t.createElement(kt.Z,null,t.createElement(Ue,{fontSize:"large"})),t.createElement(Pt.Z,{primary:r.provider.title,secondary:$&&t.createElement(d.Z,{color:"error"},$)}),t.createElement(D.Z,{color:"primary",variant:"contained",onClick:he},"Log in"))},Qo=(0,g.Z)(r=>({dialog:{paddingTop:r.spacing(1)},title:{minWidth:0},titleHeading:{fontSize:r.typography.h6.fontSize},contentList:{padding:0},actionButtons:{padding:r.spacing(2,0)}}),{name:"OAuthRequestDialog"});function qo(r){const o=Qo(),[E,P]=(0,t.useState)(!1),$=(0,n.h_)(n.ZM),q=(0,ee.Z)((0,t.useMemo)(()=>$.authRequest$(),[$]),[]),he=()=>{q.forEach(Ue=>Ue.reject())};return t.createElement(de.Z,{open:Boolean(q.length),fullWidth:!0,maxWidth:"xs",classes:{paper:o.dialog},"aria-labelledby":"oauth-req-dialog-title"},t.createElement("main",null,t.createElement(rt.Z,{classes:{root:o.title},id:"oauth-req-dialog-title"},t.createElement(d.Z,{className:o.titleHeading,variant:"h1"},"Login Required")),t.createElement(ze.Z,{dividers:!0,classes:{root:o.contentList}},t.createElement(zt.Z,null,q.map(Ue=>t.createElement(Xo,{key:Ue.provider.title,request:Ue,busy:E,setBusy:P}))))),t.createElement(Ie.Z,{classes:{root:o.actionButtons}},t.createElement(D.Z,{onClick:he},"Reject All")))}const es=(0,g.Z)({container:{overflow:"visible !important"}},{name:"BackstageOverflowTooltip"});function ts(r){var o;const[E,P]=(0,t.useState)(!1),$=(0,je.t)(),q=es(),he=Ue=>{$()&&P(Ue)};return t.createElement(ct.ZP,{title:(o=r.title)!=null?o:r.text||"",placement:r.placement,disableHoverListener:!E},t.createElement(be(),{text:r.text,line:r.line,onToggled:he,containerClassName:q.container}))}function ia(r){const o=(0,j.Z)(),[E,P]=(0,t.useState)(!1);return(0,t.useEffect)(()=>{const $=setTimeout(()=>P(!0),o.transitions.duration.short);return()=>clearTimeout($)},[o.transitions.duration.short]),E?t.createElement(ut.Z,{...r,"data-testid":"progress"}):t.createElement(we.Z,{display:"none"})}const ns=(0,g.Z)(r=>({root:{maxWidth:"fit-content",padding:r.spacing(2,2,2,2.5)},boxTitle:{margin:0,color:r.palette.textSubtle},arrow:{color:r.palette.textSubtle}}),{name:"BackstageBottomLink"});function ka(r){const{link:o,title:E,onClick:P}=r,$=ns();return t.createElement(we.Z,null,t.createElement(nn.Z,null),t.createElement(p,{to:o,onClick:P,underline:"none"},t.createElement(we.Z,{display:"flex",alignItems:"center",className:$.root},t.createElement(we.Z,{className:$.boxTitle,fontWeight:"fontWeightBold",m:1},t.createElement(d.Z,null,t.createElement("strong",null,E))),t.createElement(Rn.Z,{className:$.arrow}))))}const rs=r=>{const{slackChannel:o}=r;if(o){if(typeof o=="string")return t.createElement(d.Z,null,"Please contact ",o," for help.");if(!o.href)return t.createElement(d.Z,null,"Please contact ",o.name," for help.")}else return null;return t.createElement(X,{to:o.href,variant:"contained"},o.name)},Ba=class extends t.Component{constructor(o){super(o),this.state={error:void 0,errorInfo:void 0}}componentDidCatch(o,E){console.error(`ErrorBoundary, error: ${o}, info: ${E}`),this.setState({error:o,errorInfo:E})}render(){const{slackChannel:o,children:E}=this.props,{error:P}=this.state;return P?t.createElement(_n,{title:"Something Went Wrong",error:P},t.createElement(rs,{slackChannel:o})):E}},as=(0,g.Z)(r=>({noPadding:{padding:0,"&:last-child":{paddingBottom:0}},header:{padding:r.spacing(2,2,2,2.5)},headerTitle:{fontWeight:r.typography.fontWeightBold},headerSubheader:{paddingTop:r.spacing(1)},headerAvatar:{},headerAction:{},headerContent:{},subheader:{display:"flex"}}),{name:"BackstageInfoCard"}),os=(0,re.Z)(r=>({root:{display:"inline-block",padding:r.spacing(8,8,0,0),float:"right"}}),{name:"BackstageInfoCardCardActionsTopRight"})(Mt.Z),Ua={card:{flex:{display:"flex",flexDirection:"column"},fullHeight:{display:"flex",flexDirection:"column",height:"100%"},gridItem:{display:"flex",flexDirection:"column",height:"calc(100% - 10px)",marginBottom:"10px"}},cardContent:{fullHeight:{flex:1},gridItem:{flex:1}}};function Xr(r){const{title:o,subheader:E,divider:P=!0,deepLink:$,slackChannel:q,errorBoundaryProps:he,variant:Ue,children:tt,headerStyle:Ve,headerProps:Tt,icon:_t,action:Ut,actionsClassName:Gt,actions:yn,cardClassName:vn,actionsTopRight:Jn,className:tr,noPadding:sr,titleTypographyProps:ir}=r,Yn=as();let lr={},nr={};Ue&&Ue.split(/[\s]+/g).forEach(kr=>{lr={...lr,...Ua.card[kr]},nr={...nr,...Ua.cardContent[kr]}});const Zr=()=>!E&&!_t?null:t.createElement("div",{className:Yn.headerSubheader,"data-testid":"info-card-subheader"},E&&t.createElement("div",{className:Yn.subheader},E),_t),Nr=he||(q?{slackChannel:q}:{});return t.createElement(Et.Z,{style:lr,className:tr},t.createElement(Ba,{...Nr},o&&t.createElement(ln.Z,{classes:{root:Yn.header,title:Yn.headerTitle,subheader:Yn.headerSubheader,avatar:Yn.headerAvatar,action:Yn.headerAction,content:Yn.headerContent},title:o,subheader:Zr(),action:Ut,style:{...Ve},titleTypographyProps:ir,...Tt}),Jn&&t.createElement(os,null,Jn),P&&t.createElement(nn.Z,null),t.createElement(rn.Z,{className:R()(vn,{[Yn.noPadding]:sr}),style:nr},tt),yn&&t.createElement(Mt.Z,{className:Gt},yn),$&&t.createElement(ka,{...$})))}const ss=(0,g.Z)(r=>({root:{position:"relative",lineHeight:0},overlay:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -60%)",fontSize:r.typography.pxToRem(45),fontWeight:r.typography.fontWeightBold,color:r.palette.textContrast},description:{fontSize:"100%",top:"50%",left:"50%",transform:"translate(-50%, -50%)",position:"absolute",wordBreak:"break-all",display:"inline-block"},circle:{width:"80%",transform:"translate(10%, 0)"},colorUnknown:{}}),{name:"BackstageGauge"}),Za={fractional:!0,inverse:!1,unit:"%",max:100},Na=({palette:r,value:o,inverse:E,max:P})=>{if(isNaN(o))return"#ddd";const $=P||Za.max,q=E?$-o:o;return q<$/3?r.status.error:q<$*(2/3)?r.status.warning:r.status.ok};function is(r){const[o,E]=useState(null),{getColor:P=Na}=r,$=ss(r),{palette:q}=useTheme(),{value:he,fractional:Ue,inverse:tt,unit:Ve,max:Tt,description:_t}={...Za,...r},Ut=Ue?Math.round(he*Tt):he,Gt=Tt!==100?Math.round(he):Ut,[yn,vn]=useState(!1);return useEffect(()=>{const Jn=o,tr=()=>vn(!0),sr=()=>vn(!1);return Jn&&_t?(Jn.addEventListener("mouseenter",tr),Jn.addEventListener("mouseleave",sr),()=>{Jn.removeEventListener("mouseenter",tr),Jn.removeEventListener("mouseleave",sr)}):()=>{vn(!1)}},[_t,o]),React.createElement(Box,{ref:E,className:$.root},React.createElement(Circle,{strokeLinecap:"butt",percent:Ut,strokeWidth:12,trailWidth:12,strokeColor:P({palette:q,value:Gt,inverse:tt,max:Tt}),className:$.circle}),_t&&yn?React.createElement(Box,{className:$.description},_t):React.createElement(Box,{className:$.overlay},isNaN(he)?"N/A":`${Gt}${Ve}`))}const ls=(0,g.Z)({root:{height:"100%",width:250}},{name:"BackstageGaugeCard"});function Hl(r){const o=ls(r),{title:E,subheader:P,progress:$,inverse:q,deepLink:he,description:Ue,icon:tt,variant:Ve,getColor:Tt}=r,_t={inverse:q,description:Ue,getColor:Tt,value:$};return React.createElement(Box,{className:o.root},React.createElement(Xr,{title:E,subheader:P,deepLink:he,variant:Ve,icon:tt},React.createElement(is,{..._t})))}function Jl(r){const{value:o,getColor:E=Na}=r,{palette:P}=useTheme();if(isNaN(o))return null;let $=Math.round(o*100*100)/100;$>100&&($=100);const q=E({palette:P,value:$,inverse:!1,max:100});return React.createElement(Tooltip,{title:`${$}%`},React.createElement(Typography,{component:"span"},React.createElement(Line,{percent:$,strokeWidth:4,trailWidth:4,strokeColor:q})))}const cs=(0,g.Z)(r=>(0,F.Z)({icon:{position:"absolute",right:r.spacing(.5),pointerEvents:"none"}}),{name:"BackstageClosedDropdown"}),us=()=>{const r=cs();return t.createElement(Ze.Z,{className:r.icon,fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.createElement("path",{d:"M7.5 8L6 9.5L12.0703 15.5703L18.1406 9.5L16.6406 8L12.0703 12.5703L7.5 8Z",fill:"#616161"}))},ds=(0,g.Z)(r=>(0,F.Z)({icon:{position:"absolute",right:r.spacing(.5),pointerEvents:"none"}}),{name:"BackstageOpenedDropdown"}),ms=()=>{const r=ds();return t.createElement(Ze.Z,{className:r.icon,fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.createElement("path",{d:"M16.5 16L18 14.5L11.9297 8.42969L5.85938 14.5L7.35938 16L11.9297 11.4297L16.5 16Z",fill:"#616161"}))},fs=(0,re.Z)(r=>(0,F.Z)({root:{"label + &":{marginTop:r.spacing(3)}},input:{borderRadius:r.shape.borderRadius,position:"relative",backgroundColor:r.palette.background.paper,border:"1px solid #ced4da",fontSize:r.typography.body1.fontSize,padding:r.spacing(1.25,3.25,1.25,1.5),transition:r.transitions.create(["border-color","box-shadow"]),fontFamily:"Helvetica Neue","&:focus":{background:r.palette.background.paper,borderRadius:r.shape.borderRadius}}}),{name:"BackstageSelectInputBase"})(oe.Z),ps=(0,g.Z)(r=>(0,F.Z)({formControl:{margin:`${r.spacing(1)} 0px`,maxWidth:300},label:{transform:"initial",fontWeight:"bold",fontSize:r.typography.body2.fontSize,fontFamily:r.typography.fontFamily,color:r.palette.text.primary,"&.Mui-focused":{color:r.palette.text.primary}},formLabel:{transform:"initial",fontWeight:"bold",fontSize:r.typography.body2.fontSize,fontFamily:r.typography.fontFamily,color:r.palette.text.primary,"&.Mui-focused":{color:r.palette.text.primary}},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},checkbox:{},root:{display:"flex",flexDirection:"column"}}),{name:"BackstageSelect"});function Wa(r){const{multiple:o,items:E,label:P,placeholder:$,selected:q,onChange:he,triggerReset:Ue,native:tt=!1,disabled:Ve=!1,margin:Tt}=r,_t=ps(),[Ut,Gt]=(0,t.useState)(q||(o?[]:"")),[yn,vn]=(0,t.useState)(!1);(0,t.useEffect)(()=>{Gt(o?[]:"")},[Ue,o]),(0,t.useEffect)(()=>{q!==void 0&&Gt(q)},[q]);const Jn=Yn=>{Gt(Yn.target.value),he(Yn.target.value)},tr=Yn=>{if(Ve){Yn.preventDefault();return}vn(lr=>o&&!(Yn.target instanceof HTMLElement)?!0:!lr)},sr=()=>{vn(!1)},ir=Yn=>()=>{const lr=Ut.filter(nr=>nr!==Yn);Gt(lr),he(lr)};return t.createElement(we.Z,{className:_t.root},t.createElement(Te.Z,{onClickAway:sr},t.createElement(Qe.Z,{className:_t.formControl},t.createElement(fe.Z,{className:_t.formLabel},P),t.createElement(Be.Z,{"aria-label":P,value:Ut,native:tt,disabled:Ve,"data-testid":"select",displayEmpty:!0,multiple:o,margin:Tt,onChange:Jn,onClick:tr,open:yn,input:t.createElement(fs,null),label:P,tabIndex:0,renderValue:Yn=>{var lr;return o&&Ut.length!==0?t.createElement(we.Z,{className:_t.chips},Yn.map(nr=>{var Zr,Nr;return t.createElement(Je.Z,{key:(Zr=E.find(xr=>xr.value===nr))==null?void 0:Zr.value,label:(Nr=E.find(xr=>xr.value===nr))==null?void 0:Nr.label,clickable:!0,onDelete:ir(nr),className:_t.chip})})):t.createElement(d.Z,null,Ut.length===0?$||"":(lr=E.find(nr=>nr.value===Yn))==null?void 0:lr.label)},IconComponent:()=>yn?t.createElement(ms,null):t.createElement(us,null),MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},getContentAnchorEl:null}},$&&!o&&t.createElement(We.Z,{value:[]},$),tt?E&&E.map(Yn=>t.createElement("option",{value:Yn.value,key:Yn.value},Yn.label)):E&&E.map(Yn=>t.createElement(We.Z,{key:Yn.value,value:Yn.value},o&&t.createElement(Ke.Z,{color:"primary",checked:Ut.includes(Yn.value)||!1,className:_t.checkbox}),Yn.label))))))}const ba=()=>{},Fa=t.createContext({stepperLength:0,stepIndex:0,setStepIndex:ba,stepHistory:[],setStepHistory:ba,onStepChange:ba});function Yl(r){const{children:o,elevated:E,onStepChange:P,activeStep:$=0}=r,[q,he]=useState($),[Ue,tt]=useState([0]);useEffect(()=>{he($)},[$]);const Ve=[];let Tt;return Children.forEach(o,_t=>{isValidElement(_t)&&(_t.props.end?Tt=_t:Ve.push(_t))}),React.createElement(React.Fragment,null,React.createElement(Fa.Provider,{value:{stepIndex:q,setStepIndex:he,stepHistory:Ue,setStepHistory:tt,onStepChange:P,stepperLength:Children.count(o)}},React.createElement(MuiStepper,{activeStep:q,orientation:"vertical",elevation:E?2:0},Ve)),q>=Children.count(o)-1&&Tt)}const hs=(0,g.Z)(r=>({root:{marginTop:r.spacing(3),"& button":{marginRight:r.spacing(1)}}}),{name:"BackstageSimpleStepperFooter"}),gs=({text:r,handleClick:o})=>React.createElement(Button$1,{onClick:o},r||"Reset"),Es=({text:r,handleClick:o,disabled:E,last:P,stepIndex:$})=>React.createElement(Button$1,{variant:"contained",color:"primary",disabled:E,"data-testid":`nextButton-${$}`,onClick:o},r||(P?"Finish":"Next")),ys=({text:r,handleClick:o,disabled:E,stepIndex:P})=>React.createElement(Button$1,{variant:"outlined",color:"primary",disabled:E,"data-testid":`skipButton-${P}`,onClick:o},r||"Skip"),vs=({text:r,handleClick:o,disabled:E,stepIndex:P})=>React.createElement(Button$1,{onClick:o,"data-testid":`backButton-${P}`,disabled:E},r||"Back"),Ka=({actions:r={},children:o})=>{const E=hs(),{stepperLength:P,stepIndex:$,setStepIndex:q,stepHistory:he,setStepHistory:Ue,onStepChange:tt}=useContext(Fa),Ve=(Gt,yn)=>{yn&&yn(),tt&&tt($,Gt),q(Gt)},Tt=()=>{const Gt=r.nextStep?r.nextStep($,P-1):$+1;Ve(Gt,r.onNext),Ue([...he,Gt])},_t=()=>{he.pop(),Ve(he[he.length-1],r.onBack),Ue([...he])},Ut=()=>{Ve(0,r.onRestart),Ue([0])};return React.createElement(Box,{className:E.root},[void 0,!0].includes(r.showBack)&&$!==0&&React.createElement(vs,{text:r.backText,handleClick:_t,disabled:$===0,stepIndex:$}),r.showSkip&&React.createElement(ys,{text:r.skipText,handleClick:Tt,disabled:!!P&&$>=P||!!r.canSkip&&!r.canSkip(),stepIndex:$}),[void 0,!0].includes(r.showNext)&&React.createElement(Es,{text:r.nextText,handleClick:Tt,disabled:!!P&&$>=P||!!r.canNext&&!r.canNext(),stepIndex:$}),r.showRestart&&$!==0&&React.createElement(gs,{text:r.restartText,handleClick:Ut,stepIndex:$}),o)},bs=(0,g.Z)(r=>({end:{padding:r.spacing(3)}}),{name:"SimpleStepperStep"});function Xl(r){const{title:o,children:E,end:P,actions:$,...q}=r,he=bs();return P?React.createElement(Box,{className:he.end},React.createElement(Typography,{variant:"h6"},o),E,React.createElement(Ka,{actions:{...$||{},showNext:!1}})):React.createElement(MuiStep,{...q},React.createElement(StepLabel,null,React.createElement(Typography,{variant:"h6"},o)),React.createElement(StepContent,null,E,React.createElement(Ka,{actions:$})))}const Qr=(0,g.Z)(r=>({status:{fontWeight:r.typography.fontWeightMedium,"&::before":{width:"0.7em",height:"0.7em",display:"inline-block",marginRight:r.spacing(1),borderRadius:"50%",content:'""'}},ok:{"&::before":{backgroundColor:r.palette.status.ok}},warning:{"&::before":{backgroundColor:r.palette.status.warning}},error:{"&::before":{backgroundColor:r.palette.status.error}},pending:{"&::before":{backgroundColor:r.palette.status.pending}},running:{"&::before":{backgroundColor:r.palette.status.running}},aborted:{"&::before":{backgroundColor:r.palette.status.aborted}}}),{name:"BackstageStatus"});function _s(r){const o=Qr(r);return t.createElement(d.Z,{component:"span",className:R()(o.status,o.ok),"aria-label":"Status ok","aria-hidden":"true",...r})}function Cs(r){const o=Qr(r);return t.createElement(d.Z,{component:"span",className:R()(o.status,o.warning),"aria-label":"Status warning","aria-hidden":"true",...r})}function Ps(r){const o=Qr(r);return t.createElement(d.Z,{component:"span",className:R()(o.status,o.error),"aria-label":"Status error","aria-hidden":"true",...r})}function Ss(r){const o=Qr(r);return t.createElement(d.Z,{component:"span",className:R()(o.status,o.pending),"aria-label":"Status pending","aria-hidden":"true",...r})}function Rs(r){const o=Qr(r);return t.createElement(d.Z,{component:"span",className:R()(o.status,o.running),"aria-label":"Status running","aria-hidden":"true",...r})}function ws(r){const o=Qr(r);return t.createElement(d.Z,{component:"span",className:R()(o.status,o.aborted),"aria-label":"Status aborted","aria-hidden":"true",...r})}const Os=r=>(0,F.Z)({root:{fontWeight:r.typography.fontWeightBold,whiteSpace:"nowrap",paddingRight:r.spacing(4),border:"0",verticalAlign:"top"}}),As={root:{border:"0",verticalAlign:"top"}},Is=r=>(0,F.Z)({root:{margin:r.spacing(0,0,-1,0)}}),Ts=r=>(0,F.Z)({root:{padding:r.spacing(0,0,1,0)},random:{}}),Ds=(0,re.Z)(Os,{name:"BackstageMetadataTableTitleCell"})(Ot.Z),Ms=(0,re.Z)(As,{name:"BackstageMetadataTableCell"})(Ot.Z),$s=({dense:r,children:o})=>t.createElement(jt.Z,{size:r?"small":"medium"},t.createElement(Zt.Z,null,o)),Ls=({title:r,children:o,...E})=>t.createElement(Vt.Z,null,r&&t.createElement(Ds,null,r),t.createElement(Ms,{colSpan:r?1:2,...E},o)),za=(0,re.Z)(Is,{name:"BackstageMetadataTableList"})(({classes:r,children:o})=>t.createElement(zt.Z,{disablePadding:!0,className:r.root},o)),ja=(0,re.Z)(Ts,{name:"BackstageMetadataTableListItem"})(({classes:r,children:o})=>t.createElement(Le.Z,{className:r.root},o)),Va=(0,F.Z)({root:{margin:"0 0",listStyleType:"none"}}),xs=r=>(0,F.Z)({root:{...Va.root,paddingLeft:r.spacing(1)}}),Ga=(0,re.Z)(Va,{name:"BackstageStructuredMetadataTableList"})(({classes:r,children:o})=>t.createElement(za,{classes:r},o)),Ha=(0,re.Z)(xs,{name:"BackstageStructuredMetadataTableNestedList"})(({classes:r,children:o})=>t.createElement(za,{classes:r},o));function ks(r,o){const E=r.map((P,$)=>t.createElement(ja,{key:$},_a(P)));return o?t.createElement(Ha,null,E):t.createElement(Ga,null,E)}function Bs(r,o,E){const P=Object.keys(r).map($=>{const q=_a(r[$],!0),he=E&&E.titleFormat?E.titleFormat($):It()($);return t.createElement(ja,{key:$},t.createElement(d.Z,{variant:"body2",component:"span"},`${he}: `),q)});return o?t.createElement(Ha,null,P):t.createElement(Ga,null,P)}function _a(r,o,E){return t.isValidElement(r)?t.createElement(t.Fragment,null,r):typeof r=="object"&&!Array.isArray(r)?Bs(r,o,E):Array.isArray(r)?ks(r,E):typeof r=="boolean"?t.createElement(t.Fragment,null,r?"\u2705":"\u274C"):t.createElement(d.Z,{variant:"body2",component:"span"},r)}const Us=({value:r,options:o})=>t.createElement(t.Fragment,null,_a(r,o)),Zs=({title:r,value:o,options:E})=>t.createElement(Ls,{title:E&&E.titleFormat?E.titleFormat(r):It()(r)},t.createElement(Us,{value:o,options:E}));function Ns(r,o){return Object.keys(r).map(E=>t.createElement(Zs,{key:E,title:E,value:r[E],options:o}))}function Ws(r){const{metadata:o,dense:E=!0,options:P}=r,$=Ns(o,P||{});return t.createElement($s,{dense:E},$)}function Fs(r){return qs.stringify(r,{strictNullHandling:!0})}function Ja(r){return qs.parse(r,{ignoreQueryPrefix:!0,strictNullHandling:!0})}function Ya(r,o){return Ja(r)[o]}function Ks(r,o,E){const P={...Ja(r),[o]:E};return Fs(P)}function Ql(r,o=250){const[E,P]=useSearchParams(),$=E.toString(),[q,he]=useState(Ya($,r));return useEffect(()=>{const Ue=Ya($,r);he(tt=>isEqual(Ue,tt)?tt:Ue)},[$,he,r]),useDebouncedEffect(()=>{const Ue=Ks($,r,q);$!==Ue&&P(Ue,{replace:!0})},[P,q,$,r],o),[q,he]}const zs={url:"https://github.com/backstage/backstage/issues",items:[{title:"Support Not Configured",icon:"warning",links:[{title:"Add `app.support` config key",url:"https://github.com/backstage/backstage/blob/master/app-config.yaml"}]}]};function Xa(){const o=(0,n.I_)().get(n.Ds),E=o==null?void 0:o.getOptionalConfig("app.support");return E?{url:E.getString("url"),items:E.getConfigArray("items").flatMap(P=>{var $;return{title:P.getString("title"),icon:P.getOptionalString("icon"),links:(($=P.getOptionalConfigArray("links"))!=null?$:[]).flatMap(q=>({url:q.getString("url"),title:q.getString("title")}))}})}:zs}function Tr(r,o){const P=(0,n.qD)().getSystemIcon(r);return P?t.createElement(P,{...o}):t.createElement(gn.Z,{...o})}function ql(r){return Tr("brokenImage",r)}function js(r){return Tr("catalog",r)}function ec(r){return Tr("chat",r)}function tc(r){return Tr("dashboard",r)}function Vs(r){return Tr("docs",r)}function nc(r){return Tr("email",r)}function Gs(r){return Tr("github",r)}function rc(r){return Tr("group",r)}function la(r){return Tr("help",r)}function Hs(r){return Tr("user",r)}function ac(r){return Tr("warning",r)}const Js=(0,g.Z)({popoverList:{minWidth:260,maxWidth:400}},{name:"BackstageSupportButton"}),Ys=({icon:r})=>{var o;const E=(0,n.qD)(),P=r&&(o=E.getSystemIcon(r))!=null?o:la;return t.createElement(P,null)},Xs=({link:r})=>{var o;return t.createElement(p,{to:r.url},(o=r.title)!=null?o:r.url)},Qs=({item:r})=>{var o;return t.createElement(Le.Z,null,t.createElement(mn.Z,null,t.createElement(Ys,{icon:r.icon})),t.createElement(Pt.Z,{primary:r.title,secondary:(o=r.links)==null?void 0:o.reduce((E,P,$)=>[...E,$>0&&t.createElement("br",{key:$}),t.createElement(Xs,{link:P,key:P.url})],[])}))};function ei(r){const{title:o,items:E,children:P}=r,{items:$}=Xa(),[q,he]=(0,t.useState)(!1),[Ue,tt]=(0,t.useState)(null),Ve=Js(),Tt=(0,Q.Z)(Gt=>Gt.breakpoints.down("sm")),_t=Gt=>{tt(Gt.currentTarget),he(!0)},Ut=()=>{he(!1)};return t.createElement(t.Fragment,null,t.createElement(we.Z,{display:"flex",ml:1},Tt?t.createElement(i.Z,{color:"primary",size:"small",onClick:_t,"data-testid":"support-button"},t.createElement(la,null)):t.createElement(D.Z,{"data-testid":"support-button","aria-label":"support",color:"primary",onClick:_t,startIcon:t.createElement(la,null)},"Support")),t.createElement(bn.ZP,{"data-testid":"support-button-popover",open:q,anchorEl:Ue,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},onClose:Ut},t.createElement(zt.Z,{className:Ve.popoverList},o&&t.createElement(Le.Z,{alignItems:"flex-start"},t.createElement(d.Z,{variant:"subtitle1"},o)),t.Children.map(P,(Gt,yn)=>t.createElement(Le.Z,{alignItems:"flex-start",key:`child-${yn}`},Gt)),(E!=null?E:$).map((Gt,yn)=>t.createElement(Qs,{item:Gt,key:`item-${yn}`}))),t.createElement(Ie.Z,null,t.createElement(D.Z,{color:"primary",onClick:Ut},"Close"))))}const ca=72,Qa=24,qa=18,Lr={drawerWidthClosed:ca,drawerWidthOpen:224,defaultOpenDelayMs:100,defaultCloseDelayMs:0,defaultFadeDuration:200,logoHeight:32,iconContainerWidth:ca,iconSize:ca-Qa*2,iconPadding:Qa,selectedIndicatorWidth:3,userBadgePadding:qa,userBadgeDiameter:ca-qa*2,mobileSidebarHeight:56},ti=r=>({...Lr,...r,iconContainerWidth:Lr.drawerWidthClosed,iconSize:Lr.drawerWidthClosed-Lr.iconPadding*2,userBadgeDiameter:Lr.drawerWidthClosed-Lr.userBadgePadding*2}),eo={drawerWidthClosed:0,drawerWidthOpen:202,defaultOpenDelayMs:Lr.defaultOpenDelayMs+200},ni=r=>({...eo,...r}),ri="@backstage/core/sidebar-intro-dismissed",wr=(0,t.createContext)({sidebarConfig:Lr,submenuConfig:eo}),Ca=(0,t.createContext)({isHoveredOn:!1,setIsHoveredOn:()=>{}}),to={isOpen:!1,setOpen:()=>{}},no=(0,t.createContext)(to),ro=(0,zn.CT)("sidebar-open-state-context");function ao(r){const{children:o,value:E}=r;return t.createElement(no.Provider,{value:E},t.createElement(ro.Provider,{value:(0,zn.EI)({1:E})},o))}const na=()=>{const r=(0,t.useContext)(ro),o=(0,t.useContext)(no);if(r===void 0)return o||to;const E=r.atVersion(1);if(E===void 0)throw new Error("No context found for version 1.");return E},oo={isPinned:!0,toggleSidebarPinState:()=>{},isMobile:!1},so=(0,t.createContext)(oo),io=(0,zn.CT)("sidebar-pin-state-context");function ai(r){const{children:o,value:E}=r;return t.createElement(so.Provider,{value:E},t.createElement(io.Provider,{value:(0,zn.EI)({1:E})},o))}const ra=()=>{const r=(0,t.useContext)(io),o=(0,t.useContext)(so);if(r===void 0)return o||oo;const E=r.atVersion(1);if(E===void 0)throw new Error("No context found for version 1.");return E},oi=(0,g.Z)(r=>({root:{flexGrow:0,margin:r.spacing(0,2),color:r.palette.navigation.color},selected:o=>({color:`${r.palette.navigation.selectedColor}!important`,borderTop:`solid ${o.sidebarConfig.selectedIndicatorWidth}px ${r.palette.navigation.indicator}`,marginTop:"-1px"}),label:{display:"none"}})),si=r=>{const{to:o,label:E,icon:P,value:$}=r,{sidebarConfig:q}=(0,t.useContext)(wr),he=oi({sidebarConfig:q}),Ue=(0,O.TH)(),{selectedMenuItemIndex:tt,setSelectedMenuItemIndex:Ve}=(0,t.useContext)(co),Tt=(Ut,Gt)=>{Ve(Gt===tt?-1:Gt)},_t=$===tt&&tt>=0||$!==tt&&!(tt>=0)&&o===Ue.pathname;return t.createElement(Sn.Z,{label:E,icon:P,component:p,to:o||Ue.pathname,onChange:Tt,value:$,selected:_t,classes:he})},Pa=r=>{const{children:o,to:E,label:P,icon:$,value:q}=r,{isMobile:he}=ra();return he?t.createElement(si,{to:E,label:P,icon:$,value:q}):t.createElement(t.Fragment,null,o)},lo=(0,g.Z)(r=>({root:{position:"fixed",backgroundColor:r.palette.navigation.background,color:r.palette.navigation.color,bottom:0,left:0,right:0,zIndex:r.zIndex.snackbar,borderTop:"1px solid #383838"},overlay:o=>({background:r.palette.navigation.background,width:"100%",bottom:`${o.sidebarConfig.mobileSidebarHeight}px`,height:`calc(100% - ${o.sidebarConfig.mobileSidebarHeight}px)`,flex:"0 1 auto",overflow:"auto"}),overlayHeader:{display:"flex",color:r.palette.text.primary,alignItems:"center",justifyContent:"space-between",padding:r.spacing(2,3)},overlayHeaderClose:{color:r.palette.text.primary},marginMobileSidebar:o=>({marginBottom:`${o.sidebarConfig.mobileSidebarHeight}px`})})),ii=r=>(0,c.orderBy)(r,({props:{priority:o}})=>Number.isInteger(o)?o:-1,"desc"),li=t.createElement(Pa).type,ci=({children:r,label:o="Menu",open:E,onClose:P})=>{const{sidebarConfig:$}=(0,t.useContext)(wr),q=lo({sidebarConfig:$});return t.createElement($n.ZP,{anchor:"bottom",open:E,onClose:P,ModalProps:{BackdropProps:{classes:{root:q.marginMobileSidebar}}},classes:{root:q.marginMobileSidebar,paperAnchorBottom:q.overlay}},t.createElement(we.Z,{className:q.overlayHeader},t.createElement(d.Z,{variant:"h3"},o),t.createElement(i.Z,{onClick:P,classes:{root:q.overlayHeaderClose}},t.createElement(a.Z,null))),t.createElement(we.Z,{component:"nav"},r))},co=(0,t.createContext)({selectedMenuItemIndex:-1,setSelectedMenuItemIndex:()=>{}}),ui=r=>{const{sidebarConfig:o}=(0,t.useContext)(wr),{children:E}=r,P=lo({sidebarConfig:o}),$=(0,O.TH)(),[q,he]=(0,t.useState)(-1);(0,t.useEffect)(()=>{he(-1)},[$.pathname]);let Ue=(0,n.vJ)(E,Ve=>Ve.getElements().filter(Tt=>Tt.type===li));if(E)Ue.length?Ue=ii(Ue):Ue.push(t.createElement(Pa,{key:"default_menu",icon:t.createElement(Cn.Z,null)},E));else return null;const tt=q>=0&&!Ue[q].props.to;return t.createElement(ao,{value:{isOpen:!0,setOpen:()=>{}}},t.createElement(co.Provider,{value:{selectedMenuItemIndex:q,setSelectedMenuItemIndex:he}},t.createElement(ci,{label:Ue[q]&&Ue[q].props.label,open:tt,onClose:()=>he(-1)},Ue[q]&&Ue[q].props.children),t.createElement(kn.Z,{className:P.root,"data-testid":"mobile-sidebar-root",component:"nav"},Ue)))},uo={getSidebarPinState(){let r;try{r=JSON.parse(window.localStorage.getItem("sidebarPinState")||"true")}catch{return!0}return!!r},setSidebarPinState(r){return window.localStorage.setItem("sidebarPinState",JSON.stringify(r))}},di=(0,g.Z)(r=>({root:{width:"100%",transition:"padding-left 0.1s ease-out",isolation:"isolate",[r.breakpoints.up("sm")]:{paddingLeft:o=>o.isPinned?o.sidebarConfig.drawerWidthOpen:o.sidebarConfig.drawerWidthClosed},[r.breakpoints.down("xs")]:{paddingBottom:o=>o.sidebarConfig.mobileSidebarHeight}},content:{zIndex:0,isolation:"isolate","&:focus":{outline:0}}}),{name:"BackstageSidebarPage"}),mo=(0,t.createContext)({content:{contentRef:void 0}});function mi(r){const[o,E]=(0,t.useState)(()=>uo.getSidebarPinState()),{sidebarConfig:P}=(0,t.useContext)(wr),$=(0,t.useRef)(null),q=(0,t.useMemo)(()=>({content:{contentRef:$}}),[$]);(0,t.useEffect)(()=>{uo.setSidebarPinState(o)},[o]);const he=(0,Q.Z)(Ve=>Ve.breakpoints.down("xs"),{noSsr:!0}),Ue=()=>E(!o),tt=di({isPinned:o,sidebarConfig:P});return t.createElement(ai,{value:{isPinned:o,toggleSidebarPinState:Ue,isMobile:he}},t.createElement(mo.Provider,{value:q},t.createElement(we.Z,{className:tt.root},r.children)))}function Sa(){const{content:r}=(0,t.useContext)(mo);return{focusContent:(0,t.useCallback)(()=>{var E,P;(P=(E=r==null?void 0:r.contentRef)==null?void 0:E.current)==null||P.focus()},[r]),contentRef:r==null?void 0:r.contentRef}}const fo=(0,g.Z)(r=>({drawer:o=>({display:"flex",flexFlow:"column nowrap",alignItems:"flex-start",position:"fixed",left:0,top:0,bottom:0,zIndex:r.zIndex.appBar,background:r.palette.navigation.background,overflowX:"hidden",msOverflowStyle:"none",scrollbarWidth:"none",width:o.sidebarConfig.drawerWidthClosed,transition:r.transitions.create("width",{easing:r.transitions.easing.sharp,duration:r.transitions.duration.shortest}),"& > *":{flexShrink:0},"&::-webkit-scrollbar":{display:"none"},"& .MuiButtonBase-root":{textTransform:"none"}}),drawerOpen:o=>({width:o.sidebarConfig.drawerWidthOpen,transition:r.transitions.create("width",{easing:r.transitions.easing.sharp,duration:r.transitions.duration.shorter})}),visuallyHidden:{top:0,position:"absolute",zIndex:1e3,transform:"translateY(-200%)","&:focus":{transform:"translateY(5px)"}}}),{name:"BackstageSidebar"}),fi=r=>{const{sidebarConfig:o}=(0,t.useContext)(wr),{openDelayMs:E=o.defaultOpenDelayMs,closeDelayMs:P=o.defaultCloseDelayMs,disableExpandOnHover:$,children:q}=r,he=fo({sidebarConfig:o}),Ue=(0,Q.Z)(tr=>tr.breakpoints.down("md"),{noSsr:!0}),[tt,Ve]=(0,t.useState)(0),Tt=(0,t.useRef)(),{isPinned:_t,toggleSidebarPinState:Ut}=ra(),Gt=()=>{_t||$||(Tt.current&&(clearTimeout(Tt.current),Tt.current=void 0),tt!==2&&!Ue&&(Tt.current=window.setTimeout(()=>{Tt.current=void 0,Ve(2)},E),Ve(1)))},yn=()=>{_t||$||(Tt.current&&(clearTimeout(Tt.current),Tt.current=void 0),tt===1?Ve(0):tt===2&&(Tt.current=window.setTimeout(()=>{Tt.current=void 0,Ve(0)},P)))},vn=tt===2&&!Ue||_t,Jn=tr=>{tr?(Ve(2),Ut()):(Ve(0),Ut())};return t.createElement("nav",{style:{},"aria-label":"sidebar nav"},t.createElement(hi,null),t.createElement(ao,{value:{isOpen:vn,setOpen:Jn}},t.createElement(we.Z,{className:he.root,"data-testid":"sidebar-root",onMouseEnter:$?()=>{}:Gt,onFocus:$?()=>{}:Gt,onMouseLeave:$?()=>{}:yn,onBlur:$?()=>{}:yn},t.createElement(we.Z,{className:R()(he.drawer,{[he.drawerOpen]:vn})},q))))},pi=r=>{var o,E;const P=ti((o=r.sidebarOptions)!=null?o:{}),$=ni((E=r.submenuOptions)!=null?E:{}),{children:q,disableExpandOnHover:he,openDelayMs:Ue,closeDelayMs:tt}=r,{isMobile:Ve}=ra();return Ve?t.createElement(ui,null,q):t.createElement(wr.Provider,{value:{sidebarConfig:P,submenuConfig:$}},t.createElement(fi,{openDelayMs:Ue,closeDelayMs:tt,disableExpandOnHover:he},q))};function hi(){const{sidebarConfig:r}=(0,t.useContext)(wr),{focusContent:o,contentRef:E}=Sa(),P=fo({sidebarConfig:r});return E!=null&&E.current?t.createElement(D.Z,{onClick:o,variant:"contained",className:R()(P.visuallyHidden)},"Skip to content"):null}function ua(r,o){const E=new URLSearchParams(o.search).toString(),P=wn().parse(E),$=new URLSearchParams(r.search).toString(),q=wn().parse($);return(0,c.isEqual)(o.pathname,r.pathname)&&(0,c.isMatch)(q,P)}const gi=(0,g.Z)(r=>({item:{height:48,width:"100%","&:hover":{background:"#6f6f6f",color:r.palette.navigation.selectedColor},display:"flex",alignItems:"center",color:r.palette.navigation.color,padding:r.spacing(2.5),cursor:"pointer",position:"relative",background:"none",border:"none"},itemContainer:{width:"100%"},selected:{background:"#6f6f6f",color:"#FFF"},label:{margin:r.spacing(1.75),marginLeft:r.spacing(1),fontSize:r.typography.body2.fontSize,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis",lineHeight:1},subtitle:{fontSize:10,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis"},dropdownArrow:{position:"absolute",right:21},dropdown:{display:"flex",flexDirection:"column",alignItems:"end"},dropdownItem:{width:"100%",padding:"10px 0 10px 0","&:hover":{background:"#6f6f6f",color:r.palette.navigation.selectedColor}},textContent:{color:r.palette.navigation.color,paddingLeft:r.spacing(4),paddingRight:r.spacing(1),fontSize:r.typography.body2.fontSize,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis"}}),{name:"BackstageSidebarSubmenuItem"}),Ei=r=>{const{title:o,subtitle:E,to:P,icon:$,dropdownItems:q}=r,he=gi(),{setIsHoveredOn:Ue}=(0,t.useContext)(Ca),tt=()=>{Ue(!1)},Ve=(0,O.WU)(P!=null?P:""),Tt=(0,O.TH)();let _t=ua(Tt,Ve);const[Ut,Gt]=(0,t.useState)(!1),yn=()=>{Gt(!Ut)};return q!==void 0?(q.some(vn=>{const Jn=(0,Ce.i3)(vn.to);return _t=ua(Tt,Jn),_t}),t.createElement(we.Z,{className:he.itemContainer},t.createElement(ct.ZP,{title:o,enterDelay:500,enterNextDelay:500},t.createElement(D.Z,{role:"button",onClick:yn,onTouchStart:vn=>vn.stopPropagation(),className:R()(he.item,_t?he.selected:void 0)},$&&t.createElement($,{fontSize:"small"}),t.createElement(d.Z,{variant:"subtitle1",className:he.label},o,t.createElement("br",null),E&&t.createElement(d.Z,{variant:"caption",className:he.subtitle},E)),Ut?t.createElement(h.Z,{className:he.dropdownArrow}):t.createElement(wt.Z,{className:he.dropdownArrow}))),q&&Ut&&t.createElement(we.Z,{className:he.dropdown},q.map((vn,Jn)=>t.createElement(ct.ZP,{key:Jn,title:vn.title,enterDelay:500,enterNextDelay:500},t.createElement(p,{to:vn.to,underline:"none",className:he.dropdownItem,onClick:tt,onTouchStart:tr=>tr.stopPropagation()},t.createElement(d.Z,{className:he.textContent},vn.title))))))):t.createElement(we.Z,{className:he.itemContainer},t.createElement(ct.ZP,{title:o,enterDelay:500,enterNextDelay:500},t.createElement(p,{to:P,underline:"none",className:R()(he.item,_t?he.selected:void 0),onClick:tt,onTouchStart:vn=>vn.stopPropagation()},$&&t.createElement($,{fontSize:"small"}),t.createElement(d.Z,{variant:"subtitle1",className:he.label},o,t.createElement("br",null),E&&t.createElement(d.Z,{variant:"caption",className:he.subtitle},E)))))},yi=(0,g.Z)(r=>({root:{zIndex:1e3,position:"relative",overflow:"visible",width:r.spacing(7)+1},drawer:o=>{var E,P;return{display:"flex",flexFlow:"column nowrap",alignItems:"flex-start",position:"fixed",[r.breakpoints.up("sm")]:{marginLeft:o.left,transition:r.transitions.create("margin-left",{easing:r.transitions.easing.sharp,duration:r.transitions.duration.shortest})},top:0,bottom:0,padding:0,background:(P=(E=r.palette.navigation.submenu)==null?void 0:E.background)!=null?P:"#404040",overflowX:"hidden",msOverflowStyle:"none",scrollbarWidth:"none",cursor:"default",width:o.submenuConfig.drawerWidthClosed,transitionDelay:`${o.submenuConfig.defaultOpenDelayMs}ms`,"& > *":{flexShrink:0},"&::-webkit-scrollbar":{display:"none"}}},drawerOpen:o=>({width:o.submenuConfig.drawerWidthOpen,[r.breakpoints.down("xs")]:{width:"100%",position:"relative",paddingLeft:r.spacing(3),left:0,top:0}}),title:{fontSize:r.typography.h5.fontSize,fontWeight:r.typography.fontWeightMedium,color:"#FFF",padding:r.spacing(2.5),[r.breakpoints.down("xs")]:{display:"none"}}}),{name:"BackstageSidebarSubmenu"}),po=r=>{const{isOpen:o}=na(),{sidebarConfig:E,submenuConfig:P}=(0,t.useContext)(wr),$=o?E.drawerWidthOpen:E.drawerWidthClosed,q=yi({left:$,submenuConfig:P}),{isHoveredOn:he}=(0,t.useContext)(Ca),[Ue,tt]=(0,t.useState)(!1);return(0,t.useEffect)(()=>{tt(he)},[he]),t.createElement(we.Z,{className:R()(q.drawer,{[q.drawerOpen]:Ue})},t.createElement(d.Z,{variant:"h5",className:q.title},r.title),r.children)},vi=(0,g.Z)({iconContainer:{display:"flex",position:"relative",width:"100%"},arrow1:{right:"6px",position:"absolute"}}),bi=()=>{const r=vi();return React.createElement(Box,{className:r.iconContainer},React.createElement(Box,{className:r.arrow1},React.createElement(ArrowBackIosIcon,{style:{fontSize:"12px"}})),React.createElement(Box,null,React.createElement(ArrowBackIosIcon,{style:{fontSize:"12px"}})))},_i=(0,g.Z)({iconContainer:{display:"flex",position:"relative",width:"100%"},arrow1:{right:"6px",position:"absolute"}}),Ci=()=>{const r=_i();return React.createElement(Box,{className:r.iconContainer},React.createElement(Box,{className:r.arrow1},React.createElement(ArrowForwardIosIcon,{style:{fontSize:"12px"}})),React.createElement(Box,null,React.createElement(ArrowForwardIosIcon,{style:{fontSize:"12px"}})))},Pi=r=>(0,g.Z)(o=>{var E,P,$,q;return{root:{color:o.palette.navigation.color,display:"flex",flexFlow:"row nowrap",alignItems:"center",height:48,cursor:"pointer"},buttonItem:{background:"none",border:"none",width:"100%",margin:0,padding:0,textAlign:"inherit",font:"inherit"},closed:{width:r.drawerWidthClosed,justifyContent:"center"},open:{[o.breakpoints.up("sm")]:{width:r.drawerWidthOpen}},highlightable:{"&:hover":{background:(P=(E=o.palette.navigation.navItem)==null?void 0:E.hoverBackground)!=null?P:"#404040"}},highlighted:{background:(q=($=o.palette.navigation.navItem)==null?void 0:$.hoverBackground)!=null?q:"#404040"},label:{fontWeight:"bold",whiteSpace:"nowrap",lineHeight:"auto",flex:"3 1 auto",width:"110px",overflow:"hidden","text-overflow":"ellipsis"},iconContainer:{boxSizing:"border-box",height:"100%",width:r.iconContainerWidth,marginRight:-o.spacing(2),display:"flex",alignItems:"center",justifyContent:"center",lineHeight:"0"},searchRoot:{marginBottom:12},searchField:{color:"#b5b5b5",fontWeight:o.typography.fontWeightBold,fontSize:o.typography.fontSize},searchFieldHTMLInput:{padding:o.spacing(2,0,2)},searchContainer:{width:r.drawerWidthOpen-r.iconContainerWidth},secondaryAction:{width:o.spacing(6),textAlign:"center",marginRight:o.spacing(1)},closedItemIcon:{width:"100%",justifyContent:"center"},submenuArrow:{display:"flex"},expandButton:{background:"none",border:"none",color:o.palette.navigation.color,width:"100%",cursor:"pointer",position:"relative",height:48},arrows:{position:"absolute",right:10},selected:{"&$root":{borderLeft:`solid ${r.selectedIndicatorWidth}px ${o.palette.navigation.indicator}`,color:o.palette.navigation.selectedColor},"&$closed":{width:r.drawerWidthClosed},"& $closedItemIcon":{paddingRight:r.selectedIndicatorWidth},"& $iconContainer":{marginLeft:-r.selectedIndicatorWidth}}}},{name:"BackstageSidebarItem"});function da(r){return(0,t.useMemo)(()=>Pi(r),[r])()}const Si=(r,o)=>(0,n.vJ)(r.props.children,E=>{let P=!1;return E.getElements().forEach(({props:{to:$,dropdownItems:q}})=>{if(!P){if(q!=null&&q.length){q.forEach(({to:he})=>P=P||ua(o,(0,Ce.i3)(he)));return}$&&(P=ua(o,(0,Ce.i3)($)))}}),P},[o.pathname]);function ho(r){return r.to===void 0}const Ri=t.createElement(po).type,wi=t.forwardRef(function({to:o,end:E,style:P,className:$,activeStyle:q,caseSensitive:he,activeClassName:Ue="active","aria-current":tt="page",...Ve},Tt){let{pathname:_t}=(0,O.TH)(),{pathname:Ut}=(0,O.WU)(o);he||(_t=_t.toLocaleLowerCase("en-US"),Ut=Ut.toLocaleLowerCase("en-US"));let Gt=_t===Ut;!Gt&&!E&&(Gt=_t.startsWith(`${Ut}/`));const yn=Gt?tt:void 0;return t.createElement(T.rU,{...Ve,to:o,ref:Tt,"aria-current":yn,style:{...P,...Gt?q:void 0},className:R()([$,Gt?Ue:void 0])})}),go=(0,t.forwardRef)((r,o)=>{const{icon:E,text:P,hasNotifications:$=!1,hasSubmenu:q=!1,disableHighlight:he=!1,onClick:Ue,children:tt,className:Ve,...Tt}=r,{sidebarConfig:_t}=(0,t.useContext)(wr),Ut=da(_t),{isOpen:Gt}=na(),yn=!Gt&&q?{display:"flex",marginLeft:"20px"}:{lineHeight:"0"},vn=t.createElement(we.Z,{style:yn},t.createElement(E,{fontSize:"small"}),!Gt&&q?t.createElement(te.Z,{fontSize:"small"}):t.createElement(t.Fragment,null)),Jn=t.createElement(v.Z,{color:"secondary",variant:"dot",overlap:"circular",invisible:!$,className:R()({[Ut.closedItemIcon]:!Gt})},vn),tr=t.createElement(t.Fragment,null,t.createElement(we.Z,{"data-testid":"login-button",className:Ut.iconContainer},Jn),P&&t.createElement(d.Z,{variant:"subtitle2",className:Ut.label},P),t.createElement("div",{className:Ut.secondaryAction},tt)),sr=Gt?tr:Jn,ir={onClick:Ue,className:R()(Ve,Ut.root,Gt?Ut.open:Ut.closed,ho(r)&&Ut.buttonItem,{[Ut.highlightable]:!he})};return ho(r)?t.createElement(D.Z,{role:"button","aria-label":P,...ir,ref:o},sr):t.createElement(wi,{...ir,activeClassName:Ut.selected,to:r.to?r.to:"",ref:o,"aria-label":P||r.to,...Tt},sr)}),Oi=({children:r,...o})=>{const{sidebarConfig:E}=(0,t.useContext)(wr),P=da(E),[$,q]=(0,t.useState)(!1),he=(0,O.TH)(),Ue=Si(r,he),tt=(0,Q.Z)(Ut=>Ut.breakpoints.down("sm")),Ve=()=>{q(!0)},Tt=()=>{q(!1)},_t=()=>tt?$?t.createElement(h.Z,{fontSize:"small",className:P.submenuArrow}):t.createElement(wt.Z,{fontSize:"small",className:P.submenuArrow}):!$&&t.createElement(te.Z,{fontSize:"small",className:P.submenuArrow});return t.createElement(Ca.Provider,{value:{isHoveredOn:$,setIsHoveredOn:q}},t.createElement("div",{"data-testid":"item-with-submenu",onMouseLeave:Tt,onTouchStart:$?Tt:Ve,onMouseEnter:Ve,className:R()($&&P.highlighted)},t.createElement(go,{hasSubmenu:!0,className:Ue?P.selected:"",...o},_t()),$&&r))},Eo=(0,t.forwardRef)((r,o)=>{const[E]=(0,n.vJ)(r.children,P=>P.getElements().filter($=>$.type===Ri));return E?t.createElement(Oi,{...r},E):t.createElement(go,{...r,ref:o})});function oc(r){const{sidebarConfig:o}=useContext(wr),[E,P]=useState(""),$=da(o),q=r.icon?r.icon:SearchIcon,he=()=>{r.onSearch(E),P("")},Ue=_t=>{_t.key==="Enter"&&(_t.preventDefault(),he())},tt=_t=>{P(_t.target.value)},Ve=_t=>{_t.preventDefault(),_t.stopPropagation()},Tt=_t=>{he(),_t.preventDefault()};return React.createElement(Box,{className:$.searchRoot},React.createElement(Eo,{icon:q,to:r.to,onClick:Tt,disableHighlight:!0},React.createElement(TextField,{placeholder:"Search",value:E,onClick:Ve,onChange:tt,onKeyDown:Ue,className:$.searchContainer,InputProps:{disableUnderline:!0,className:$.searchField},inputProps:{className:$.searchFieldHTMLInput}})))}const Ai=(0,w.Z)("div")({flex:1},{name:"BackstageSidebarSpace"}),sc=(0,w.Z)("div")({height:8},{name:"BackstageSidebarSpacer"}),yo=(0,w.Z)("hr")(({theme:r})=>({height:1,width:"100%",background:"#383838",border:"none",margin:r.spacing(1.2,0)}),{name:"BackstageSidebarDivider"}),Ii=r=>({overflowY:"auto","&::-webkit-scrollbar":{backgroundColor:r.palette.background.default,width:"5px",borderRadius:"5px"},"&::-webkit-scrollbar-thumb":{backgroundColor:r.palette.text.hint,borderRadius:"5px"}}),Ti=(0,w.Z)("div")(({theme:r})=>{const o=Ii(r);return{flex:"0 1 auto",overflowX:"hidden",width:"calc(100% - 5px)",minHeight:"48px",overflowY:"hidden","@media (hover: none)":o,"&:hover":o}}),ic=()=>{const{sidebarConfig:r}=useContext(wr),o=da(r),{isOpen:E,setOpen:P}=na();if(useMediaQuery(he=>he.breakpoints.down("md"),{noSsr:!0}))return null;const q=()=>{P(!E)};return React.createElement(Button$1,{role:"button",onClick:q,className:o.expandButton,"aria-label":"Expand Sidebar","data-testid":"sidebar-expand-button"},React.createElement(Box,{className:o.arrows},E?React.createElement(bi,null):React.createElement(Ci,null)))},Di=(0,g.Z)(r=>({introCard:o=>({color:"#b5b5b5",fontSize:12,width:o.sidebarConfig.drawerWidthOpen,marginTop:r.spacing(2.25),marginBottom:r.spacing(1.5),paddingLeft:o.sidebarConfig.iconPadding,paddingRight:o.sidebarConfig.iconPadding}),introDismiss:{display:"flex",justifyContent:"flex-end",alignItems:"center",marginTop:r.spacing(1.5)},introDismissLink:{color:"#dddddd",display:"flex",alignItems:"center",marginBottom:r.spacing(.5),"&:hover":{color:r.palette.linkHover,transition:r.transitions.create("color",{easing:r.transitions.easing.sharp,duration:r.transitions.duration.shortest})}},introDismissText:{fontSize:"0.7rem",fontWeight:"bold",textTransform:"uppercase",letterSpacing:1},introDismissIcon:{width:18,height:18,marginRight:r.spacing(1.5)}}),{name:"BackstageSidebarIntro"});function Mi(r){const{sidebarConfig:o}=useContext(wr),E=Di({sidebarConfig:o}),{text:P,onClose:$}=r,q=()=>$();return React.createElement(Box,{className:E.introCard},React.createElement(Typography,{variant:"subtitle2"},P),React.createElement(Box,{className:E.introDismiss},React.createElement(IconButton,{onClick:q,className:E.introDismissLink},React.createElement(CloseIcon,{className:E.introDismissIcon}),React.createElement(Typography,{component:"span",className:E.introDismissText},"Dismiss"))))}const vo=r=>{const{text:o,onDismiss:E}=r,[P,$]=useState(!1),q=()=>{$(!0)};return React.createElement(Collapse,{in:!P,onExited:E},React.createElement(Mi,{text:o,onClose:q}))},$i=null,Li="And your recently viewed plugins will pop up here!";function lc(r){const{isOpen:o}=na(),E={starredItemsDismissed:!1,recentlyViewedItemsDismissed:!1},{value:P,set:$}=useLocalStorageValue(ri),{starredItemsDismissed:q,recentlyViewedItemsDismissed:he}=P!=null?P:{},Ue=()=>{$(Ve=>({...E,...Ve,starredItemsDismissed:!0}))},tt=()=>{$(Ve=>({...E,...Ve,recentlyViewedItemsDismissed:!0}))};return o?React.createElement(React.Fragment,null,!q&&React.createElement(React.Fragment,null,React.createElement(vo,{text:$i,onDismiss:Ue}),React.createElement(yo,null)),!he&&React.createElement(vo,{text:Li,onDismiss:tt})):null}const xi=(0,g.Z)(r=>({root:{gridArea:"pageContent",minWidth:0,paddingTop:r.spacing(3),paddingBottom:r.spacing(3),paddingLeft:r.spacing(2),paddingRight:r.spacing(2),[r.breakpoints.up("sm")]:{paddingLeft:r.spacing(3),paddingRight:r.spacing(3)}},stretch:{display:"flex",flexDirection:"column",flexGrow:1},noPadding:{padding:0}}),{name:"BackstageContent"});function ma(r){const{className:o,stretch:E,noPadding:P,children:$,...q}=r,{contentRef:he}=Sa(),Ue=xi();return t.createElement("article",{ref:he,tabIndex:-1,...q,className:R()(Ue.root,o,{[Ue.stretch]:E,[Ue.noPadding]:P})},$)}const ki=(0,g.Z)(r=>({tabsWrapper:{gridArea:"pageSubheader",backgroundColor:r.palette.background.paper,paddingLeft:r.spacing(3),minWidth:0},defaultTab:{...r.typography.caption,padding:r.spacing(3,3),textTransform:"uppercase",fontWeight:r.typography.fontWeightBold,color:r.palette.text.secondary},selected:{color:r.palette.text.primary},tabRoot:{"&:hover":{backgroundColor:r.palette.background.default,color:r.palette.text.primary}}}),{name:"BackstageHeaderTabs"});function bo(r){const{tabs:o,onChange:E,selectedIndex:P}=r,[$,q]=(0,t.useState)(P!=null?P:0),he=ki(),Ue=(0,t.useCallback)((tt,Ve)=>{P===void 0&&q(Ve),E&&P!==Ve&&E(Ve)},[P,E]);return(0,t.useEffect)(()=>{P!==void 0&&q(P)},[P]),t.createElement(we.Z,{className:he.tabsWrapper},t.createElement(Ln.Z,{selectionFollowsFocus:!0,indicatorColor:"primary",textColor:"inherit",variant:"scrollable",scrollButtons:"auto","aria-label":"scrollable auto tabs example",onChange:Ue,value:$},o.map((tt,Ve)=>t.createElement(Zn.Z,{...tt.tabProps,"data-testid":`header-tab-${Ve}`,label:tt.label,key:tt.id,value:Ve,className:he.defaultTab,classes:{selected:he.selected,root:he.tabRoot}}))))}function Bi(r){var o,E,P,$;const q=(0,O.UO)(),Ue=r.map(({path:Ut,children:Gt})=>({caseSensitive:!1,path:`${Ut}/*`,element:Gt})).sort((Ut,Gt)=>Gt.path.replace(/\/\*$/,"").localeCompare(Ut.path.replace(/\/\*$/,""))),tt=(o=(0,O.V$)(Ue))!=null?o:r[0].children;let Ve=(E=q["*"])!=null?E:"";Ve.startsWith("/")||(Ve=`/${Ve}`);const[Tt]=(P=(0,Ce.fp)(Ue,Ve))!=null?P:[],_t=Tt?r.findIndex(Ut=>`${Ut.path}/*`===Tt.route.path):0;return{index:_t===-1?0:_t,element:tt,route:($=r[_t])!=null?$:r[0]}}function _o(r){const{routes:o}=r,E=(0,O.s0)(),{index:P,route:$,element:q}=Bi(o),he=(0,t.useMemo)(()=>o.map(tt=>({id:tt.path,label:tt.title,tabProps:tt.tabProps})),[o]),Ue=tt=>{let{path:Ve}=o[tt];Ve=Ve.replace(/\/\*$/,""),Ve=Ve.replace(/^\//,""),E(Ve)};return t.createElement(t.Fragment,null,t.createElement(bo,{tabs:he,selectedIndex:P,onChange:Ue}),t.createElement(ma,null,t.createElement(Tn.q,{title:$.title}),q))}const Ra=()=>null;(0,n.R5)(Ra,"core.gatherMountPoints",!0);function Co(r){const o=t.createElement(Ra,{path:"",title:""},t.createElement("div",null)).type;return t.Children.toArray(r).flatMap(E=>{if(!(0,t.isValidElement)(E))return[];if(E.type===t.Fragment)return Co(E.props.children);if(E.type!==o)throw new Error("Child of TabbedLayout must be an TabbedLayout.Route");const{path:P,title:$,children:q,tabProps:he}=E.props;return[{path:P,title:$,children:q,tabProps:he}]})}function Ui(r){const o=Co(r.children);return t.createElement(_o,{routes:o})}Ui.Route=Ra;const Zi=(0,g.Z)(r=>({value:{marginBottom:r.spacing(.75)},subvalue:{color:r.palette.textSubtle,fontWeight:"normal"}}),{name:"BackstageSubvalueCell"});function Ni(r){const{value:o,subvalue:E}=r,P=Zi();return t.createElement(t.Fragment,null,t.createElement(we.Z,{className:P.value},o),t.createElement(we.Z,{className:P.subvalue},E))}const Wi=(0,g.Z)(r=>({root:{height:"100%",width:"315px",display:"flex",flexDirection:"column",marginRight:r.spacing(3)},value:{fontWeight:"bold",fontSize:18},header:{display:"flex",alignItems:"center",height:r.spacing(7.5),justifyContent:"space-between",borderBottom:`1px solid ${r.palette.grey[500]}`},filters:{display:"flex",flexDirection:"column","& > *":{marginTop:r.spacing(2)}}}),{name:"BackstageTableFilters"}),Fi=r=>{var o;const E=Wi(),{onChangeFilters:P}=r,[$,q]=(0,t.useState)({...r.selectedFilters}),[he,Ue]=(0,t.useState)(!1),tt=()=>{q({}),Ue(Ve=>!Ve)};return(0,t.useEffect)(()=>{P($)},[$,P]),t.createElement(we.Z,{className:E.root},t.createElement(we.Z,{className:E.header},t.createElement(we.Z,{className:E.value},"Filters"),t.createElement(D.Z,{color:"primary",onClick:tt},"Clear all")),t.createElement(we.Z,{className:E.filters},((o=r.filters)==null?void 0:o.length)&&r.filters.map(Ve=>t.createElement(Wa,{triggerReset:he,key:Ve.element.label,...Ve.element,selected:$[Ve.element.label],onChange:Tt=>q({...$,[Ve.element.label]:Tt})}))))},Po={Add:(0,t.forwardRef)((r,o)=>t.createElement(Xn.Z,{...r,ref:o})),Check:(0,t.forwardRef)((r,o)=>t.createElement(gr.Z,{...r,ref:o})),Clear:(0,t.forwardRef)((r,o)=>t.createElement(fr.Z,{...r,ref:o})),Delete:(0,t.forwardRef)((r,o)=>t.createElement(Se.Z,{...r,ref:o})),DetailPanel:(0,t.forwardRef)((r,o)=>t.createElement(Z.Z,{...r,ref:o})),Edit:(0,t.forwardRef)((r,o)=>t.createElement(ne.Z,{...r,ref:o})),Export:(0,t.forwardRef)((r,o)=>t.createElement(N.Z,{...r,ref:o})),Filter:(0,t.forwardRef)((r,o)=>t.createElement(ae.Z,{...r,ref:o})),FirstPage:(0,t.forwardRef)((r,o)=>t.createElement(S.Z,{...r,ref:o})),LastPage:(0,t.forwardRef)((r,o)=>t.createElement(ge.Z,{...r,ref:o})),NextPage:(0,t.forwardRef)((r,o)=>t.createElement(Z.Z,{...r,ref:o})),PreviousPage:(0,t.forwardRef)((r,o)=>t.createElement(ie.Z,{...r,ref:o})),ResetSearch:(0,t.forwardRef)((r,o)=>t.createElement(fr.Z,{...r,ref:o})),Search:(0,t.forwardRef)((r,o)=>t.createElement(ae.Z,{...r,ref:o})),SortArrow:(0,t.forwardRef)((r,o)=>t.createElement(or.Z,{...r,ref:o})),ThirdStateCheck:(0,t.forwardRef)((r,o)=>t.createElement(L.Z,{...r,ref:o})),ViewColumn:(0,t.forwardRef)((r,o)=>t.createElement(me.Z,{...r,ref:o}))};function So(r,o){const E=o.split(".");let P=r[E[0]];for(let $=1;$<E.length;++$){if(P===void 0)return P;const q=E[$];P=P[q]}return P}const Ki=(0,re.Z)(r=>({header:{padding:r.spacing(1,2,1,2.5),borderTop:`1px solid ${r.palette.grey.A100}`,borderBottom:`1px solid ${r.palette.grey.A100}`,color:r.palette.textSubtle,fontWeight:r.typography.fontWeightBold,position:"static",wordBreak:"normal"}}),{name:"BackstageTableHeader"})(jn.W$),Ro=(0,re.Z)(r=>({root:{padding:r.spacing(3,0,2.5,2.5)},title:{"& > h6":{fontWeight:r.typography.fontWeightBold}},searchField:{paddingRight:r.spacing(2)}}),{name:"BackstageTableToolbar"})(jn.UW),zi=(0,g.Z)(r=>({root:{display:"flex",alignItems:"center",justifyContent:"space-between"},title:{fontWeight:r.typography.fontWeightBold,fontSize:18,whiteSpace:"nowrap"}}),{name:"BackstageTableFiltersContainer"}),ji=(0,g.Z)(()=>({root:{display:"flex",alignItems:"start"}}),{name:"BackstageTable"});function Vi(r,o){return r.map(E=>{const P={};let $=E.cellStyle||{};if(E.highlight)if(P.color=o.palette.textContrast,typeof $=="object")$.fontWeight=o.typography.fontWeightBold;else{const q=$;$=(he,Ue,tt)=>({...q(he,Ue,tt),fontWeight:o.typography.fontWeightBold})}return{...E,headerStyle:P,cellStyle:$}})}function Gi(r,o){return(0,c.transform)(r,(E,P,$)=>{(0,c.isEqual)(P,o[$])||(E[$]=P)})}const wo={search:"",filtersOpen:!1,filters:{}};function Hi(r){const{toolbarRef:o,setSearch:E,hasFilters:P,selectedFiltersLength:$,toggleFilters:q}=r,he=zi(),Ue=(0,t.useCallback)(tt=>{r.onSearchChanged(tt),E(tt)},[r,E]);return P?t.createElement(we.Z,{className:he.root},t.createElement(we.Z,{className:he.root},t.createElement(i.Z,{onClick:q,"aria-label":"filter list"},t.createElement(ae.Z,null)),t.createElement(d.Z,{className:he.title},"Filters (",$,")")),t.createElement(Ro,{...r,ref:o,onSearchChanged:Ue})):t.createElement(Ro,{...r,ref:o,onSearchChanged:Ue})}function Oo(r){const{data:o,columns:E,options:P,title:$,subtitle:q,filters:he,initialState:Ue,emptyContent:tt,onStateChange:Ve,components:Tt,..._t}=r,Ut=ji(),Gt=(0,j.Z)(),yn={...wo,...Ue},[vn,Jn]=(0,t.useState)(yn.filtersOpen),tr=(0,t.useCallback)(()=>Jn(br=>!br),[Jn]),[sr,ir]=(0,t.useState)(0),[Yn,lr]=(0,t.useState)(o),[nr,Zr]=(0,t.useState)(yn.filters),Nr=Vi(E,Gt),[xr,kr]=(0,t.useState)(yn.search);(0,t.useEffect)(()=>{if(Ve){const br=Gi({search:xr,filtersOpen:vn,filters:nr},wo);Ve(br)}},[xr,vn,nr,Ve]);const Da={headerStyle:{textTransform:"uppercase"}},Wr=(0,t.useCallback)(br=>{var Br;return(Br=E.find(Kr=>Kr.title===br))==null?void 0:Br.field},[E]);(0,t.useEffect)(()=>{if(typeof o=="function")return;if(!nr){lr(o);return}const br=Object.values(nr);if(o&&br.flat().length){const Br=o.filter(Kr=>!!Object.entries(nr).filter(([,zr])=>!!zr.length).every(([zr,cr])=>{const hr=So(Kr,Wr(zr));return Array.isArray(hr)&&Array.isArray(cr)?hr.some(ta=>cr.includes(ta)):Array.isArray(hr)?hr.includes(cr):Array.isArray(cr)?cr.includes(hr):hr===cr}));lr(Br)}else lr(o);ir(br.flat().length)},[o,nr,Wr]);const Ma=(br,Br)=>{const Kr=cr=>{const hr=new Set,ta=jr=>{jr!=null&&hr.add(jr)};return Br&&Br.forEach(jr=>{const aa=So(jr,Wr(cr));Array.isArray(aa)?aa.forEach(ta):ta(aa)}),hr},zr=cr=>({placeholder:"All results",label:cr.column,multiple:cr.type==="multiple-select",items:[...Kr(cr.column)].sort().map(hr=>({label:hr,value:hr}))});return br.map(cr=>({type:cr.type,element:zr(cr)}))},rr=!!(he!=null&&he.length),ea=(0,t.useCallback)(br=>t.createElement(Hi,{setSearch:kr,hasFilters:rr,selectedFiltersLength:sr,toggleFilters:tr,...br}),[tr,rr,sr,kr]),Ea=typeof o!="function"&&o.length===0,Fr=E.length,$a=(0,t.useCallback)(br=>tt&&Ea?t.createElement("tbody",null,t.createElement("tr",null,t.createElement("td",{colSpan:Fr},tt))):t.createElement(jn.os,{...br}),[Ea,tt,Fr]);return t.createElement(we.Z,{className:Ut.root},vn&&o&&typeof o!="function"&&(he==null?void 0:he.length)&&t.createElement(Fi,{filters:Ma(he,o),selectedFilters:nr,onChangeFilters:Zr}),t.createElement(jn.ZP,{components:{Header:Ki,Toolbar:ea,Body:$a,...Tt},options:{...Da,...P},columns:Nr,icons:Po,title:t.createElement(t.Fragment,null,t.createElement(d.Z,{variant:"h5",component:"h2"},$),q&&t.createElement(d.Z,{color:"textSecondary",variant:"body1"},q)),data:typeof o=="function"?o:Yn,style:{width:"100%"},localization:{toolbar:{searchPlaceholder:"Filter",searchTooltip:"Filter"}},..._t}))}Oo.icons=Object.freeze(Po);function Ji(r,o){if(o<=0)return[r];const E=[];for(let P=0;P<r.length;P+=o)E.push(r.slice(P,P+o));return E}const Ao=r=>{const{children:o,value:E,index:P,...$}=r;return React.createElement(Box,{role:"tabpanel",hidden:E!==P,"aria-labelledby":`scrollable-auto-tab-${P}`,...$},E===P&&React.createElement(Box,{p:3},o))},Yi=(0,g.Z)(r=>({root:{color:"#6E6E6E",overflow:"visible",fontSize:r.typography.h5.fontSize,textAlign:"center",borderRadius:"50%",backgroundColor:"#E6E6E6",marginLeft:o=>o.isNext?"auto":"0",marginRight:o=>o.isNext?"0":r.spacing(1.25),"&:hover":{backgroundColor:"#E6E6E6",opacity:"1"}}}),{name:"BackstageTabIcon"}),Io=r=>{const o=Yi(r),{ariaLabel:E,onClick:P}=r;return React.createElement(IconButton,{onClick:P,className:o.root,size:"small",disableRipple:!0,disableFocusRipple:!0,"aria-label":E},r.children)},Xi=(r,o)=>o?r?"20px":"0":"40px",Qi=(0,g.Z)(r=>({root:{textTransform:"none",height:"64px",fontWeight:r.typography.fontWeightBold,fontSize:r.typography.pxToRem(13),color:r.palette.textSubtle,marginLeft:o=>Xi(o.isFirstNav,o.isFirstIndex),width:"130px",minWidth:"130px","&:hover":{outline:"none",backgroundColor:"transparent",color:r.palette.textSubtle}}}),{name:"BackstageTab"}),qi=r=>{const o=Qi(r),{isFirstNav:E,isFirstIndex:P,...$}=r;return React.createElement(Tab,{classes:o,disableRipple:!0,...$})},el=(0,g.Z)(r=>({indicator:{display:"flex",justifyContent:"center",backgroundColor:r.palette.tabbar.indicator,height:r.spacing(.5)},flexContainer:{alignItems:"center"},root:{"&:last-child":{marginLeft:"auto"}}}),{name:"BackstageTabBar"}),tl=r=>{const o=el(r);return React.createElement(Tabs$1,{classes:o,...r,TabIndicatorProps:{children:React.createElement("span",null)}})},nl=(0,g.Z)(r=>({root:{flexGrow:1,width:"100%"},styledTabs:{backgroundColor:r.palette.background.paper},appbar:{boxShadow:"none",backgroundColor:r.palette.background.paper,paddingLeft:r.spacing(1.25),paddingRight:r.spacing(1.25)}}),{name:"BackstageTabs"});function cc(r){const{tabs:o}=r,E=nl(),[P,$]=useState([0,0]),[q,he]=useState(0),[Ue,tt]=useState(0),[Ve,Tt]=useState([[]]),_t=useRef(),{width:Ut}=useWindowSize(),Gt=(sr,ir)=>{$([q,ir])},yn=()=>{he(q-1)},vn=()=>{he(q+1)},Jn=()=>q+1<Ve.length;useEffect(()=>{const ir=q===0?1:2,Yn=_t.current.offsetWidth-20-ir*30,lr=P[0]*Ue+P[1],nr=Math.floor(Yn/170);tt(nr),Tt(Ji(o,nr)),$([Math.floor(lr/nr),lr%nr])},[Ut,o]);const tr=q===P[0]?P[1]:!1;return React.createElement(Box,{className:E.root},React.createElement(AppBar,{ref:_t,className:E.appbar,position:"static"},React.createElement(Box,null,React.createElement(tl,{value:tr,onChange:Gt,selectionFollowsFocus:!0},q!==0&&React.createElement(Io,{onClick:yn,ariaLabel:"navigate-before"},React.createElement(NavigateBeforeIcon,null)),Ve[q].map((sr,ir)=>React.createElement(qi,{value:ir,isFirstIndex:ir===0,isFirstNav:q===0,key:ir,icon:sr.icon||void 0,label:sr.label||void 0})),Jn()&&React.createElement(Io,{isNext:!0,onClick:vn,ariaLabel:"navigate-next"},React.createElement(NavigateNextIcon,null))))),tr!==!1?Ve[q].map((sr,ir)=>React.createElement(Ao,{key:ir,value:ir,index:tr},sr.content)):React.createElement(Ao,{key:"panel_outside_chunked_array",value:P[1],index:P[1]},Ve[P[0]][P[1]].content))}function rl(r,o){const E=r[r.length-1];if(!!E)return E>=.9?o.palette.status.ok:E>=.5?o.palette.status.warning:o.palette.status.error}function uc(r){var o;const E=useTheme();return r.data?React.createElement(Sparklines,{width:120,height:30,min:0,max:1,...r},r.title&&React.createElement("title",null,r.title),React.createElement(SparklinesLine,{color:(o=r.color)!=null?o:rl(r.data,E)})):null}const al=r=>(0,g.Z)(o=>({container:{width:"100%",display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"flex-end",alignItems:"center",marginBottom:o.spacing(2),textAlign:r.textAlign},leftItemsBox:{flex:"1 1 auto",minWidth:0,overflow:"visible"},rightItemsBox:{flex:"0 1 auto",display:"flex",flexDirection:"row",flexWrap:"wrap",alignItems:"center",marginLeft:o.spacing(1),minWidth:0,overflow:"visible"},description:{},title:{display:"inline-flex",marginBottom:0}}),{name:"BackstageContentHeader"}),ol=({title:r="Unknown page",className:o})=>t.createElement(d.Z,{variant:"h4",component:"h2",className:o,"data-testid":"header-title"},r);function To(r){const{description:o,title:E,titleComponent:P=void 0,children:$,textAlign:q="left"}=r,he=al({textAlign:q})(),Ue=P||t.createElement(ol,{title:E,className:he.title});return t.createElement(t.Fragment,null,t.createElement(Tn.q,{title:E}),t.createElement(we.Z,{className:he.container},t.createElement(we.Z,{className:he.leftItemsBox},Ue,o&&t.createElement(d.Z,{className:he.description,variant:"body2"},o)),t.createElement(we.Z,{className:he.rightItemsBox},$)))}const sl=(0,g.Z)(r=>({micDrop:{maxWidth:"60%",bottom:r.spacing(2),right:r.spacing(2),[r.breakpoints.down("xs")]:{maxWidth:"96%",bottom:"unset",right:"unset",margin:`${r.spacing(10)}px auto ${r.spacing(4)}px`}}}),{name:"BackstageErrorPageMicDrop"}),il=()=>{const r=sl();return t.createElement("img",{src:Ee,className:r.micDrop,alt:"Girl dropping mic from her hands"})},ll=(0,g.Z)(r=>({container:{padding:r.spacing(8),[r.breakpoints.down("xs")]:{padding:r.spacing(2)}},title:{paddingBottom:r.spacing(5),[r.breakpoints.down("xs")]:{paddingBottom:r.spacing(4),fontSize:r.typography.h3.fontSize}},subtitle:{color:r.palette.textSubtle}}),{name:"BackstageErrorPage"});function cl(r){const{status:o,statusMessage:E,additionalInfo:P,supportUrl:$}=r,q=ll(),he=(0,O.s0)(),Ue=Xa();return t.createElement(Pe.Z,{container:!0,spacing:0,className:q.container},t.createElement(Pe.Z,{item:!0,xs:12,sm:8,md:4},t.createElement(d.Z,{"data-testid":"error",variant:"body1",className:q.subtitle},"ERROR ",o,": ",E),t.createElement(d.Z,{variant:"body1",className:q.subtitle},P),t.createElement(d.Z,{variant:"h2",className:q.title},"Looks like someone dropped the mic!"),t.createElement(d.Z,{variant:"h6"},t.createElement(p,{to:"#","data-testid":"go-back-link",onClick:()=>he(-1)},"Go back"),"... or please"," ",t.createElement(p,{to:$||Ue.url},"contact support")," if you think this is a bug.")),t.createElement(il,null))}const ul=(0,re.Z)({root:{textDecoration:"underline",cursor:"pointer"}},{name:"BackstageBreadcrumbsClickableText"})(d.Z),wa=(0,re.Z)({root:{textDecoration:"underline",color:"inherit"}},{name:"BackstageBreadcrumbsStyledBox"})(we.Z);function Do(r){const{children:o,...E}=r,[P,$]=t.useState(null),q=t.Children.toArray(o),[he,Ue,...tt]=q,Ve=tt.length?tt.pop():q[q.length-1],Tt=q.length>3,_t=yn=>{$(yn.currentTarget)},Ut=()=>{$(null)},Gt=Boolean(P);return t.createElement(t.Fragment,null,t.createElement(Ye.Z,{"aria-label":"breadcrumb",...E},q.length>1&&t.createElement(wa,{clone:!0},he),q.length>2&&t.createElement(wa,{clone:!0},Ue),Tt&&t.createElement(ul,{onClick:_t},"..."),t.createElement(we.Z,{style:{fontStyle:"italic"}},Ve)),t.createElement(bn.ZP,{open:Gt,anchorEl:P,onClose:Ut,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},t.createElement(zt.Z,null,tt.map((yn,vn)=>t.createElement(Le.Z,{key:vn,button:!0},t.createElement(wa,{clone:!0},yn))))))}const dl=(0,g.Z)(r=>({header:{gridArea:"pageHeader",padding:r.spacing(3),width:"100%",boxShadow:r.shadows[4],position:"relative",zIndex:100,display:"flex",flexDirection:"row",alignItems:"center",backgroundImage:r.page.backgroundImage,backgroundPosition:"center",backgroundSize:"cover",[r.breakpoints.down("sm")]:{flexWrap:"wrap"}},leftItemsBox:{maxWidth:"100%",flexGrow:1},rightItemsBox:{width:"auto",alignItems:"center"},title:{color:r.page.fontColor,wordBreak:"break-word",fontSize:r.typography.h3.fontSize,marginBottom:0},subtitle:{color:r.page.fontColor,opacity:.8,display:"inline-block",marginTop:r.spacing(1),maxWidth:"75ch"},type:{textTransform:"uppercase",fontSize:11,opacity:.8,marginBottom:r.spacing(1),color:r.page.fontColor},breadcrumb:{color:r.page.fontColor},breadcrumbType:{fontSize:"inherit",opacity:.7,marginRight:-r.spacing(.3),marginBottom:r.spacing(.3)},breadcrumbTitle:{fontSize:"inherit",marginLeft:-r.spacing(.3),marginBottom:r.spacing(.3)}}),{name:"BackstageHeader"}),ml=({type:r,typeLink:o,classes:E,pageTitle:P})=>r?o?t.createElement(Do,{className:E.breadcrumb},t.createElement(p,{to:o},r),t.createElement(d.Z,null,P)):t.createElement(d.Z,{className:E.type},r):null,fl=({pageTitle:r,classes:o,tooltip:E})=>{const P=t.createElement(d.Z,{className:o.title,variant:"h1"},r);return E?t.createElement(ct.ZP,{title:E,placement:"top-start"},P):P},pl=({classes:r,subtitle:o})=>o?typeof o!="string"?t.createElement(t.Fragment,null,o):t.createElement(d.Z,{className:r.subtitle,variant:"subtitle2",component:"span"},o):null;function fa(r){const{children:o,pageTitleOverride:E,style:P,subtitle:$,title:q,tooltip:he,type:Ue,typeLink:tt}=r,Ve=dl(),_t=(0,n.h_)(n.Ds).getOptionalString("app.title")||"Backstage",Ut=E||q,Gt=q||E,yn=`${Ut} | %s | ${_t}`,vn=`${Ut} | ${_t}`;return t.createElement(t.Fragment,null,t.createElement(Tn.q,{titleTemplate:yn,defaultTitle:vn}),t.createElement("header",{style:P,className:Ve.header},t.createElement(we.Z,{className:Ve.leftItemsBox},t.createElement(ml,{classes:Ve,type:Ue,typeLink:tt,pageTitle:Gt}),t.createElement(fl,{classes:Ve,pageTitle:Gt,tooltip:he}),t.createElement(pl,{classes:Ve,subtitle:$})),t.createElement(Pe.Z,{container:!0,className:Ve.rightItemsBox,spacing:4},o)))}const hl=({label:r,secondaryLabel:o,icon:E,disabled:P=!1,onClick:$})=>React.createElement(Fragment,null,React.createElement(ListItem,{"data-testid":"header-action-item",disabled:P,button:!0,onClick:q=>{$&&$(q)}},E&&React.createElement(ListItemIcon,null,E),React.createElement(ListItemText,{primary:r,secondary:o})));function dc(r){const{actionItems:o}=r,[E,P]=React.useState(!1),$=React.useRef(null);return React.createElement(Fragment,null,React.createElement(IconButton,{onClick:()=>P(!0),"data-testid":"header-action-menu",ref:$,style:{color:"white",height:56,width:56,marginRight:-4,padding:0}},React.createElement(MoreVert,null)),React.createElement(Popover,{open:E,anchorEl:$.current,anchorOrigin:{horizontal:"right",vertical:"bottom"},transformOrigin:{horizontal:"right",vertical:"top"},onClose:()=>P(!1)},React.createElement(List,null,o.map((q,he)=>React.createElement(hl,{key:`header-action-menu-${he}`,...q})))))}const gl=(0,g.Z)(r=>({root:{textAlign:"left"},label:{color:r.palette.common.white,fontWeight:r.typography.fontWeightBold,letterSpacing:0,fontSize:r.typography.fontSize,marginBottom:r.spacing(1)/2,lineHeight:1},value:{color:"rgba(255, 255, 255, 0.8)",fontSize:r.typography.fontSize,lineHeight:1}}),{name:"BackstageHeaderLabel"}),El=({value:r,className:o})=>t.createElement(d.Z,{className:o},r);function yl(r){const{label:o,value:E,url:P}=r,$=gl(),q=t.createElement(El,{className:$.value,value:E||"<Unknown>"});return t.createElement(Pe.Z,{item:!0},t.createElement(d.Z,{component:"span",className:$.root},t.createElement(d.Z,{className:$.label},o),P?t.createElement(p,{to:P},q):q))}const vl=r=>(0,F.Z)({root:{color:r.palette.common.white,padding:r.spacing(2,2,3),backgroundImage:r.getPageTheme({themeId:"card"}).backgroundImage,backgroundPosition:0,backgroundSize:"inherit"}}),bl=(0,g.Z)(vl,{name:"BackstageItemCardHeader"});function Mo(r){const{title:o,subtitle:E,children:P}=r,$=bl(r);return t.createElement(we.Z,{className:$.root},E&&t.createElement(d.Z,{variant:"subtitle2",component:"h3"},E),o&&t.createElement(d.Z,{variant:"h6",component:"h4"},o),P)}function mc(r){const{description:o,tags:E,title:P,type:$,subtitle:q,label:he,onClick:Ue,href:tt}=r;return React.createElement(Card,null,React.createElement(CardMedia,null,React.createElement(Mo,{title:P,subtitle:q||$})),React.createElement(CardContent,null,E!=null&&E.length?React.createElement(Box,null,E.map((Ve,Tt)=>React.createElement(Chip,{size:"small",label:Ve,key:Tt}))):null,o),React.createElement(CardActions,null,!tt&&React.createElement(X,{to:"#",onClick:Ue,color:"primary"},he),tt&&React.createElement(X,{to:tt,color:"primary"},he)))}const _l=r=>(0,F.Z)({root:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(22em, 1fr))",gridAutoRows:"1fr",gridGap:r.spacing(2)}}),Cl=(0,g.Z)(_l,{name:"BackstageItemCardGrid"});function Pl(r){const{children:o,...E}=r,P=Cl(E);return t.createElement(we.Z,{className:P.root,...E},o)}const Sl=(0,g.Z)(()=>({root:({isMobile:r})=>({display:"grid",gridTemplateAreas:"'pageHeader pageHeader pageHeader' 'pageSubheader pageSubheader pageSubheader' 'pageNav pageContent pageSidebar'",gridTemplateRows:"max-content auto 1fr",gridTemplateColumns:"auto 1fr auto",height:r?"100%":"100vh",overflowY:"auto"})}),{name:"BackstagePage"});function pa(r){const{themeId:o,children:E}=r,{isMobile:P}=ra(),$=Sl({isMobile:P});return t.createElement(A.Z,{theme:q=>({...q,page:q.getPageTheme({themeId:o})})},t.createElement("main",{className:$.root},E))}function Rl(r){const{themeId:o,children:E,...P}=r;return t.createElement(pa,{themeId:o},t.createElement(fa,{...P}),E)}const wl=H.z.object({providerInfo:H.z.object({}).catchall(H.z.unknown()).optional(),profile:H.z.object({email:H.z.string().optional(),displayName:H.z.string().optional(),picture:H.z.string().optional()}),backstageIdentity:H.z.object({token:H.z.string(),identity:H.z.object({type:H.z.literal("user"),userEntityRef:H.z.string(),ownershipEntityRefs:H.z.array(H.z.string())})})}),$o={defaultTokenExpiryMillis:5*60*1e3,tokenExpiryMarginMillis:5*60*1e3};function Ol(r){const o=new Date(Date.now()+$o.defaultTokenExpiryMillis);if(!r)return o;const[E,P,$]=r.split("."),q=JSON.parse(window.atob(P));return typeof q.exp!="number"?o:new Date(q.exp*1e3-$o.tokenExpiryMarginMillis)}class Al{constructor(o){this.options=o,this.abortController=new AbortController,this.state={type:"empty"}}async start(){await this.getSessionAsync()}getUserId(){const{backstageIdentity:o}=this.getSessionSync(),E=o.identity.userEntityRef,P=/^([^:/]+:)?([^:/]+\/)?([^:/]+)$/.exec(E);if(!P)throw new TypeError(`Invalid user entity reference "${E}"`);return P[3]}async getIdToken(){return(await this.getSessionAsync()).backstageIdentity.token}getProfile(){return this.getSessionSync().profile}async getProfileInfo(){return(await this.getSessionAsync()).profile}async getBackstageIdentity(){return(await this.getSessionAsync()).backstageIdentity.identity}async getCredentials(){return{token:(await this.getSessionAsync()).backstageIdentity.token}}async signOut(){this.abortController.abort()}getSessionSync(){if(this.state.type==="active")return this.state.session;if(this.state.type==="fetching"&&this.state.previous)return this.state.previous;throw new Error("No session available. Try reloading your browser page.")}async getSessionAsync(){if(this.state.type==="fetching")return this.state.promise;if(this.state.type==="active"&&new Date<this.state.expiresAt)return this.state.session;const o=this.state.type==="active"?this.state.session:void 0,E=this.fetchSession().then(P=>(this.state={type:"active",session:P,expiresAt:Ol(P.backstageIdentity.token)},P),P=>{throw this.state={type:"failed",error:P},P});return this.state={type:"fetching",promise:E,previous:o},E}async fetchSession(){const o=await this.options.discoveryApi.getBaseUrl("auth"),E=typeof this.options.headers=="function"?await this.options.headers():this.options.headers,P=new Headers(E);P.set("X-Requested-With","XMLHttpRequest");const $=await fetch(`${o}/${this.options.provider}/refresh`,{signal:this.abortController.signal,headers:P,credentials:"include"});if(!$.ok)throw await ResponseError.fromResponse($);return wl.parse(await $.json())}}const fc=r=>{const o=useApi(discoveryApiRef),[{status:E,error:P},{execute:$}]=useAsync(async()=>{const q=new Al({provider:r.provider,discoveryApi:o,headers:r.headers});await q.start(),r.onSignInSuccess(q)});return useMountEffect($),E==="loading"?React.createElement(ia,null):P?React.createElement(_n,{title:"You do not appear to be signed in. Please try reloading the browser page.",error:P}):null};class Oa{getUserId(){return"guest"}async getIdToken(){}getProfile(){return{email:"guest@example.com",displayName:"Guest"}}async getProfileInfo(){return{email:"guest@example.com",displayName:"Guest"}}async getBackstageIdentity(){const o="user:default/guest";return{type:"user",userEntityRef:o,ownershipEntityRefs:[o]}}async getCredentials(){return{}}async signOut(){}}function Il(r){const[o,E,P]=r.split(".");return JSON.parse(window.atob(E))}class Aa{constructor(o){this.result=o}getUserId(){return this.result.userId}static fromResult(o){return new Aa(o)}async getIdToken(){var o,E;return(E=(o=this.result).getIdToken)==null?void 0:E.call(o)}getProfile(){return this.result.profile}async getProfileInfo(){return this.result.profile}async getBackstageIdentity(){const o=await this.getIdToken();if(!o){const $=`user:default/${this.getUserId()}`;return{type:"user",userEntityRef:$,ownershipEntityRefs:[$]}}const{sub:E,ent:P}=Il(o);return{type:"user",userEntityRef:E,ownershipEntityRefs:P!=null?P:[]}}async getCredentials(){var o,E;return{token:await((E=(o=this.result).getIdToken)==null?void 0:E.call(o))}}async signOut(){var o,E;return(E=(o=this.result).signOut)==null?void 0:E.call(o)}}class qr{constructor(o,E,P){this.identity=o,this.authApi=E,this.profile=P}static createGuest(){return new Oa}static fromLegacy(o){return Aa.fromResult(o)}static create(o){return new qr(o.identity,o.authApi,o.profile)}getUserId(){const o=this.identity.userEntityRef,E=/^([^:/]+:)?([^:/]+\/)?([^:/]+)$/.exec(o);if(!E)throw new TypeError(`Invalid user entity reference "${o}"`);return E[3]}async getIdToken(){return(await this.authApi.getBackstageIdentity()).token}getProfile(){if(!this.profile)throw new Error("The identity API does not implement synchronous profile fetching, use getProfileInfo() instead");return this.profile}async getProfileInfo(){if(this.profilePromise)return await this.profilePromise;try{return this.profilePromise=this.authApi.getProfile(),await this.profilePromise}catch(o){throw this.profilePromise=void 0,o}}async getBackstageIdentity(){return this.identity}async getCredentials(){return{token:(await this.authApi.getBackstageIdentity()).token}}async signOut(){return this.authApi.signOut()}}const Ia=(0,g.Z)({container:{padding:0,listStyle:"none"},item:{display:"flex",flexDirection:"column",width:"100%",maxWidth:"400px",margin:0,padding:0}},{name:"BackstageSignInPage"}),ha=({children:r})=>{const o=Ia();return t.createElement(Pe.Z,{component:"li",item:!0,classes:o},r)},Tl={Component:({config:r,onSignInSuccess:o})=>{const{apiRef:E,title:P,message:$}=r,q=(0,n.h_)(E),he=(0,n.h_)(n.VE),Ue=async()=>{try{const tt=await q.getBackstageIdentity({instantPopup:!0});if(!tt)throw new Error(`The ${P} provider is not configured to support sign-in`);const Ve=await q.getProfile();o(qr.create({identity:tt.identity,profile:Ve,authApi:q}))}catch(tt){he.post(new He.SP("Login failed",tt))}};return t.createElement(ha,null,t.createElement(Xr,{variant:"fullHeight",title:P,actions:t.createElement(D.Z,{color:"primary",variant:"outlined",onClick:Ue},"Sign In")},t.createElement(d.Z,{variant:"body1"},$)))},loader:async(r,o)=>{const E=r.get(o),P=await E.getBackstageIdentity({optional:!0});if(!P)return;const $=await E.getProfile();return qr.create({identity:P.identity,profile:$,authApi:E})}},Dl={Component:({onSignInSuccess:r})=>t.createElement(ha,null,t.createElement(Xr,{title:"Guest",variant:"fullHeight",actions:t.createElement(D.Z,{color:"primary",variant:"outlined",onClick:()=>r(new Oa)},"Enter")},t.createElement(d.Z,{variant:"body1"},"Enter as a Guest User.",t.createElement("br",null),"You will not have a verified identity,",t.createElement("br",null),"meaning some features might be unavailable."))),loader:async()=>new Oa},Ml=/^[a-z0-9_\-]+\.[a-z0-9_\-]+\.[a-z0-9_\-]+$/i,$l=(0,g.Z)(r=>({form:{display:"flex",flexFlow:"column nowrap"},button:{alignSelf:"center",marginTop:r.spacing(2)}}),{name:"BackstageCustomProvider"}),Lo=r=>{const{ref:o,...E}=r;return{inputRef:o,...E}},Ll={Component:({onSignInSuccess:r})=>{const o=$l(),{register:E,handleSubmit:P,formState:$}=(0,W.cI)({mode:"onChange"}),{errors:q}=$,he=({userId:Ue})=>{r(qr.fromLegacy({userId:Ue,profile:{email:`${Ue}@example.com`}}))};return t.createElement(ha,null,t.createElement(Xr,{title:"Custom User",variant:"fullHeight"},t.createElement(d.Z,{variant:"body1"},"Enter your own User ID and credentials.",t.createElement("br",null),"This selection will not be stored."),t.createElement("form",{className:o.form,onSubmit:P(he)},t.createElement(Qe.Z,null,t.createElement(k.Z,{...Lo(E("userId",{required:!0})),label:"User ID",margin:"normal",error:Boolean(q.userId)}),q.userId&&t.createElement(Ae.Z,{error:!0},q.userId.message)),t.createElement(Qe.Z,null,t.createElement(k.Z,{...Lo(E("idToken",{required:!1,validate:Ue=>!Ue||Ml.test(Ue)||"Token is not a valid OpenID Connect JWT Token"})),label:"ID Token (optional)",margin:"normal",autoComplete:"off",error:Boolean(q.idToken)}),q.idToken&&t.createElement(Ae.Z,{error:!0},q.idToken.message)),t.createElement(D.Z,{type:"submit",color:"primary",variant:"outlined",className:o.button,disabled:!($!=null&&$.isDirty)||!pt()(q)},"Continue"))))},loader:async()=>{}};class Ta{constructor(o){this.config=o}static from(o){return new Ta(o)}getUserId(){if(!this.config.identityApi.getUserId)throw new Error("SignOutProxy IdentityApi.getUserId is not implemented");return this.config.identityApi.getUserId()}getIdToken(){if(!this.config.identityApi.getIdToken)throw new Error("SignOutProxy IdentityApi.getIdToken is not implemented");return this.config.identityApi.getIdToken()}getProfile(){if(!this.config.identityApi.getProfile)throw new Error("SignOutProxy IdentityApi.getProfile is not implemented");return this.config.identityApi.getProfile()}getProfileInfo(){return this.config.identityApi.getProfileInfo()}getBackstageIdentity(){return this.config.identityApi.getBackstageIdentity()}getCredentials(){return this.config.identityApi.getCredentials()}signOut(){return this.config.signOut()}}const ga="@backstage/core:SignInPage:provider",xo={guest:Dl,custom:Ll,common:Tl};function ko(r,o){if(r in o)throw new Error(`"${r}" ID is duplicated. IDs of identity providers have to be unique.`)}function xl(r){return r.reduce((E,P)=>{if(typeof P=="string")return ko(P,E),E[P]={components:xo[P],id:P},E;const{id:$}=P;return ko($,E),E[$]={components:xo.common,id:$,config:P},E},{})}const kl=(r,o)=>{const E=useApi(errorApiRef),P=useApiHolder(),[$,q]=useState(!0),he=useCallback(tt=>{o(Ta.from({identityApi:tt,signOut:async()=>{var Ve;localStorage.removeItem(ga),await((Ve=tt.signOut)==null?void 0:Ve.call(tt))}}))},[o]);useLayoutEffect(()=>{var tt;if(!$)return;const Ve=localStorage.getItem(ga);if(Ve===null){q(!1);return}const Tt=r[Ve];if(!Tt){q(!1);return}let _t=!1;return Tt.components.loader(P,(tt=Tt.config)==null?void 0:tt.apiRef).then(Ut=>{_t||(Ut?he(Ut):q(!1))}).catch(Ut=>{_t||(localStorage.removeItem(ga),E.post(Ut),q(!1))}),()=>{_t=!0}},[$,E,o,P,r,he]);const Ue=useMemo(()=>Object.keys(r).map(tt=>{const Ve=r[tt],{Component:Tt}=Ve.components,_t=Ut=>{localStorage.setItem(ga,Ve.id),he(Ut)};return React.createElement(Tt,{key:Ve.id,config:Ve.config,onSignInSuccess:_t})}),[r,he]);return[$,Ue]},Bl=({onSignInSuccess:r,providers:o=[],title:E,align:P="left"})=>{const $=useApi(configApiRef),q=Ia(),he=xl(o),[Ue,tt]=kl(he,r);return Ue?React.createElement(ia,null):React.createElement(pa,{themeId:"home"},React.createElement(fa,{title:$.getString("app.title")}),React.createElement(ma,null,E&&React.createElement(To,{title:E,textAlign:P}),React.createElement(Grid,{container:!0,justifyContent:P==="center"?P:"flex-start",spacing:2,component:"ul",classes:q},tt)))},Ul=({provider:r,auto:o,onSignInSuccess:E})=>{const P=Ia(),$=useApi(r.apiRef),q=useApi(configApiRef),[he,Ue]=useState(),[tt,Ve]=useState(!1),Tt=async({checkExisting:_t,showPopup:Ut})=>{try{let Gt;if(_t&&(Gt=await $.getBackstageIdentity({optional:!0})),!Gt&&(Ut||o)&&(Ve(!0),Gt=await $.getBackstageIdentity({instantPopup:!0}),!Gt))throw new Error(`The ${r.title} provider is not configured to support sign-in`);if(!Gt){Ve(!0);return}const yn=await $.getProfile();E(qr.create({identity:Gt.identity,authApi:$,profile:yn}))}catch(Gt){Ue(Gt),Ve(!0)}};return useMountEffect(()=>Tt({checkExisting:!0})),tt?React.createElement(pa,{themeId:"home"},React.createElement(fa,{title:q.getString("app.title")}),React.createElement(ma,null,React.createElement(Grid,{container:!0,justifyContent:"center",spacing:2,component:"ul",classes:P},React.createElement(ha,null,React.createElement(Xr,{variant:"fullHeight",title:r.title,actions:React.createElement(Button$1,{color:"primary",variant:"outlined",onClick:()=>{Tt({showPopup:!0})}},"Sign In")},React.createElement(Typography,{variant:"body1"},r.message),he&&he.name!=="PopupRejectedError"&&React.createElement(Typography,{variant:"body1",color:"error"},he.message)))))):React.createElement(ia,null)};function bc(r){return"provider"in r?React.createElement(Ul,{...r}):React.createElement(Bl,{...r})}const Zl=(0,g.Z)(r=>({root:{padding:r.spacing(0,2,0,2.5),minHeight:r.spacing(3)},indicator:{backgroundColor:r.palette.info.main,height:r.spacing(.3)}}),{name:"BackstageTabbedCard"}),Nl=(0,re.Z)(r=>({root:{padding:r.spacing(2,2,2,2.5),display:"inline-block"},title:{fontWeight:700},subheader:{paddingTop:r.spacing(1)}}),{name:"BackstageTabbedCardBoldHeader"})(ln.Z);function Wl(r){const{slackChannel:o,errorBoundaryProps:E,children:P,title:$,deepLink:q,value:he,onChange:Ue}=r,tt=Zl(),[Ve,Tt]=(0,t.useState)(0),_t=Ue||((yn,vn)=>Tt(vn));let Ut;he?t.Children.map(P,yn=>{var vn;t.isValidElement(yn)&&(yn==null?void 0:yn.props.value)===he&&(Ut=(vn=yn==null?void 0:yn.props)==null?void 0:vn.children)}):t.Children.map(P,(yn,vn)=>{t.isValidElement(yn)&&vn===Ve&&(Ut=yn==null?void 0:yn.props.children)});const Gt=E||(o?{slackChannel:o}:{});return t.createElement(Et.Z,null,t.createElement(Ba,{...Gt},$&&t.createElement(Nl,{title:$}),t.createElement(Ln.Z,{selectionFollowsFocus:!0,classes:tt,value:he||Ve,onChange:_t},P),t.createElement(nn.Z,null),t.createElement(rn.Z,null,Ut),q&&t.createElement(ka,{...q})))}const Fl=(0,g.Z)(r=>({root:{minWidth:r.spacing(6),minHeight:r.spacing(3),margin:r.spacing(0,2,0,0),padding:r.spacing(.5,0,.5,0),textTransform:"none","&:hover":{opacity:1,backgroundColor:"transparent",color:r.palette.text.primary}},selected:{fontWeight:r.typography.fontWeightBold}}),{name:"BackstageCardTab"});function Kl(r){const{children:o,...E}=r,P=Fl();return t.createElement(Zn.Z,{disableRipple:!0,classes:P,...E})}},30705:function(Nt,u,e){e.d(u,{$4:function(){return St},$v:function(){return c},CL:function(){return ot},CO:function(){return Lt},D:function(){return w},Ds:function(){return Ce},E6:function(){return Q},F4:function(){return re},IY:function(){return Me},I_:function(){return y},Kp:function(){return V},NT:function(){return ue},NW:function(){return we},Oi:function(){return Rt},P4:function(){return un},R5:function(){return Ne},Rz:function(){return Wt},T0:function(){return g},VE:function(){return nt},W0:function(){return $t},YO:function(){return Ht},ZM:function(){return xt},bq:function(){return x},fC:function(){return l},gP:function(){return ct},gW:function(){return f},h_:function(){return b},hg:function(){return T},ni:function(){return F},p_:function(){return D},qD:function(){return M},rx:function(){return ie},sM:function(){return j},tg:function(){return Pt},uB:function(){return R},ux:function(){return A},vJ:function(){return st},v_:function(){return O},x8:function(){return Le},yx:function(){return ve},z$:function(){return Ge}});var n=e(18473),i=e(2784),m=e(73557);const d=(0,n.CT)("analytics-context"),a=()=>{const Z=(0,i.useContext)(d);if(Z===void 0)return{routeRef:"unknown",pluginId:"root",extension:"App"};const B=Z.atVersion(1);if(B===void 0)throw new Error("No context found for version 1.");return B},l=Z=>{const{attributes:B,children:_e}=Z,Ie={...a(),...B},ze=(0,n.EI)({1:Ie});return i.createElement(d.Provider,{value:ze},_e)};function y(){const Z=(0,n.Vt)("api-context");if(!Z)throw new Error("API context is not available");const B=Z.atVersion(1);if(!B)throw new Error("ApiContext v1 not available");return B}function b(Z){const _e=y().get(Z);if(!_e)throw new Error(`No implementation available for ${Z}`);return _e}function t(Z){return function(_e){const de=ze=>{const rt=y(),kt={};for(const He in Z)if(Z.hasOwnProperty(He)){const z=Z[He],be=rt.get(z);if(!be)throw new Error(`No implementation available for ${z}`);kt[He]=be}return React.createElement(_e,{...ze,...kt})},Ie=_e.displayName||_e.name||"Component";return de.displayName=`withApis(${Ie})`,de}}class _{constructor(B){if(this.config=B,!B.id.split(".").flatMap(de=>de.split("-")).every(de=>de.match(/^[a-z][a-z0-9]*$/)))throw new Error(`API id must only contain period separated lowercase alphanum tokens with dashes, got '${B.id}'`)}get id(){return this.config.id}get T(){throw new Error(`tried to read ApiRef.T of ${this}`)}toString(){return`apiRef{${this.config.id}}`}}function g(Z){return new _(Z)}function F(Z,B){return"id"in Z?{api:Z,deps:{},factory:()=>B}:Z}var j=(Z=>(Z.SignedIn="SignedIn",Z.SignedOut="SignedOut",Z))(j||{});const V=g({id:"core.auth.google"}),re=g({id:"core.auth.github"}),w=g({id:"core.auth.okta"}),A=g({id:"core.auth.gitlab"}),D=g({id:"core.auth.microsoft"}),f=g({id:"core.auth.onelogin"}),x=g({id:"core.auth.bitbucket"}),R=g({id:"core.auth.atlassian"}),c=g({id:"core.alert"}),O=g({id:"core.analytics"}),T=g({id:"core.apptheme"}),Ce=g({id:"core.config"}),we=g({id:"core.discovery"}),nt=g({id:"core.error"});var ot=(Z=>(Z[Z.None=0]="None",Z[Z.Active=1]="Active",Z))(ot||{});const $t=g({id:"core.featureflags"}),ct=g({id:"core.fetch"}),St=g({id:"core.identity"}),xt=g({id:"core.oauthrequest"}),Q=g({id:"core.storage"});class pn{constructor(B,_e={routeRef:"unknown",pluginId:"root",extension:"App"}){this.analyticsApi=B,this.context=_e}setContext(B){this.context=B}captureEvent(B,_e,{value:de,attributes:Ie}={}){try{this.analyticsApi.captureEvent({action:B,subject:_e,value:de,attributes:Ie,context:this.context})}catch(ze){console.warn("Error during analytics event capture. %o",ze)}}}function Ct(){try{return b(O)}catch{return{captureEvent:()=>{}}}}function Ge(){const Z=(0,i.useRef)(null),B=a(),_e=Ct();function de(){return Z.current===null&&(Z.current=new pn(_e)),Z.current}const Ie=de();return Ie.setContext(B),Ie}const C="plugin-context",Fe=Z=>{const{children:B,plugin:_e}=Z,{Provider:de}=(0,n.CT)(C);return i.createElement(de,{value:(0,n.EI)({1:{plugin:_e}})},B)};function ve(){const Z=(0,n.Vt)(C);if(!Z)throw new Error("Plugin Options context is not available");const B=Z.atVersion(1);if(!B)throw new Error("Plugin Options v1 is not available");return B.plugin.getPluginOptions()}const M=()=>{const Z=(0,n.Vt)("app-context");if(!Z)throw new Error("App context is not available");const B=Z.atVersion(1);if(!B)throw new Error("AppContext v1 not available");return B},G=(0,n.uW)("component-data-store",()=>new WeakMap),Re="__backstage_data";function Ne(Z,B,_e){var de;const Ie=Z;let ze=(de=Ie[Re])!=null?de:G.get(Z);if(ze||(ze={map:new Map},Object.defineProperty(Ie,Re,{enumerable:!1,configurable:!0,writable:!1,value:ze}),G.set(Z,ze)),ze.map.has(B)){const rt=Z.displayName||Z.name;throw new Error(`Attempted to attach duplicate data "${B}" to component "${rt}"`)}ze.map.set(B,_e)}function Me(Z,B){var _e;if(!Z)return;const de=Z.type;if(!de)return;const Ie=(_e=de[Re])!=null?_e:G.get(de);if(!!Ie)return Ie.map.get(B)}const Xe=(0,n.uW)("route-ref-type",()=>Symbol("route-ref-type"));var vt;class ee{constructor(B,_e){this.id=B,this.params=_e,this[vt]="absolute"}get title(){return this.id}toString(){return`routeRef{type=absolute,id=${this.id}}`}}vt=Xe;function ue(Z){var B;return new ee(Z.id,(B=Z.params)!=null?B:[])}var Pe;const at=/^\w+$/;class bt{constructor(B,_e,de,Ie){this.id=B,this.path=_e,this.parent=de,this.params=Ie,this[Pe]="sub"}toString(){return`routeRef{type=sub,id=${this.id}}`}}Pe=Xe;function Wt(Z){const{id:B,path:_e,parent:de}=Z,Ie=_e.split("/").filter(kt=>kt.startsWith(":")).map(kt=>kt.substring(1)),ze=[...de.params,...Ie];if(de.params.some(kt=>Ie.includes(kt)))throw new Error("SubRouteRef may not have params that overlap with its parent");if(!_e.startsWith("/"))throw new Error(`SubRouteRef path must start with '/', got '${_e}'`);if(_e.endsWith("/"))throw new Error(`SubRouteRef path must not end with '/', got '${_e}'`);for(const kt of Ie)if(!at.test(kt))throw new Error(`SubRouteRef path has invalid param, got '${kt}'`);return new bt(B,_e,de,ze)}var on;class zt{constructor(B,_e,de){this.id=B,this.params=_e,this.optional=de,this[on]="external"}toString(){return`routeRef{type=external,id=${this.id}}`}}on=Xe;function Le(Z){var B;return new zt(Z.id,(B=Z.params)!=null?B:[],Boolean(Z.optional))}function Pt(Z){const{pathname:B}=(0,m.TH)(),_e=(0,n.Vt)("routing-context");if(!_e)throw new Error("Routing context is not available");const de=_e.atVersion(1),Ie=(0,i.useMemo)(()=>de&&de.resolve(Z,{pathname:B}),[de,Z,B]);if(!_e)throw new Error("useRouteRef used outside of routing context");if(!de)throw new Error("RoutingContext v1 not available");const ze="optional"in Z&&Z.optional;if(!Ie&&!ze)throw new Error(`No path for ${Z}`);return Ie}function Rt(Z){return(0,m.UO)()}class sn extends i.Component{constructor(){super(...arguments),this.state={error:void 0},this.handleErrorReset=()=>{this.setState({error:void 0})}}static getDerivedStateFromError(B){return{error:B}}render(){const{error:B}=this.state,{app:_e,plugin:de}=this.props,{ErrorBoundaryFallback:Ie}=_e.getComponents();return B?i.createElement(Ie,{error:B,resetError:this.handleErrorReset,plugin:de}):this.props.children}}function un(Z){const{component:B,mountPoint:_e,name:de}=Z;return Ht({component:{lazy:()=>B().then(Ie=>{const ze=kt=>{try{Pt(_e)}catch(He){if(typeof He=="object"&&He!==null){const{message:z}=He;if(typeof z=="string"&&z.startsWith("No path for "))throw new Error(`Routable extension component with mount point ${_e} was not discovered in the app element tree. Routable extension components may not be rendered by other components and must be directly available as an element within the App provider component.`)}throw He}return i.createElement(Ie,{...kt})},rt=de||Ie.displayName||Ie.name||"LazyComponent";return ze.displayName=`RoutableExtension(${rt})`,ze},Ie=>rt=>{const kt=M(),{BootErrorPage:He}=kt.getComponents();return i.createElement(He,{step:"load-chunk",error:Ie})})},data:{"core.mountPoint":_e},name:de})}function Lt(Z){const{component:B,name:_e}=Z;return Ht({component:B,name:_e})}function Ht(Z){const{data:B={},name:_e}=Z;_e||console.warn("Declaring extensions without name is DEPRECATED. Make sure that all usages of createReactExtension, createComponentExtension and createRoutableExtension provide a name.");let de;if("lazy"in Z.component){const ze=Z.component.lazy;de=(0,i.lazy)(()=>ze().then(rt=>({default:rt})))}else de=Z.component.sync;const Ie=_e||de.displayName||de.name||"Component";return{expose(ze){const rt=kt=>{const He=M(),{Progress:z}=He.getComponents(),be=B==null?void 0:B["core.mountPoint"];return i.createElement(i.Suspense,{fallback:i.createElement(z,null)},i.createElement(sn,{app:He,plugin:ze},i.createElement(l,{attributes:{pluginId:ze.getId(),..._e&&{extension:_e},...be&&{routeRef:be.id}}},i.createElement(Fe,{plugin:ze},i.createElement(de,{...kt})))))};Ne(rt,"core.plugin",ze);for(const[kt,He]of Object.entries(B))Ne(rt,kt,He);return rt.displayName=`Extension(${Ie})`,rt}}}function nn(Z,B,_e,de){return i.Children.toArray(Z).flatMap(Ie=>{if(!(0,i.isValidElement)(Ie))return[];if(Ie.type===i.Fragment)return nn(Ie.props.children,B,_e,de);if(Me(Ie,"core.featureFlagged")){const ze=Ie.props;return("with"in ze?B.isActive(ze.with):!B.isActive(ze.without))?nn(Ie.props.children,B,_e,de):[]}if(_e===void 0||_e(Ie))return[Ie];if(de)throw new Error(de);return nn(Ie.props.children,B,_e,de)})}class Te{constructor(B,_e){this.node=B,this.featureFlagsApi=_e}selectByComponentData(B){const _e=nn(this.node,this.featureFlagsApi,de=>Me(de,B.key)!==void 0,B.withStrictError);return new Te(_e,this.featureFlagsApi)}findComponentData(B){return nn(this.node,this.featureFlagsApi,de=>Me(de,B.key)!==void 0).map(de=>Me(de,B.key)).filter(de=>de!==void 0)}getElements(){return nn(this.node,this.featureFlagsApi)}}function st(Z,B,_e=[]){const de=b($t),Ie=new Te(Z,de);return(0,i.useMemo)(()=>B(Ie),[Z,..._e])}class le{constructor(B){this.config=B,this.options=void 0}getId(){return this.config.id}getApis(){var B;return(B=this.config.apis)!=null?B:[]}getFeatureFlags(){var B,_e;return(_e=(B=this.config.featureFlags)==null?void 0:B.slice())!=null?_e:[]}get routes(){var B;return(B=this.config.routes)!=null?B:{}}get externalRoutes(){var B;return(B=this.config.externalRoutes)!=null?B:{}}provide(B){return B.expose(this)}__experimentalReconfigure(B){this.config.__experimentalConfigure&&(this.options=this.config.__experimentalConfigure(B))}getPluginOptions(){var B;return this.config.__experimentalConfigure&&!this.options&&(this.options=this.config.__experimentalConfigure()),(B=this.options)!=null?B:{}}toString(){return`plugin{${this.config.id}}`}}function ie(Z){return new le(Z)}},32272:function(Nt,u,e){e.d(u,{BD:function(){return d},SP:function(){return re},VL:function(){return A},VZ:function(){return m},dR:function(){return F}});var n=e(24852),i=e.n(n);function m(D){if(typeof D!="object"||D===null||Array.isArray(D))return!1;const f=D;return!(typeof f.name!="string"||f.name===""||typeof f.message!="string")}function d(D){if(typeof D!="object"||D===null||Array.isArray(D))throw new Error(`Encountered invalid error, not an object, got '${D}'`);const f=D;if(typeof f.name!="string"||f.name==="")throw new Error(`Encountered error object without a name, got '${D}'`);if(typeof f.message!="string")throw new Error(`Encountered error object without a message, got '${D}'`)}function a(D,f){const R={name:"Unknown",message:"<no reason given>",...serializeError$1(D)};return f!=null&&f.includeStack||delete R.stack,R}function l(D){const f=(0,n.deserializeError)(D);return D.stack||(f.stack=void 0),f}function y(D){if(m(D)){const f=String(D);return f!=="[object Object]"?f:`${D.name}: ${D.message}`}return`unknown error '${D}'`}class b extends Error{constructor(f,x){var R;let c=f;if(x!==void 0){const O=y(x);c?c+=`; caused by ${O}`:c=`caused by ${O}`}super(c),(R=Error.captureStackTrace)==null||R.call(Error,this,this.constructor),this.name=this.constructor.name,this.cause=m(x)?x:void 0}}class t extends null{}class _ extends null{}class g extends null{}class F extends b{}class j extends null{}class V extends null{}class re extends b{constructor(f,x){super(f,x),this.name=m(x)?x.name:"Error"}}async function w(D){var f;try{const x=await D.text();if(x){if((f=D.headers.get("content-type"))!=null&&f.startsWith("application/json"))try{const R=JSON.parse(x);if(R.error&&R.response)return R}catch{}return{error:{name:"Error",message:`Request failed with status ${D.status} ${D.statusText}, ${x}`},response:{statusCode:D.status}}}}catch{}return{error:{name:"Error",message:`Request failed with status ${D.status} ${D.statusText}`},response:{statusCode:D.status}}}class A extends Error{constructor(f){super(f.message),this.name="ResponseError",this.response=f.response,this.body=f.data,this.cause=f.cause}static async fromResponse(f){const x=await w(f),R=x.response.statusCode||f.status,c=x.error.name||f.statusText,O=`Request failed with ${R} ${c}`,T=l(x.error);return new A({message:O,response:f,data:x,cause:T})}}},49462:function(Nt,u,e){e.d(u,{Om:function(){return a},ae:function(){return D},nW:function(){return x},q3:function(){return f},zN:function(){return A}});var n=e(30705),i=e(1854),m=e(73250),d=e(2784);const a=(0,n.T0)({id:"core.scmauth"});var l=(R,c,O)=>{if(!c.has(R))throw TypeError("Cannot "+O)},y=(R,c,O)=>(l(R,c,"read from private field"),O?O.call(R):c.get(R)),b=(R,c,O)=>{if(c.has(R))throw TypeError("Cannot add the same private member more than once");c instanceof WeakSet?c.add(R):c.set(R,O)},t=(R,c,O,T)=>(l(R,c,"write to private field"),T?T.call(R,O):c.set(R,O),O),_,g,F,j,V;class re{constructor(c){b(this,_,void 0),t(this,_,c)}async getCredentials(c){const O=new URL(c.url),T=y(this,_).find(Ce=>Ce.isUrlSupported(O));if(!T)throw new Error(`No auth provider available for '${c.url}', see https://backstage.io/link?scm-auth`);return T.getCredentials(c)}}_=new WeakMap;const w=class{constructor(R,c,O,T){b(this,g,void 0),b(this,F,void 0),b(this,j,void 0),b(this,V,void 0),t(this,g,c),t(this,F,O),t(this,j,T),t(this,V,R)}static createDefaultApiFactory(){return(0,n.ni)({api:a,deps:{github:n.F4,gitlab:n.ux,azure:n.p_,bitbucket:n.bq},factory:({github:R,gitlab:c,azure:O,bitbucket:T})=>w.merge(w.forGithub(R),w.forGitlab(c),w.forAzure(O),w.forBitbucket(T))})}static forAuthApi(R,c){return new w("generic",R,c.host,c.scopeMapping)}static forGithub(R,c){var O;const T=(O=c==null?void 0:c.host)!=null?O:"github.com";return new w("github",R,T,{default:["repo","read:org","read:user"],repoWrite:["gist"]})}static forGitlab(R,c){var O;const T=(O=c==null?void 0:c.host)!=null?O:"gitlab.com";return new w("gitlab",R,T,{default:["read_user","read_api","read_repository"],repoWrite:["write_repository","api"]})}static forAzure(R,c){var O;const T=(O=c==null?void 0:c.host)!=null?O:"dev.azure.com";return new w("azure",R,T,{default:["vso.build","vso.code","vso.graph","vso.project","vso.profile"],repoWrite:["vso.code_manage"]})}static forBitbucket(R,c){var O;const T=(O=c==null?void 0:c.host)!=null?O:"bitbucket.org";return new w("bitbucket",R,T,{default:["account","team","pullrequest","snippet","issue"],repoWrite:["pullrequest:write","snippet:write","issue:write"]})}static merge(...R){return new re(R)}isUrlSupported(R){return R.host===y(this,F)}getAdditionalScopesForProvider(R){var c,O;return!(R!=null&&R.customScopes)||y(this,V)==="generic"?[]:(O=(c=R.customScopes)==null?void 0:c[y(this,V)])!=null?O:[]}async getCredentials(R){const{url:c,additionalScope:O,...T}=R,Ce=y(this,j).default.slice();O!=null&&O.repoWrite&&Ce.push(...y(this,j).repoWrite);const we=this.getAdditionalScopesForProvider(O);we.length&&Ce.push(...we);const nt=[...new Set(Ce)],ot=await y(this,g).getAccessToken(nt,T);return{token:ot,headers:{Authorization:`Bearer ${ot}`}}}};let A=w;g=new WeakMap,F=new WeakMap,j=new WeakMap,V=new WeakMap;class D{static fromConfig(c){return i.Lx.fromConfig(c)}}const f=(0,n.T0)({id:"integration.scmintegrations"}),x=R=>{var c;const{type:O}=R,T=(0,n.qD)(),Ce=m.Z,we=O&&(c=T.getSystemIcon(O))!=null?c:Ce;return d.createElement(we,null)}},1854:function(Nt,u,e){e.d(u,{BT:function(){return Cn},Lx:function(){return wt},MY:function(){return It},ah:function(){return me}});var n=e(82717),i=e.n(n),m=e(76635),d=e.n(m),a=e(96279),l=e.n(a),y=e(54733),b=e(89393),t=e(26228),_=e(48834).lW;function g(h){const v=new URL("http://example.com");return v.host=h,v.host===h}function F(h){try{return new URL(h),!0}catch{return!1}}function j(h,v){return{list(){return h},byUrl(k){try{const te=typeof k=="string"?new URL(k):k;return h.find(Ee=>v(Ee)===te.host)}catch{return}},byHost(k){return h.find(te=>v(te)===k)}}}function V(h){const{url:v,base:k,lineNumber:te}=h;try{return new URL(v),v}catch{}let Ee;if(v.startsWith("/")){const{filepath:Ye}=i()(k);Ee=new URL(k);const H=(0,m.trimEnd)(Ee.pathname.substring(0,Ee.pathname.length-Ye.length),"/");Ee.pathname=`${H}${v}`}else Ee=new URL(v,k);return Ee.search=new URL(k).search,te&&(Ee.hash=`L${te}`),Ee.toString()}const re="amazonaws.com";function w(h){var v;const k=h.getOptionalString("endpoint"),te=(v=h.getOptionalBoolean("s3ForcePathStyle"))!=null?v:!1;let Ee,Ye;if(k){try{const pt=new URL(k);Ee=pt.host,Ye=pt.pathname}catch{throw new Error(`invalid awsS3 integration config, endpoint '${k}' is not a valid URL`)}if(Ye!=="/")throw new Error(`invalid awsS3 integration config, endpoints cannot contain path, got '${k}'`)}else Ee=re;const H=h.getOptionalString("accessKeyId"),W=h.getOptionalString("secretAccessKey"),Ae=h.getOptionalString("roleArn"),De=h.getOptionalString("externalId");return{host:Ee,endpoint:k,s3ForcePathStyle:te,accessKeyId:H,secretAccessKey:W,roleArn:Ae,externalId:De}}function A(h){const v=h.map(w);return v.some(k=>k.host===re)||v.push({host:re}),v}const D=class{constructor(h){this.integrationConfig=h}get type(){return"awsS3"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(h){return V(h)}resolveEditUrl(h){return h}};let f=D;f.factory=({config:h})=>{var v;const k=A((v=h.getOptionalConfigArray("integrations.awsS3"))!=null?v:[]);return j(k.map(te=>new D(te)),te=>te.config.host)};var x=(h,v,k)=>{if(!v.has(h))throw TypeError("Cannot "+k)},R=(h,v,k)=>(x(h,v,"read from private field"),k?k.call(h):v.get(h)),c=(h,v,k)=>{if(v.has(h))throw TypeError("Cannot add the same private member more than once");v instanceof WeakSet?v.add(h):v.set(h,k)},O=(h,v,k,te)=>(x(h,v,"write to private field"),te?te.call(h,k):v.set(h,k),k),T,Ce,we,nt,ot,$t,ct;const St="GB",xt=class{constructor(h,v,k,te,Ee,Ye){c(this,T,void 0),c(this,Ce,void 0),c(this,we,void 0),c(this,nt,void 0),c(this,ot,void 0),c(this,$t,void 0),c(this,ct,(...H)=>{const W=new URL(R(this,T));return W.pathname=H.map(Ae=>encodeURIComponent(Ae)).join("/"),W}),O(this,T,h),O(this,Ce,v),O(this,we,k),O(this,nt,te),O(this,ot,Ee),O(this,$t,Ye)}static fromRepoUrl(h){var v;const k=new URL(h);let te,Ee,Ye;const H=k.pathname.split("/").map(pt=>decodeURIComponent(pt));if(H[2]==="_git"?(te=H[1],Ee=Ye=H[3]):H[3]==="_git"?(te=H[1],Ee=H[2],Ye=H[4]):H[4]==="_git"&&(te=`${H[1]}/${H[2]}`,Ee=H[3],Ye=H[5]),!te||!Ee||!Ye)throw new Error("Azure URL must point to a git repository");const W=(v=k.searchParams.get("path"))!=null?v:void 0;let Ae;const De=k.searchParams.get("version");if(De){if(De.slice(0,2)!=="GB")throw new Error("Azure URL version must point to a git branch");Ae=De.slice(2)}return new xt(k.origin,te,Ee,Ye,W,Ae)}toRepoUrl(){let h;return R(this,we)===R(this,nt)?h=R(this,ct).call(this,R(this,Ce),"_git",R(this,nt)):h=R(this,ct).call(this,R(this,Ce),R(this,we),"_git",R(this,nt)),R(this,ot)&&h.searchParams.set("path",R(this,ot)),R(this,$t)&&h.searchParams.set("version",St+R(this,$t)),h.toString()}toFileUrl(){if(!R(this,ot))throw new Error("Azure URL must point to a specific path to be able to download a file");const h=R(this,ct).call(this,R(this,Ce),R(this,we),"_apis","git","repositories",R(this,nt),"items");return h.searchParams.set("api-version","6.0"),h.searchParams.set("path",R(this,ot)),R(this,$t)&&h.searchParams.set("version",R(this,$t)),h.toString()}toArchiveUrl(){const h=R(this,ct).call(this,R(this,Ce),R(this,we),"_apis","git","repositories",R(this,nt),"items");return h.searchParams.set("recursionLevel","full"),h.searchParams.set("download","true"),h.searchParams.set("api-version","6.0"),R(this,ot)&&h.searchParams.set("scopePath",R(this,ot)),R(this,$t)&&h.searchParams.set("version",R(this,$t)),h.toString()}toCommitsUrl(){const h=R(this,ct).call(this,R(this,Ce),R(this,we),"_apis","git","repositories",R(this,nt),"commits");return h.searchParams.set("api-version","6.0"),R(this,$t)&&h.searchParams.set("searchCriteria.itemVersion.version",R(this,$t)),h.toString()}getOwner(){return R(this,Ce)}getProject(){return R(this,we)}getRepo(){return R(this,nt)}getPath(){return R(this,ot)}getRef(){return R(this,$t)}};let Q=xt;T=new WeakMap,Ce=new WeakMap,we=new WeakMap,nt=new WeakMap,ot=new WeakMap,$t=new WeakMap,ct=new WeakMap;const pn="dev.azure.com";function Ct(h){var v;const k=(v=h.getOptionalString("host"))!=null?v:pn,te=h.getOptionalString("token");if(!g(k))throw new Error(`Invalid Azure integration config, '${k}' is not a valid host`);return{host:k,token:te}}function Ge(h){const v=h.map(Ct);return v.some(k=>k.host===pn)||v.push({host:pn}),v}const C=class{constructor(h){this.integrationConfig=h}get type(){return"azure"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(h){var v;const{url:k,base:te}=h;if(F(k))return k;try{const Ee=Q.fromRepoUrl(te),Ye=new URL(te),H=new URL(`https://a.com${(v=Ee.getPath())!=null?v:""}`),W=new URL(k,H).pathname;return Ye.searchParams.set("path",W),h.lineNumber&&(Ye.searchParams.set("line",String(h.lineNumber)),Ye.searchParams.set("lineEnd",String(h.lineNumber+1)),Ye.searchParams.set("lineStartColumn","1"),Ye.searchParams.set("lineEndColumn","1")),Ye.toString()}catch{return new URL(k,te).toString()}}resolveEditUrl(h){return h}};let Fe=C;Fe.factory=({config:h})=>{var v;const k=Ge((v=h.getOptionalConfigArray("integrations.azure"))!=null?v:[]);return j(k.map(te=>new C(te)),te=>te.config.host)};function ve(h){return Q.fromRepoUrl(h).toFileUrl()}function M(h){return Q.fromRepoUrl(h).toArchiveUrl()}function G(h){return Q.fromRepoUrl(h).toCommitsUrl()}function Re(h,v){const k=v?{...v}:{};if(h.token){const te=_.from(`:${h.token}`,"utf8");k.Authorization=`Basic ${te.toString("base64")}`}return{headers:k}}const Ne="bitbucket.org",Me="https://api.bitbucket.org/2.0";function Xe(h){var v;const k=(v=h.getOptionalString("host"))!=null?v:Ne;let te=h.getOptionalString("apiBaseUrl");const Ee=h.getOptionalString("token"),Ye=h.getOptionalString("username"),H=h.getOptionalString("appPassword");if(!g(k))throw new Error(`Invalid Bitbucket integration config, '${k}' is not a valid host`);return te?te=(0,m.trimEnd)(te,"/"):k===Ne?te=Me:te=`https://${k}/rest/api/1.0`,{host:k,apiBaseUrl:te,token:Ee,username:Ye,appPassword:H}}function vt(h){const v=h.map(Xe);return v.some(k=>k.host===Ne)||v.push({host:Ne,apiBaseUrl:Me}),v}const ee=class{constructor(h){this.integrationConfig=h}get type(){return"bitbucket"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(h){const v=V(h);if(!h.lineNumber)return v;const k=new URL(v);return this.integrationConfig.host==="bitbucket.org"?k.hash=`lines-${h.lineNumber}`:k.hash=`${h.lineNumber}`,k.toString()}resolveEditUrl(h){const v=i()(h),k=new URL(h);return k.searchParams.set("mode","edit"),k.searchParams.set("spa","0"),k.searchParams.set("at",v.ref),k.toString()}};let ue=ee;ue.factory=({config:h})=>{var v,k,te;const Ee=vt((te=h.getOptionalConfigArray("integrations.bitbucket"))!=null?te:[...(v=h.getOptionalConfigArray("integrations.bitbucketCloud"))!=null?v:[],...(k=h.getOptionalConfigArray("integrations.bitbucketServer"))!=null?k:[]]);return j(Ee.map(Ye=>new ee(Ye)),Ye=>Ye.config.host)};async function Pe(h,v){const{name:k,owner:te,resource:Ee}=parseGitUrl(h),Ye=Ee==="bitbucket.org";let H=Ye?`${v.apiBaseUrl}/repositories/${te}/${k}`:`${v.apiBaseUrl}/projects/${te}/repos/${k}/default-branch`,W=await fetch(H,Wt(v));if(W.status===404&&!Ye&&(H=`${v.apiBaseUrl}/projects/${te}/repos/${k}/branches/default`,W=await fetch(H,Wt(v))),!W.ok){const De=`Failed to retrieve default branch from ${H}, ${W.status} ${W.statusText}`;throw new Error(De)}let Ae;if(Ye)Ae=(await W.json()).mainbranch.name;else{const{displayId:De}=await W.json();Ae=De}if(!Ae)throw new Error(`Failed to read default branch from ${H}. Response ${W.status} ${W.json()}`);return Ae}async function at(h,v){const{name:k,owner:te,ref:Ee,protocol:Ye,resource:H,filepath:W}=parseGitUrl(h),Ae=H==="bitbucket.org";let De=Ee;De||(De=await Pe(h,v));const pt=W?`&path=${encodeURIComponent(decodeURIComponent(W))}`:"";return Ae?`${Ye}://${H}/${te}/${k}/get/${De}.tar.gz`:`${v.apiBaseUrl}/projects/${te}/repos/${k}/archive?format=tgz&at=${De}&prefix=${te}-${k}${pt}`}function bt(h,v){try{const{owner:k,name:te,ref:Ee,filepathtype:Ye,filepath:H}=parseGitUrl(h);if(!k||!te||Ye!=="browse"&&Ye!=="raw"&&Ye!=="src")throw new Error("Invalid Bitbucket URL or file path");const W=H.replace(/^\//,"");if(v.host==="bitbucket.org"){if(!Ee)throw new Error("Invalid Bitbucket URL or file path");return`${v.apiBaseUrl}/repositories/${k}/${te}/src/${Ee}/${W}`}return`${v.apiBaseUrl}/projects/${k}/repos/${te}/raw/${W}?at=${Ee}`}catch(k){throw new Error(`Incorrect URL: ${h}, ${k}`)}}function Wt(h){const v={};if(h.token)v.Authorization=`Bearer ${h.token}`;else if(h.username&&h.appPassword){const k=_.from(`${h.username}:${h.appPassword}`,"utf8");v.Authorization=`Basic ${k.toString("base64")}`}return{headers:v}}const on="bitbucket.org",zt="https://api.bitbucket.org/2.0";function Le(h){const v=on,k=zt,te=h.getString("username"),Ee=h.getString("appPassword");return{host:v,apiBaseUrl:k,username:te,appPassword:Ee}}function Pt(h){const v=h.map(Le);return v.length===0&&v.push({host:on,apiBaseUrl:zt}),v}const Rt=class{constructor(h){this.integrationConfig=h}get type(){return"bitbucketCloud"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(h){const v=V(h);if(h.lineNumber){const k=new URL(v);return k.hash=`lines-${h.lineNumber}`,k.toString()}return v}resolveEditUrl(h){const v=i()(h),k=new URL(h);return k.searchParams.set("mode","edit"),k.searchParams.set("at",v.ref),k.toString()}};let sn=Rt;sn.factory=({config:h})=>{var v;const k=Pt((v=h.getOptionalConfigArray("integrations.bitbucketCloud"))!=null?v:[]);return j(k.map(te=>new Rt(te)),te=>te.config.host)};async function un(h,v){const{name:k,owner:te}=parseGitUrl(h),Ee=`${v.apiBaseUrl}/repositories/${te}/${k}`,Ye=await fetch(Ee,nn(v));if(!Ye.ok){const Ae=`Failed to retrieve default branch from ${Ee}, ${Ye.status} ${Ye.statusText}`;throw new Error(Ae)}const W=(await Ye.json()).mainbranch.name;if(!W)throw new Error(`Failed to read default branch from ${Ee}. Response ${Ye.status} ${Ye.json()}`);return W}async function Lt(h,v){const{name:k,owner:te,ref:Ee,protocol:Ye,resource:H}=parseGitUrl(h);let W=Ee;return W||(W=await un(h,v)),`${Ye}://${H}/${te}/${k}/get/${W}.tar.gz`}function Ht(h,v){try{const{owner:k,name:te,ref:Ee,filepathtype:Ye,filepath:H}=parseGitUrl(h);if(!k||!te||Ye!=="src"&&Ye!=="raw")throw new Error("Invalid Bitbucket Cloud URL or file path");const W=H.replace(/^\//,"");if(!Ee)throw new Error("Invalid Bitbucket Cloud URL or file path");return`${v.apiBaseUrl}/repositories/${k}/${te}/src/${Ee}/${W}`}catch(k){throw new Error(`Incorrect URL: ${h}, ${k}`)}}function nn(h){const v={};if(h.username&&h.appPassword){const k=_.from(`${h.username}:${h.appPassword}`,"utf8");v.Authorization=`Basic ${k.toString("base64")}`}return{headers:v}}function Te(h){const v=h.getString("host");let k=h.getOptionalString("apiBaseUrl");const te=h.getOptionalString("token"),Ee=h.getOptionalString("username"),Ye=h.getOptionalString("password");if(!g(v))throw new Error(`Invalid Bitbucket Server integration config, '${v}' is not a valid host`);return k?k=(0,m.trimEnd)(k,"/"):k=`https://${v}/rest/api/1.0`,{host:v,apiBaseUrl:k,token:te,username:Ee,password:Ye}}function st(h){return h.map(Te)}const le=class{constructor(h){this.integrationConfig=h}get type(){return"bitbucketServer"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(h){const v=V(h);if(h.lineNumber){const k=new URL(v);return k.hash=h.lineNumber.toString(),k.toString()}return v}resolveEditUrl(h){return h.includes("?")?h.substring(0,h.indexOf("?")):h}};let ie=le;ie.factory=({config:h})=>{var v;const k=st((v=h.getOptionalConfigArray("integrations.bitbucketServer"))!=null?v:[]);return j(k.map(te=>new le(te)),te=>te.config.host)};async function Z(h,v){const{name:k,owner:te}=parseGitUrl(h);let Ee=`${v.apiBaseUrl}/projects/${te}/repos/${k}/default-branch`,Ye=await fetch(Ee,de(v));if(Ye.status===404&&(Ee=`${v.apiBaseUrl}/projects/${te}/repos/${k}/branches/default`,Ye=await fetch(Ee,de(v))),!Ye.ok){const Ae=`Failed to retrieve default branch from ${Ee}, ${Ye.status} ${Ye.statusText}`;throw new Error(Ae)}const{displayId:H}=await Ye.json(),W=H;if(!W)throw new Error(`Failed to read default branch from ${Ee}. Response ${Ye.status} ${Ye.json()}`);return W}async function B(h,v){const{name:k,owner:te,ref:Ee,filepath:Ye}=parseGitUrl(h);let H=Ee;H||(H=await Z(h,v));const W=Ye?`&path=${encodeURIComponent(decodeURIComponent(Ye))}`:"";return`${v.apiBaseUrl}/projects/${te}/repos/${k}/archive?format=tgz&at=${H}&prefix=${te}-${k}${W}`}function _e(h,v){try{const{owner:k,name:te,ref:Ee,filepathtype:Ye,filepath:H}=parseGitUrl(h);if(!k||!te||Ye!=="browse"&&Ye!=="raw"&&Ye!=="src")throw new Error("Invalid Bitbucket Server URL or file path");const W=H.replace(/^\//,"");return`${v.apiBaseUrl}/projects/${k}/repos/${te}/raw/${W}?at=${Ee}`}catch(k){throw new Error(`Incorrect URL: ${h}, ${k}`)}}function de(h){const v={};if(h.token)v.Authorization=`Bearer ${h.token}`;else if(h.username&&h.password){const k=_.from(`${h.username}:${h.password}`,"utf8");v.Authorization=`Basic ${k.toString("base64")}`}return{headers:v}}function Ie(h){const v=h.getString("host");let k=h.getOptionalString("baseUrl"),te=h.getOptionalString("cloneUrl"),Ee=h.getOptionalString("gitilesBaseUrl");const Ye=h.getOptionalString("username"),H=h.getOptionalString("password");if(g(v)){if(k&&!F(k))throw new Error(`Invalid Gerrit integration config, '${k}' is not a valid baseUrl`);if(te&&!F(te))throw new Error(`Invalid Gerrit integration config, '${te}' is not a valid cloneUrl`);if(Ee&&!F(Ee))throw new Error(`Invalid Gerrit integration config, '${Ee}' is not a valid gitilesBaseUrl`)}else throw new Error(`Invalid Gerrit integration config, '${v}' is not a valid host`);return k?k=(0,m.trimEnd)(k,"/"):k=`https://${v}`,Ee?Ee=(0,m.trimEnd)(Ee,"/"):Ee=`https://${v}`,te?te=(0,m.trimEnd)(te,"/"):te=k,{host:v,baseUrl:k,cloneUrl:te,gitilesBaseUrl:Ee,username:Ye,password:H}}function ze(h){return h.map(Ie)}const rt=")]}'";function kt(h,v){const te=v.replace(h.gitilesBaseUrl,"").split("/").filter(De=>!!De),Ee=te.indexOf("+");if(Ee<=0)throw new Error(`Unable to parse project from url: ${v}`);const Ye=(0,m.trimStart)(te.slice(0,Ee).join("/"),"/"),H=te.indexOf("heads");if(H<=0)throw new Error(`Unable to parse branch from url: ${v}`);const W=te[H+1],Ae=te.slice(H+2).join("/");return{branch:W,filePath:Ae===""?"/":Ae,project:Ye}}function He(h,v,k,te){return`${h.gitilesBaseUrl}/${v}/+/refs/heads/${k}/${(0,m.trimStart)(te,"/")}`}function z(h){return h.password?"/a/":"/"}function be(h,v){const{branch:k,project:te}=kt(h,v);return`${h.baseUrl}${z(h)}projects/${encodeURIComponent(te)}/branches/${k}`}function je(h,v){const{project:k}=kt(h,v);return`${h.cloneUrl}${z(h)}${k}`}function ut(h,v){const{branch:k,filePath:te,project:Ee}=kt(h,v);return`${h.baseUrl}${z(h)}projects/${encodeURIComponent(Ee)}/branches/${k}/files/${encodeURIComponent(te)}/content`}function Et(h){return`${h.baseUrl}${z(h)}projects/`}function Mt(h){const v={};if(!h.password)return v;const k=_.from(`${h.username}:${h.password}`,"utf8");return v.Authorization=`Basic ${k.toString("base64")}`,{headers:v}}async function rn(h){const v=await h.text();if(v.startsWith(rt))try{return JSON.parse(v.slice(rt.length))}catch(k){throw new Error(`Invalid response from Gerrit: ${v.slice(0,10)} - ${k}`)}throw new Error(`Gerrit JSON body prefix missing. Found: ${v.slice(0,10)}`)}const ln=class{constructor(h){this.integrationConfig=h}get type(){return"gerrit"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(h){const{url:v,base:k,lineNumber:te}=h;let Ee;if(v.startsWith("/")){const{branch:Ye,project:H}=kt(this.config,k);return He(this.config,H,Ye,v)}return v?Ee=new URL(v,k):Ee=new URL(k),te&&(Ee.hash=te.toString()),Ee.toString()}resolveEditUrl(h){return h}};let Rn=ln;Rn.factory=({config:h})=>{var v;const k=ze((v=h.getOptionalConfigArray("integrations.gerrit"))!=null?v:[]);return j(k.map(te=>new ln(te)),te=>te.config.host)};function Mn(h){const v=h.getString("host");let k=h.getOptionalString("baseUrl");const te=h.getOptionalString("username"),Ee=h.getOptionalString("password");if(!g(v))throw new Error(`Invalid Gitea integration config, '${v}' is not a valid host`);return k?k=(0,m.trimEnd)(k,"/"):k=`https://${v}`,{host:v,baseUrl:k,username:te,password:Ee}}function Ke(h,v){var k;try{const te=(k=h.baseUrl)!=null?k:`https://${h.host}`,[Ee,Ye,H,W,Ae,De,...pt]=v.replace(te,"").split("/"),dt=pt.join("/").replace(/^\//,"");return`${te}/${Ye}/${H}/_edit/${De}/${dt}`}catch(te){throw new Error(`Incorrect URL: ${v}, ${te}`)}}function Je(h,v){var k;try{const te=(k=h.baseUrl)!=null?k:`https://${h.host}`,[Ee,Ye,H,W,Ae,De,...pt]=v.replace(te,"").split("/"),dt=pt.join("/").replace(/^\//,"");return`${te}/api/v1/repos/${Ye}/${H}/contents/${dt}?ref=${De}`}catch(te){throw new Error(`Incorrect URL: ${v}, ${te}`)}}function Qe(h){const v={},{username:k,password:te}=h;return te?(k?v.Authorization=`basic ${_.from(`${k}:${te}`).toString("base64")}`:v.Authorization=`token ${te}`,{headers:v}):v}const oe=class{constructor(h){this.config=h}get type(){return"gitea"}get title(){return this.config.host}resolveUrl(h){return V(h)}resolveEditUrl(h){return Ke(this.config,h)}};let fe=oe;fe.factory=({config:h})=>{var v;const te=((v=h.getOptionalConfigArray("integrations.gitea"))!=null?v:[]).map(Ee=>Mn(Ee));return j(te.map(Ee=>new oe(Ee)),Ee=>Ee.config.host)};const We="github.com",Be="https://api.github.com",Ze="https://raw.githubusercontent.com";function gt(h){var v,k;const te=(v=h.getOptionalString("host"))!=null?v:We;let Ee=h.getOptionalString("apiBaseUrl"),Ye=h.getOptionalString("rawBaseUrl");const H=h.getOptionalString("token"),W=(k=h.getOptionalConfigArray("apps"))==null?void 0:k.map(Ae=>({appId:Ae.getNumber("appId"),clientId:Ae.getString("clientId"),clientSecret:Ae.getString("clientSecret"),webhookSecret:Ae.getString("webhookSecret"),privateKey:Ae.getString("privateKey"),allowedInstallationOwners:Ae.getOptionalStringArray("allowedInstallationOwners")}));if(!g(te))throw new Error(`Invalid GitHub integration config, '${te}' is not a valid host`);return Ee?Ee=(0,m.trimEnd)(Ee,"/"):te===We&&(Ee=Be),Ye?Ye=(0,m.trimEnd)(Ye,"/"):te===We&&(Ye=Ze),{host:te,apiBaseUrl:Ee,rawBaseUrl:Ye,token:H,apps:W}}function It(h){const v=h.map(gt);return v.some(k=>k.host===We)||v.push({host:We,apiBaseUrl:Be,rawBaseUrl:Ze}),v}function jt(h,v,k){try{const{owner:te,name:Ee,ref:Ye,filepathtype:H,filepath:W}=parseGitUrl(h);if(!te||!Ee||!Ye||H!=="blob"&&H!=="raw"&&H!=="tree")throw new Error("Invalid GitHub URL or file path");const Ae=W.replace(/^\//,"");return Ot(v,k)==="api"?`${v.apiBaseUrl}/repos/${te}/${Ee}/contents/${Ae}?ref=${Ye}`:`${v.rawBaseUrl}/${te}/${Ee}/${Ye}/${Ae}`}catch(te){throw new Error(`Incorrect URL: ${h}, ${te}`)}}function Zt(h,v){const k={};return Ot(h,v)==="api"&&(k.Accept="application/vnd.github.v3.raw"),v.token&&(k.Authorization=`token ${v.token}`),{headers:k}}function Ot(h,v){return h.apiBaseUrl&&(v.token||!h.rawBaseUrl)?"api":"raw"}class Vt{constructor(){this.tokenCache=new Map,this.isExpired=v=>t.ou.local()>v}async getOrCreateToken(v,k,te){let Ee=this.tokenCache.get(v);if((!Ee||this.isExpired(Ee.expiresAt))&&(Ee=await te(),Ee.expiresAt=Ee.expiresAt.minus({minutes:10}),this.tokenCache.set(v,Ee)),!this.appliesToRepo(Ee,k))throw new Error(`The Backstage GitHub application used in the ${v} organization does not have access to a repository with the name ${k}`);return{accessToken:Ee.token}}appliesToRepo(v,k){return k===void 0?!0:v.repositories!==void 0?v.repositories.includes(k):!0}}const mn={Accept:"application/vnd.github.machine-man-preview+json"};class bn{constructor(v,k){this.cache=new Vt,this.allowedInstallationOwners=v.allowedInstallationOwners,this.baseUrl=k,this.baseAuthConfig={appId:v.appId,privateKey:v.privateKey.replace(/\\n/gm,`
`)},this.appClient=new b.v({baseUrl:k,headers:mn,authStrategy:y.i,auth:this.baseAuthConfig})}async getInstallationCredentials(v,k){var te;return this.allowedInstallationOwners&&!((te=this.allowedInstallationOwners)!=null&&te.includes(v))?{accessToken:void 0}:this.cache.getOrCreateToken(v,k,async()=>{var Ee;const{installationId:Ye,suspended:H}=await this.getInstallationData(v);if(H)throw new Error(`The GitHub application for ${v} is suspended`);const W=await this.appClient.apps.createInstallationAccessToken({installation_id:Ye,headers:mn});let Ae;if(W.data.repository_selection==="selected"){const De=new b.v({baseUrl:this.baseUrl,auth:W.data.token}),pt=await De.paginate(De.apps.listReposAccessibleToInstallation);Ae=((Ee=pt.repositories)!=null?Ee:pt).map(ft=>ft.name)}return{token:W.data.token,expiresAt:t.ou.fromISO(W.data.expires_at),repositories:Ae}})}getInstallations(){return this.appClient.paginate(this.appClient.apps.listInstallations)}async getInstallationData(v){const te=(await this.getInstallations()).find(Ye=>{var H,W;return((W=(H=Ye.account)==null?void 0:H.login)==null?void 0:W.toLocaleLowerCase("en-US"))===v.toLocaleLowerCase("en-US")});if(te)return{installationId:te.id,suspended:Boolean(te.suspended_by)};const Ee=new Error(`No app installation found for ${v} in ${this.baseAuthConfig.appId}`);throw Ee.name="NotFoundError",Ee}}class hn{constructor(v){var k,te;this.apps=(te=(k=v.apps)==null?void 0:k.map(Ee=>new bn(Ee,v.apiBaseUrl)))!=null?te:[]}async getAllInstallations(){return this.apps.length?(await Promise.all(this.apps.map(k=>k.getInstallations()))).flat():[]}async getAppToken(v,k){if(this.apps.length===0)return;const te=await Promise.all(this.apps.map(W=>W.getInstallationCredentials(v,k).then(Ae=>({credentials:Ae,error:void 0}),Ae=>({credentials:void 0,error:Ae})))),Ee=te.find(W=>W.credentials);if(Ee)return Ee.credentials.accessToken;const H=te.map(W=>W.error).find(W=>W.name!=="NotFoundError");if(H)throw H}}const wn=class{constructor(h,v){this.githubAppCredentialsMux=h,this.token=v}async getCredentials(h){const v=i()(h.url),k=v.owner||v.name,te=v.owner?v.name:void 0;let Ee="app",Ye=await this.githubAppCredentialsMux.getAppToken(k,te);return Ye||(Ee="token",Ye=this.token),{headers:Ye?{Authorization:`Bearer ${Ye}`}:void 0,token:Ye,type:Ee}}};let gn=wn;gn.create=h=>new wn(new hn(h),h.token);class Tn{constructor(v){this.providers=v}static fromIntegrations(v){const k=new Map;return v.github.list().forEach(te=>{const Ee=gn.create(te.config);k.set(te.config.host,Ee)}),new Tn(k)}async getCredentials(v){const k=new URL(v.url),te=this.providers.get(k.host);if(!te)throw new Error(`There is no GitHub integration that matches ${v.url}. Please add a configuration for an integration.`);return te.getCredentials(v)}}const kn=class{constructor(h){this.integrationConfig=h}get type(){return"github"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(h){return Cn(V(h),"tree")}resolveEditUrl(h){return Cn(h,"edit")}};let $n=kn;$n.factory=({config:h})=>{var v;const k=It((v=h.getOptionalConfigArray("integrations.github"))!=null?v:[]);return j(k.map(te=>new kn(te)),te=>te.config.host)};function Cn(h,v){return h.replace(/\/\/([^/]+)\/([^/]+)\/([^/]+)\/(blob|tree|edit)\//,(k,te,Ee,Ye)=>`//${te}/${Ee}/${Ye}/${v}/`)}const zn=null;class Sn extends $n{constructor(v){super(v)}get config(){return super.config}}Sn.factory=$n.factory;const Zn=null,Ln=null,jn=null,Xn="gitlab.com",or="https://gitlab.com/api/v4";function gr(h){const v=h.getString("host");let k=h.getOptionalString("apiBaseUrl");const te=h.getOptionalString("token");let Ee=h.getOptionalString("baseUrl");if(k?k=(0,m.trimEnd)(k,"/"):v===Xn&&(k=or),Ee?Ee=(0,m.trimEnd)(Ee,"/"):Ee=`https://${v}`,g(v)){if(!k||!F(k))throw new Error(`Invalid GitLab integration config, '${k}' is not a valid apiBaseUrl`);if(!F(Ee))throw new Error(`Invalid GitLab integration config, '${Ee}' is not a valid baseUrl`)}else throw new Error(`Invalid GitLab integration config, '${v}' is not a valid host`);return{host:v,token:te,apiBaseUrl:k,baseUrl:Ee}}function fr(h){const v=h.map(gr);return v.some(k=>k.host===Xn)||v.push({host:Xn,apiBaseUrl:or,baseUrl:`https://${Xn}`}),v}function Se(h){let v="";return h.host!==Xn&&(v=new URL(h.baseUrl).pathname),trimEnd(v,"/")}async function ne(h,v){const k=await ge(h,v);return S(h,k,v).toString()}function ae(h){const{token:v=""}=h;return{headers:{"PRIVATE-TOKEN":v}}}function S(h,v,k){try{const te=new URL(h),Ee=te.pathname.split("/blob/").slice(1).join("/blob/"),[Ye,...H]=Ee.split("/"),W=Se(k);return te.pathname=[...W?[W]:[],"api/v4/projects",v,"repository/files",encodeURIComponent(decodeURIComponent(H.join("/"))),"raw"].join("/"),te.search=`?ref=${Ye}`,te}catch(te){throw new Error(`Incorrect url: ${h}, ${te}`)}}async function ge(h,v){const k=new URL(h);if(!k.pathname.includes("/blob/"))throw new Error("Please provide full path to yaml file from GitLab");try{let te=k.pathname.split("/-/blob/")[0].split("/blob/")[0];const Ee=Se(v);Ee&&(te=te.replace(Ee,""));const Ye=new URL(`${k.origin}${Ee}/api/v4/projects/${encodeURIComponent(te.replace(/^\//,""))}`),H=await fetch(Ye.toString(),ae(v)),W=await H.json();if(!H.ok)throw new Error(`GitLab Error '${W.error}', ${W.error_description}`);return Number(W.id)}catch(te){throw new Error(`Could not get GitLab project ID for: ${h}, ${te}`)}}const L=class{constructor(h){this.integrationConfig=h}get type(){return"gitlab"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(h){return V(h)}resolveEditUrl(h){return me(h,"edit")}};let N=L;N.factory=({config:h})=>{var v;const k=fr((v=h.getOptionalConfigArray("integrations.gitlab"))!=null?v:[]);return j(k.map(te=>new L(te)),te=>te.config.host)};function me(h,v){return h.replace(/\/\-\/(blob|tree|edit)\//,`/-/${v}/`)}function et(h){if(!h)return{};if(!h.has("clientEmail")&&!h.has("privateKey"))return{};const v=h.getString("privateKey").split("\\n").join(`
`);return{clientEmail:h.getString("clientEmail"),privateKey:v}}class wt{static fromConfig(v){return new wt({awsS3:f.factory({config:v}),azure:Fe.factory({config:v}),bitbucket:ue.factory({config:v}),bitbucketCloud:sn.factory({config:v}),bitbucketServer:ie.factory({config:v}),gerrit:Rn.factory({config:v}),github:$n.factory({config:v}),gitlab:N.factory({config:v}),gitea:fe.factory({config:v})})}constructor(v){this.byType=v}get awsS3(){return this.byType.awsS3}get azure(){return this.byType.azure}get bitbucket(){return this.byType.bitbucket}get bitbucketCloud(){return this.byType.bitbucketCloud}get bitbucketServer(){return this.byType.bitbucketServer}get gerrit(){return this.byType.gerrit}get github(){return this.byType.github}get gitlab(){return this.byType.gitlab}get gitea(){return this.byType.gitea}list(){return Object.values(this.byType).flatMap(v=>v.list())}byUrl(v){let k=Object.values(this.byType).map(te=>te.byUrl(v)).filter(Boolean);if(k.length>1){const te=k.filter(Ee=>!(Ee instanceof ue));te.length!==0&&(k=te)}return k[0]}byHost(v){return Object.values(this.byType).map(k=>k.byHost(v)).find(Boolean)}resolveUrl(v){const k=this.byUrl(v.base);return k?k.resolveUrl(v):V(v)}resolveEditUrl(v){const k=this.byUrl(v);return k?k.resolveEditUrl(v):v}}},63115:function(Nt,u,e){e.d(u,{Cy:function(){return D},DC:function(){return Fe},OO:function(){return G},RE:function(){return re},XQ:function(){return M},Yq:function(){return we},ap:function(){return Ne},bM:function(){return ct},cm:function(){return xt},d1:function(){return Ge},fP:function(){return V},fe:function(){return Q},gC:function(){return Re},hK:function(){return C},hs:function(){return pn},nE:function(){return nt},x1:function(){return ve},zJ:function(){return Ct}});var n=e(2784),i=e(73557),m=e(49558),d=e(30705),a=e(16673),l=e(73495),y=e(99688),b=e(60364),t=e(34520),_=e(90436);const g=(0,d.NT)({id:"api-docs"}),F=(0,d.x8)({id:"register-component",optional:!0}),j=[a.Es.columns.createTitleColumn({hidden:!0}),a.Es.columns.createNameColumn({defaultKind:"API"}),a.Es.columns.createSystemColumn(),a.Es.columns.createOwnerColumn(),a.Es.columns.createSpecTypeColumn(),a.Es.columns.createSpecLifecycleColumn(),a.Es.columns.createMetadataDescriptionColumn(),a.Es.columns.createTagsColumn()],V=Me=>{var Xe;const{initiallySelectedFilter:vt="all",columns:ee,actions:ue}=Me,at=`${(Xe=(0,d.h_)(d.Ds).getOptionalString("organization.name"))!=null?Xe:"Backstage"} API Explorer`,bt=(0,d.tg)(F);return n.createElement(m.g9,{themeId:"apis",title:"APIs",subtitle:at,pageTitleOverride:"APIs"},n.createElement(m.VY,null,n.createElement(m.yW,{title:""},n.createElement(m.XF,{title:"Register Existing API",to:bt==null?void 0:bt()}),n.createElement(m.qt,null,"All your APIs")),n.createElement(l.UO,null,n.createElement(l._i,null,n.createElement(l._i.Filters,null,n.createElement(l.tW,{initialFilter:"api",hidden:!0}),n.createElement(l.sL,null),n.createElement(l.EW,{initialFilter:vt}),n.createElement(l.dq,null),n.createElement(l.df,null),n.createElement(l.xE,null)),n.createElement(l._i.Content,null,n.createElement(a.Es,{columns:ee||j,actions:ue}))))))},re=Me=>(0,i.pC)()||n.createElement(V,{...Me}),w=(0,d.T0)({id:"plugin.api-docs.config"}),A=Me=>n.createElement(m.Oi,{text:Me.definition,language:Me.language,showCopyCodeButton:!0}),D=()=>{var Me;const{entity:Xe}=(0,l.X2)(),vt=(0,d.h_)(w),{getApiDefinitionWidget:ee}=vt;if(!Xe)return n.createElement(y.Z,{severity:"error"},"Could not fetch the API");const ue=ee(Xe),Pe=(Me=Xe.metadata.title)!=null?Me:Xe.metadata.name;return ue?n.createElement(m.oZ,{title:Pe},n.createElement(m.hB,{label:ue.title,key:"widget"},ue.component(Xe.spec.definition)),n.createElement(m.hB,{label:"Raw",key:"raw"},n.createElement(A,{definition:Xe.spec.definition,language:ue.rawLanguage||Xe.spec.type}))):n.createElement(m.oZ,{title:Pe,children:[n.createElement(m.hB,{label:Xe.spec.type,key:"raw"},n.createElement(A,{definition:Xe.spec.definition,language:Xe.spec.type}))]})},f=n.lazy(()=>Promise.all([e.e(4778),e.e(1978),e.e(7700),e.e(9086),e.e(2101)]).then(e.bind(e,32101)).then(Me=>({default:Me.AsyncApiDefinition}))),x=Me=>n.createElement(n.Suspense,{fallback:n.createElement(m.Ex,null)},n.createElement(f,{...Me})),R=n.lazy(()=>e.e(4774).then(e.bind(e,14774)).then(Me=>({default:Me.GraphQlDefinition}))),c=Me=>n.createElement(n.Suspense,{fallback:n.createElement(m.Ex,null)},n.createElement(R,{...Me})),O=n.lazy(()=>Promise.all([e.e(1978),e.e(6637),e.e(7700),e.e(7983)]).then(e.bind(e,27983)).then(Me=>({default:Me.OpenApiDefinition}))),T=Me=>n.createElement(n.Suspense,{fallback:n.createElement(m.Ex,null)},n.createElement(O,{...Me})),Ce=Me=>{const Xe=(0,b.Z)();return n.createElement(m.Oi,{customStyle:{backgroundColor:Xe.palette.background.default},text:Me.definition,language:"protobuf",showCopyCodeButton:!0})};function we(){return[{type:"openapi",title:"OpenAPI",rawLanguage:"yaml",component:Me=>n.createElement(T,{definition:Me})},{type:"asyncapi",title:"AsyncAPI",rawLanguage:"yaml",component:Me=>n.createElement(x,{definition:Me})},{type:"graphql",title:"GraphQL",rawLanguage:"graphql",component:Me=>n.createElement(c,{definition:Me})},{type:"grpc",title:"gRPC",component:Me=>n.createElement(Ce,{definition:Me})}]}const nt=Me=>{const{apiEntity:Xe}=Me,ee=(0,d.h_)(w).getApiDefinitionWidget(Xe),ue=ee?ee.title:Xe.spec.type;return n.createElement("span",null,ue)};function ot(){return{title:"Type",field:"spec.type",render:Me=>n.createElement(nt,{apiEntity:Me})}}const $t=[l.u3.columns.createEntityRefColumn({defaultKind:"API"}),l.u3.columns.createSystemColumn(),l.u3.columns.createOwnerColumn(),ot(),l.u3.columns.createSpecLifecycleColumn(),l.u3.columns.createMetadataDescriptionColumn()],ct=Me=>{const{variant:Xe="gridItem"}=Me,{entity:vt}=(0,l.X2)(),{entities:ee,loading:ue,error:Pe}=(0,l.eK)(vt,{type:t.Dg});return ue?n.createElement(m.rJ,{variant:Xe,title:"Consumed APIs"},n.createElement(m.Ex,null)):Pe||!ee?n.createElement(m.rJ,{variant:Xe,title:"Consumed APIs"},n.createElement(m.GB,{severity:"error",title:"Could not load APIs",message:n.createElement(m.Oi,{text:`${Pe}`,language:"text"})})):n.createElement(l.u3,{title:"Consumed APIs",variant:Xe,emptyContent:n.createElement("div",{style:{textAlign:"center"}},n.createElement(_.Z,{variant:"body1"},"This ",vt.kind.toLocaleLowerCase("en-US")," does not consume any APIs."),n.createElement(_.Z,{variant:"body2"},n.createElement(m.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#specconsumesapis-optional"},"Learn how to change this."))),columns:$t,entities:ee})},St=[l.u3.columns.createEntityRefColumn({defaultKind:"API"}),l.u3.columns.createOwnerColumn(),ot(),l.u3.columns.createSpecLifecycleColumn(),l.u3.columns.createMetadataDescriptionColumn()],xt=Me=>{const{variant:Xe="gridItem"}=Me,{entity:vt}=(0,l.X2)(),{entities:ee,loading:ue,error:Pe}=(0,l.eK)(vt,{type:t.aS,kind:"API"});return ue?n.createElement(m.rJ,{variant:Xe,title:"APIs"},n.createElement(m.Ex,null)):Pe||!ee?n.createElement(m.rJ,{variant:Xe,title:"APIs"},n.createElement(m.GB,{severity:"error",title:"Could not load APIs",message:n.createElement(m.Oi,{text:`${Pe}`,language:"text"})})):n.createElement(l.u3,{title:"APIs",variant:Xe,emptyContent:n.createElement("div",{style:{textAlign:"center"}},n.createElement(_.Z,{variant:"body1"},"This ",vt.kind.toLocaleLowerCase("en-US")," does not contain any APIs."),n.createElement(_.Z,{variant:"body2"},n.createElement(m.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#kind-api"},"Learn how to change this."))),columns:St,entities:ee})},Q=Me=>{const{variant:Xe="gridItem"}=Me,{entity:vt}=(0,l.X2)(),{entities:ee,loading:ue,error:Pe}=(0,l.eK)(vt,{type:t.M_});return ue?n.createElement(m.rJ,{variant:Xe,title:"Provided APIs"},n.createElement(m.Ex,null)):Pe||!ee?n.createElement(m.rJ,{variant:Xe,title:"Provided APIs"},n.createElement(m.GB,{severity:"error",title:"Could not load APIs",message:n.createElement(m.Oi,{text:`${Pe}`,language:"text"})})):n.createElement(l.u3,{title:"Provided APIs",variant:Xe,emptyContent:n.createElement("div",{style:{textAlign:"center"}},n.createElement(_.Z,{variant:"body1"},"This ",vt.kind.toLocaleLowerCase("en-US")," does not provide any APIs."),n.createElement(_.Z,{variant:"body2"},n.createElement(m.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#specprovidesapis-optional"},"Learn how to change this."))),columns:$t,entities:ee})},pn=Me=>{const{variant:Xe="gridItem"}=Me,{entity:vt}=(0,l.X2)(),{entities:ee,loading:ue,error:Pe}=(0,l.eK)(vt,{type:t.X9});return ue?n.createElement(m.rJ,{variant:Xe,title:"Consumers"},n.createElement(m.Ex,null)):Pe||!ee?n.createElement(m.rJ,{variant:Xe,title:"Consumers"},n.createElement(m.GB,{severity:"error",title:"Could not load components",message:n.createElement(m.Oi,{text:`${Pe}`,language:"text"})})):n.createElement(l.u3,{title:"Consumers",variant:Xe,emptyContent:n.createElement("div",{style:{textAlign:"center"}},n.createElement(_.Z,{variant:"body1"},"No component consumes this API."),n.createElement(_.Z,{variant:"body2"},n.createElement(m.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#specconsumesapis-optional"},"Learn how to change this."))),columns:l.u3.componentEntityColumns,entities:ee})},Ct=Me=>{const{variant:Xe="gridItem"}=Me,{entity:vt}=(0,l.X2)(),{entities:ee,loading:ue,error:Pe}=(0,l.eK)(vt,{type:t.Zj});return ue?n.createElement(m.rJ,{variant:Xe,title:"Providers"},n.createElement(m.Ex,null)):Pe||!ee?n.createElement(m.rJ,{variant:Xe,title:"Providers"},n.createElement(m.GB,{severity:"error",title:"Could not load components",message:n.createElement(m.Oi,{text:`${Pe}`,language:"text"})})):n.createElement(l.u3,{title:"Providers",variant:Xe,emptyContent:n.createElement("div",{style:{textAlign:"center"}},n.createElement(_.Z,{variant:"body1"},"No component provides this API."),n.createElement(_.Z,{variant:"body2"},n.createElement(m.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#specprovidesapis-optional"},"Learn how to change this."))),columns:l.u3.componentEntityColumns,entities:ee})},Ge=(0,d.rx)({id:"api-docs",routes:{root:g},apis:[(0,d.ni)({api:w,deps:{},factory:()=>{const Me=we();return{getApiDefinitionWidget:Xe=>Me.find(vt=>vt.type===Xe.spec.type)}}})],externalRoutes:{registerApi:F}}),C=Ge.provide((0,d.P4)({name:"ApiExplorerPage",component:()=>e.e(3320).then(e.bind(e,33320)).then(Me=>Me.ApiExplorerIndexPage),mountPoint:g})),Fe=Ge.provide((0,d.CO)({name:"EntityApiDefinitionCard",component:{lazy:()=>e.e(1965).then(e.bind(e,71965)).then(Me=>Me.ApiDefinitionCard)}})),ve=Ge.provide((0,d.CO)({name:"EntityConsumedApisCard",component:{lazy:()=>e.e(8033).then(e.bind(e,88033)).then(Me=>Me.ConsumedApisCard)}})),M=Ge.provide((0,d.CO)({name:"EntityConsumingComponentsCard",component:{lazy:()=>e.e(5294).then(e.bind(e,65294)).then(Me=>Me.ConsumingComponentsCard)}})),G=Ge.provide((0,d.CO)({name:"EntityProvidedApisCard",component:{lazy:()=>e.e(8033).then(e.bind(e,88033)).then(Me=>Me.ProvidedApisCard)}})),Re=Ge.provide((0,d.CO)({name:"EntityProvidingComponentsCard",component:{lazy:()=>e.e(5294).then(e.bind(e,65294)).then(Me=>Me.ProvidingComponentsCard)}})),Ne=Ge.provide((0,d.CO)({name:"EntityHasApisCard",component:{lazy:()=>e.e(8033).then(e.bind(e,88033)).then(Me=>Me.HasApisCard)}}))},26655:function(Nt,u,e){e.d(u,{j8:function(){return a},x7:function(){return d}});var n=e(5083);const i="catalog-entity",m=(0,n.J$)({name:"catalog.entity.read",attributes:{action:"read"},resourceType:i}),d=(0,n.J$)({name:"catalog.entity.create",attributes:{action:"create"}}),a=(0,n.J$)({name:"catalog.entity.delete",attributes:{action:"delete"},resourceType:i}),l=(0,n.J$)({name:"catalog.entity.refresh",attributes:{action:"update"},resourceType:i}),y=(0,n.J$)({name:"catalog.location.read",attributes:{action:"read"}}),b=(0,n.J$)({name:"catalog.location.create",attributes:{action:"create"}}),t=(0,n.J$)({name:"catalog.location.delete",attributes:{action:"delete"}}),_=[m,d,a,l,y,b,t]},98487:function(Nt,u,e){e.d(u,{Az:function(){return Q},Ho:function(){return ct},Nm:function(){return O},_U:function(){return $t},t0:function(){return pn},vw:function(){return c}});var n=e(34520),i=e(49558),m=e(30705),d=e(79692),a=e(60364),l=e(4614),y=e(72779),b=e.n(y),t=e(2784),_=e(10368),g=e(73495),F=e(39412),j=e(48760),V=e(14162),re=e.n(V),w=e(69294);const A=(0,_.Z)(Ct=>({text:{fill:Ct.palette.textContrast},secondary:{fill:Ct.palette.textSubtle}}),{name:"PluginCatalogGraphCustomLabel"});function D({edge:{relations:Ct}}){const Ge=A();return t.createElement("text",{className:Ge.text,textAnchor:"middle"},Ct.map((C,Fe)=>t.createElement("tspan",{key:C,className:b()(Fe>0&&Ge.secondary)},Fe>0&&t.createElement("tspan",null," / "),C)))}function f({kind:Ct,...Ge}){var C;const ve=(C=(0,m.qD)().getSystemIcon(`kind:${Ct.toLocaleLowerCase("en-US")}`))!=null?C:F.Z;return t.createElement(ve,{...Ge})}const x=(0,d.Z)(Ct=>({node:{fill:Ct.palette.grey[300],stroke:Ct.palette.grey[300],"&.primary":{fill:Ct.palette.primary.light,stroke:Ct.palette.primary.light},"&.secondary":{fill:Ct.palette.secondary.light,stroke:Ct.palette.secondary.light}},text:{fill:Ct.palette.getContrastText(Ct.palette.grey[300]),"&.primary":{fill:Ct.palette.primary.contrastText},"&.secondary":{fill:Ct.palette.secondary.contrastText},"&.focused":{fontWeight:"bold"}},clickable:{cursor:"pointer"}}),{name:"PluginCatalogGraphCustomNode"});function R({node:{id:Ct,kind:Ge,namespace:C,name:Fe,color:ve="default",focused:M,title:G,onClick:Re}}){const Ne=x(),[Me,Xe]=(0,t.useState)(0),[vt,ee]=(0,t.useState)(0),ue=(0,t.useRef)(null);(0,t.useLayoutEffect)(()=>{if(ue.current){let{height:Le,width:Pt}=ue.current.getBBox();Le=Math.round(Le),Pt=Math.round(Pt),(Le!==vt||Pt!==Me)&&(Xe(Pt),ee(Le))}},[Me,vt]);const Pe=10,at=vt,bt=Ge?at+Pe:0,Wt=bt+Me+Pe*2,on=vt+Pe*2,zt=G!=null?G:Ge&&Fe&&C?(0,g.$3)({kind:Ge,name:Fe,namespace:C}):Ct;return t.createElement("g",{onClick:Re,className:b()(Re&&Ne.clickable)},t.createElement("rect",{className:b()(Ne.node,ve==="primary"&&"primary",ve==="secondary"&&"secondary"),width:Wt,height:on,rx:10}),Ge&&t.createElement(f,{kind:Ge,y:Pe,x:Pe,width:at,height:at,className:b()(Ne.text,M&&"focused",ve==="primary"&&"primary",ve==="secondary"&&"secondary")}),t.createElement("text",{ref:ue,className:b()(Ne.text,M&&"focused",ve==="primary"&&"primary",ve==="secondary"&&"secondary"),y:on/2,x:bt+(Me+Pe*2)/2,textAnchor:"middle",alignmentBaseline:"middle"},zt))}const c=[[n.$1,n.S4],[n.Dg,n.X9],[n.Zj,n.M_],[n.aS,n.cz],[n._b,n.wP],[n.KS,n.hr],[n.nP,n.w$]];var O=(Ct=>(Ct.TOP_BOTTOM="TB",Ct.BOTTOM_TOP="BT",Ct.LEFT_RIGHT="LR",Ct.RIGHT_LEFT="RL",Ct))(O||{});const T=re()(10);function Ce(){const Ct=(0,m.h_)(g.Ah),Ge=(0,t.useRef)({requestedEntities:new Set,outstandingEntities:new Map,cachedEntities:new Map}),[C,Fe]=(0,t.useState)({}),ve=(0,t.useCallback)(()=>{const{cachedEntities:Xe,requestedEntities:vt}=Ge.current,ee={};vt.forEach(ue=>{const Pe=Xe.get(ue);Pe&&(ee[ue]=Pe)}),Fe(ee)},[Ge,Fe]),[M,G]=(0,w.default)(async()=>{const{requestedEntities:Xe,outstandingEntities:vt,cachedEntities:ee}=Ge.current;await Promise.all(Array.from(Xe).map(ue=>T(async()=>{if(ee.has(ue))return;if(vt.has(ue)){await vt.get(ue);return}const Pe=Ct.getEntityByRef(ue);vt.set(ue,Pe);try{const at=await Pe;at&&(ee.set(ue,at),ve())}finally{vt.delete(ue)}})))},[Ge,ve]),{loading:Re,error:Ne}=M,Me=(0,t.useCallback)(Xe=>{const vt=new Set(Xe),{requestedEntities:ee}=Ge.current;(vt.size!==ee.size||Array.from(vt).some(ue=>!ee.has(ue)))&&(Ge.current.requestedEntities=vt,G(),ve())},[Ge,G,ve]);return{entities:C,loading:Re,error:Ne,requestEntities:Me}}function we({rootEntityRefs:Ct,filter:{maxDepth:Ge=Number.POSITIVE_INFINITY,relations:C,kinds:Fe}={}}){const{entities:ve,loading:M,error:G,requestEntities:Re}=Ce();return(0,t.useEffect)(()=>{const Ne=new Set([...Ct]),Me=new Set;let Xe=[...Ct],vt=0;for(;Xe.length>0&&(!isFinite(Ge)||vt<Ge);){const ee=Xe;for(Xe=[];ee.length>0;){const ue=ee.shift(),Pe=ve[ue];if(Me.add(ue),Pe&&Pe.relations)for(const at of Pe.relations)(!C||C.includes(at.type))&&(!Fe||Fe.some(bt=>at.targetRef.startsWith(`${bt.toLocaleLowerCase("en-US")}:`)))&&(Me.has(at.targetRef)||(Xe.push(at.targetRef),Ne.add(at.targetRef)))}++vt}Re([...Ne])},[ve,Ct,Ge,C,Fe,Re]),{entities:ve,loading:M,error:G}}function nt({rootEntityRefs:Ct,maxDepth:Ge=Number.POSITIVE_INFINITY,unidirectional:C=!0,mergeRelations:Fe=!0,kinds:ve,relations:M,onNodeClick:G,relationPairs:Re=c}){const[Ne,Me]=(0,t.useState)({}),{entities:Xe,loading:vt,error:ee}=we({rootEntityRefs:Ct,filter:{maxDepth:Ge,kinds:ve,relations:M}});return(0,j.Z)(()=>{var ue;if(!Xe||Object.keys(Xe).length===0){Me({});return}const Pe=Object.entries(Xe).map(([on,zt])=>{var Le,Pt,Rt;const sn=Ct.includes(on),un={id:on,title:(Pt=(Le=zt.metadata)==null?void 0:Le.title)!=null?Pt:void 0,kind:zt.kind,name:zt.metadata.name,namespace:(Rt=zt.metadata.namespace)!=null?Rt:n.zG,focused:sn,color:sn?"secondary":"primary"};return G&&(un.onClick=Lt=>G(un,Lt)),un}),at=[],bt=new Set,Wt=[...Ct];for(;Wt.length>0;){const on=Wt.pop(),zt=Xe[on];bt.add(on),zt&&((ue=zt==null?void 0:zt.relations)==null||ue.forEach(Le=>{var Pt;if(!!Xe[Le.targetRef]&&!(M&&!M.includes(Le.type))&&!(ve&&!ve.some(Rt=>Le.targetRef.startsWith(`${Rt.toLocaleLowerCase("en-US")}:`)))){if(!C||!bt.has(Le.targetRef))if(Fe){const Rt=(Pt=Re.find(([un,Lt])=>un===Le.type||Lt===Le.type))!=null?Pt:[Le.type],[sn]=Rt;at.push({from:sn===Le.type?on:Le.targetRef,to:sn===Le.type?Le.targetRef:on,relations:Rt,label:"visible"})}else at.push({from:on,to:Le.targetRef,relations:[Le.type],label:"visible"});bt.has(Le.targetRef)||(Wt.push(Le.targetRef),bt.add(Le.targetRef))}}))}Me({nodes:Pe,edges:at})},100,[Xe,Ct,ve,M,C,Fe,G,Re]),{loading:vt,error:ee,...Ne}}const ot=(0,d.Z)(Ct=>({progress:{position:"absolute",left:"50%",top:"50%",marginLeft:"-20px",marginTop:"-20px"},container:{position:"relative",width:"100%",display:"flex",flexDirection:"column"},graph:{width:"100%",flex:1,"& path[marker-end]":{transition:"filter 0.1s ease-in-out"},"& path[marker-end]:hover":{filter:`drop-shadow(2px 2px 4px ${Ct.palette.primary.dark});`},"& g[data-testid=label]":{transition:"transform 0s"}}}),{name:"PluginCatalogGraphEntityRelationsGraph"}),$t=Ct=>{const{rootEntityNames:Ge,maxDepth:C=2,unidirectional:Fe=!0,mergeRelations:ve=!0,kinds:M,relations:G,direction:Re=O.LEFT_RIGHT,onNodeClick:Ne,relationPairs:Me=c,className:Xe,zoom:vt="enabled",renderNode:ee,renderLabel:ue,curve:Pe}=Ct,at=(0,a.Z)(),bt=ot(),Wt=(0,t.useMemo)(()=>(Array.isArray(Ge)?Ge:[Ge]).map(sn=>(0,n.eE)(sn)),[Ge]),on=(0,m.h_)(m.VE),{loading:zt,error:Le,nodes:Pt,edges:Rt}=nt({rootEntityRefs:Wt,maxDepth:C,unidirectional:Fe,mergeRelations:ve,kinds:M,relations:G,onNodeClick:Ne,relationPairs:Me});return(0,t.useEffect)(()=>{Le&&on.post(Le)},[on,Le]),t.createElement("div",{className:b()(bt.container,Xe)},zt&&t.createElement(l.Z,{className:bt.progress}),Pt&&Rt&&t.createElement(i.mn,{nodes:Pt,edges:Rt,renderNode:ee||R,renderLabel:ue||D,direction:Re,className:bt.graph,paddingX:at.spacing(4),paddingY:at.spacing(4),labelPosition:i.NX.LabelPosition.RIGHT,labelOffset:at.spacing(1),zoom:vt,curve:Pe}))},ct=(0,m.NT)({id:"catalog-graph"}),St=(0,m.x8)({id:"catalog-entity",params:["namespace","kind","name"],optional:!0}),xt=(0,m.rx)({id:"catalog-graph",routes:{catalogGraph:ct},externalRoutes:{catalogEntity:St}}),Q=xt.provide((0,m.CO)({name:"EntityCatalogGraphCard",component:{lazy:()=>e.e(9962).then(e.bind(e,99962)).then(Ct=>Ct.CatalogGraphCard)}})),pn=xt.provide((0,m.P4)({name:"CatalogGraphPage",component:()=>e.e(3607).then(e.bind(e,13607)).then(Ct=>Ct.CatalogGraphPage),mountPoint:ct}))},93316:function(Nt,u,e){e.d(u,{gA:function(){return Mn},vr:function(){return sn},wS:function(){return Rt}});var n=e(30705),i=e(49462),m=e(73495),d=e(89393),a=e(49431),l=e(82717),y=e.n(l),b=e(49558),t=e(90436),_=e(7089),g=e(77277),F=e(4614),j=e(11776),V=e(38402),re=e(86136),w=e(49378),A=e(9520),D=e(61837),f=e(82113),x=e(60905),R=e(86619),c=e(74828),O=e(94339),T=e(32552),Ce=e(24579),we=e(95544),nt=e(21324),ot=e(34546),$t=e(5806),ct=e(31377),St=e(67471),xt=e(31625),Q=e(2784),pn=e(79692),Ct=e(4989),Ge=e(84905),C=e(38016),Fe=e(39412),ve=e(96795),M=e.n(ve),G=e(63955),Re=e(88013),Ne=e(72847),Me=e(76635),Xe=e.n(Me),vt=e(32272),ee=e(64279),ue=e(34520);const Pe=(0,n.T0)({id:"plugin.catalog-import.service"}),at=(Ke,Je)=>{const Qe=Ke.github.byUrl(Je);if(!Qe)return;const{name:oe,owner:fe}=y()(Je);return{repo:oe,owner:fe,githubIntegrationConfig:Qe.config}};function bt(Ke){const{ref:Je,...Qe}=Ke;return{inputRef:Je,...Qe}}function Wt(Ke){var Je;return(Je=Ke.getOptionalString("catalog.import.entityFilename"))!=null?Je:"catalog-info.yaml"}function on(Ke){var Je;return(Je=Ke.getOptionalString("catalog.import.pullRequestBranchName"))!=null?Je:"backstage-integration"}class zt{constructor(Je){this.discoveryApi=Je.discoveryApi,this.scmAuthApi=Je.scmAuthApi,this.identityApi=Je.identityApi,this.scmIntegrationsApi=Je.scmIntegrationsApi,this.catalogApi=Je.catalogApi,this.configApi=Je.configApi}async analyzeUrl(Je){var Qe;if(new URL(Je).pathname.match(/\.ya?ml$/)||((Qe=new URL(Je).searchParams.get("path"))==null?void 0:Qe.match(/.ya?ml$/))){const We=await this.catalogApi.addLocation({type:"url",target:Je,dryRun:!0});return{type:"locations",locations:[{exists:We.exists,target:We.location.target,entities:We.entities.map(Be=>{var Ze;return{kind:Be.kind,namespace:(Ze=Be.metadata.namespace)!=null?Ze:"default",name:Be.metadata.name}})}]}}if(!at(this.scmIntegrationsApi,Je)){const We=this.scmIntegrationsApi.byUrl(Je),Be=Wt(this.configApi);throw We?new Error(`The ${We.title} integration only supports full URLs to ${Be} files. Did you try to pass in the URL of a directory instead?`):new Error(`This URL was not recognized as a valid GitHub URL because there was no configured integration that matched the given host name. You could try to paste the full URL to a ${Be} file instead.`)}const fe=await this.analyzeLocation({repo:Je});if(fe.existingEntityFiles.length>0){const We=fe.existingEntityFiles.reduce((Be,Ze)=>{var gt;return Be[Ze.location.target]={target:Ze.location.target,exists:Ze.isRegistered,entities:[...Ze.location.target in Be?Be[Ze.location.target].entities:[],{name:Ze.entity.metadata.name,namespace:(gt=Ze.entity.metadata.namespace)!=null?gt:"default",kind:Ze.entity.kind}]},Be},{});return{type:"locations",locations:Object.values(We)}}return{type:"repository",integrationType:"github",url:Je,generatedEntities:fe.generateEntities.map(We=>We.entity)}}async preparePullRequest(){var Je;const Qe=(Je=this.configApi.getOptionalString("app.title"))!=null?Je:"Backstage",oe=this.configApi.getString("app.baseUrl");return{title:`Add ${Wt(this.configApi)} config file`,body:`This pull request adds a **Backstage entity metadata file** to this repository so that the component can be added to the [${Qe} software catalog](${oe}).

After this pull request is merged, the component will become available.

For more information, read an [overview of the Backstage software catalog](https://backstage.io/docs/features/software-catalog/software-catalog-overview).`}}async submitPullRequest(Je){const{repositoryUrl:Qe,fileContent:oe,title:fe,body:We}=Je,Be=at(this.scmIntegrationsApi,Qe);if(Be)return await this.submitGitHubPrToRepo({...Be,repositoryUrl:Qe,fileContent:oe,title:fe,body:We});throw new Error("unimplemented!")}async analyzeLocation(Je){const{token:Qe}=await this.identityApi.getCredentials(),oe=await fetch(`${await this.discoveryApi.getBaseUrl("catalog")}/analyze-location`,{headers:{"Content-Type":"application/json",...Qe&&{Authorization:`Bearer ${Qe}`}},method:"POST",body:JSON.stringify({location:{type:"url",target:Je.repo},...this.configApi.getOptionalString("catalog.import.entityFilename")&&{catalogFilename:this.configApi.getOptionalString("catalog.import.entityFilename")}})}).catch(We=>{throw new Error(`Failed to generate entity definitions, ${We.message}`)});if(!oe.ok)throw new Error(`Failed to generate entity definitions. Received http response ${oe.status}: ${oe.statusText}`);return await oe.json()}async submitGitHubPrToRepo(Je){const{owner:Qe,repo:oe,title:fe,body:We,fileContent:Be,repositoryUrl:Ze,githubIntegrationConfig:gt}=Je,{token:It}=await this.scmAuthApi.getCredentials({url:Ze,additionalScope:{repoWrite:!0}}),jt=new d.v({auth:It,baseUrl:gt.apiBaseUrl}),Zt=on(this.configApi),Ot=Wt(this.configApi),Vt=await jt.repos.get({owner:Qe,repo:oe}).catch(hn=>{throw new Error(Le("Couldn't fetch repo data",hn))}),mn=await jt.git.getRef({owner:Qe,repo:oe,ref:`heads/${Vt.data.default_branch}`}).catch(hn=>{throw new Error(Le("Couldn't fetch default branch data",hn))});return await jt.git.createRef({owner:Qe,repo:oe,ref:`refs/heads/${Zt}`,sha:mn.data.object.sha}).catch(hn=>{throw new Error(Le(`Couldn't create a new branch with name '${Zt}'`,hn))}),await jt.repos.createOrUpdateFileContents({owner:Qe,repo:oe,path:Ot,message:fe,content:a.DS.encode(Be),branch:Zt}).catch(hn=>{throw new Error(Le(`Couldn't create a commit with ${Ot} file added`,hn))}),{link:(await jt.pulls.create({owner:Qe,repo:oe,title:fe,head:Zt,body:We,base:Vt.data.default_branch}).catch(hn=>{throw new Error(Le(`Couldn't create a pull request for ${Zt} branch`,hn))})).data.html_url,location:`https://${gt.host}/${Qe}/${oe}/blob/${Vt.data.default_branch}/${Ot}`}}}function Le(Ke,Je){return`${Ke}, received http response status code ${Je.status}: ${Je.message}`}const Pt=(0,n.NT)({id:"catalog-import"}),Rt=(0,n.rx)({id:"catalog-import",apis:[(0,n.ni)({api:Pe,deps:{discoveryApi:n.NW,scmAuthApi:i.Om,identityApi:n.$4,scmIntegrationsApi:i.q3,catalogApi:m.Ah,configApi:n.Ds},factory:({discoveryApi:Ke,scmAuthApi:Je,identityApi:Qe,scmIntegrationsApi:oe,catalogApi:fe,configApi:We})=>new zt({discoveryApi:Ke,scmAuthApi:Je,scmIntegrationsApi:oe,identityApi:Qe,catalogApi:fe,configApi:We})})],routes:{importPage:Pt}}),sn=Rt.provide((0,n.P4)({name:"CatalogImportPage",component:()=>e.e(5366).then(e.bind(e,85366)).then(Ke=>Ke.ImportPage),mountPoint:Pt}));function un(){const Ke=(0,n.h_)(n.Ds);return Wt(Ke)}const Lt=Ke=>{const{exampleLocationUrl:Je="https://github.com/backstage/backstage/blob/master/catalog-info.yaml",exampleRepositoryUrl:Qe="https://github.com/backstage/backstage"}=Ke,oe=(0,n.h_)(n.Ds),fe=oe.getOptional("app.title")||"Backstage",We=(0,n.h_)(Pe),Be=oe.has("integrations.github"),Ze=un();return Q.createElement(b.rJ,{title:"Register an existing component",titleTypographyProps:{component:"h3"},deepLink:{title:"Learn more about the Software Catalog",link:"https://backstage.io/docs/features/software-catalog/software-catalog-overview"}},Q.createElement(t.Z,{variant:"body2",paragraph:!0},"Enter the URL to your source code repository to add it to ",fe,"."),Q.createElement(t.Z,{component:"h4",variant:"h6"},"Link to an existing entity file"),Q.createElement(t.Z,{variant:"subtitle2",color:"textSecondary",paragraph:!0},"Example: ",Q.createElement("code",null,Je)),Q.createElement(t.Z,{variant:"body2",paragraph:!0},"The wizard analyzes the file, previews the entities, and adds them to the ",fe," catalog."),Be&&Q.createElement(Q.Fragment,null,Q.createElement(t.Z,{component:"h4",variant:"h6"},"Link to a repository"," ",Q.createElement(_.Z,{label:"GitHub only",variant:"outlined",size:"small"})),Q.createElement(t.Z,{variant:"subtitle2",color:"textSecondary",paragraph:!0},"Example: ",Q.createElement("code",null,Qe)),Q.createElement(t.Z,{variant:"body2",paragraph:!0},"The wizard discovers all ",Q.createElement("code",null,Ze)," files in the repository, previews the entities, and adds them to the ",fe," ","catalog."),We.preparePullRequest&&Q.createElement(t.Z,{variant:"body2",paragraph:!0},"If no entities are found, the wizard will prepare a Pull Request that adds an example ",Q.createElement("code",null,Ze)," and prepares the ",fe," catalog to load all entities as soon as the Pull Request is merged.")))};function Ht(Ke){return{activeFlow:"unknown",activeState:"analyze",analysisUrl:Ke,previousStates:[]}}function nn(Ke,Je){switch(Je.type){case"onAnalysis":{if(Ke.activeState!=="analyze")return Ke;const{activeState:Qe,previousStates:oe}=Ke,[fe,We,Be,Ze]=Je.args;return{...Ke,analysisUrl:We,activeFlow:fe,analyzeResult:Be,prepareResult:Ze==null?void 0:Ze.prepareResult,activeState:(Ze==null?void 0:Ze.prepareResult)===void 0?"prepare":"review",previousStates:oe.concat(Qe)}}case"onPrepare":{if(Ke.activeState!=="prepare")return Ke;const{activeState:Qe,previousStates:oe}=Ke,[fe,We]=Je.args;return{...Ke,prepareResult:fe,activeState:"review",previousStates:We!=null&&We.notRepeatable?[]:oe.concat(Qe)}}case"onReview":{if(Ke.activeState!=="review")return Ke;const{activeState:Qe,previousStates:oe}=Ke,[fe]=Je.args;return{...Ke,reviewResult:fe,activeState:"finish",previousStates:oe.concat(Qe)}}case"onGoBack":{const{activeState:Qe,previousStates:oe}=Ke;return{...Ke,activeState:oe.length>0?oe[oe.length-1]:Qe,previousStates:oe.slice(0,oe.length-1)}}case"onReset":return{...Ht(Je.initialUrl),prepareResult:Ke.prepareResult};default:throw new Error}}const Te=Ke=>{const[Je,Qe]=(0,Q.useReducer)(nn,Ke==null?void 0:Ke.initialUrl,Ht),{activeFlow:oe,activeState:fe,analysisUrl:We,previousStates:Be}=Je;return{activeFlow:oe,activeState:fe,activeStepNumber:["analyze","prepare","review","finish"].indexOf(fe),analysisUrl:We,analyzeResult:Je.analyzeResult,prepareResult:Je.prepareResult,reviewResult:Je.reviewResult,onAnalysis:(Ze,gt,It,jt)=>Qe({type:"onAnalysis",args:[Ze,gt,It,jt]}),onPrepare:(Ze,gt)=>Qe({type:"onPrepare",args:[Ze,gt]}),onReview:Ze=>Qe({type:"onReview",args:[Ze]}),onGoBack:Be.length>0?()=>Qe({type:"onGoBack"}):void 0,onReset:()=>Qe({type:"onReset",initialUrl:Ke==null?void 0:Ke.initialUrl})}},st=(0,pn.Z)(Ke=>({wrapper:{marginTop:Ke.spacing(1),marginRight:Ke.spacing(1),position:"relative"},buttonProgress:{position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},button:{marginTop:Ke.spacing(1),marginRight:Ke.spacing(1)}})),le=Ke=>{const{loading:Je,...Qe}=Ke,oe=st();return Q.createElement("div",{className:oe.wrapper},Q.createElement(g.Z,{color:"primary",variant:"contained",...Qe,disabled:Ke.disabled||Ke.loading}),Ke.loading&&Q.createElement(F.Z,{size:"1.5rem",className:oe.buttonProgress}),Ke.loading)},ie=Ke=>{const Je=st();return Q.createElement(g.Z,{variant:"outlined",className:Je.button,...Ke},Ke.children||"Back")},Z=(0,pn.Z)(Ke=>({nested:{paddingLeft:Ke.spacing(4)}}));function B(Ke){return Ke.sort((Je,Qe)=>(0,m.$3)(Je).localeCompare((0,m.$3)(Qe)))}const _e=Ke=>{const{locations:Je,collapsed:Qe=!1,locationListItemIcon:oe,onItemClick:fe,firstListItem:We,withLinks:Be=!1}=Ke,Ze=(0,n.qD)(),gt=Z(),[It,jt]=(0,Q.useState)([]),Zt=Ot=>{jt(Vt=>Vt.includes(Ot)?Vt.filter(mn=>mn!==Ot):Vt.concat(Ot))};return Q.createElement(j.Z,null,We,Je.map(Ot=>Q.createElement(Q.Fragment,{key:Ot.target},Q.createElement(V.Z,{dense:!0,button:Boolean(fe),onClick:()=>fe==null?void 0:fe(Ot.target)},Q.createElement(re.Z,null,oe(Ot.target)),Q.createElement(w.Z,{primary:Ot.target,secondary:`Entities: ${Ot.entities.length}`}),Qe&&Q.createElement(A.Z,null,Q.createElement(D.Z,{edge:"end",onClick:()=>Zt(Ot.target)},It.includes(Ot.target)?Q.createElement(Ge.Z,null):Q.createElement(C.Z,null)))),Q.createElement(f.Z,{in:!Qe||It.includes(Ot.target),timeout:"auto",unmountOnExit:!0},Q.createElement(j.Z,{component:"div",disablePadding:!0,dense:!0},B(Ot.entities).map(Vt=>{var mn;const bn=(mn=Ze.getSystemIcon(`kind:${Vt.kind.toLocaleLowerCase("en-US")}`))!=null?mn:Fe.Z;return Q.createElement(V.Z,{key:(0,m.$3)(Vt),className:gt.nested,...Be?{component:m.dx,entityRef:Vt,button:Be}:{}},Q.createElement(re.Z,null,Q.createElement(bn,null)),Q.createElement(w.Z,{primary:(0,m.$3)(Vt)}))}))))))},de=({prepareResult:Ke,onReset:Je})=>{const Qe=Q.createElement(x.Z,{container:!0,spacing:0},Q.createElement(ie,{onClick:Je},"Register another"));if(Ke.type==="repository")return Q.createElement(Q.Fragment,null,Q.createElement(t.Z,{paragraph:!0},"The following Pull Request has been opened:"," ",Q.createElement(b.rU,{to:Ke.pullRequest.url,target:"_blank",rel:"noreferrer"},Ke.pullRequest.url)),Q.createElement(t.Z,{paragraph:!0},"Your entities will be imported as soon as the Pull Request is merged."),Qe);const[oe,fe]=M()(Ke.locations,We=>We.exists);return Q.createElement(Q.Fragment,null,fe.length>0&&Q.createElement(Q.Fragment,null,Q.createElement(t.Z,null,"The following entities have been added to the catalog:"),Q.createElement(_e,{locations:fe,locationListItemIcon:()=>Q.createElement(Ct.Z,null),withLinks:!0})),oe.length>0&&Q.createElement(Q.Fragment,null,Q.createElement(t.Z,null,"A refresh was triggered for the following locations:"),Q.createElement(_e,{locations:oe,locationListItemIcon:()=>Q.createElement(Ct.Z,null),withLinks:!0})),Qe)},Ie=Ke=>{const{onAnalysis:Je,analysisUrl:Qe="",disablePullRequest:oe=!1,exampleLocationUrl:fe="https://github.com/backstage/backstage/blob/master/catalog-info.yaml"}=Ke,We=(0,n.h_)(n.VE),Be=(0,n.h_)(Pe),{register:Ze,handleSubmit:gt,formState:{errors:It},watch:jt}=(0,G.cI)({mode:"onTouched",defaultValues:{url:Qe}}),[Zt,Ot]=(0,Q.useState)(!1),[Vt,mn]=(0,Q.useState)(void 0),bn=(0,Q.useCallback)(async({url:hn})=>{var wn,gn,Tn;Ot(!0);try{const kn=await Be.analyzeUrl(hn);switch(kn.type){case"repository":!oe&&kn.generatedEntities.length>0?Je("no-location",hn,kn):(mn("Couldn't generate entities for your repository"),Ot(!1));break;case"locations":{kn.locations.length===1?Je("single-location",hn,kn,{prepareResult:kn}):kn.locations.length>1?Je("multiple-locations",hn,kn):(mn("There are no entities at this location"),Ot(!1));break}default:{const $n=`Received unknown analysis result of type ${kn.type}. Please contact the support team.`;mn($n),Ot(!1),We.post(new Error($n));break}}}catch(kn){mn((Tn=(gn=(wn=kn==null?void 0:kn.data)==null?void 0:wn.error)==null?void 0:gn.message)!=null?Tn:kn.message),Ot(!1)}},[Be,oe,We,Je]);return Q.createElement("form",{onSubmit:gt(bn)},Q.createElement(R.Z,{...bt(Ze("url",{required:!0,validate:{httpsValidator:hn=>typeof hn=="string"&&hn.match(/^http[s]?:\/\//)!==null||"Must start with http:// or https://."}})),fullWidth:!0,id:"url",label:"Repository URL",placeholder:fe,helperText:"Enter the full path to your entity file to start tracking your component",margin:"normal",variant:"outlined",error:Boolean(It.url),required:!0}),It.url&&Q.createElement(c.Z,{error:!0},It.url.message),Vt&&Q.createElement(c.Z,{error:!0},Vt),Q.createElement(x.Z,{container:!0,spacing:0},Q.createElement(le,{disabled:Boolean(It.url)||!jt("url"),loading:Zt,type:"submit"},"Analyze")))},ze=Ke=>{const{name:Je,options:Qe,required:oe,errors:fe,rules:We,loading:Be=!1,loadingText:Ze,helperText:gt,errorHelperText:It,textFieldProps:jt={}}=Ke;return Q.createElement(G.Qr,{name:Je,rules:We,render:({field:{onChange:Zt}})=>Q.createElement(Re.ZP,{loading:Be,loadingText:Ze,options:Qe||[],autoSelect:!0,freeSolo:!0,onChange:(Ot,Vt)=>Zt(Vt),renderInput:Ot=>Q.createElement(R.Z,{...Ot,helperText:(fe==null?void 0:fe[Je])&&It||gt,error:Boolean(fe==null?void 0:fe[Je]),margin:"normal",variant:"outlined",required:oe,InputProps:{...Ot.InputProps,endAdornment:Q.createElement(Q.Fragment,null,Be?Q.createElement(F.Z,{color:"inherit",size:"1em"}):null,Ot.InputProps.endAdornment)},...jt})})})},rt=Ke=>{const{defaultValues:Je,onSubmit:Qe,render:oe}=Ke,fe=(0,G.cI)({mode:"onTouched",defaultValues:Je}),{handleSubmit:We,watch:Be,control:Ze,register:gt,formState:It,setValue:jt}=fe;return Q.createElement(G.RV,{...fe},Q.createElement("form",{onSubmit:We(Qe)},oe({values:Be(),formState:It,register:gt,control:Ze,setValue:jt})))},kt=Ke=>{const{repositoryUrl:Je,entities:Qe,classes:oe}=Ke,fe=un();return Q.createElement(O.Z,{variant:"outlined",className:oe==null?void 0:oe.card},Q.createElement(T.Z,{title:Q.createElement("code",null,`${(0,Me.trimEnd)(Je,"/")}/${fe}`)}),Q.createElement(Ce.Z,{className:oe==null?void 0:oe.cardContent},Q.createElement(b.Oi,{text:Qe.map(We=>Ne.ZP.stringify(We)).join(`---
`).trim(),language:"yaml"})))},He=Ke=>{const{title:Je,description:Qe,classes:oe}=Ke;return Q.createElement(O.Z,{variant:"outlined",className:oe==null?void 0:oe.card},Q.createElement(T.Z,{title:Je,subheader:"Create a new Pull Request"}),Q.createElement(Ce.Z,{className:oe==null?void 0:oe.cardContent},Q.createElement(b.SA,{content:Qe})))},z=(0,pn.Z)(Ke=>({previewCard:{marginTop:Ke.spacing(1)},previewCardContent:{paddingTop:0}}));function be(Ke,Je,Qe){return Ke.map(oe=>({...oe,apiVersion:oe.apiVersion,kind:oe.kind,metadata:{...oe.metadata,name:Je},spec:{...oe.spec,...Qe?{owner:Qe}:{}}}))}const je=Ke=>{var Je,Qe,oe,fe,We,Be;const{analyzeResult:Ze,onPrepare:gt,onGoBack:It,renderFormFields:jt}=Ke,Zt=z(),Ot=(0,n.h_)(m.Ah),Vt=(0,n.h_)(Pe),mn=(0,n.h_)(n.VE),[bn,hn]=(0,Q.useState)(!1),[wn,gn]=(0,Q.useState)(),Tn=un(),{loading:kn,value:$n,error:Cn}=(0,ee.default)(()=>Vt.preparePullRequest(),[Vt.preparePullRequest]);(0,Q.useEffect)(()=>{Cn&&mn.post(Cn)},[Cn,mn]);const{loading:zn,value:Sn}=(0,ee.default)(async()=>(await Ot.getEntities({filter:{kind:"group"}})).items.map(jn=>(0,m.$3)(jn,{defaultKind:"group"})).sort()),Zn=(0,Q.useCallback)(async Ln=>{hn(!0);try{const jn=await Vt.submitPullRequest({repositoryUrl:Ze.url,title:Ln.title,body:Ln.body,fileContent:be(Ze.generatedEntities,Ln.componentName,Ln.owner).map(Xn=>Ne.ZP.stringify(Xn)).join(`---
`)});gt({type:"repository",url:Ze.url,integrationType:Ze.integrationType,pullRequest:{url:jn.link},locations:[{target:jn.location,entities:be(Ze.generatedEntities,Ln.componentName,Ln.owner).map(Xn=>({kind:Xn.kind,namespace:Xn.metadata.namespace,name:Xn.metadata.name}))}]},{notRepeatable:!0})}catch(jn){(0,vt.BD)(jn),gn(jn.message),hn(!1)}},[Ze.generatedEntities,Ze.integrationType,Ze.url,Vt,gt]);return Q.createElement(Q.Fragment,null,Q.createElement(t.Z,null,"You entered a link to a ",Ze.integrationType," repository but a"," ",Q.createElement("code",null,Tn)," could not be found. Use this form to open a Pull Request that creates one."),!kn&&Q.createElement(rt,{onSubmit:Zn,defaultValues:{title:(Je=$n==null?void 0:$n.title)!=null?Je:"",body:(Qe=$n==null?void 0:$n.body)!=null?Qe:"",owner:((fe=(oe=Ze.generatedEntities[0])==null?void 0:oe.spec)==null?void 0:fe.owner)||"",componentName:((Be=(We=Ze.generatedEntities[0])==null?void 0:We.metadata)==null?void 0:Be.name)||"",useCodeowners:!1},render:({values:Ln,formState:jn,register:Xn,setValue:or})=>Q.createElement(Q.Fragment,null,jt({values:Ln,formState:jn,register:Xn,setValue:or,groups:Sn!=null?Sn:[],groupsLoading:zn}),Q.createElement(we.Z,{marginTop:2},Q.createElement(t.Z,{variant:"h6"},"Preview Pull Request")),Q.createElement(He,{title:Ln.title,description:Ln.body,classes:{card:Zt.previewCard,cardContent:Zt.previewCardContent}}),Q.createElement(we.Z,{marginTop:2,marginBottom:1},Q.createElement(t.Z,{variant:"h6"},"Preview Entities")),Q.createElement(kt,{entities:be(Ze.generatedEntities,Ln.componentName,Ln.owner),repositoryUrl:Ze.url,classes:{card:Zt.previewCard,cardContent:Zt.previewCardContent}}),wn&&Q.createElement(c.Z,{error:!0},wn),Q.createElement(x.Z,{container:!0,spacing:0},It&&Q.createElement(ie,{onClick:It,disabled:bn}),Q.createElement(le,{type:"submit",disabled:Boolean(jn.errors.title||jn.errors.body||jn.errors.owner),loading:bn},"Create PR")))}))},ut=({analyzeResult:Ke,prepareResult:Je,onPrepare:Qe,onGoBack:oe})=>{const[fe,We]=(0,Q.useState)((Je==null?void 0:Je.locations.map(Zt=>Zt.target))||[]),[Be,Ze]=M()(Ke==null?void 0:Ke.locations,Zt=>Zt.exists),gt=(0,Q.useCallback)(async()=>{Qe({type:"locations",locations:Ze.filter(Zt=>fe.includes(Zt.target))})},[Ze,Qe,fe]),It=Zt=>{We(Ot=>Ot.includes(Zt)?Ot.filter(Vt=>Vt!==Zt):Ot.concat(Zt))},jt=()=>{We(Zt=>Zt.length<Ze.length?Ze.map(Ot=>Ot.target):[])};return Q.createElement(Q.Fragment,null,Ze.length>0&&Q.createElement(Q.Fragment,null,Q.createElement(t.Z,null,"Select one or more locations that are present in your git repository:"),Q.createElement(_e,{firstListItem:Q.createElement(V.Z,{dense:!0,button:!0,onClick:jt},Q.createElement(re.Z,null,Q.createElement(nt.Z,{edge:"start",checked:fe.length===Ze.length,indeterminate:fe.length>0&&fe.length<Ze.length,tabIndex:-1,disableRipple:!0})),Q.createElement(w.Z,{primary:"Select All"})),onItemClick:It,locations:Ze,locationListItemIcon:Zt=>Q.createElement(nt.Z,{edge:"start",checked:fe.includes(Zt),tabIndex:-1,disableRipple:!0}),collapsed:!0})),Be.length>0&&Q.createElement(Q.Fragment,null,Q.createElement(t.Z,null,"These locations already exist in the catalog:"),Q.createElement(_e,{locations:Be,locationListItemIcon:()=>Q.createElement(Ct.Z,null),withLinks:!0,collapsed:!0})),Q.createElement(x.Z,{container:!0,spacing:0},oe&&Q.createElement(ie,{onClick:oe}),Q.createElement(le,{disabled:fe.length===0,onClick:gt},"Review")))},Et=({prepareResult:Ke,onReview:Je,onGoBack:Qe})=>{const oe=(0,n.h_)(m.Ah),We=(0,n.h_)(n.Ds).getOptional("app.title")||"Backstage",[Be,Ze]=(0,Q.useState)(!1),[gt,It]=(0,Q.useState)(),jt=!!(Ke.type==="locations"&&Ke.locations.some(Ot=>Ot.exists)),Zt=(0,Q.useCallback)(async()=>{Ze(!0);try{let Ot=new Array;Ke.type==="locations"&&(Ot=await Promise.all(Ke.locations.filter(mn=>mn.exists).map(async mn=>{var bn;const hn=(0,ue.eE)((bn=mn.entities[0])!=null?bn:mn);return await oe.refreshEntity(hn),{target:mn.target}})));const Vt=await Promise.all(Ke.locations.filter(mn=>!mn.exists).map(async mn=>{const bn=await oe.addLocation({type:"url",target:mn.target});return{target:bn.location.target,entities:bn.entities}}));Je({...Ke,refreshed:Ot,locations:Vt})}catch(Ot){(0,vt.BD)(Ot),Ke.type==="repository"&&Ot.message.startsWith("Location was added but has no entities specified yet")?Je({...Ke,locations:Ke.locations.map(Vt=>({target:Vt.target,entities:[]}))}):(It(Ot.message),Ze(!1))}},[Ke,Je,oe]);return Q.createElement(Q.Fragment,null,Ke.type==="repository"&&Q.createElement(Q.Fragment,null,Q.createElement(t.Z,{paragraph:!0},"The following Pull Request has been opened:"," ",Q.createElement(b.rU,{to:Ke.pullRequest.url,target:"_blank",rel:"noopener noreferrer"},Ke.pullRequest.url)),Q.createElement(t.Z,{paragraph:!0},"You can already import the location and ",We," will fetch the entities as soon as the Pull Request is merged.")),Q.createElement(t.Z,null,jt?"The following locations already exist in the catalog:":"The following entities will be added to the catalog:"),Q.createElement(_e,{locations:Ke.locations,locationListItemIcon:()=>Q.createElement(Ct.Z,null)}),gt&&Q.createElement(c.Z,{error:!0},gt),Q.createElement(x.Z,{container:!0,spacing:0},Qe&&Q.createElement(ie,{onClick:Qe,disabled:Be}),Q.createElement(le,{disabled:Be,loading:Be,onClick:()=>Zt()},jt?"Refresh":"Import")))};function Mt(Ke,Je){switch(Ke){case"single-location":return{...Je,prepare:()=>({stepLabel:Q.createElement(ot.Z,{optional:Q.createElement(t.Z,{variant:"caption"},"Discovered Locations: 1")},"Select Locations"),content:Q.createElement(Q.Fragment,null)})};case"multiple-locations":return{...Je,prepare:(Qe,oe)=>Qe.analyzeResult.type!=="locations"?Je.prepare(Qe,oe):{stepLabel:Q.createElement(ot.Z,{optional:Q.createElement(t.Z,{variant:"caption"},"Discovered Locations: ",Qe.analyzeResult.locations.length)},"Select Locations"),content:Q.createElement(ut,{analyzeResult:Qe.analyzeResult,prepareResult:Qe.prepareResult,onPrepare:Qe.onPrepare,onGoBack:Qe.onGoBack})}};case"no-location":return{...Je,prepare:(Qe,oe)=>Qe.analyzeResult.type!=="repository"?Je.prepare(Qe,oe):{stepLabel:Q.createElement(ot.Z,null,"Create Pull Request"),content:Q.createElement(je,{analyzeResult:Qe.analyzeResult,onPrepare:Qe.onPrepare,onGoBack:Qe.onGoBack,renderFormFields:({values:fe,setValue:We,formState:Be,groupsLoading:Ze,groups:gt,register:It})=>Q.createElement(Q.Fragment,null,Q.createElement(we.Z,{marginTop:2},Q.createElement(t.Z,{variant:"h6"},"Pull Request Details")),Q.createElement(R.Z,{...bt(It("title",{required:!0})),label:"Pull Request Title",placeholder:"Add Backstage catalog entity descriptor files",margin:"normal",variant:"outlined",fullWidth:!0,error:Boolean(Be.errors.title),required:!0}),Q.createElement(R.Z,{...bt(It("body",{required:!0})),label:"Pull Request Body",placeholder:"A describing text with Markdown support",margin:"normal",variant:"outlined",fullWidth:!0,error:Boolean(Be.errors.body),multiline:!0,required:!0}),Q.createElement(we.Z,{marginTop:2},Q.createElement(t.Z,{variant:"h6"},"Entity Configuration")),Q.createElement(R.Z,{...bt(It("componentName",{required:!0})),label:"Name of the created component",placeholder:"my-component",margin:"normal",variant:"outlined",fullWidth:!0,error:Boolean(Be.errors.componentName),required:!0}),!fe.useCodeowners&&Q.createElement(ze,{name:"owner",errors:Be.errors,options:gt||[],loading:Ze,loadingText:"Loading groups\u2026",helperText:"Select an owner from the list or enter a reference to a Group or a User",errorHelperText:"required value",textFieldProps:{label:"Entity Owner",placeholder:"my-group"},rules:{required:!0},required:!0}),Q.createElement($t.Z,{control:Q.createElement(nt.Z,{...bt(It("useCodeowners")),onChange:(jt,Zt)=>{Zt&&We("owner","")}}),label:Q.createElement(Q.Fragment,null,"Use ",Q.createElement("em",null,"CODEOWNERS")," file as Entity Owner")}),Q.createElement(c.Z,null,"WARNING: This may fail if no CODEOWNERS file is found at the target location."))})}};default:return Je}}const rn={analyze:(Ke,{apis:Je})=>({stepLabel:Q.createElement(ot.Z,null,"Select URL"),content:Q.createElement(Ie,{key:"analyze",analysisUrl:Ke.analysisUrl,onAnalysis:Ke.onAnalysis,disablePullRequest:!Je.catalogImportApi.preparePullRequest})}),prepare:Ke=>({stepLabel:Q.createElement(ot.Z,{optional:Q.createElement(t.Z,{variant:"caption"},"Optional")},"Import Actions"),content:Q.createElement(ie,{onClick:Ke.onGoBack})}),review:Ke=>({stepLabel:Q.createElement(ot.Z,null,"Review"),content:Q.createElement(Et,{prepareResult:Ke.prepareResult,onReview:Ke.onReview,onGoBack:Ke.onGoBack})}),finish:Ke=>({stepLabel:Q.createElement(ot.Z,null,"Finish"),content:Q.createElement(de,{prepareResult:Ke.prepareResult,onReset:Ke.onReset})})},ln=(0,pn.Z)(()=>({stepperRoot:{padding:0}})),Rn=Ke=>{const{initialUrl:Je,generateStepper:Qe=Mt,variant:oe}=Ke,fe=(0,n.h_)(Pe),We=ln(),Be=Te({initialUrl:Je}),Ze=(0,Q.useMemo)(()=>Qe(Be.activeFlow,rn),[Qe,Be.activeFlow]),gt=It=>Q.createElement(ct.Z,null,It.stepLabel,Q.createElement(St.Z,null,It.content));return Q.createElement(b.rJ,{variant:oe},Q.createElement(xt.Z,{classes:{root:We.stepperRoot},activeStep:Be.activeStepNumber,orientation:"vertical"},gt(Ze.analyze(Be,{apis:{catalogImportApi:fe}})),gt(Ze.prepare(Be,{apis:{catalogImportApi:fe}})),gt(Ze.review(Be,{apis:{catalogImportApi:fe}})),gt(Ze.finish(Be,{apis:{catalogImportApi:fe}}))))},Mn=()=>{const Je=(0,n.h_)(n.Ds).getOptional("app.title")||"Backstage";return Q.createElement(b.T3,{themeId:"home"},Q.createElement(b.h4,{title:"Register an existing component"}),Q.createElement(b.VY,null,Q.createElement(b.yW,{title:`Start tracking your component in ${Je}`},Q.createElement(b.qt,null,"Start tracking your component in ",Je," by adding it to the software catalog.")),Q.createElement(x.Z,{container:!0,spacing:2,direction:"row-reverse"},Q.createElement(x.Z,{item:!0,xs:12,md:4,lg:6,xl:8},Q.createElement(Lt,null)),Q.createElement(x.Z,{item:!0,xs:12,md:8,lg:6,xl:4},Q.createElement(Rn,null)))))}},73495:function(Nt,u,e){e.d(u,{$3:function(){return Ke},Ah:function(){return je},CR:function(){return gr},CV:function(){return Ze},EW:function(){return Un},LH:function(){return xn},N$:function(){return ae},UO:function(){return Sn},U_:function(){return Dt},Uh:function(){return Ln},X2:function(){return $n},ZW:function(){return ne},_i:function(){return ln},ce:function(){return Cn},df:function(){return h},dq:function(){return Ee},dx:function(){return Je},eK:function(){return Xn},h$:function(){return Tn},hF:function(){return Be},hd:function(){return Mn},n3:function(){return n.n3},nN:function(){return H},nl:function(){return er},p3:function(){return ut},pp:function(){return An},rI:function(){return oe},sL:function(){return en},tW:function(){return N},u3:function(){return dt},wi:function(){return Rn},wp:function(){return Zn},xE:function(){return an}});var n=e(88285),i=e(30705),m=e(82394),d=e.n(m),a=e(2784),l=e(41156),y=e(60364),b=e(77277),t=e(4190),_=e(95544),g=e(90436),F=e(60905),j=e(80030),V=e(79692),re=e(5806),w=e(21324),A=e(86619),D=e(15223),f=e(42494),x=e(29611),R=e(50581),c=e(61837),O=e(15459),T=e(55999),Ce=e(49378),we=e(54506),nt=e(94339),ot=e(24579),$t=e(38402),ct=e(86136),St=e(11776),xt=e(8629),Q=e(79249),pn=e(38724),Ct=e(99152),Ge=e(6487),C=e(49429),Fe=e(85256),ve=e(12231),M=e(9520),G=e(36444),Re=e(49558),Ne=e(34520),Me=e(18473),Xe=e(64279),vt=e(76635),ee=e.n(vt),ue=e(19126),Pe=e.n(ue),at=e(73557),bt=e(69294),Wt=e(48760),on=e(90736),zt=e(18149),Le=e.n(zt),Pt=e(829),Rt=e.n(Pt),sn=e(72164),un=e(56563),Lt=e(19996),Ht=e(25505),nn=e(38016),Te=e(88013),st=e(99688),le=e(33375),ie=e(21853),Z=e(11640),B=e(28347),_e=e(72779),de=e.n(_e),Ie=e(39412),ze=e(27685),rt=e(3440),kt=e.n(rt),He=e(72847),z=e(32272),be=e(47603);const je=(0,i.T0)({id:"plugin.catalog.service"}),ut=(0,i.T0)({id:"catalog-react.starred-entities"});class Et{constructor(){this.starredEntities=new Set,this.subscribers=new Set,this.observable=new ObservableImpl(ce=>(ce.next(new Set(this.starredEntities)),this.subscribers.add(ce),()=>{this.subscribers.delete(ce)}))}async toggleStarred(ce){this.starredEntities.delete(ce)||this.starredEntities.add(ce);for(const $e of this.subscribers)$e.next(new Set(this.starredEntities))}starredEntitie$(){return this.observable}}const Mt=J=>{const ce=(0,l.Z)(ht=>ht.breakpoints.down("md")),$e=(0,y.Z)(),[Oe,qe]=(0,a.useState)(!1);return ce?a.createElement(a.Fragment,null,a.createElement(b.Z,{style:{marginTop:$e.spacing(1),marginLeft:$e.spacing(1)},onClick:()=>qe(!0),startIcon:a.createElement(G.Z,null)},"Filters"),a.createElement(t.ZP,{open:Oe,onClose:()=>qe(!1),anchor:"left",disableAutoFocus:!0,keepMounted:!0,variant:"temporary"},a.createElement(_.Z,{m:2},a.createElement(g.Z,{variant:"h6",component:"h2",style:{marginBottom:$e.spacing(1)}},"Filters"),J.children))):a.createElement(F.Z,{item:!0,lg:2},J.children)},rn=J=>a.createElement(F.Z,{item:!0,xs:12,lg:10},J.children),ln=J=>a.createElement(F.Z,{container:!0,style:{position:"relative"}},J.children);ln.Filters=Mt,ln.Content=rn;const Rn=(0,Me.uW)("catalog:entity-route-ref",()=>(0,i.NT)({id:"catalog:entity",params:["namespace","kind","name"]}));function Mn(J){var ce,$e;return{kind:J.kind.toLocaleLowerCase("en-US"),namespace:($e=(ce=J.metadata.namespace)==null?void 0:ce.toLocaleLowerCase("en-US"))!=null?$e:Ne.zG,name:J.metadata.name}}function Ke(J,ce){const $e=ce==null?void 0:ce.defaultKind;let Oe,qe,ht;return"metadata"in J?(Oe=J.kind,qe=J.metadata.namespace,ht=J.metadata.name):(Oe=J.kind,qe=J.namespace,ht=J.name),(qe===void 0||qe==="")&&(qe=Ne.zG),(ce==null?void 0:ce.defaultNamespace)!==void 0?(ce==null?void 0:ce.defaultNamespace)===qe&&(qe=void 0):qe===Ne.zG&&(qe=void 0),Oe=Oe.toLocaleLowerCase("en-US"),Oe=$e&&$e.toLocaleLowerCase("en-US")===Oe?void 0:Oe,`${Oe?`${Oe}:`:""}${qe?`${qe}/`:""}${ht}`}const Je=(0,a.forwardRef)((J,ce)=>{var $e;const{entityRef:Oe,defaultKind:qe,title:ht,children:lt,...At}=J,Kt=(0,i.tg)(Rn);let Jt,Qt,qt;if(typeof Oe=="string"){const _n=(0,Ne.of)(Oe);Jt=_n.kind,Qt=_n.namespace,qt=_n.name}else"metadata"in Oe?(Jt=Oe.kind,Qt=Oe.metadata.namespace,qt=Oe.metadata.name):(Jt=Oe.kind,Qt=Oe.namespace,qt=Oe.name);Jt=Jt.toLocaleLowerCase("en-US"),Qt=($e=Qt==null?void 0:Qt.toLocaleLowerCase("en-US"))!=null?$e:Ne.zG;const Pn={kind:Jt,namespace:Qt,name:qt},Qn=Ke({kind:Jt,namespace:Qt,name:qt},{defaultKind:qe}),Kn=a.createElement(Re.rU,{...At,ref:ce,to:Kt(Pn)},lt,!lt&&(ht!=null?ht:Qn));return ht?a.createElement(j.ZP,{title:Qn},Kn):Kn});function Qe(J){const{entityRefs:ce,defaultKind:$e,getTitle:Oe,...qe}=J,ht=(0,i.h_)(je),{value:lt=new Array,loading:At,error:Kt}=(0,Xe.default)(async()=>{const Jt=ce.reduce((qt,Pn)=>"metadata"in Pn?qt:[...qt,(0,Ne.of)(Pn)],new Array),Qt=ce.filter(qt=>"metadata"in qt);return Jt.length>0?[...(await ht.getEntities({filter:Jt.map(qt=>({kind:qt.kind,"metadata.namespace":qt.namespace,"metadata.name":qt.name}))})).items,...Qt]:Qt},[ce]);return At?a.createElement(Re.Ex,null):Kt?a.createElement(Re.yu,{error:Kt}):a.createElement(a.Fragment,null,lt.map((Jt,Qt)=>a.createElement(a.Fragment,{key:Qt},Qt>0&&", ",a.createElement(Je,{...qe,defaultKind:$e,entityRef:Jt,title:Oe(Jt)}))))}function oe(J){const{entityRefs:ce,defaultKind:$e,fetchEntities:Oe,getTitle:qe,...ht}=J;return Oe?a.createElement(Qe,{...ht,defaultKind:$e,entityRefs:ce,getTitle:qe}):a.createElement(a.Fragment,null,ce.map((lt,At)=>a.createElement(a.Fragment,{key:At},At>0&&", ",a.createElement(Je,{...ht,defaultKind:$e,entityRef:lt,title:qe?qe(lt):void 0}))))}function fe(J){return J.reduce((ce,$e)=>({...ce,...$e.getCatalogFilters?$e.getCatalogFilters():{}}),{})}function We(J){return ce=>J.every($e=>!$e.filterEntity||$e.filterEntity(ce))}function Be(J,ce,$e){var Oe;let qe=((Oe=J==null?void 0:J.relations)==null?void 0:Oe.filter(ht=>ht.type===ce).map(ht=>(0,Ne.of)(ht.targetRef)))||[];return $e!=null&&$e.kind&&(qe=qe.filter(ht=>ht.kind.toLocaleLowerCase("en-US")===$e.kind.toLocaleLowerCase("en-US"))),qe}function Ze(J,ce){var $e;const Oe=($e=J.metadata.annotations)==null?void 0:$e[Ne.M6];if(!!Oe)try{const qe=(0,Ne.Ou)(Oe),ht=ce.byUrl(qe.target);return{locationTargetUrl:qe.target,integrationType:ht==null?void 0:ht.type}}catch{return}}function gt(J,ce){const $e=new Set([...Be(J,RELATION_MEMBER_OF,{kind:"group"}),...J?[getCompoundEntityRef(J)]:[]].map(stringifyEntityRef)),Oe=Be(ce,RELATION_OWNED_BY).map(stringifyEntityRef);for(const qe of Oe)if($e.has(qe))return!0;return!1}class It{constructor(ce){this.value=ce}getCatalogFilters(){return{kind:this.value}}toQueryValue(){return this.value}}class jt{constructor(ce){this.value=ce}getTypes(){return Array.isArray(this.value)?this.value:[this.value]}getCatalogFilters(){return{"spec.type":this.getTypes()}}toQueryValue(){return this.getTypes()}}class Zt{constructor(ce){this.values=ce}filterEntity(ce){return this.values.every($e=>{var Oe;return((Oe=ce.metadata.tags)!=null?Oe:[]).includes($e)})}toQueryValue(){return this.values}}class Ot{constructor(ce){this.value=ce}filterEntity(ce){const $e=this.toUpperArray(this.value.split(/\s/)),Oe=this.toUpperArray([ce.metadata.tags]),qe=this.toUpperArray([ce.metadata.name,ce.metadata.title]);for(const ht of $e)if(Oe.every(lt=>lt!==ht)&&qe.every(lt=>!lt.includes(ht)))return!1;return!0}toUpperArray(ce){return ce.flat().filter($e=>Boolean($e)).map($e=>$e.toLocaleUpperCase("en-US"))}}class Vt{constructor(ce){this.values=ce}filterEntity(ce){return this.values.some($e=>Be(ce,Ne.S4).some(Oe=>Ke(Oe,{defaultKind:"group"})===$e))}toQueryValue(){return this.values}}class mn{constructor(ce){this.values=ce}filterEntity(ce){return this.values.some($e=>{var Oe;return((Oe=ce.spec)==null?void 0:Oe.lifecycle)===$e})}toQueryValue(){return this.values}}class bn{constructor(ce,$e,Oe){this.value=ce,this.isOwnedEntity=$e,this.isStarredEntity=Oe}filterEntity(ce){switch(this.value){case"owned":return this.isOwnedEntity(ce);case"starred":return this.isStarredEntity(ce);default:return!0}}toQueryValue(){return this.value}}class hn{constructor(ce){this.value=ce}filterEntity(ce){var $e;const Oe=($e=ce.metadata.annotations)==null?void 0:$e["backstage.io/orphan"];return Oe!==void 0&&this.value.toString()===Oe}}class wn{constructor(ce){this.value=ce}filterEntity(ce){var $e,Oe;const qe=((Oe=($e=ce==null?void 0:ce.status)==null?void 0:$e.items)==null?void 0:Oe.length)>0;return qe!==void 0&&this.value===qe}}const gn=(0,Me.CT)("entity-context"),Tn=({children:J,entity:ce,loading:$e,error:Oe,refresh:qe})=>{const ht={entity:ce,loading:$e,error:Oe,refresh:qe};return a.createElement(gn.Provider,{value:(0,Me.EI)({1:ht})},a.createElement(i.fC,{attributes:{...ce?{entityRef:(0,Ne.eE)(ce)}:void 0}},J))},kn=J=>React.createElement(Tn,{entity:J.entity,loading:!Boolean(J.entity),error:void 0,refresh:void 0,children:J.children});function $n(){const J=(0,Me.Vt)("entity-context");if(!J)throw new Error("Entity context is not available");const ce=J.atVersion(1);if(!ce)throw new Error("EntityContext v1 not available");if(!ce.entity)throw new Error("useEntity hook is being called outside of an EntityLayout where the entity has not been loaded. If this is intentional, please use useAsyncEntity instead.");return{entity:ce.entity}}function Cn(){const J=(0,Me.Vt)("entity-context");if(!J)throw new Error("Entity context is not available");const ce=J.atVersion(1);if(!ce)throw new Error("EntityContext v1 not available");const{entity:$e,loading:Oe,error:qe,refresh:ht}=ce;return{entity:$e,loading:Oe,error:qe,refresh:ht}}const zn=(0,a.createContext)(void 0),Sn=({children:J})=>{const ce=(0,on.default)(),$e=(0,i.h_)(je),[Oe,qe]=(0,a.useState)({}),ht=(0,at.TH)(),lt=(0,a.useMemo)(()=>{var Kn;return(Kn=Pe().parse(ht.search,{ignoreQueryPrefix:!0}).filters)!=null?Kn:{}},[ht]),[At,Kt]=(0,a.useState)(()=>({appliedFilters:{},entities:[],backendEntities:[]})),[{loading:Jt,error:Qt},qt]=(0,bt.default)(async()=>{var Kn;const _n=(0,vt.compact)(Object.values(Oe)),qn=We(_n),dr=fe(_n),$r=fe((0,vt.compact)(Object.values(At.appliedFilters))),Or=Object.keys(Oe).reduce((Ar,Pr)=>{const Cr=Oe[Pr];return Cr!=null&&Cr.toQueryValue&&(Ar[Pr]=Cr.toQueryValue()),Ar},{});if((0,vt.isEqual)($r,dr))Kt({appliedFilters:Oe,backendEntities:At.backendEntities,entities:At.backendEntities.filter(qn)});else{const Ar=await $e.getEntities({filter:dr});Kt({appliedFilters:Oe,backendEntities:Ar.items,entities:Ar.items.filter(qn)})}if(ce()){const Ar=Pe().parse(ht.search,{ignoreQueryPrefix:!0}),Pr=Pe().stringify({...Ar,filters:Or},{addQueryPrefix:!0,arrayFormat:"repeat"}),Cr=`${window.location.pathname}${Pr}`;(Kn=window.history)==null||Kn.replaceState(null,document.title,Cr)}},[$e,lt,Oe,At],{loading:!0});(0,Wt.Z)(qt,10,[Oe]);const Pn=(0,a.useCallback)(Kn=>{qe(_n=>{const qn=typeof Kn=="function"?Kn(_n):Kn;return{..._n,...qn}})},[]),Qn=(0,a.useMemo)(()=>({filters:At.appliedFilters,entities:At.entities,backendEntities:At.backendEntities,updateFilters:Pn,queryParameters:lt,loading:Jt,error:Qt}),[At,Pn,lt,Jt,Qt]);return a.createElement(zn.Provider,{value:Qn},J)};function Zn(){const J=(0,a.useContext)(zn);if(!J)throw new Error("useEntityList must be used within EntityListProvider");return J}function Ln(){var J;const ce=(0,i.h_)(je),{filters:{kind:$e,type:Oe},queryParameters:{type:qe},updateFilters:ht}=Zn(),lt=(0,a.useMemo)(()=>[qe].flat().filter(Boolean),[qe]),[At,Kt]=(0,a.useState)(lt.length?lt:(J=Oe==null?void 0:Oe.getTypes())!=null?J:[]);(0,a.useEffect)(()=>{lt.length&&Kt(lt)},[lt]);const[Jt,Qt]=(0,a.useState)([]),qt=(0,a.useMemo)(()=>$e==null?void 0:$e.value,[$e]),{error:Pn,loading:Qn,value:Kn}=(0,Xe.default)(async()=>qt?await ce.getEntityFacets({filter:{kind:qt},facets:["spec.type"]}).then(dr=>dr.facets["spec.type"]||[]):[],[qt,ce]),_n=(0,a.useRef)(Kn);return(0,a.useEffect)(()=>{const qn=_n.current;if(_n.current=Kn,Qn||!qt||qn===Kn||!Kn)return;const dr=[...new Set(Rt()(Kn,Or=>-Or.count).map(Or=>Or.value.toLocaleLowerCase("en-US")))];Qt(dr);const $r=At.filter(Or=>dr.includes(Or));Le()(At,$r)||Kt($r)},[Qn,qt,At,Kt,Kn]),(0,a.useEffect)(()=>{ht({type:At.length?new jt(At):void 0})},[At,ht]),{loading:Qn,error:Pn,availableTypes:Jt,selectedTypes:At,setSelectedTypes:Kt}}const jn=20;function Xn(J,ce){var $e,Oe;const qe=($e=ce==null?void 0:ce.type)==null?void 0:$e.toLocaleLowerCase("en-US"),ht=(Oe=ce==null?void 0:ce.kind)==null?void 0:Oe.toLocaleLowerCase("en-US"),lt=(0,i.h_)(je),{loading:At,value:Kt,error:Jt}=(0,Xe.default)(async()=>{var Qt;const qt=(Qt=J.relations)==null?void 0:Qt.map(_n=>({type:_n.type,target:(0,Ne.of)(_n.targetRef)})).filter(_n=>(!qe||_n.type.toLocaleLowerCase("en-US")===qe)&&(!ht||_n.target.kind===ht));if(!qt)return[];const Pn=Object.values((0,vt.groupBy)(qt,({target:_n})=>`${_n.kind}:${_n.namespace}`.toLocaleLowerCase("en-US"))),Qn=[];for(const _n of Pn)Qn.push({kind:_n[0].target.kind,namespace:_n[0].target.namespace,nameBatches:(0,vt.chunk)(_n.map(qn=>qn.target.name),jn)});return(await Promise.all(Qn.flatMap(_n=>_n.nameBatches.map(qn=>lt.getEntities({filter:{kind:_n.kind,"metadata.namespace":_n.namespace,"metadata.name":qn}}))))).flatMap(_n=>_n.items)},[J,qe,ht]);return{entities:Kt,loading:At,error:Jt}}function or(J){return typeof J=="string"?J:(0,Ne.eE)(J)}function gr(){const J=(0,i.h_)(ut),ce=(0,sn.Z)(J.starredEntitie$(),new Set),$e=(0,a.useCallback)(qe=>ce.has(or(qe)),[ce]),Oe=(0,a.useCallback)(qe=>J.toggleStarred(or(qe)).then(),[J]);return{starredEntities:ce,toggleStarredEntity:Oe,isStarredEntity:$e}}function fr(J){return typeof J=="string"?J:(0,Ne.eE)(J)}function Se(J){const ce=(0,i.h_)(ut),[$e,Oe]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{const ht=ce.starredEntitie$().subscribe({next(lt){Oe(lt.has(fr(J)))}});return()=>{ht.unsubscribe()}},[J,ce]),{toggleStarredEntity:(0,a.useCallback)(()=>ce.toggleStarred(fr(J)).then(),[J,ce]),isStarredEntity:$e}}function ne(){const J=(0,i.h_)(i.$4),{loading:ce,value:$e}=(0,Xe.default)(async()=>{const{ownershipEntityRefs:qe}=await J.getBackstageIdentity();return qe},[]),Oe=(0,a.useMemo)(()=>{const qe=new Set($e!=null?$e:[]);return ht=>{const lt=Be(ht,Ne.S4).map(Ne.eE);for(const At of lt)if(qe.has(At))return!0;return!1}},[$e]);return(0,a.useMemo)(()=>({loading:ce,isOwnedEntity:Oe}),[ce,Oe])}function ae(J){const{entity:ce,loading:$e,error:Oe}=Cn(),{allowed:qe,loading:ht,error:lt}=(0,un.gI)({permission:J,resourceRef:ce?(0,Ne.eE)(ce):void 0});return $e||ht?{loading:!0,allowed:!1}:Oe?{loading:!1,allowed:!1,error:Oe}:{loading:!1,allowed:qe,error:lt}}function S(){const J=(0,i.h_)(je),{error:ce,loading:$e,value:Oe}=(0,Xe.default)(async()=>await J.getEntityFacets({facets:["kind"]}).then(ht=>{var lt;return((lt=ht.facets.kind)==null?void 0:lt.map(At=>At.value).sort())||[]}),[J]);return{loading:$e,error:ce,allKinds:Oe!=null?Oe:[]}}function ge(J,ce,$e){let Oe=J;return ce&&(Oe=Oe.filter(ht=>ce.some(lt=>lt.toLocaleLowerCase("en-US")===ht.toLocaleLowerCase("en-US")))),$e&&!J.some(ht=>ht.toLocaleLowerCase("en-US")===$e.toLocaleLowerCase("en-US"))&&(Oe=Oe.concat([$e])),Oe.sort().reduce((ht,lt)=>(ht[lt.toLocaleLowerCase("en-US")]=lt,ht),{})}function L(J){var ce,$e;const{filters:Oe,queryParameters:{kind:qe},updateFilters:ht}=Zn(),lt=(0,a.useMemo)(()=>[qe].flat()[0],[qe]),[At,Kt]=(0,a.useState)(($e=lt!=null?lt:(ce=Oe.kind)==null?void 0:ce.value)!=null?$e:J.initialFilter);(0,a.useEffect)(()=>{lt&&Kt(lt)},[lt]),(0,a.useEffect)(()=>{var Pn,Qn;(Pn=Oe.kind)!=null&&Pn.value&&Kt((Qn=Oe.kind)==null?void 0:Qn.value)},[Oe.kind]),(0,a.useEffect)(()=>{ht({kind:At?new It(At):void 0})},[At,ht]);const{allKinds:Jt,loading:Qt,error:qt}=S();return{loading:Qt,error:qt,allKinds:Jt!=null?Jt:[],selectedKind:At,setSelectedKind:Kt}}const N=J=>{const{allowedKinds:ce,hidden:$e,initialFilter:Oe="component"}=J,qe=(0,i.h_)(i.$v),{error:ht,allKinds:lt,selectedKind:At,setSelectedKind:Kt}=L({initialFilter:Oe});if((0,a.useEffect)(()=>{ht&&qe.post({message:"Failed to load entity kinds",severity:"error"})},[ht,qe]),ht)return null;const Jt=ge(lt,ce,At),Qt=Object.keys(Jt).map(qt=>({value:qt,label:Jt[qt]}));return $e?null:a.createElement(_.Z,{pb:1,pt:1},a.createElement(Re.Ph,{label:"Kind",items:Qt,selected:At.toLocaleLowerCase("en-US"),onChange:qt=>Kt(String(qt))}))},me=(0,V.Z)({input:{}},{name:"CatalogReactEntityLifecyclePicker"}),et=a.createElement(Ht.Z,{fontSize:"small"}),wt=a.createElement(Lt.Z,{fontSize:"small"}),h=()=>{var J,ce;const $e=me(),{updateFilters:Oe,backendEntities:qe,filters:ht,queryParameters:{lifecycles:lt}}=Zn(),At=(0,a.useMemo)(()=>[lt].flat().filter(Boolean),[lt]),[Kt,Jt]=(0,a.useState)(At.length?At:(ce=(J=ht.lifecycles)==null?void 0:J.values)!=null?ce:[]);(0,a.useEffect)(()=>{At.length&&Jt(At)},[At]);const Qt=(0,a.useMemo)(()=>[...new Set(qe.map(qt=>{var Pn;return(Pn=qt.spec)==null?void 0:Pn.lifecycle}).filter(Boolean))].sort(),[qe]);return(0,a.useEffect)(()=>{Oe({lifecycles:Kt.length&&Qt.length?new mn(Kt):void 0})},[Kt,Oe,Qt]),Qt.length?a.createElement(_.Z,{pb:1,pt:1},a.createElement(g.Z,{variant:"button",component:"label"},"Lifecycle",a.createElement(Te.ZP,{multiple:!0,options:Qt,value:Kt,onChange:(qt,Pn)=>Jt(Pn),renderOption:(qt,{selected:Pn})=>a.createElement(re.Z,{control:a.createElement(w.Z,{icon:et,checkedIcon:wt,checked:Pn}),label:qt}),size:"small",popupIcon:a.createElement(nn.Z,{"data-testid":"lifecycle-picker-expand"}),renderInput:qt=>a.createElement(A.Z,{...qt,className:$e.input,variant:"outlined"})}))):null},v=(0,V.Z)({input:{}},{name:"CatalogReactEntityOwnerPicker"}),k=a.createElement(Ht.Z,{fontSize:"small"}),te=a.createElement(Lt.Z,{fontSize:"small"}),Ee=()=>{var J,ce;const $e=v(),{updateFilters:Oe,backendEntities:qe,filters:ht,queryParameters:{owners:lt}}=Zn(),At=(0,a.useMemo)(()=>[lt].flat().filter(Boolean),[lt]),[Kt,Jt]=(0,a.useState)(At.length?At:(ce=(J=ht.owners)==null?void 0:J.values)!=null?ce:[]);(0,a.useEffect)(()=>{At.length&&Jt(At)},[At]);const Qt=(0,a.useMemo)(()=>[...new Set(qe.flatMap(qt=>Be(qt,Ne.S4).map(Pn=>Ke(Pn,{defaultKind:"group"}))).filter(Boolean))].sort(),[qe]);return(0,a.useEffect)(()=>{Oe({owners:Kt.length&&Qt.length?new Vt(Kt):void 0})},[Kt,Oe,Qt]),Qt.length?a.createElement(_.Z,{pb:1,pt:1},a.createElement(g.Z,{variant:"button",component:"label"},"Owner",a.createElement(Te.ZP,{multiple:!0,options:Qt,value:Kt,onChange:(qt,Pn)=>Jt(Pn),renderOption:(qt,{selected:Pn})=>a.createElement(re.Z,{control:a.createElement(w.Z,{icon:k,checkedIcon:te,checked:Pn}),label:qt}),size:"small",popupIcon:a.createElement(nn.Z,{"data-testid":"owner-picker-expand"}),renderInput:qt=>a.createElement(A.Z,{...qt,className:$e.input,variant:"outlined"})}))):null},Ye=(0,V.Z)(J=>({searchToolbar:{paddingLeft:0,paddingRight:0},input:{}}),{name:"CatalogReactEntitySearchBar"}),H=()=>{var J,ce;const $e=Ye(),{filters:Oe,updateFilters:qe}=Zn(),[ht,lt]=(0,a.useState)((ce=(J=Oe.text)==null?void 0:J.value)!=null?ce:"");return(0,Wt.Z)(()=>{qe({text:ht.length?new Ot(ht):void 0})},250,[ht,qe]),a.createElement(D.Z,{className:$e.searchToolbar},a.createElement(f.Z,null,a.createElement(x.Z,{"aria-label":"search",id:"input-with-icon-adornment",className:$e.input,placeholder:"Search",autoComplete:"off",onChange:At=>lt(At.target.value),value:ht,startAdornment:a.createElement(R.Z,{position:"start"},a.createElement(ie.Z,null)),endAdornment:a.createElement(R.Z,{position:"end"},a.createElement(c.Z,{"aria-label":"clear search",onClick:()=>lt(""),edge:"end",disabled:ht.length===0},a.createElement(le.Z,null)))})))},W=Object.freeze({createEntityRefColumn(J){const{defaultKind:ce}=J;function $e(Oe){var qe;return((qe=Oe.metadata)==null?void 0:qe.title)||Ke(Oe,{defaultKind:ce})}return{title:"Name",highlight:!0,customFilterAndSearch(Oe,qe){return $e(qe).includes(Oe)},customSort(Oe,qe){return $e(Oe).localeCompare($e(qe))},render:Oe=>{var qe;return a.createElement(Je,{entityRef:Oe,defaultKind:ce,title:(qe=Oe.metadata)==null?void 0:qe.title})}}},createEntityRelationColumn(J){const{title:ce,relation:$e,defaultKind:Oe,filter:qe}=J;function ht(At){return Be(At,$e,qe)}function lt(At){return ht(At).map(Kt=>Ke(Kt,{defaultKind:Oe})).join(", ")}return{title:ce,customFilterAndSearch(At,Kt){return lt(Kt).includes(At)},customSort(At,Kt){return lt(At).localeCompare(lt(Kt))},render:At=>a.createElement(oe,{entityRefs:ht(At),defaultKind:Oe})}},createOwnerColumn(){return this.createEntityRelationColumn({title:"Owner",relation:Ne.S4,defaultKind:"group"})},createDomainColumn(){return this.createEntityRelationColumn({title:"Domain",relation:Ne.cz,defaultKind:"domain",filter:{kind:"domain"}})},createSystemColumn(){return this.createEntityRelationColumn({title:"System",relation:Ne.cz,defaultKind:"system",filter:{kind:"system"}})},createMetadataDescriptionColumn(){return{title:"Description",field:"metadata.description",render:J=>a.createElement(Re.Or,{text:J.metadata.description,placement:"bottom-start",line:2})}},createSpecLifecycleColumn(){return{title:"Lifecycle",field:"spec.lifecycle"}},createSpecTypeColumn(){return{title:"Type",field:"spec.type"}}}),Ae=[W.createEntityRefColumn({defaultKind:"system"}),W.createDomainColumn(),W.createOwnerColumn(),W.createMetadataDescriptionColumn()],De=[W.createEntityRefColumn({defaultKind:"component"}),W.createSystemColumn(),W.createOwnerColumn(),W.createSpecTypeColumn(),W.createSpecLifecycleColumn(),W.createMetadataDescriptionColumn()],pt=(0,V.Z)(J=>({empty:{padding:J.spacing(2),display:"flex",justifyContent:"center"}})),dt=J=>{const{entities:ce,title:$e,emptyContent:Oe,variant:qe="gridItem",columns:ht}=J,lt=pt(),At={minWidth:"0",width:"100%"};return qe==="gridItem"&&(At.height="calc(100% - 10px)"),a.createElement(Re.iA,{columns:ht,title:$e,style:At,emptyContent:Oe&&a.createElement("div",{className:lt.empty},Oe),options:{search:!1,paging:!1,actionsColumnIndex:-1,padding:"dense",draggable:!1},data:ce})};dt.columns=W,dt.systemEntityColumns=Ae,dt.componentEntityColumns=De;const ft=(0,V.Z)({input:{}},{name:"CatalogReactEntityTagPicker"}),yt=a.createElement(Ht.Z,{fontSize:"small"}),Ft=a.createElement(Lt.Z,{fontSize:"small"}),an=J=>{var ce,$e;const Oe=ft(),{updateFilters:qe,filters:ht,queryParameters:{tags:lt}}=Zn(),At=(0,i.h_)(je),{value:Kt}=(0,Xe.default)(async()=>{var Pn;const Qn="metadata.tags",{facets:Kn}=await At.getEntityFacets({facets:[Qn],filter:(Pn=ht.kind)==null?void 0:Pn.getCatalogFilters()});return Object.fromEntries(Kn[Qn].map(({value:_n,count:qn})=>[_n,qn]))},[ht.kind]),Jt=(0,a.useMemo)(()=>[lt].flat().filter(Boolean),[lt]),[Qt,qt]=(0,a.useState)(Jt.length?Jt:($e=(ce=ht.tags)==null?void 0:ce.values)!=null?$e:[]);return(0,a.useEffect)(()=>{Jt.length&&qt(Jt)},[Jt]),(0,a.useEffect)(()=>{qe({tags:Qt.length?new Zt(Qt):void 0})},[Qt,qe]),Object.keys(Kt!=null?Kt:{}).length?a.createElement(_.Z,{pb:1,pt:1},a.createElement(g.Z,{variant:"button",component:"label"},"Tags",a.createElement(Te.ZP,{multiple:!0,options:Object.keys(Kt!=null?Kt:{}),value:Qt,onChange:(Pn,Qn)=>qt(Qn),renderOption:(Pn,{selected:Qn})=>a.createElement(re.Z,{control:a.createElement(w.Z,{icon:yt,checkedIcon:Ft,checked:Qn}),label:J.showCounts?`${Pn} (${Kt==null?void 0:Kt[Pn]})`:Pn}),size:"small",popupIcon:a.createElement(nn.Z,{"data-testid":"tag-picker-expand"}),renderInput:Pn=>a.createElement(A.Z,{...Pn,className:Oe.input,variant:"outlined"})}))):null},en=J=>{var ce;const{hidden:$e,initialFilter:Oe}=J,qe=(0,i.h_)(i.$v),{error:ht,availableTypes:lt,selectedTypes:At,setSelectedTypes:Kt}=Ln();if((0,a.useEffect)(()=>{ht&&qe.post({message:"Failed to load entity types",severity:"error"}),Oe&&Kt([Oe])},[ht,qe,Oe,Kt]),lt.length===0||ht)return null;const Jt=[{value:"all",label:"all"},...lt.map(Qt=>({value:Qt,label:Qt}))];return $e?null:a.createElement(_.Z,{pb:1,pt:1},a.createElement(Re.Ph,{label:"Type",items:Jt,selected:(ce=Jt.length>1?At[0]:void 0)!=null?ce:"all",onChange:Qt=>Kt(Qt==="all"?[]:[String(Qt)])}))},cn=(0,O.Z)({root:{color:"#f3ba37"}})(Z.Z),xn=J=>{const{toggleStarredEntity:ce,isStarredEntity:$e}=Se(J.entity);return a.createElement(c.Z,{"aria-label":"favorite",color:"inherit",...J,onClick:()=>ce()},a.createElement(j.ZP,{title:$e?"Remove from favorites":"Add to favorites"},$e?a.createElement(cn,null):a.createElement(B.Z,null)))},Dn=Ie.Z;function Nn(J,ce){if(J)return J.toLocaleLowerCase("en-US");if(ce)try{return(0,Ne.of)(ce).kind.toLocaleLowerCase("en-US")}catch{return}}function K(J,ce){const $e=(0,i.qD)(),Oe=Nn(J,ce);return Oe&&$e.getSystemIcon(`kind:${Oe}`)||Dn}function s(J){const{kind:ce,entityRef:$e,...Oe}=J,qe=K(ce,$e);return a.createElement(qe,{...Oe})}const p=(0,V.Z)(J=>({node:{fill:J.palette.grey[300],stroke:J.palette.grey[300],"&.primary":{fill:J.palette.primary.light,stroke:J.palette.primary.light},"&.secondary":{fill:J.palette.secondary.light,stroke:J.palette.secondary.light}},text:{fill:J.palette.getContrastText(J.palette.grey[300]),"&.primary":{fill:J.palette.primary.contrastText},"&.secondary":{fill:J.palette.secondary.contrastText},"&.focused":{fontWeight:"bold"}},clickable:{cursor:"pointer"}}));function I(J){const ce=(0,i.h_)(je),$e=(0,Ne.eE)(J),{loading:Oe,error:qe,value:ht}=(0,Xe.default)(async()=>{const lt=await ce.getEntityAncestors({entityRef:$e}),At=new Array,Kt=new Array;for(const Jt of lt.items){const Qt=(0,Ne.eE)(Jt.entity),qt=Qt===lt.rootEntityRef;At.push({id:Qt,root:qt,...Jt.entity});for(const Pn of Jt.parentEntityRefs)Kt.push({from:Qt,to:Pn})}return{nodes:At,edges:Kt}},[$e]);return{loading:Oe,error:qe,nodes:(ht==null?void 0:ht.nodes)||[],edges:(ht==null?void 0:ht.edges)||[]}}function X({node:J}){const ce=p(),$e=(0,at.s0)(),Oe=(0,i.tg)(Rn),[qe,ht]=(0,a.useState)(0),[lt,At]=(0,a.useState)(0),Kt=(0,a.useRef)(null);(0,a.useLayoutEffect)(()=>{if(Kt.current){let{height:qn,width:dr}=Kt.current.getBBox();qn=Math.round(qn),dr=Math.round(dr),(qn!==lt||dr!==qe)&&(ht(dr),At(qn))}},[qe,lt]);const Jt=10,Qt=lt,qt=Qt+Jt,Pn=qt+qe+Jt*2,Qn=lt+Jt*2,Kn=J.metadata.title||(J.kind&&J.metadata.name&&J.metadata.namespace?Ke({kind:J.kind,name:J.metadata.name,namespace:J.metadata.namespace||""}):J.id),_n=()=>{$e(Oe({kind:J.kind,namespace:J.metadata.namespace||Ne.zG,name:J.metadata.name}))};return a.createElement("g",{onClick:_n,className:ce.clickable},a.createElement("rect",{className:de()(ce.node,J.root?"secondary":"primary"),width:Pn,height:Qn,rx:10}),a.createElement(s,{kind:J.kind,y:Jt,x:Jt,width:Qt,height:Qt,className:de()(ce.text,J.root?"secondary":"primary")}),a.createElement("text",{ref:Kt,className:de()(ce.text,J.root?"secondary":"primary"),y:Qn/2,x:qt+(qe+Jt*2)/2,textAnchor:"middle",alignmentBaseline:"middle"},Kn))}function xe(J){const{loading:ce,error:$e,nodes:Oe,edges:qe}=I(J.entity);return ce?a.createElement(Re.Ex,null):$e?a.createElement(Re.Gk,{error:$e}):a.createElement(a.Fragment,null,a.createElement(T.Z,{variant:"h2"},"Ancestry"),a.createElement(T.Z,{gutterBottom:!0},"This is the ancestry of entities above the current one - as in, the chain(s) of entities down to the current one, where"," ",a.createElement(Re.rU,{to:"https://backstage.io/docs/features/software-catalog/life-of-an-entity"},"processors emitted")," ","child entities that ultimately led to the current one existing. Note that this is a completely different mechanism from relations."),a.createElement(_.Z,{mt:4},a.createElement(Re.mn,{nodes:Oe,edges:qe,renderNode:X,direction:Re.NX.Direction.BOTTOM_TOP,zoom:"enable-on-click"})))}const se=(0,V.Z)(J=>({root:{display:"flex",flexDirection:"column"},marginTop:{marginTop:J.spacing(2)},helpIcon:{marginLeft:J.spacing(1),color:J.palette.text.disabled},monospace:{fontFamily:"monospace"}}));function U(J){const ce=se();return a.createElement(Ce.Z,{...J,primaryTypographyProps:{className:ce.monospace},secondaryTypographyProps:{className:ce.monospace}})}function ye(J){const ce=se();return a.createElement(we.Z,{className:ce.monospace},J.children)}function it(J){return a.createElement(_.Z,{mt:2},a.createElement(nt.Z,{variant:"outlined"},a.createElement(ot.Z,null,a.createElement(g.Z,{variant:"h6",gutterBottom:!0},J.title,J.helpLink&&a.createElement(fn,{to:J.helpLink})),J.children)))}function Bt(J){if(J.match(/^url:https?:\/\//))return J.slice(4);if(J.match(/^https?:\/\//))return J}function Yt(J){const[ce,$e]=J.entry,Oe=Bt($e);return a.createElement($t.Z,null,J.indent&&a.createElement(ct.Z,null),a.createElement(U,{primary:ce,secondary:Oe?a.createElement(Re.rU,{to:Oe},$e):$e}))}function fn(J){const ce=se();return a.createElement(Re.rU,{to:J.to,className:ce.helpIcon},a.createElement(ze.Z,{fontSize:"inherit"}))}const In=(0,V.Z)({root:{display:"flex",flexDirection:"column"}});function Vn(J){var ce,$e;const Oe=(0,i.h_)(je),qe=(0,Ne.eE)(J),ht=(ce=J.metadata.annotations)==null?void 0:ce[Ne.P1],lt=($e=J.metadata.annotations)==null?void 0:$e[Ne.q1],{loading:At,error:Kt,value:Jt}=(0,Xe.default)(async()=>!ht&&!lt?[]:(await Oe.getEntities({filter:[...ht?[{[`metadata.annotations.${Ne.P1}`]:ht}]:[],...lt?[{[`metadata.annotations.${Ne.q1}`]:lt}]:[]]})).items,[ht,lt]);return{loading:At,error:Kt,location:ht,originLocation:lt,colocatedEntities:Jt==null?void 0:Jt.filter(Qt=>(0,Ne.eE)(Qt)!==qe)}}function Bn(J){return a.createElement(St.Z,{dense:!0},J.header&&a.createElement(Yt,{key:"header",entry:J.header}),J.entities.map(ce=>a.createElement($t.Z,{key:(0,Ne.eE)(ce)},a.createElement(ct.Z,null,a.createElement(s,{kind:ce.kind})),a.createElement(U,{primary:a.createElement(Je,{entityRef:ce})}))))}function Gn(J){const{entity:ce}=J,{loading:$e,error:Oe,location:qe,originLocation:ht,colocatedEntities:lt}=Vn(ce);if($e)return a.createElement(Re.Ex,null);if(Oe)return a.createElement(Re.Gk,{error:Oe});if(!qe&&!ht)return a.createElement(st.Z,{severity:"warning"},"Entity had no location information.");if(!(lt!=null&&lt.length))return a.createElement(st.Z,{severity:"info"},"There were no other entities on this location.");if(qe===ht)return a.createElement(Bn,{entities:lt});const At=lt.filter(Jt=>{var Qt;return((Qt=Jt.metadata.annotations)==null?void 0:Qt[Ne.P1])===qe}),Kt=lt.filter(Jt=>{var Qt;return((Qt=Jt.metadata.annotations)==null?void 0:Qt[Ne.q1])===ht});return a.createElement(a.Fragment,null,At.length>0&&a.createElement(Bn,{entities:At,header:["At the same location",qe]}),Kt.length>0&&a.createElement(Bn,{entities:Kt,header:["At the same origin",ht]}))}function Wn(J){const ce=In();return a.createElement(a.Fragment,null,a.createElement(T.Z,{variant:"h2"},"Colocated"),a.createElement(T.Z,null,"These are the entities that are colocated with this entity - as in, they originated from the same data source (e.g. came from the same YAML file), or from the same origin (e.g. the originally registered URL)."),a.createElement("div",{className:ce.root},a.createElement(Gn,{entity:J.entity})))}function Er(J){return Object.fromEntries([...Object.entries(J)].sort((ce,$e)=>ce[0]<$e[0]?-1:1))}function Hn(J){return a.createElement(a.Fragment,null,a.createElement(T.Z,{variant:"h2"},"Entity as JSON"),a.createElement(T.Z,null,"This is the raw entity data as received from the catalog, on JSON form."),a.createElement(T.Z,null,a.createElement("div",{style:{fontSize:"75%"},"data-testid":"code-snippet"},a.createElement(Re.Oi,{text:JSON.stringify(Er(J.entity),void 0,2),language:"json",showCopyCodeButton:!0}))))}const yr=(0,V.Z)({root:{display:"flex",flexDirection:"column"}});function Ir(J){var ce,$e;const Oe=yr(),{apiVersion:qe,kind:ht,metadata:lt,spec:At,relations:Kt=[],status:Jt={}}=J.entity,Qt=kt()(Rt()(Kt,qt=>qt.targetRef),"type");return a.createElement(a.Fragment,null,a.createElement(T.Z,{variant:"h2"},"Overview"),a.createElement("div",{className:Oe.root},a.createElement(it,{title:"Identity"},a.createElement(St.Z,{dense:!0},a.createElement($t.Z,null,a.createElement(U,{primary:"apiVersion",secondary:qe})),a.createElement($t.Z,null,a.createElement(U,{primary:"kind",secondary:ht})),(At==null?void 0:At.type)&&a.createElement($t.Z,null,a.createElement(U,{primary:"spec.type",secondary:At.type})),lt.uid&&a.createElement($t.Z,null,a.createElement(U,{primary:"uid",secondary:lt.uid})),lt.etag&&a.createElement($t.Z,null,a.createElement(U,{primary:"etag",secondary:lt.etag})))),a.createElement(it,{title:"Metadata"},!!Object.keys(lt.annotations||{}).length&&a.createElement(St.Z,{dense:!0,subheader:a.createElement(ye,null,"Annotations",a.createElement(fn,{to:"https://backstage.io/docs/features/software-catalog/well-known-annotations"}))},Object.entries(lt.annotations).map(qt=>a.createElement(Yt,{key:qt[0],indent:!0,entry:qt}))),!!Object.keys(lt.labels||{}).length&&a.createElement(St.Z,{dense:!0,subheader:a.createElement(ye,null,"Labels")},Object.entries(lt.labels).map(qt=>a.createElement(Yt,{key:qt[0],indent:!0,entry:qt}))),!!((ce=lt.tags)!=null&&ce.length)&&a.createElement(St.Z,{dense:!0,subheader:a.createElement(ye,null,"Tags")},lt.tags.map((qt,Pn)=>a.createElement($t.Z,{key:`${qt}-${Pn}`},a.createElement(ct.Z,null),a.createElement(U,{primary:qt}))))),!!Kt.length&&a.createElement(it,{title:"Relations",helpLink:"https://backstage.io/docs/features/software-catalog/well-known-relations"},Object.entries(Qt).map(([qt,Pn],Qn)=>a.createElement("div",{key:Qn},a.createElement(St.Z,{dense:!0,subheader:a.createElement(ye,null,qt)},Pn.map(Kn=>a.createElement($t.Z,{key:Kn.targetRef},a.createElement(ct.Z,null,a.createElement(s,{entityRef:Kn.targetRef})),a.createElement(U,{primary:a.createElement(Je,{entityRef:Kn.targetRef})}))))))),!!(($e=Jt.items)!=null&&$e.length)&&a.createElement(it,{title:"Status",helpLink:"https://backstage.io/docs/features/software-catalog/well-known-statuses"},Jt.items.map((qt,Pn)=>a.createElement("div",{key:Pn},a.createElement(g.Z,null,qt.level,": ",qt.type),a.createElement(_.Z,{ml:2},qt.message))))))}function Y(J){return a.createElement(a.Fragment,null,a.createElement(T.Z,{variant:"h2"},"Entity as YAML"),a.createElement(T.Z,null,"This is the raw entity data as received from the catalog, on YAML form."),a.createElement(T.Z,null,a.createElement("div",{style:{fontSize:"75%"},"data-testid":"code-snippet"},a.createElement(Re.Oi,{text:He.ZP.stringify(Er(J.entity)),language:"yaml",showCopyCodeButton:!0}))))}const pe=(0,V.Z)(J=>({fullHeightDialog:{height:"calc(100% - 64px)"},root:{display:"flex",flexGrow:1,width:"100%",backgroundColor:J.palette.background.paper},tabs:{borderRight:`1px solid ${J.palette.divider}`,flexShrink:0},tabContents:{flexGrow:1,overflowX:"auto"}}));function ke(J){const{children:ce,value:$e,index:Oe,...qe}=J,ht=pe();return a.createElement("div",{role:"tabpanel",hidden:$e!==Oe,id:`vertical-tabpanel-${Oe}`,"aria-labelledby":`vertical-tab-${Oe}`,className:ht.tabContents,...qe},$e===Oe&&a.createElement(_.Z,{pl:3,pr:3},ce))}function mt(J){return{id:`vertical-tab-${J}`,"aria-controls":`vertical-tabpanel-${J}`}}function Dt(J){const ce=pe(),[$e,Oe]=a.useState(0);return(0,a.useEffect)(()=>{Oe(0)},[J.open]),J.entity?a.createElement(xt.Z,{fullWidth:!0,maxWidth:"xl",open:J.open,onClose:J.onClose,"aria-labelledby":"entity-inspector-dialog-title",PaperProps:{className:ce.fullHeightDialog}},a.createElement(Q.Z,{id:"entity-inspector-dialog-title"},"Entity Inspector"),a.createElement(pn.Z,{dividers:!0},a.createElement("div",{className:ce.root},a.createElement(Ct.Z,{orientation:"vertical",variant:"scrollable",value:$e,onChange:(qe,ht)=>Oe(ht),"aria-label":"Inspector options",className:ce.tabs},a.createElement(Ge.Z,{label:"Overview",...mt(0)}),a.createElement(Ge.Z,{label:"Ancestry",...mt(1)}),a.createElement(Ge.Z,{label:"Colocated",...mt(2)}),a.createElement(Ge.Z,{label:"Raw JSON",...mt(3)}),a.createElement(Ge.Z,{label:"Raw YAML",...mt(4)})),a.createElement(ke,{value:$e,index:0},a.createElement(Ir,{entity:J.entity})),a.createElement(ke,{value:$e,index:1},a.createElement(xe,{entity:J.entity})),a.createElement(ke,{value:$e,index:2},a.createElement(Wn,{entity:J.entity})),a.createElement(ke,{value:$e,index:3},a.createElement(Hn,{entity:J.entity})),a.createElement(ke,{value:$e,index:4},a.createElement(Y,{entity:J.entity})))),a.createElement(C.Z,null,a.createElement(b.Z,{onClick:J.onClose,color:"primary"},"Close"))):null}function Xt(J){var ce;const $e=(0,i.h_)(je),Oe=(ce=J.metadata.annotations)==null?void 0:ce[Ne.q1],qe=J.metadata.uid,ht=Oe==="bootstrap:bootstrap",lt=(0,Xe.default)(async()=>{const Kn=$e.getLocationByRef(Oe);let _n;if(!Oe)_n=Promise.resolve([]);else{const qn=`metadata.annotations.${Ne.q1}`;_n=$e.getEntities({filter:{[qn]:Oe},fields:["kind","metadata.uid","metadata.name","metadata.namespace"]}).then(dr=>dr.items)}return Promise.all([Kn,_n]).then(([qn,dr])=>({location:qn,colocatedEntities:dr}))},[$e,J]),At=(0,a.useCallback)(async function(){const{location:_n}=lt.value;await $e.removeLocationById(_n.id)},[$e,lt]),Kt=(0,a.useCallback)(async function(){await $e.removeEntityByUid(qe)},[$e,qe]);if(ht)return{type:"bootstrap",location:Oe,deleteEntity:Kt};const{loading:Jt,error:Qt,value:qt}=lt;if(Jt)return{type:"loading"};if(Qt)return{type:"error",error:Qt};const{location:Pn,colocatedEntities:Qn}=qt;return Pn?{type:"unregister",location:Oe,colocatedEntities:Qn.map(Ne.iB),unregisterLocation:At,deleteEntity:Kt}:{type:"only-delete",deleteEntity:Kt}}const tn=(0,V.Z)({advancedButton:{fontSize:"0.7em"}}),dn=({entity:J,onConfirm:ce})=>{var $e;const Oe=(0,i.h_)(i.$v),qe=(0,i.h_)(i.Ds),ht=tn(),lt=Xt(J),[At,Kt]=(0,a.useState)(!1),[Jt,Qt]=(0,a.useState)(!1),qt=($e=qe.getOptionalString("app.title"))!=null?$e:"Backstage",Pn=(0,a.useCallback)(async function(){if("unregisterLocation"in lt){Qt(!0);try{await lt.unregisterLocation(),ce()}catch(_n){(0,z.BD)(_n),Oe.post({message:_n.message})}finally{Qt(!1)}}},[Oe,ce,lt]),Qn=(0,a.useCallback)(async function(){if("deleteEntity"in lt){Qt(!0);try{await lt.deleteEntity(),ce()}catch(_n){(0,z.BD)(_n),Oe.post({message:_n.message})}finally{Qt(!1)}}},[Oe,ce,lt]);return lt.type==="loading"?a.createElement(Re.Ex,null):lt.type==="error"?a.createElement(Re.Gk,{error:lt.error}):lt.type==="bootstrap"?a.createElement(a.Fragment,null,a.createElement(st.Z,{severity:"info"},'You cannot unregister this entity, since it originates from a protected Backstage configuration (location "',lt.location,'"). If you believe this is in error, please contact the ',qt," ","integrator."),a.createElement(_.Z,{marginTop:2},!At&&a.createElement(b.Z,{variant:"text",size:"small",color:"primary",className:ht.advancedButton,onClick:()=>Kt(!0)},"Advanced Options"),At&&a.createElement(a.Fragment,null,a.createElement(T.Z,null,"You have the option to delete the entity itself from the catalog. Note that this should only be done if you know that the catalog file has been deleted at, or moved from, its origin location. If that is not the case, the entity will reappear shortly as the next refresh round is performed by the catalog."),a.createElement(b.Z,{variant:"contained",color:"secondary",disabled:Jt,onClick:Qn},"Delete Entity")))):lt.type==="only-delete"?a.createElement(a.Fragment,null,a.createElement(T.Z,null,"This entity does not seem to originate from a registered location. You therefore only have the option to delete it outright from the catalog."),a.createElement(b.Z,{variant:"contained",color:"secondary",disabled:Jt,onClick:Qn},"Delete Entity")):lt.type==="unregister"?a.createElement(a.Fragment,null,a.createElement(T.Z,null,"This action will unregister the following entities:"),a.createElement(T.Z,{component:"ul"},lt.colocatedEntities.map(Kn=>a.createElement("li",{key:`${Kn.kind}:${Kn.namespace}/${Kn.name}`},a.createElement(Je,{entityRef:Kn})))),a.createElement(T.Z,null,"Located at the following location:"),a.createElement(T.Z,{component:"ul"},a.createElement("li",null,lt.location)),a.createElement(T.Z,null,"To undo, just re-register the entity in ",qt,"."),a.createElement(_.Z,{marginTop:2},a.createElement(b.Z,{variant:"contained",color:"secondary",disabled:Jt,onClick:Pn},"Unregister Location"),!At&&a.createElement(_.Z,{component:"span",marginLeft:2},a.createElement(b.Z,{variant:"text",size:"small",color:"primary",className:ht.advancedButton,onClick:()=>Kt(!0)},"Advanced Options"))),At&&a.createElement(a.Fragment,null,a.createElement(_.Z,{paddingTop:4,paddingBottom:4},a.createElement(Fe.Z,null)),a.createElement(T.Z,null,"You also have the option to delete the entity itself from the catalog. Note that this should only be done if you know that the catalog file has been deleted at, or moved from, its origin location. If that is not the case, the entity will reappear shortly as the next refresh round is performed by the catalog."),a.createElement(b.Z,{variant:"contained",color:"secondary",disabled:Jt,onClick:Qn},"Delete Entity"))):a.createElement(st.Z,{severity:"error"},"Internal error: Unknown state")},An=J=>{const{open:ce,onConfirm:$e,onClose:Oe,entity:qe}=J;return a.createElement(xt.Z,{open:ce,onClose:Oe},a.createElement(Q.Z,{id:"responsive-dialog-title"},"Are you sure you want to unregister this entity?"),a.createElement(pn.Z,null,a.createElement(dn,{entity:qe,onConfirm:$e})),a.createElement(C.Z,null,a.createElement(b.Z,{onClick:Oe,color:"primary"},"Cancel")))},On=(0,V.Z)(J=>({root:{backgroundColor:"rgba(0, 0, 0, .11)",boxShadow:"none",margin:J.spacing(1,0,1,0)},title:{margin:J.spacing(1,0,0,1),textTransform:"uppercase",fontSize:12,fontWeight:"bold"},listIcon:{minWidth:30,color:J.palette.text.primary},menuItem:{minHeight:J.spacing(6)},groupWrapper:{margin:J.spacing(1,1,2,1)}}),{name:"CatalogReactUserListPicker"});function Fn(J){return[{name:"Personal",items:[{id:"owned",label:"Owned",icon:be.Z},{id:"starred",label:"Starred",icon:Z.Z}]},{name:J!=null?J:"Company",items:[{id:"all",label:"All"}]}]}const Un=J=>{var ce;const{initialFilter:$e,availableFilters:Oe}=J,qe=On(),lt=(ce=(0,i.h_)(i.Ds).getOptionalString("organization.name"))!=null?ce:"Company",{filters:At,updateFilters:Kt,backendEntities:Jt,queryParameters:{kind:Qt,user:qt},loading:Pn}=Zn(),Qn=["starred","all"],Kn=Fn(lt).map(Sr=>({...Sr,items:Sr.items.filter(({id:Rr})=>["group","user"].some(Jr=>Jr===Qt)?Qn.includes(Rr):!Oe||Oe.includes(Rr))})).filter(({items:Sr})=>!!Sr.length),{isStarredEntity:_n}=gr(),{isOwnedEntity:qn,loading:dr}=ne(),$r=Pn||dr,Or=(0,a.useMemo)(()=>new bn("owned",qn,_n),[qn,_n]),Ar=(0,a.useMemo)(()=>new bn("starred",qn,_n),[qn,_n]),Pr=(0,a.useMemo)(()=>[qt].flat()[0],[qt]),[Cr,Vr]=(0,a.useState)(Pr!=null?Pr:$e),Gr=(0,a.useMemo)(()=>Jt.filter(We((0,vt.compact)(Object.values({...At,user:void 0})))),[At,Jt]),Hr=(0,a.useMemo)(()=>({all:Gr.length,starred:Gr.filter(Sr=>Ar.filterEntity(Sr)).length,owned:Gr.filter(Sr=>Or.filterEntity(Sr)).length}),[Gr,Ar,Or]);return(0,a.useEffect)(()=>{Pr&&Vr(Pr)},[Pr]),(0,a.useEffect)(()=>{!$r&&!!Cr&&Cr!=="all"&&Hr[Cr]===0&&Vr("all")},[$r,Hr,Cr,Vr]),(0,a.useEffect)(()=>{Kt({user:Cr?new bn(Cr,qn,_n):void 0})},[Cr,qn,_n,Kt]),a.createElement(nt.Z,{className:qe.root},Kn.map(Sr=>a.createElement(a.Fragment,{key:Sr.name},a.createElement(g.Z,{variant:"subtitle2",component:"span",className:qe.title},Sr.name),a.createElement(nt.Z,{className:qe.groupWrapper},a.createElement(St.Z,{disablePadding:!0,dense:!0,role:"menu","aria-label":Sr.name},Sr.items.map(Rr=>{var Jr,sa;return a.createElement(ve.Z,{role:"none presentation",key:Rr.id,button:!0,divider:!0,onClick:()=>Vr(Rr.id),selected:Rr.id===((Jr=At.user)==null?void 0:Jr.value),className:qe.menuItem,disabled:Hr[Rr.id]===0,"data-testid":`user-picker-${Rr.id}`,tabIndex:0,ContainerProps:{role:"menuitem"}},Rr.icon&&a.createElement(ct.Z,{className:qe.listIcon},a.createElement(Rr.icon,{fontSize:"small"})),a.createElement(Ce.Z,null,a.createElement(g.Z,{variant:"body1"},Rr.label," ")),a.createElement(M.Z,null,(sa=Hr[Rr.id])!=null?sa:"-"))}))))))},En=(0,V.Z)({input:{}},{name:"CatalogReactEntityProcessingStatusPickerPicker"}),ar=a.createElement(Ht.Z,{fontSize:"small"}),pr=a.createElement(Lt.Z,{fontSize:"small"}),er=()=>{const J=En(),{updateFilters:ce}=Zn(),[$e,Oe]=(0,a.useState)([]);function qe(At){ce({orphan:At?new hn(At):void 0})}function ht(At){ce({error:At?new wn(At):void 0})}const lt=["Is Orphan","Has Error"];return a.createElement(_.Z,{pb:1,pt:1},a.createElement(g.Z,{variant:"button",component:"label"},"Processing Status",a.createElement(Te.ZP,{multiple:!0,options:lt,value:$e,onChange:(At,Kt)=>{Oe(Kt),qe(Kt.includes("Is Orphan")),ht(Kt.includes("Has Error"))},renderOption:(At,{selected:Kt})=>a.createElement(re.Z,{control:a.createElement(w.Z,{icon:ar,checkedIcon:pr,checked:Kt}),label:At}),size:"small",popupIcon:a.createElement(nn.Z,{"data-testid":"processing-status-picker-expand"}),renderInput:At=>a.createElement(A.Z,{...At,className:J.input,variant:"outlined"})})))},vr=({children:J,value:ce})=>{var $e;const[Oe,qe]=useState(($e=ce==null?void 0:ce.filters)!=null?$e:{}),ht=useCallback(Kt=>{qe(Jt=>{const Qt=typeof Kt=="function"?Kt(Jt):Kt;return{...Jt,...Qt}})},[]),lt=useMemo(()=>({entities:[],backendEntities:[],queryParameters:{}}),[]),At=useMemo(()=>{var Kt,Jt,Qt,qt,Pn;return{entities:(Kt=ce==null?void 0:ce.entities)!=null?Kt:lt.entities,backendEntities:(Jt=ce==null?void 0:ce.backendEntities)!=null?Jt:lt.backendEntities,updateFilters:(Qt=ce==null?void 0:ce.updateFilters)!=null?Qt:ht,filters:Oe,loading:(qt=ce==null?void 0:ce.loading)!=null?qt:!1,queryParameters:(Pn=ce==null?void 0:ce.queryParameters)!=null?Pn:lt.queryParameters,error:ce==null?void 0:ce.error}},[ce,lt,Oe,ht]);return React.createElement(zn.Provider,{value:At},J)}},3862:function(Nt,u,e){e.d(u,{A:function(){return ze},C:function(){return Mt},E:function(){return jn},L:function(){return Z},a:function(){return de},b:function(){return nn},c:function(){return sn},d:function(){return Ln},e:function(){return Zn},f:function(){return Sn},h:function(){return ne},i:function(){return S},j:function(){return gr},k:function(){return Se},l:function(){return fr},m:function(){return or},n:function(){return Xn},p:function(){return je},q:function(){return fe},r:function(){return Ze},s:function(){return Be},t:function(){return Zt},u:function(){return jt},v:function(){return mn},w:function(){return gn},y:function(){return Tn}});var n=e(82394),i=e.n(n),m=e(34520),d=e(76635),a=e.n(d),l=e(49558),y=e(30705),b=e(49462),t=e(73495),_=e(79692),g=e(90436),F=e(60905),j=e(95544),V=e(41156),re=e(90348),w=e(11861),A=e(7089),D=e(94339),f=e(32552),x=e(61837),R=e(85256),c=e(24579),O=e(12420),T=e(38402),Ce=e(86136),we=e(49378),nt=e(12231),ot=e(79784),$t=e(50758),ct=e(8629),St=e(79249),xt=e(49429),Q=e(77277),pn=e(52866),Ct=e(30254),Ge=e(27604),C=e(2784),Fe=e(52160),ve=e(19928),M=e.n(ve),G=e(64279),Re=e(92573),Ne=e(15459),Me=e(2997),Xe=e(11640),vt=e(28347),ee=e(99688),ue=e(73557),Pe=e(31654),at=e(43054),bt=e(65759),Wt=e(26655),on=e(49166),zt=e(32272),Le=e(88285);async function Pt({storageApi:L}){var N;const me=L.forBucket("settings"),et=L.forBucket("starredEntities"),wt=me.snapshot("starredEntities").value;if(!(0,d.isArray)(wt))return;const h=new Set((N=et.snapshot("entityRefs").value)!=null?N:[]);wt.filter(d.isString).map(v=>v.split(":")).filter(v=>v.length===4&&v[0]==="entity").map(([v,k,te,Ee])=>(0,m.eE)({kind:k,namespace:te,name:Ee})).forEach(v=>h.add(v)),await et.set("entityRefs",Array.from(h)),await me.remove("starredEntities")}class Rt{constructor(N){this.subscribers=new Set,this.observable=new(i())(et=>(et.next(new Set(this.starredEntities)),this.subscribers.add(et),()=>{this.subscribers.delete(et)}));var me;Pt(N).then(),this.settingsStore=N.storageApi.forBucket("starredEntities"),this.starredEntities=new Set((me=this.settingsStore.snapshot("entityRefs").value)!=null?me:[]),this.settingsStore.observe$("entityRefs").subscribe({next:et=>{var wt;this.starredEntities=new Set((wt=et.value)!=null?wt:[]),this.notifyChanges()}})}async toggleStarred(N){this.starredEntities.has(N)?this.starredEntities.delete(N):this.starredEntities.add(N),await this.settingsStore.set("entityRefs",Array.from(this.starredEntities))}starredEntitie$(){return this.observable}notifyChanges(){for(const N of this.subscribers)N.next(new Set(this.starredEntities))}}const sn=(0,y.x8)({id:"create-component",optional:!0}),un=(0,y.x8)({id:"view-techdoc",optional:!0,params:["namespace","kind","name"]}),Lt=(0,y.NT)({id:"catalog"}),Ht=(0,_.Z)(L=>({value:{fontWeight:"bold",overflow:"hidden",lineHeight:"24px",wordBreak:"break-word"},label:{color:L.palette.text.secondary,textTransform:"uppercase",fontSize:"10px",fontWeight:"bold",letterSpacing:.5,overflow:"hidden",whiteSpace:"nowrap"}}));function nn(L){const{label:N,value:me,gridSizes:et,children:wt}=L,h=Ht(),v=(0,y.vJ)(wt,te=>te.getElements()),k=v.length>0?v:C.createElement(g.Z,{variant:"body2",className:h.value},me||"unknown");return C.createElement(F.Z,{item:!0,...et},C.createElement(g.Z,{variant:"h2",className:h.label},N),k)}const Te=(0,_.Z)({svgIcon:{display:"inline-block","& svg":{display:"inline-block",fontSize:"inherit",verticalAlign:"baseline"}}});function st(L){const{href:N,text:me,Icon:et}=L,wt=Te();return C.createElement(j.Z,{display:"flex"},C.createElement(j.Z,{mr:1,className:wt.svgIcon},C.createElement(g.Z,{component:"div"},et?C.createElement(et,null):C.createElement(Fe.Z,null))),C.createElement(j.Z,{flexGrow:"1"},C.createElement(l.rU,{to:N,target:"_blank",rel:"noopener"},me||N)))}const le={xs:1,sm:1,md:1,lg:2,xl:3};function ie(L){var N,me;const et=[(0,V.Z)(h=>h.breakpoints.up("xl"))?"xl":null,(0,V.Z)(h=>h.breakpoints.up("lg"))?"lg":null,(0,V.Z)(h=>h.breakpoints.up("md"))?"md":null,(0,V.Z)(h=>h.breakpoints.up("sm"))?"sm":null,(0,V.Z)(h=>h.breakpoints.up("xs"))?"xs":null];let wt=1;if(typeof L=="number")wt=L;else{const h=(N=et.find(v=>v!==null))!=null?N:"xs";wt=(me=L==null?void 0:L[h])!=null?me:le[h]}return wt}function Z(L){const{items:N,cols:me=void 0}=L,et=ie(me);return C.createElement(re.Z,{rowHeight:"auto",cols:et},N.map(({text:wt,href:h,Icon:v},k)=>C.createElement(w.Z,{key:k},C.createElement(st,{href:h,text:wt!=null?wt:h,Icon:v}))))}const B=(0,_.Z)({description:{wordBreak:"break-word"}});function _e(L,N,me){if(N==="url"||L.includes("://"))return L;const et=me.type==="file"?`file://${me.target}`:me.target;return N==="file"||me.type==="file"?new URL(L,et).href:et}function de(L){var N,me,et,wt,h,v,k,te;const{entity:Ee}=L,Ye=B(),H=Ee.kind.toLocaleLowerCase("en-US")==="system",W=Ee.kind.toLocaleLowerCase("en-US")==="resource",Ae=Ee.kind.toLocaleLowerCase("en-US")==="component",De=Ee.kind.toLocaleLowerCase("en-US")==="api",pt=Ee.kind.toLocaleLowerCase("en-US")==="template",dt=Ee.kind.toLocaleLowerCase("en-US")==="location",ft=Ee.kind.toLocaleLowerCase("en-US")==="group",yt=(0,t.hF)(Ee,m.cz,{kind:"system"}),Ft=(0,t.hF)(Ee,m.cz,{kind:"component"}),an=(0,t.hF)(Ee,m.cz,{kind:"domain"}),en=(0,t.hF)(Ee,m.S4);let cn;try{cn=(0,m.CV)(Ee)}catch{cn=void 0}return C.createElement(F.Z,{container:!0},C.createElement(nn,{label:"Description",gridSizes:{xs:12}},C.createElement(g.Z,{variant:"body2",paragraph:!0,className:Ye.description},((N=Ee==null?void 0:Ee.metadata)==null?void 0:N.description)||"No description")),C.createElement(nn,{label:"Owner",value:"No Owner",gridSizes:{xs:12,sm:6,lg:4}},en.length>0&&C.createElement(t.rI,{entityRefs:en,defaultKind:"group"})),(H||an.length>0)&&C.createElement(nn,{label:"Domain",value:"No Domain",gridSizes:{xs:12,sm:6,lg:4}},an.length>0&&C.createElement(t.rI,{entityRefs:an,defaultKind:"domain"})),(De||Ae||W||yt.length>0)&&C.createElement(nn,{label:"System",value:"No System",gridSizes:{xs:12,sm:6,lg:4}},yt.length>0&&C.createElement(t.rI,{entityRefs:yt,defaultKind:"system"})),Ae&&Ft.length>0&&C.createElement(nn,{label:"Parent Component",value:"No Parent Component",gridSizes:{xs:12,sm:6,lg:4}},C.createElement(t.rI,{entityRefs:Ft,defaultKind:"component"})),(De||Ae||W||pt||ft||dt||typeof((me=Ee==null?void 0:Ee.spec)==null?void 0:me.type)=="string")&&C.createElement(nn,{label:"Type",value:(et=Ee==null?void 0:Ee.spec)==null?void 0:et.type,gridSizes:{xs:12,sm:6,lg:4}}),(De||Ae||typeof((wt=Ee==null?void 0:Ee.spec)==null?void 0:wt.lifecycle)=="string")&&C.createElement(nn,{label:"Lifecycle",value:(h=Ee==null?void 0:Ee.spec)==null?void 0:h.lifecycle,gridSizes:{xs:12,sm:6,lg:4}}),C.createElement(nn,{label:"Tags",value:"No Tags",gridSizes:{xs:12,sm:6,lg:4}},(((v=Ee==null?void 0:Ee.metadata)==null?void 0:v.tags)||[]).map(xn=>C.createElement(A.Z,{key:xn,size:"small",label:xn}))),dt&&(((k=Ee==null?void 0:Ee.spec)==null?void 0:k.targets)||((te=Ee==null?void 0:Ee.spec)==null?void 0:te.target))&&C.createElement(nn,{label:"Targets",gridSizes:{xs:12}},C.createElement(Z,{cols:1,items:(Ee.spec.targets||[Ee.spec.target]).map(xn=>xn).map(xn=>{var Dn;return{text:xn,href:_e(xn,((Dn=Ee==null?void 0:Ee.spec)==null?void 0:Dn.type)||"unknown",cn)}})})))}const Ie=(0,_.Z)({gridItemCard:{display:"flex",flexDirection:"column",height:"calc(100% - 10px)",marginBottom:"10px"},fullHeightCard:{display:"flex",flexDirection:"column",height:"100%"},gridItemCardContent:{flex:1},fullHeightCardContent:{flex:1}});function ze(L){var N,me,et;const{variant:wt}=L,h=Ie(),{entity:v}=(0,t.X2)(),k=(0,y.h_)(b.q3),te=(0,y.h_)(t.Ah),Ee=(0,y.h_)(y.$v),Ye=(0,y.h_)(y.VE),H=(0,y.tg)(un),W=(0,t.CV)(v,k),Ae=(N=v.metadata.annotations)==null?void 0:N[m.Tf],De={label:"View Source",disabled:!W,icon:C.createElement(b.nW,{type:W==null?void 0:W.integrationType}),href:W==null?void 0:W.locationTargetUrl},pt={label:"View TechDocs",disabled:!((me=v.metadata.annotations)!=null&&me["backstage.io/techdocs-ref"])||!H,icon:C.createElement(Ct.Z,null),href:H&&H({namespace:v.metadata.namespace||m.zG,kind:v.kind,name:v.metadata.name})};let dt="";wt==="gridItem"?dt=h.gridItemCard:wt==="fullHeight"&&(dt=h.fullHeightCard);let ft="";wt==="gridItem"?ft=h.gridItemCardContent:wt==="fullHeight"&&(ft=h.fullHeightCardContent);const yt=(et=v.metadata.annotations)==null?void 0:et[m.P1],Ft=(yt==null?void 0:yt.startsWith("url:"))||(yt==null?void 0:yt.startsWith("file:")),an=(0,C.useCallback)(async()=>{try{await te.refreshEntity((0,m.eE)(v)),Ee.post({message:"Refresh scheduled",severity:"info"})}catch(en){Ye.post(en)}},[te,Ee,Ye,v]);return C.createElement(D.Z,{className:dt},C.createElement(f.Z,{title:"About",action:C.createElement(C.Fragment,null,Ft&&C.createElement(x.Z,{"aria-label":"Refresh",title:"Schedule entity refresh",onClick:an},C.createElement(pn.Z,null)),C.createElement(x.Z,{component:l.rU,"aria-label":"Edit",disabled:!Ae,title:"Edit Metadata",to:Ae!=null?Ae:"#"},C.createElement(Ge.Z,null))),subheader:C.createElement(l.M6,{links:[De,pt]})}),C.createElement(R.Z,null),C.createElement(c.Z,{className:ft},C.createElement(de,{entity:v})))}function rt(){const L=useApi(catalogApiRef),{error:N,loading:me,value:et}=useAsync(async()=>await L.getEntityFacets({facets:["kind"]}).then(h=>{var v;return((v=h.facets.kind)==null?void 0:v.map(k=>k.value).sort())||[]}),[L]);return{loading:me,error:N,allKinds:et!=null?et:[]}}function kt(L,N,me){let et=L;return N&&(et=et.filter(h=>N.some(v=>v.toLocaleLowerCase("en-US")===h.toLocaleLowerCase("en-US")))),me&&!L.some(h=>h.toLocaleLowerCase("en-US")===me.toLocaleLowerCase("en-US"))&&(et=et.concat([me])),et.sort().reduce((h,v)=>(h[v.toLocaleLowerCase("en-US")]=v,h),{})}const He=(0,_.Z)(L=>(0,O.Z)({root:{...L.typography.h4}}));function z(L){var N,me;const{initialFilter:et="component",allowedKinds:wt}=L,h=He(),{allKinds:v}=rt(),{filters:k,updateFilters:te,queryParameters:{kind:Ee}}=useEntityList(),Ye=useMemo(()=>[Ee].flat()[0],[Ee]),[H,W]=useState((me=Ye!=null?Ye:(N=k.kind)==null?void 0:N.value)!=null?me:et);useEffect(()=>{Ye&&W(Ye)},[Ye]),useEffect(()=>{var De,pt;(De=k.kind)!=null&&De.value&&W((pt=k.kind)==null?void 0:pt.value)},[k.kind]),useEffect(()=>{te({kind:H?new EntityKindFilter(H):void 0})},[H,te]);const Ae=kt(v,wt,H);return React.createElement(Select,{input:React.createElement(InputBase,null),value:H.toLocaleLowerCase("en-US"),onChange:De=>W(De.target.value),classes:h},Object.keys(Ae).map(De=>React.createElement(MenuItem,{value:De,key:De},`${pluralize(Ae[De])}`)))}const be=(0,_.Z)({flexContainer:{flexWrap:"wrap"},itemText:{width:"100%",wordBreak:"break-all",marginBottom:"1rem"}});function je(L){const N=L.result,me=L.highlight,et=be(),wt=(0,y.z$)(),h=()=>{wt.captureEvent("discover",N.title,{attributes:{to:N.location},value:L.rank})};return C.createElement(C.Fragment,null,C.createElement(T.Z,{alignItems:"flex-start"},L.icon&&C.createElement(Ce.Z,null,L.icon),C.createElement("div",{className:et.flexContainer},C.createElement(we.Z,{className:et.itemText,primaryTypographyProps:{variant:"h6"},primary:C.createElement(l.rU,{noTrack:!0,to:N.location,onClick:h},me!=null&&me.fields.title?C.createElement(Re.FA,{text:me.fields.title,preTag:me.preTag,postTag:me.postTag}):N.title),secondary:me!=null&&me.fields.text?C.createElement(Re.FA,{text:me.fields.text,preTag:me.preTag,postTag:me.postTag}):N.text}),C.createElement(j.Z,null,N.kind&&C.createElement(A.Z,{label:`Kind: ${N.kind}`,size:"small"}),N.lifecycle&&C.createElement(A.Z,{label:`Lifecycle: ${N.lifecycle}`,size:"small"})))),C.createElement(R.Z,{component:"li"}))}const ut=Object.freeze({createNameColumn(L){function N(me){var et;return((et=me.metadata)==null?void 0:et.title)||(0,t.$3)(me,{defaultKind:L==null?void 0:L.defaultKind})}return{title:"Name",field:"resolved.name",highlight:!0,customSort({entity:me},{entity:et}){return N(me).localeCompare(N(et))},render:({entity:me})=>{var et;return C.createElement(t.dx,{entityRef:me,defaultKind:(L==null?void 0:L.defaultKind)||"Component",title:(et=me.metadata)==null?void 0:et.title})}}},createSystemColumn(){return{title:"System",field:"resolved.partOfSystemRelationTitle",render:({resolved:L})=>C.createElement(t.rI,{entityRefs:L.partOfSystemRelations,defaultKind:"system"})}},createOwnerColumn(){return{title:"Owner",field:"resolved.ownedByRelationsTitle",render:({resolved:L})=>C.createElement(t.rI,{entityRefs:L.ownedByRelations,defaultKind:"group"})}},createSpecTargetsColumn(){return{title:"Targets",field:"entity.spec.targets",render:({entity:L})=>{var N,me;return C.createElement(C.Fragment,null,(((N=L==null?void 0:L.spec)==null?void 0:N.targets)||((me=L==null?void 0:L.spec)==null?void 0:me.target))&&C.createElement(l.Or,{text:(L.spec.targets||[L.spec.target]).join(", "),placement:"bottom-start"}))}}},createSpecTypeColumn(){return{title:"Type",field:"entity.spec.type",hidden:!0,width:"auto"}},createSpecLifecycleColumn(){return{title:"Lifecycle",field:"entity.spec.lifecycle"}},createMetadataDescriptionColumn(){return{title:"Description",field:"entity.metadata.description",render:({entity:L})=>C.createElement(l.Or,{text:L.metadata.description,placement:"bottom-start"}),width:"auto"}},createTagsColumn(){return{title:"Tags",field:"entity.metadata.tags",cellStyle:{padding:"0px 16px 0px 20px"},render:({entity:L})=>C.createElement(C.Fragment,null,L.metadata.tags&&L.metadata.tags.map(N=>C.createElement(A.Z,{key:N,label:N,size:"small",variant:"outlined",style:{marginBottom:"0px"}}))),width:"auto"}},createTitleColumn(L){return{title:"Title",field:"entity.metadata.title",hidden:L==null?void 0:L.hidden,searchable:!0}},createLabelColumn(L,N){return{title:(N==null?void 0:N.title)||"Label",field:"entity.metadata.labels",cellStyle:{padding:"0px 16px 0px 20px"},render:({entity:me})=>{var et;const wt=(et=me.metadata)==null?void 0:et.labels,h=wt&&wt[L]||(N==null?void 0:N.defaultValue);return C.createElement(C.Fragment,null,h&&C.createElement(A.Z,{key:h,label:h,size:"small",variant:"outlined"}))},width:"auto"}}}),Et=(0,Ne.Z)({root:{color:"#f3ba37"}})(Xe.Z),Mt=L=>{var N,me,et;const{columns:wt,actions:h,tableOptions:v,subtitle:k,emptyContent:te}=L,{isStarredEntity:Ee,toggleStarredEntity:Ye}=(0,t.CR)(),{loading:H,error:W,entities:Ae,filters:De}=(0,t.wp)(),pt=(0,C.useMemo)(()=>{var cn;return[ut.createTitleColumn({hidden:!0}),ut.createNameColumn({defaultKind:(cn=De.kind)==null?void 0:cn.value}),...xn(),ut.createMetadataDescriptionColumn(),ut.createTagsColumn()];function xn(){var Dn;switch((Dn=De.kind)==null?void 0:Dn.value){case"user":return[];case"domain":case"system":return[ut.createOwnerColumn()];case"group":case"template":return[ut.createSpecTypeColumn()];case"location":return[ut.createSpecTypeColumn(),ut.createSpecTargetsColumn()];default:return[ut.createSystemColumn(),ut.createOwnerColumn(),ut.createSpecTypeColumn(),ut.createSpecLifecycleColumn()]}}},[(N=De.kind)==null?void 0:N.value]),dt=De.type===void 0,ft=(0,d.capitalize)((et=(me=De.user)==null?void 0:me.value)!=null?et:"all");if(W)return C.createElement("div",null,C.createElement(l.GB,{severity:"error",title:"Could not fetch catalog entities."},C.createElement(l.Oi,{language:"text",text:W.toString()})));const yt=[({entity:cn})=>{var xn;const Dn=(xn=cn.metadata.annotations)==null?void 0:xn[m.l2],Nn="View";return{icon:()=>C.createElement(C.Fragment,null,C.createElement(g.Z,{variant:"srOnly"},Nn),C.createElement(Me.Z,{fontSize:"small"})),tooltip:Nn,disabled:!Dn,onClick:()=>{!Dn||window.open(Dn,"_blank")}}},({entity:cn})=>{var xn;const Dn=(xn=cn.metadata.annotations)==null?void 0:xn[m.Tf],Nn="Edit";return{icon:()=>C.createElement(C.Fragment,null,C.createElement(g.Z,{variant:"srOnly"},Nn),C.createElement(Ge.Z,{fontSize:"small"})),tooltip:Nn,disabled:!Dn,onClick:()=>{!Dn||window.open(Dn,"_blank")}}},({entity:cn})=>{const xn=Ee(cn),Dn=xn?"Remove from favorites":"Add to favorites";return{cellStyle:{paddingLeft:"1em"},icon:()=>C.createElement(C.Fragment,null,C.createElement(g.Z,{variant:"srOnly"},Dn),xn?C.createElement(Et,null):C.createElement(vt.Z,null)),tooltip:Dn,onClick:()=>Ye(cn)}}],Ft=Ae.map(cn=>{const xn=(0,t.hF)(cn,m.cz,{kind:"system"}),Dn=(0,t.hF)(cn,m.S4);return{entity:cn,resolved:{name:(0,t.$3)(cn,{defaultKind:"Component"}),ownedByRelationsTitle:Dn.map(Nn=>(0,t.$3)(Nn,{defaultKind:"group"})).join(", "),ownedByRelations:Dn,partOfSystemRelationTitle:xn.map(Nn=>(0,t.$3)(Nn,{defaultKind:"system"})).join(", "),partOfSystemRelations:xn}}}),an=(wt||pt).find(cn=>cn.title==="Type");an&&(an.hidden=!dt);const en=Ft.length>20;return C.createElement(l.iA,{isLoading:H,columns:wt||pt,options:{paging:en,pageSize:20,actionsColumnIndex:-1,loadingType:"linear",showEmptyDataSourceMessage:!H,padding:"dense",pageSizeOptions:[20,50,100],...v},title:`${ft} (${Ae.length})`,data:Ft,actions:h||yt,subtitle:k,emptyContent:te})};Mt.columns=ut;function rn(L){var N;const{unregisterEntityOptions:me,isUnregisterAllowed:et,onUnregisterEntity:wt,onClose:h}=L,v=typeof(me==null?void 0:me.disableUnregister)=="boolean",k=(N=!et||(v?!!(me!=null&&me.disableUnregister):(me==null?void 0:me.disableUnregister)==="disable"))!=null?N:!1;let te=C.createElement(C.Fragment,null);return(me==null?void 0:me.disableUnregister)!=="hidden"&&(te=C.createElement(nt.Z,{onClick:()=>{h(),wt()},disabled:k},C.createElement(Ce.Z,null,C.createElement(on.Z,{fontSize:"small"})),C.createElement(we.Z,{primary:"Unregister entity"}))),C.createElement(C.Fragment,null,te)}const ln=(0,_.Z)(L=>({button:{color:L.page.fontColor}}),{name:"PluginCatalogEntityContextMenu"});function Rn(L){const{UNSTABLE_extraContextMenuItems:N,UNSTABLE_contextMenuOptions:me,onUnregisterEntity:et,onInspectEntity:wt}=L,[h,v]=(0,C.useState)(),k=ln(),Ee=(0,t.N$)(Wt.j8).allowed,Ye=pt=>{v(pt.currentTarget)},H=()=>{v(void 0)},W=(0,y.h_)(y.$v),Ae=(0,C.useCallback)(()=>{window.navigator.clipboard.writeText(window.location.toString()).then(()=>W.post({message:"Copied!",severity:"info"}))},[W]),De=N&&[...N.map(pt=>C.createElement(nt.Z,{key:pt.title,onClick:()=>{H(),pt.onClick()}},C.createElement(Ce.Z,null,C.createElement(pt.Icon,{fontSize:"small"})),C.createElement(we.Z,{primary:pt.title}))),C.createElement(R.Z,{key:"the divider is here!"})];return C.createElement(C.Fragment,null,C.createElement(x.Z,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true","aria-expanded":!!h,role:"button",onClick:Ye,"data-testid":"menu-button",className:k.button,id:"long-menu"},C.createElement(at.Z,null)),C.createElement(ot.ZP,{open:Boolean(h),onClose:H,anchorEl:h,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},"aria-labelledby":"long-menu"},C.createElement($t.Z,null,De,C.createElement(rn,{unregisterEntityOptions:me,isUnregisterAllowed:Ee,onUnregisterEntity:et,onClose:H}),C.createElement(nt.Z,{onClick:()=>{H(),wt()}},C.createElement(Ce.Z,null,C.createElement(Pe.Z,{fontSize:"small"})),C.createElement(we.Z,{primary:"Inspect entity"})),C.createElement(nt.Z,{onClick:()=>{H(),Ae()}},C.createElement(Ce.Z,null,C.createElement(bt.Z,{fontSize:"small"})),C.createElement(we.Z,{primary:"Copy entity URL"})))))}const Mn="plugin.catalog.entityLayoutRoute",Ke=()=>null;(0,y.R5)(Ke,Mn,!0),(0,y.R5)(Ke,"core.gatherMountPoints",!0);function Je(L){const{entity:N,title:me}=L;return C.createElement(j.Z,{display:"inline-flex",alignItems:"center",height:"1em",maxWidth:"100%"},C.createElement(j.Z,{component:"span",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},me),N&&C.createElement(t.LH,{entity:N}))}function Qe(L,N,me,et){var wt,h,v,k,te;const Ee=(wt=L!=null?L:et==null?void 0:et.kind)!=null?wt:"",Ye=(h=N!=null?N:et==null?void 0:et.metadata.namespace)!=null?h:"";return{headerTitle:`${(te=(k=(v=et==null?void 0:et.metadata.title)!=null?v:me)!=null?k:et==null?void 0:et.metadata.name)!=null?te:""}${Ye&&Ye!==m.zG?` in ${Ye}`:""}`,headerType:(()=>{let W=Ee.toLocaleLowerCase("en-US");return et&&et.spec&&"type"in et.spec&&(W+=" \u2014 ",W+=et.spec.type.toLocaleLowerCase("en-US")),W})()}}function oe(L){var N;const{entity:me}=L,et=(0,t.hF)(me,m.S4);return C.createElement(C.Fragment,null,et.length>0&&C.createElement(l.i9,{label:"Owner",value:C.createElement(t.rI,{entityRefs:et,defaultKind:"Group",color:"inherit"})}),((N=me.spec)==null?void 0:N.lifecycle)&&C.createElement(l.i9,{label:"Lifecycle",value:me.spec.lifecycle}))}const fe=L=>{var N,me,et;const{UNSTABLE_extraContextMenuItems:wt,UNSTABLE_contextMenuOptions:h,children:v,NotFoundComponent:k}=L,{kind:te,namespace:Ee,name:Ye}=(0,y.Oi)(t.wi),{entity:H,loading:W,error:Ae}=(0,t.ce)(),De=(0,ue.TH)(),pt=(0,y.vJ)(v,Dn=>Dn.selectByComponentData({key:Mn,withStrictError:"Child of EntityLayout must be an EntityLayout.Route"}).getElements().flatMap(({props:Nn})=>{if(H){if(Nn.if&&!Nn.if(H))return[]}else return[];return[{path:Nn.path,title:Nn.title,children:Nn.children,tabProps:Nn.tabProps}]}),[H]),{headerTitle:dt,headerType:ft}=Qe(te,Ee,Ye,H),[yt,Ft]=(0,C.useState)(!1),[an,en]=(0,C.useState)(!1),cn=(0,ue.s0)(),xn=async()=>{Ft(!1),en(!1),cn("/")};return(0,C.useEffect)(()=>{Ft(!1),en(!1)},[De.pathname]),C.createElement(l.T3,{themeId:(et=(me=(N=H==null?void 0:H.spec)==null?void 0:N.type)==null?void 0:me.toString())!=null?et:"home"},C.createElement(l.h4,{title:C.createElement(Je,{title:dt,entity:H}),pageTitleOverride:dt,type:ft},H&&C.createElement(C.Fragment,null,C.createElement(oe,{entity:H}),C.createElement(Rn,{UNSTABLE_extraContextMenuItems:wt,UNSTABLE_contextMenuOptions:h,onUnregisterEntity:()=>Ft(!0),onInspectEntity:()=>en(!0)}))),W&&C.createElement(l.Ex,null),H&&C.createElement(l.tn,{routes:pt}),Ae&&C.createElement(l.VY,null,C.createElement(ee.Z,{severity:"error"},Ae.toString())),!W&&!Ae&&!H&&C.createElement(l.VY,null,k||C.createElement(l.GB,{title:"Entity not found"},"There is no ",te," with the requested"," ",C.createElement(l.rU,{to:"https://backstage.io/docs/features/software-catalog/references"},"kind, namespace, and name"),".")),C.createElement(t.pp,{open:yt,entity:H,onConfirm:xn,onClose:()=>Ft(!1)}),C.createElement(t.U_,{open:an,entity:H,onClose:()=>en(!1)}))};fe.Route=Ke;function We(L){const{open:N,onClose:me,onConfirm:et,entity:wt}=L,[h,v]=(0,C.useState)(!1),k=(0,y.h_)(t.Ah),te=(0,y.h_)(y.$v),Ee=async()=>{v(!0);try{const Ye=wt.metadata.uid;await k.removeEntityByUid(Ye),et()}catch(Ye){(0,zt.BD)(Ye),te.post({message:Ye.message})}finally{v(!1)}};return C.createElement(ct.Z,{open:N,onClose:me},C.createElement(St.Z,{id:"responsive-dialog-title"},"Are you sure you want to delete this entity?"),C.createElement(xt.Z,null,C.createElement(Q.Z,{variant:"contained",color:"secondary",disabled:h,onClick:Ee},"Delete"),C.createElement(Q.Z,{onClick:me,color:"primary"},"Cancel")))}function Be(L){var N,me;return((me=(N=L==null?void 0:L.metadata)==null?void 0:N.annotations)==null?void 0:me["backstage.io/orphan"])==="true"}function Ze(){const L=(0,ue.s0)(),N=(0,y.tg)(Lt),[me,et]=(0,C.useState)(!1),{entity:wt}=(0,t.X2)(),h=async()=>{et(!1),L(N())};return C.createElement(C.Fragment,null,C.createElement(ee.Z,{severity:"warning",onClick:()=>et(!0)},"This entity is not referenced by any location and is therefore not receiving updates. Click here to delete."),C.createElement(We,{open:me,entity:wt,onConfirm:h,onClose:()=>et(!1)}))}const gt=L=>L.error&&L.level==="error"&&L.type===Le.mk;async function It(L,N){return{items:(await N.getEntityAncestors({entityRef:L})).items.map(wt=>{var h,v;return{errors:((v=(h=wt.entity.status)==null?void 0:h.items)!=null?v:[]).filter(gt).map(Ee=>Ee.error).filter(Ee=>Boolean(Ee)),entity:wt.entity}}).filter(wt=>wt.errors.length>0)}}async function jt(L,N){const me=N.apis.get(t.Ah);if(!me)throw new Error(`No implementation available for ${t.Ah}`);return(await It((0,m.eE)(L),me)).items.length>0}function Zt(){const{entity:L}=(0,t.X2)(),N=(0,m.eE)(L),me=(0,y.h_)(t.Ah),{loading:et,error:wt,value:h}=(0,G.default)(async()=>It(N,me),[N,me]);return wt?C.createElement(j.Z,{mb:1},C.createElement(l.Gk,{error:wt})):et||!h?null:C.createElement(C.Fragment,null,h.items.map((v,k)=>C.createElement(j.Z,{key:k,mb:1},(0,m.eE)(L)!==(0,m.eE)(v.entity)&&C.createElement(j.Z,{p:1},"The error below originates from"," ",C.createElement(t.dx,{entityRef:v.entity})),v.errors.map((te,Ee)=>C.createElement(l.Gk,{key:Ee,error:te})))))}const Ot="core.backstage.entitySwitch",Vt=L=>null;(0,y.R5)(Vt,Ot,!0);const mn=L=>{var N,me;const{entity:et,loading:wt}=(0,t.ce)(),h=(0,y.I_)(),v=(0,y.vJ)(L.children,te=>te.selectByComponentData({key:Ot,withStrictError:"Child of EntitySwitch is not an EntitySwitch.Case"}).getElements().flatMap(Ee=>{var Ye;if(wt)return[];const{if:H,children:W}=Ee.props;return et?[{if:(Ye=H==null?void 0:H(et,{apis:h}))!=null?Ye:!0,children:W}]:[{if:H===void 0,children:W}]}),[h,et,wt]);return v.some(te=>typeof te.if=="object"&&"then"in te.if)?C.createElement(bn,{results:v}):(me=(N=v.find(te=>te.if))==null?void 0:N.children)!=null?me:null};function bn({results:L}){const{loading:N,value:me}=(0,G.default)(async()=>{var et;const wt=L.map(async({if:h,children:v})=>{try{if(await h)return v}catch{}return null});return(et=(await Promise.all(wt)).find(Boolean))!=null?et:null},[L]);return N||!me?null:me}mn.Case=Vt;function hn(L,N){return Boolean(L&&(L==null?void 0:L.toLocaleLowerCase("en-US"))===(N==null?void 0:N.toLocaleLowerCase("en-US")))}function wn(L,N){return typeof N=="string"?hn(L,N):N.some(me=>hn(L,me))}function gn(L){return N=>wn(N.kind,L)}function Tn(L){return N=>hn(N.kind,"component")?wn(N.spec.type,L):!1}function kn(L){return N=>{var me;return wn((me=N.metadata)==null?void 0:me.namespace,L)}}const $n=null,Cn=t._i.Filters,zn=t._i.Content,Sn=(0,y.rx)({id:"catalog",apis:[(0,y.ni)({api:t.Ah,deps:{discoveryApi:y.NW,fetchApi:y.gP},factory:({discoveryApi:L,fetchApi:N})=>new Le.MS({discoveryApi:L,fetchApi:N})}),(0,y.ni)({api:t.p3,deps:{storageApi:y.E6},factory:({storageApi:L})=>new Rt({storageApi:L})})],routes:{catalogIndex:Lt,catalogEntity:t.wi},externalRoutes:{createComponent:sn,viewTechDoc:un},__experimentalConfigure(L){return{...{createButtonTitle:"Create"},...L}}}),Zn=Sn.provide((0,y.P4)({name:"CatalogIndexPage",component:()=>e.e(9852).then(e.bind(e,69852)).then(L=>L.CatalogPage),mountPoint:Lt})),Ln=Sn.provide((0,y.P4)({name:"CatalogEntityPage",component:()=>e.e(9958).then(e.bind(e,39958)).then(L=>L.CatalogEntityPage),mountPoint:t.wi})),jn=Sn.provide((0,y.CO)({name:"EntityAboutCard",component:{lazy:()=>e.e(340).then(e.bind(e,340)).then(L=>L.AboutCard)}})),Xn=Sn.provide((0,y.CO)({name:"EntityLinksCard",component:{lazy:()=>e.e(6199).then(e.bind(e,26199)).then(L=>L.EntityLinksCard)}})),or=Sn.provide((0,y.CO)({name:"EntityHasSystemsCard",component:{lazy:()=>e.e(8737).then(e.bind(e,78737)).then(L=>L.HasSystemsCard)}})),gr=Sn.provide((0,y.CO)({name:"EntityHasComponentsCard",component:{lazy:()=>e.e(3355).then(e.bind(e,23355)).then(L=>L.HasComponentsCard)}})),fr=Sn.provide((0,y.CO)({name:"EntityHasSubcomponentsCard",component:{lazy:()=>e.e(9507).then(e.bind(e,9507)).then(L=>L.HasSubcomponentsCard)}})),Se=Sn.provide((0,y.CO)({name:"EntityHasResourcesCard",component:{lazy:()=>e.e(1215).then(e.bind(e,519)).then(L=>L.HasResourcesCard)}})),ne=Sn.provide((0,y.CO)({name:"EntityDependsOnComponentsCard",component:{lazy:()=>e.e(2563).then(e.bind(e,42563)).then(L=>L.DependsOnComponentsCard)}})),ae=Sn.provide((0,y.CO)({name:"EntityDependencyOfComponentsCard",component:{lazy:()=>e.e(9371).then(e.bind(e,79371)).then(L=>L.DependencyOfComponentsCard)}})),S=Sn.provide((0,y.CO)({name:"EntityDependsOnResourcesCard",component:{lazy:()=>e.e(833).then(e.bind(e,80833)).then(L=>L.DependsOnResourcesCard)}})),ge=Sn.provide((0,y.CO)({name:"RelatedEntitiesCard",component:{lazy:()=>e.e(7867).then(e.bind(e,47867)).then(L=>L.RelatedEntitiesCard)}}))},16673:function(Nt,u,e){e.d(u,{BL:function(){return n.m},Cy:function(){return n.k},Eq:function(){return n.r},Es:function(){return n.C},FZ:function(){return n.p},Hz:function(){return n.q},Kf:function(){return n.y},PA:function(){return n.s},Tu:function(){return n.e},_l:function(){return n.w},bM:function(){return n.E},dN:function(){return n.d},f2:function(){return n.n},im:function(){return n.u},jF:function(){return n.h},mr:function(){return n.t},o6:function(){return n.i},oU:function(){return n.l},p$:function(){return n.v},rR:function(){return n.f},yf:function(){return n.j}});var n=e(3862),i=e(82394),m=e.n(i),d=e(34520),a=e(76635),l=e.n(a),y=e(49558),b=e(30705),t=e(49462),_=e(73495),g=e(2784),F=e(19928),j=e.n(F),V=e(92573),re=e(26655),w=e(32272),A=e(88285)},42214:function(Nt,u,e){e.d(u,{IJ:function(){return rt},Oz:function(){return He},Q3:function(){return Z},fX:function(){return Xe},i4:function(){return ze}});var n=e(30705),i=e(1854),m=e(89393),d=e(2784),a=e(73495),l=e(39857),y=e(73557),b=e(79692),t=e(27616),_=e(8284),g=e(90436),F=e(4614),j=e(80030),V=e(69087),re=e(35111),w=e(14498),A=e(89571),D=e(15584),f=e(49378),x=e(70660),R=e(91256),c=e(37390),O=e(95544),T=e(67358),Ce=e(27556),we=e(97485),nt=e(61837),ot=e(77277),$t=e(38016),ct=e(69001),St=e(26228),xt=e(49558),Q=e(64279),pn=e(30254),Ct=e(43266),Ge=e(58838),C=e(77446),Fe=e(26883);const ve=(0,n.T0)({id:"plugin.githubactions.service"});class M{constructor(be){this.configApi=be.configApi,this.githubAuthApi=be.githubAuthApi}async getOctokit(be){var je;const ut=await this.githubAuthApi.getAccessToken(["repo"]),Mt=(0,i.MY)((je=this.configApi.getOptionalConfigArray("integrations.github"))!=null?je:[]).find(ln=>ln.host===be),rn=Mt==null?void 0:Mt.apiBaseUrl;return new m.v({auth:ut,baseUrl:rn})}async reRunWorkflow(be){const{hostname:je,owner:ut,repo:Et,runId:Mt}=be;return(await this.getOctokit(je)).actions.reRunWorkflow({owner:ut,repo:Et,run_id:Mt})}async listWorkflowRuns(be){const{hostname:je,owner:ut,repo:Et,pageSize:Mt=100,page:rn=0,branch:ln}=be;return(await(await this.getOctokit(je)).actions.listWorkflowRunsForRepo({owner:ut,repo:Et,per_page:Mt,page:rn,...ln?{branch:ln}:{}})).data}async getWorkflow(be){const{hostname:je,owner:ut,repo:Et,id:Mt}=be;return(await(await this.getOctokit(je)).actions.getWorkflow({owner:ut,repo:Et,workflow_id:Mt})).data}async getWorkflowRun(be){const{hostname:je,owner:ut,repo:Et,id:Mt}=be;return(await(await this.getOctokit(je)).actions.getWorkflowRun({owner:ut,repo:Et,run_id:Mt})).data}async listJobsForWorkflowRun(be){const{hostname:je,owner:ut,repo:Et,id:Mt,pageSize:rn=100,page:ln=0}=be;return(await(await this.getOctokit(je)).actions.listJobsForWorkflowRun({owner:ut,repo:Et,run_id:Mt,per_page:rn,page:ln})).data}async downloadJobLogsForWorkflowRun(be){const{hostname:je,owner:ut,repo:Et,runId:Mt}=be;return(await(await this.getOctokit(je)).actions.downloadJobLogsForWorkflowRun({owner:ut,repo:Et,job_id:Mt})).data}}var G=(z=>(z[z.success=0]="success",z[z.failure=1]="failure",z[z.pending=2]="pending",z[z.running=3]="running",z))(G||{});const Re=(0,n.NT)({id:"github-actions"}),Ne=(0,n.Rz)({id:"github-actions/build",path:"/:id",parent:Re}),Me=(0,n.rx)({id:"github-actions",apis:[(0,n.ni)({api:ve,deps:{configApi:n.Ds,githubAuthApi:n.F4},factory:({configApi:z,githubAuthApi:be})=>new M({configApi:z,githubAuthApi:be})})],routes:{entityContent:Re}}),Xe=Me.provide((0,n.P4)({name:"EntityGithubActionsContent",component:()=>Promise.resolve().then(function(){return _e}).then(z=>z.Router),mountPoint:Re})),vt=Me.provide((0,n.CO)({name:"EntityLatestGithubActionRunCard",component:{lazy:()=>e.e(5125).then(e.bind(e,65125)).then(z=>z.LatestWorkflowRunCard)}})),ee=Me.provide((0,n.CO)({name:"EntityLatestGithubActionsForBranchCard",component:{lazy:()=>e.e(5125).then(e.bind(e,65125)).then(z=>z.LatestWorkflowsForBranchCard)}})),ue=Me.provide((0,n.CO)({name:"EntityRecentGithubActionsRunsCard",component:{lazy:()=>e.e(5125).then(e.bind(e,65125)).then(z=>z.RecentWorkflowRunsCard)}})),Pe="github.com/project-slug",at=z=>{var be,je;return(je=(be=z==null?void 0:z.metadata.annotations)==null?void 0:be[Pe])!=null?je:""},bt=({status:z,conclusion:be})=>{if(z===void 0)return null;switch(z.toLocaleLowerCase("en-US")){case"queued":return d.createElement(d.Fragment,null,d.createElement(xt.wA,null)," Queued");case"in_progress":return d.createElement(d.Fragment,null,d.createElement(xt.VC,null)," In progress");case"completed":switch(be==null?void 0:be.toLocaleLowerCase("en-US")){case"skipped":return d.createElement(d.Fragment,null,d.createElement(xt.dh,null)," Aborted");case"timed_out":return d.createElement(d.Fragment,null,d.createElement(xt.Pd,null)," Timed out");case"failure":return d.createElement(d.Fragment,null,d.createElement(xt.vK,null)," Error");default:return d.createElement(d.Fragment,null,d.createElement(xt.Kq,null)," Completed")}default:return d.createElement(d.Fragment,null,d.createElement(xt.wA,null)," Pending")}},Wt=({hostname:z,owner:be,repo:je})=>{const ut=(0,n.h_)(ve),{id:Et}=(0,n.Oi)(Ne);return(0,Q.default)(async()=>{if(!je||!be)throw new Error("No repo/owner provided");const Mt=await ut.listJobsForWorkflowRun({hostname:z,owner:be,repo:je,id:parseInt(Et,10)});return{total_count:Mt.total_count,jobs:Mt.jobs.map(rn=>{var ln,Rn,Mn,Ke;return{html_url:(ln=rn.html_url)!=null?ln:void 0,status:rn.status,conclusion:(Rn=rn.conclusion)!=null?Rn:void 0,started_at:rn.started_at,completed_at:(Mn=rn.completed_at)!=null?Mn:void 0,id:rn.id,name:rn.name,steps:(Ke=rn.steps)==null?void 0:Ke.map(Je=>{var Qe,oe,fe;return{name:Je.name,status:Je.status,conclusion:(Qe=Je.conclusion)!=null?Qe:void 0,number:Je.number,started_at:(oe=Je.started_at)!=null?oe:void 0,completed_at:(fe=Je.completed_at)!=null?fe:void 0}})}})}},[je,be,Et])},on=({hostname:z,owner:be,repo:je})=>{const ut=(0,n.h_)(ve),{id:Et}=(0,n.Oi)(Ne);return(0,Q.default)(async()=>je&&be?ut.getWorkflowRun({hostname:z,owner:be,repo:je,id:parseInt(Et,10)}):Promise.reject(new Error("No repo/owner provided")),[je,be,Et])},zt=({hostname:z,owner:be,repo:je,id:ut})=>{const Et=(0,n.h_)(ve);return(0,Q.default)(async()=>je&&be?Et.downloadJobLogsForWorkflowRun({hostname:z,owner:be,repo:je,runId:ut}):Promise.reject("No repo/owner provided"),[je,be,ut])},Le=(0,b.Z)(z=>({button:{order:-1,marginRight:0,marginLeft:"-20px"},modal:{display:"flex",alignItems:"center",width:"85%",height:"85%",justifyContent:"center",margin:"auto"},normalLogContainer:{height:"75vh",width:"100%"},modalLogContainer:{height:"100%",width:"100%"},log:{background:z.palette.background.default}})),Pt=({entity:z,runId:be,inProgress:je})=>{var ut;const Et=(0,n.h_)(n.Ds),Mt=Le(),rn=at(z),ln=(0,i.MY)((ut=Et.getOptionalConfigArray("integrations.github"))!=null?ut:[])[0].host,[Rn,Mn]=rn&&rn.split("/")||[],Ke=zt({hostname:ln,owner:Rn,repo:Mn,id:be}),Je=Ke.value?String(Ke.value):void 0,[Qe,oe]=d.useState(!1),fe=()=>{oe(!0)},We=()=>{oe(!1)};return d.createElement(t.Z,{TransitionProps:{unmountOnExit:!0},disabled:je},d.createElement(_.Z,{expandIcon:d.createElement($t.Z,null),IconButtonProps:{className:Mt.button}},d.createElement(g.Z,{variant:"button"},Ke.loading?d.createElement(F.Z,null):"Job Log"),d.createElement(j.ZP,{title:"Open Log",TransitionComponent:V.Z,arrow:!0},d.createElement(pn.Z,{onClick:Be=>{Be.stopPropagation(),fe()},style:{marginLeft:"auto"}})),d.createElement(re.Z,{className:Mt.modal,onClick:Be=>Be.stopPropagation(),open:Qe,onClose:We},d.createElement(w.Z,{in:Qe},d.createElement("div",{className:Mt.modalLogContainer},d.createElement(xt.nU,{text:Je!=null?Je:"No Values Found",classes:{root:Mt.log}}))))),Je&&d.createElement("div",{className:Mt.normalLogContainer},d.createElement(xt.nU,{text:Je,classes:{root:Mt.log}})))},Rt=(0,b.Z)(z=>({root:{maxWidth:720,margin:z.spacing(2)},title:{padding:z.spacing(1,0,2,0)},table:{padding:z.spacing(1)},accordionDetails:{padding:0},button:{order:-1,marginRight:0,marginLeft:"-20px"},externalLinkIcon:{fontSize:"inherit",verticalAlign:"bottom"}})),sn=(z,be)=>{if(!z||!be)return"";const je=St.ou.fromISO(z);return(be?St.ou.fromISO(be):St.ou.now()).diff(je).toFormat("m 'minutes' s 'seconds'")},un=({step:z})=>{var be;return d.createElement(A.Z,null,d.createElement(D.Z,null,d.createElement(f.Z,{primary:z.name,secondary:sn(z.started_at,z.completed_at)})),d.createElement(D.Z,null,d.createElement(bt,{status:z.status.toLocaleUpperCase("en-US"),conclusion:(be=z.conclusion)==null?void 0:be.toLocaleUpperCase("en-US")})))},Lt=({job:z,className:be,entity:je})=>{var ut;const Et=Rt();return d.createElement(t.Z,{TransitionProps:{unmountOnExit:!0},className:be},d.createElement(_.Z,{expandIcon:d.createElement($t.Z,null),IconButtonProps:{className:Et.button}},d.createElement(g.Z,{variant:"button"},z.name," (",sn(z.started_at,z.completed_at),")")),d.createElement(x.Z,{className:Et.accordionDetails},d.createElement(R.Z,null,d.createElement(c.Z,null,(ut=z.steps)==null?void 0:ut.map(Mt=>d.createElement(un,{key:Mt.number,step:Mt}))))),z.status==="queued"||z.status==="in_progress"?d.createElement(Pt,{runId:z.id,inProgress:!0,entity:je}):d.createElement(Pt,{runId:z.id,inProgress:!1,entity:je}))},Ht=({jobs:z,entity:be})=>{const je=Rt();return d.createElement(O.Z,null,z&&z.total_count>0&&z.jobs.map(ut=>d.createElement(Lt,{key:ut.id,job:ut,className:ut.status!=="success"?je.failed:je.success,entity:be})))},nn=({entity:z})=>{var be,je,ut,Et,Mt,rn,ln,Rn,Mn,Ke,Je,Qe,oe,fe,We,Be;const Ze=(0,n.h_)(n.Ds),gt=at(z),It=(0,i.MY)((be=Ze.getOptionalConfigArray("integrations.github"))!=null?be:[])[0].host,[jt,Zt]=gt&&gt.split("/")||[],Ot=on({hostname:It,owner:jt,repo:Zt}),Vt=Wt({hostname:It,owner:jt,repo:Zt}),mn=Rt();return Ot.error&&Ot.error.message?d.createElement(g.Z,{variant:"h6",color:"error"},"Failed to load build, ",Ot.error.message):Ot.loading?d.createElement(T.Z,null):d.createElement("div",{className:mn.root},d.createElement(O.Z,{mb:3},d.createElement(xt.Oo,{"aria-label":"breadcrumb"},d.createElement(xt.rU,{to:".."},"Workflow runs"),d.createElement(g.Z,null,"Workflow run details"))),d.createElement(R.Z,{component:Ce.Z,className:mn.table},d.createElement(c.Z,null,d.createElement(we.Z,null,d.createElement(A.Z,null,d.createElement(D.Z,null,d.createElement(g.Z,{noWrap:!0},"Branch")),d.createElement(D.Z,null,(je=Ot.value)==null?void 0:je.head_branch)),d.createElement(A.Z,null,d.createElement(D.Z,null,d.createElement(g.Z,{noWrap:!0},"Message")),d.createElement(D.Z,null,(Et=(ut=Ot.value)==null?void 0:ut.head_commit)==null?void 0:Et.message)),d.createElement(A.Z,null,d.createElement(D.Z,null,d.createElement(g.Z,{noWrap:!0},"Commit ID")),d.createElement(D.Z,null,(rn=(Mt=Ot.value)==null?void 0:Mt.head_commit)==null?void 0:rn.id)),d.createElement(A.Z,null,d.createElement(D.Z,null,d.createElement(g.Z,{noWrap:!0},"Workflow")),d.createElement(D.Z,null,(ln=Ot.value)==null?void 0:ln.name)),d.createElement(A.Z,null,d.createElement(D.Z,null,d.createElement(g.Z,{noWrap:!0},"Status")),d.createElement(D.Z,null,d.createElement(bt,{status:((Rn=Ot.value)==null?void 0:Rn.status)||void 0,conclusion:((Mn=Ot.value)==null?void 0:Mn.conclusion)||void 0}))),d.createElement(A.Z,null,d.createElement(D.Z,null,d.createElement(g.Z,{noWrap:!0},"Author")),d.createElement(D.Z,null,`${(Qe=(Je=(Ke=Ot.value)==null?void 0:Ke.head_commit)==null?void 0:Je.author)==null?void 0:Qe.name} (${(We=(fe=(oe=Ot.value)==null?void 0:oe.head_commit)==null?void 0:fe.author)==null?void 0:We.email})`)),d.createElement(A.Z,null,d.createElement(D.Z,null,d.createElement(g.Z,{noWrap:!0},"Links")),d.createElement(D.Z,null,((Be=Ot.value)==null?void 0:Be.html_url)&&d.createElement(xt.rU,{to:Ot.value.html_url},"Workflow runs on GitHub"," ",d.createElement(ct.Z,{className:mn.externalLinkIcon})))),d.createElement(A.Z,null,d.createElement(D.Z,{colSpan:2},d.createElement(g.Z,{noWrap:!0},"Jobs"),Vt.loading?d.createElement(F.Z,null):d.createElement(Ht,{jobs:Vt.value,entity:z})))))))};function Te({hostname:z,owner:be,repo:je,branch:ut,initialPageSize:Et=5}){const Mt=(0,n.h_)(ve),rn=(0,n.h_)(n.VE),[ln,Rn]=(0,d.useState)(0),[Mn,Ke]=(0,d.useState)(0),[Je,Qe]=(0,d.useState)(Et),{loading:oe,value:fe,retry:We,error:Be}=(0,C.Z)(async()=>{const Ze=await Mt.listWorkflowRuns({hostname:z,owner:be,repo:je,pageSize:Je,page:Mn+1,branch:ut});return Rn(Ze.total_count),Ze.workflow_runs.map(gt=>{var It,jt,Zt,Ot,Vt,mn,bn,hn,wn;return{workflowName:(It=gt.name)!=null?It:void 0,message:(jt=gt.head_commit)==null?void 0:jt.message,id:`${gt.id}`,onReRunClick:async()=>{try{await Mt.reRunWorkflow({hostname:z,owner:be,repo:je,runId:gt.id})}catch(gn){rn.post(new Error(`Failed to rerun the workflow: ${gn.message}`))}},source:{branchName:(Zt=gt.head_branch)!=null?Zt:void 0,commit:{hash:(Ot=gt.head_commit)==null?void 0:Ot.id,url:(bn=(Vt=gt.head_repository)==null?void 0:Vt.branches_url)==null?void 0:bn.replace("{/branch}",(mn=gt.head_branch)!=null?mn:"")}},status:(hn=gt.status)!=null?hn:void 0,conclusion:(wn=gt.conclusion)!=null?wn:void 0,url:gt.url,githubUrl:gt.html_url}})},[Mn,Je,je,be]);return[{page:Mn,pageSize:Je,loading:oe,runs:fe,projectName:`${be}/${je}`,total:ln,error:Be},{runs:fe,setPage:Ke,setPageSize:Qe,retry:We}]}const st=[{title:"ID",field:"id",type:"numeric",width:"150px"},{title:"Message",field:"message",highlight:!0,render:z=>{const be=()=>{const je=(0,n.tg)(Ne);return d.createElement(xt.rU,{component:l.rU,to:je({id:z.id})},z.message)};return d.createElement(be,null)}},{title:"Source",render:z=>{var be,je;return d.createElement(g.Z,{variant:"body2",noWrap:!0},d.createElement("p",null,(be=z.source)==null?void 0:be.branchName),d.createElement("p",null,(je=z.source)==null?void 0:je.commit.hash))}},{title:"Workflow",field:"workflowName"},{title:"Status",width:"150px",render:z=>d.createElement(O.Z,{display:"flex",alignItems:"center"},d.createElement(bt,{status:z.status,conclusion:z.conclusion}))},{title:"Actions",render:z=>d.createElement(j.ZP,{title:"Rerun workflow"},d.createElement(nt.Z,{onClick:z.onReRunClick},d.createElement(Ct.Z,null))),width:"10%"}],le=({projectName:z,loading:be,pageSize:je,page:ut,retry:Et,runs:Mt,onChangePage:rn,onChangePageSize:ln,total:Rn})=>d.createElement(xt.iA,{isLoading:be,options:{paging:!0,pageSize:je,padding:"dense"},totalCount:Rn,page:ut,actions:[{icon:()=>d.createElement(Fe.Z,null),tooltip:"Reload workflow runs",isFreeAction:!0,onClick:()=>Et()}],data:Mt!=null?Mt:[],onPageChange:rn,onRowsPerPageChange:ln,style:{width:"100%"},title:d.createElement(O.Z,{display:"flex",alignItems:"center"},d.createElement(Ge.Z,null),d.createElement(O.Z,{mr:1}),d.createElement(g.Z,{variant:"h6"},z)),columns:st}),ie=({entity:z,branch:be})=>{var je;const ut=(0,n.h_)(n.Ds),Et=at(z),Mt=(0,i.MY)((je=ut.getOptionalConfigArray("integrations.github"))!=null?je:[])[0].host,[rn,ln]=(Et!=null?Et:"/").split("/"),[{runs:Rn,...Mn},{retry:Ke,setPage:Je,setPageSize:Qe}]=Te({hostname:Mt,owner:rn,repo:ln,branch:be}),oe=Mt||"github.com";return!Mn.loading&&!Rn?d.createElement(xt.ub,{missing:"data",title:"No Workflow Data",description:"This component has GitHub Actions enabled, but no data was found. Have you created any Workflows? Click the button below to create a new Workflow.",action:d.createElement(ot.Z,{variant:"contained",color:"primary",href:`https://${oe}/${Et}/actions/new`},"Create new Workflow")}):d.createElement(le,{...Mn,runs:Rn,loading:Mn.loading,retry:Ke,onChangePageSize:Qe,onChangePage:Je})},Z=z=>{var be;return Boolean((be=z.metadata.annotations)==null?void 0:be[Pe])};var _e=Object.freeze({__proto__:null,isGithubActionsAvailable:Z,Router:()=>{const{entity:z}=(0,a.X2)();return Z(z)?d.createElement(y.Z5,null,d.createElement(y.AW,{path:"/",element:d.createElement(ie,{entity:z})}),d.createElement(y.AW,{path:`${Ne.path}`,element:d.createElement(nn,{entity:z})}),")"):d.createElement(xt.sk,{annotation:Pe})}});const de=(0,b.Z)({externalLinkIcon:{fontSize:"inherit",verticalAlign:"bottom"}}),Ie=z=>{var be;const{error:je,loading:ut,lastRun:Et,branch:Mt}=z,rn=de();return je?d.createElement(g.Z,null,"Couldn't fetch latest ",Mt," run"):ut?d.createElement(T.Z,null):d.createElement(xt.xT,{metadata:{status:d.createElement(d.Fragment,null,d.createElement(bt,{status:Et.status,conclusion:Et.conclusion})),message:Et.message,url:d.createElement(xt.rU,{to:(be=Et.githubUrl)!=null?be:""},"See more on GitHub"," ",d.createElement(ct.Z,{className:rn.externalLinkIcon}))}})},ze=z=>{var be,je,ut,Et;const{branch:Mt="master",variant:rn}=z,{entity:ln}=(0,a.X2)(),Rn=(0,n.h_)(n.Ds),Mn=(0,n.h_)(n.VE),Ke=(0,i.MY)((be=Rn.getOptionalConfigArray("integrations.github"))!=null?be:[])[0].host,[Je,Qe]=((ut=(je=ln==null?void 0:ln.metadata.annotations)==null?void 0:je[Pe])!=null?ut:"/").split("/"),[{runs:oe,loading:fe,error:We}]=Te({hostname:Ke,owner:Je,repo:Qe,branch:Mt}),Be=(Et=oe==null?void 0:oe[0])!=null?Et:{};return(0,d.useEffect)(()=>{We&&Mn.post(We)},[We,Mn]),d.createElement(xt.rJ,{title:`Last ${Mt} build`,variant:rn},d.createElement(Ie,{error:We,loading:fe,branch:Mt,lastRun:Be}))},rt=z=>{const{branch:be="master",variant:je}=z,{entity:ut}=(0,a.X2)();return d.createElement(xt.rJ,{title:`Last ${be} build`,variant:je},d.createElement(ie,{branch:be,entity:ut}))},kt=z=>z.split(`
`)[0],He=z=>{var be,je,ut;const{branch:Et,dense:Mt=!1,limit:rn=5,variant:ln}=z,{entity:Rn}=(0,a.X2)(),Mn=(0,n.h_)(n.Ds),Ke=(0,n.h_)(n.VE),Je=(0,i.MY)((be=Mn.getOptionalConfigArray("integrations.github"))!=null?be:[])[0].host,[Qe,oe]=((ut=(je=Rn==null?void 0:Rn.metadata.annotations)==null?void 0:je[Pe])!=null?ut:"/").split("/"),[{runs:fe=[],loading:We,error:Be}]=Te({hostname:Je,owner:Qe,repo:oe,branch:Et,initialPageSize:rn});(0,d.useEffect)(()=>{Be&&Ke.post(Be)},[Be,Ke]);const Ze=Je||"github.com",gt=(0,n.tg)(Ne);return Be?d.createElement(xt.yu,{title:Be.message,error:Be}):d.createElement(xt.rJ,{title:"Recent Workflow Runs",subheader:Et?`Branch: ${Et}`:"All Branches",noPadding:!0,variant:ln},fe.length?d.createElement(xt.iA,{isLoading:We,options:{search:!1,paging:!1,padding:Mt?"dense":"default",toolbar:!1},columns:[{title:"Commit Message",field:"message",render:It=>{var jt;return d.createElement(xt.rU,{component:l.rU,to:gt({id:It.id})},kt((jt=It.message)!=null?jt:""))}},{title:"Branch",field:"source.branchName"},{title:"Status",field:"status",render:bt}],data:fe}):d.createElement("div",{style:{textAlign:"center"}},d.createElement(g.Z,{variant:"body1"},"This component has GitHub Actions enabled, but no workflows were found."),d.createElement(g.Z,{variant:"body2"},d.createElement(xt.rU,{to:`https://${Ze}/${Qe}/${oe}/actions/new`},"Create a new workflow"))))}},59235:function(Nt,u,e){e.d(u,{$M:function(){return ve},Eg:function(){return G},Jh:function(){return bt},Yq:function(){return Ht},jJ:function(){return nn},jQ:function(){return Re},oy:function(){return Pe},qJ:function(){return Xe},rw:function(){return M},w1:function(){return Fe}});var n=e(30705),i=e(34520),m=e(73495),d=e(79692),a=e(12420),l=e(60905),y=e(95544),b=e(90436),t=e(38402),_=e(86136),g=e(49378),F=e(85256),j=e(61837),V=e(11776),re=e(80030),w=e(9520),A=e(82938),D=e(76637),f=e(2784),x=e(16060),R=e(64279),c=e(49558),O=e(73655),T=e(99688),Ce=e(52866),we=e(27604),nt=e(13384),ot=e(62367),$t=e(52160),ct=e(98685),St=e(19928),xt=e.n(St),Q=e(14162),pn=e.n(Q),Ct=e(19126),Ge=e.n(Ct);const C=(0,n.x8)({id:"catalog-index"}),Fe=(0,n.rx)({id:"org",externalRoutes:{catalogIndex:C}}),ve=Fe.provide((0,n.CO)({name:"EntityGroupProfileCard",component:{lazy:()=>e.e(6747).then(e.bind(e,16747)).then(Te=>Te.GroupProfileCard)}})),M=Fe.provide((0,n.CO)({name:"EntityMembersListCard",component:{lazy:()=>e.e(6747).then(e.bind(e,16747)).then(Te=>Te.MembersListCard)}})),G=Fe.provide((0,n.CO)({name:"EntityOwnershipCard",component:{lazy:()=>e.e(6747).then(e.bind(e,16747)).then(Te=>Te.OwnershipCard)}})),Re=Fe.provide((0,n.CO)({name:"EntityUserProfileCard",component:{lazy:()=>e.e(6747).then(e.bind(e,16747)).then(Te=>Te.UserProfileCard)}})),Ne=(0,d.Z)(Te=>(0,a.Z)({card:{border:`1px solid ${Te.palette.divider}`,boxShadow:Te.shadows[2],borderRadius:"4px",overflow:"visible",position:"relative",margin:Te.spacing(4,1,1),flex:"1",minWidth:"0px"},email:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",display:"inline-block",maxWidth:"100%","&:hover":{overflow:"visible",whiteSpace:"normal"}}})),Me=Te=>{var st;const le=Ne(),{metadata:{name:ie,description:Z},spec:{profile:B}}=Te.member,_e=(st=B==null?void 0:B.displayName)!=null?st:ie;return f.createElement(l.Z,{item:!0,container:!0,xs:12,sm:6,md:4,xl:2},f.createElement(y.Z,{className:le.card},f.createElement(y.Z,{display:"flex",flexDirection:"column",m:3,alignItems:"center",justifyContent:"center"},f.createElement(c.qE,{displayName:_e,picture:B==null?void 0:B.picture,customStyles:{position:"absolute",top:"-2rem"}}),f.createElement(y.Z,{pt:2,sx:{maxWidth:"100%"},textAlign:"center"},f.createElement(b.Z,{variant:"h5"},f.createElement(c.rU,{to:(0,x.Gn)(`/catalog/:namespace/user/${ie}`,(0,m.hd)(Te.member))},_e)),(B==null?void 0:B.email)&&f.createElement(c.rU,{className:le.email,to:`mailto:${B.email}`},B.email),Z&&f.createElement(b.Z,{variant:"subtitle2"},Z)))))},Xe=Te=>{var st;const{memberDisplayTitle:le="Members",pageSize:ie=50}=Te,{entity:Z}=(0,m.X2)(),{metadata:{name:B,namespace:_e},spec:{profile:de}}=Z,Ie=(0,n.h_)(m.Ah),ze=(st=de==null?void 0:de.displayName)!=null?st:B,rt=_e||i.zG,[kt,He]=f.useState(1),z=(ln,Rn)=>{He(Rn)},{loading:be,error:je,value:ut}=(0,R.default)(async()=>(await Ie.getEntities({filter:{kind:"User","relations.memberof":[(0,i.eE)({kind:"group",namespace:rt.toLocaleLowerCase("en-US"),name:B.toLocaleLowerCase("en-US")})]}})).items,[Ie,Z]);if(be)return f.createElement(c.Ex,null);if(je)return f.createElement(c.Gk,{error:je});const Et=Math.ceil(((ut==null?void 0:ut.length)||0)/ie),Mt=Et<2?"":`, page ${kt} of ${Et}`,rn=f.createElement(D.Z,{count:Et,page:kt,onChange:z,showFirstButton:!0,showLastButton:!0});return f.createElement(l.Z,{item:!0},f.createElement(c.rJ,{title:`${le} (${(ut==null?void 0:ut.length)||0}${Mt})`,subheader:`of ${ze}`,...Et<=1?{}:{actions:rn}},f.createElement(l.Z,{container:!0,spacing:3},ut&&ut.length>0?ut.slice(ie*(kt-1),ie*kt).map(ln=>f.createElement(Me,{member:ln,key:ln.metadata.uid})):f.createElement(y.Z,{p:2},f.createElement(b.Z,null,"This group has no ",le.toLocaleLowerCase(),".")))))},vt=({href:Te,Icon:st,text:le})=>f.createElement(t.Z,{button:!0,component:"a",key:Te,href:Te},f.createElement(_.Z,null,st?f.createElement(st,null):f.createElement($t.Z,null)),f.createElement(g.Z,null,le)),ee=({links:Te})=>{const st=(0,n.qD)(),le=ie=>{var Z;return ie&&(Z=st.getSystemIcon(ie))!=null?Z:$t.Z};return Te===void 0?null:f.createElement(f.Fragment,null,f.createElement(F.Z,null),Te.map(ie=>f.createElement(vt,{key:ie.url,href:ie.url,text:ie.title,Icon:le(ie.icon)})))},ue=Te=>f.createElement(y.Z,{display:"flex",alignItems:"center"},f.createElement(ot.Z,{fontSize:"inherit"}),f.createElement(y.Z,{ml:1},Te.title)),Pe=Te=>{var st,le;const ie=(0,n.h_)(m.Ah),Z=(0,n.h_)(n.$v),{entity:B}=(0,m.X2)(),_e=(0,f.useCallback)(async()=>{await ie.refreshEntity((0,i.eE)(B)),Z.post({message:"Refresh scheduled",severity:"info"})},[ie,Z,B]);if(!B)return f.createElement(T.Z,{severity:"error"},"Group not found");const{metadata:{name:de,description:Ie,annotations:ze,links:rt},spec:{profile:kt}}=B,He=(0,m.hF)(B,i._b,{kind:"Group"}),z=(0,m.hF)(B,i.wP,{kind:"group"}),be=ze==null?void 0:ze[i.P1],je=(be==null?void 0:be.startsWith("url:"))||(be==null?void 0:be.startsWith("file:")),ut=(st=B.metadata.annotations)==null?void 0:st[i.Tf],Et=(le=kt==null?void 0:kt.displayName)!=null?le:de,Mt=kt!=null&&kt.email?`mailto:${kt.email}`:"#",rn=ut?f.createElement(j.Z,{"aria-label":"Edit",title:"Edit Metadata",component:c.rU,to:ut},f.createElement(we.Z,null)):f.createElement(j.Z,{"aria-label":"Edit",disabled:!0,title:"Edit Metadata"},f.createElement(we.Z,null));return f.createElement(c.rJ,{title:f.createElement(ue,{title:Et}),subheader:Ie,variant:Te.variant,action:f.createElement(f.Fragment,null,je&&f.createElement(j.Z,{"aria-label":"Refresh",title:"Schedule entity refresh",onClick:_e},f.createElement(Ce.Z,null)),rn)},f.createElement(l.Z,{container:!0,spacing:3},f.createElement(l.Z,{item:!0,xs:12,sm:2,xl:1},f.createElement(c.qE,{displayName:Et,picture:kt==null?void 0:kt.picture})),f.createElement(l.Z,{item:!0,md:10,xl:11},f.createElement(V.Z,null,(kt==null?void 0:kt.email)&&f.createElement(t.Z,null,f.createElement(_.Z,null,f.createElement(re.ZP,{title:"Email"},f.createElement(nt.Z,null))),f.createElement(g.Z,{primary:f.createElement(c.rU,{to:Mt},kt.email),secondary:"Email"})),f.createElement(t.Z,null,f.createElement(_.Z,null,f.createElement(re.ZP,{title:"Parent Group"},f.createElement(O.Z,null))),f.createElement(g.Z,{primary:z.length?f.createElement(m.rI,{entityRefs:z,defaultKind:"Group"}):"N/A",secondary:"Parent Group"})),f.createElement(t.Z,null,f.createElement(_.Z,null,f.createElement(re.ZP,{title:"Child Groups"},f.createElement(ot.Z,null))),f.createElement(g.Z,{primary:He.length?f.createElement(m.rI,{entityRefs:He,defaultKind:"Group"}):"N/A",secondary:"Child Groups"})),(Te==null?void 0:Te.showLinks)&&f.createElement(ee,{links:rt})))))},at=Te=>Te.title?f.createElement(y.Z,{display:"flex",alignItems:"center"},f.createElement(ct.Z,{fontSize:"inherit"}),f.createElement(y.Z,{ml:1},Te.title)):null,bt=Te=>{var st,le;const{entity:ie}=(0,m.X2)();if(!ie)return f.createElement(T.Z,{severity:"error"},"User not found");const Z=(st=ie.metadata.annotations)==null?void 0:st[i.Tf],{metadata:{name:B,description:_e,links:de},spec:{profile:Ie}}=ie,ze=(le=Ie==null?void 0:Ie.displayName)!=null?le:B,rt=Ie!=null&&Ie.email?`mailto:${Ie.email}`:void 0,kt=(0,m.hF)(ie,i.hr,{kind:"Group"});return f.createElement(c.rJ,{title:f.createElement(at,{title:ze}),subheader:_e,variant:Te.variant,action:f.createElement(f.Fragment,null,Z&&f.createElement(j.Z,{"aria-label":"Edit",title:"Edit Metadata",component:c.rU,to:Z},f.createElement(we.Z,null)))},f.createElement(l.Z,{container:!0,spacing:3,alignItems:"flex-start"},f.createElement(l.Z,{item:!0,xs:12,sm:2,xl:1},f.createElement(c.qE,{displayName:ze,picture:Ie==null?void 0:Ie.picture})),f.createElement(l.Z,{item:!0,md:10,xl:11},f.createElement(V.Z,null,(Ie==null?void 0:Ie.email)&&f.createElement(t.Z,null,f.createElement(_.Z,null,f.createElement(re.ZP,{title:"Email"},f.createElement(nt.Z,null))),f.createElement(g.Z,null,f.createElement(c.rU,{to:rt!=null?rt:""},Ie.email))),f.createElement(t.Z,null,f.createElement(_.Z,null,f.createElement(re.ZP,{title:"Member of"},f.createElement(ot.Z,null))),f.createElement(g.Z,null,f.createElement(m.rI,{entityRefs:kt,defaultKind:"Group"}))),(Te==null?void 0:Te.showLinks)&&f.createElement(ee,{links:de})))))},Wt=pn()(10),on=(Te,st)=>{const{kind:le,type:ie}=st,Z=Te.map(_e=>(0,m.$3)((0,i.of)(_e),{defaultKind:"group"})),B={kind:le.toLocaleLowerCase("en-US"),type:ie,owners:Z,user:"all"};return Ge().stringify({filters:B},{arrayFormat:"repeat"})},zt=Te=>{let st=[(0,i.eE)(Te)];if(Te.kind==="User"){const ie=(0,m.hF)(Te,i.hr,{kind:"Group"}).map(Z=>(0,i.eE)({kind:Z.kind,namespace:Z.namespace,name:Z.name}));st=[...st,...ie]}return st},Le=async(Te,st)=>{const le=[],ie=new Map,Z=new Set;le.push(Te);let B=Te;for(;le.length>0;){const _e=(0,m.hF)(B,i._b,{kind:"Group"});await Promise.all(_e.map(de=>Wt(async()=>{const Ie=st.getEntityByRef(de);ie.set(de.name,Ie);try{const ze=await Ie;ze&&le.push(ze)}finally{ie.delete(de.name)}}))),le.shift(),Z.add((0,i.eE)({kind:B.kind,namespace:B.metadata.namespace,name:B.metadata.name})),B=le[0]}return Array.from(Z)};function Pt(Te,st,le,ie){const Z=(0,n.h_)(m.Ah),B=ie!=null?ie:["Component","API","System"],{loading:_e,error:de,value:Ie}=(0,R.default)(async()=>{const ze=st==="aggregated"&&le?await Le(Te,Z):zt(Te);return(await Z.getEntities({filter:[{kind:B,"relations.ownedBy":ze}],fields:["kind","metadata.name","metadata.namespace","spec.type","relations"]})).items.reduce((z,be)=>{var je,ut;const Et=z.find(Mt=>{var rn;return Mt.kind===be.kind&&Mt.type===((rn=be.spec)==null?void 0:rn.type)});return Et?Et.count+=1:z.push({kind:be.kind,type:(ut=(je=be.spec)==null?void 0:je.type)==null?void 0:ut.toString(),count:1}),z},[]).sort((z,be)=>be.count-z.count).slice(0,6).map(z=>({counter:z.count,type:z.type,kind:z.kind,queryParams:on(ze,z)}))},[Z,Te,st]);return{componentsWithCounters:Ie,loading:_e,error:de}}const Rt=(0,d.Z)(Te=>(0,a.Z)({card:{border:`1px solid ${Te.palette.divider}`,boxShadow:Te.shadows[2],borderRadius:"4px",padding:Te.spacing(2),color:"#fff",transition:`${Te.transitions.duration.standard}ms`,"&:hover":{boxShadow:Te.shadows[4]},height:"100%"},bold:{fontWeight:Te.typography.fontWeightBold},entityTypeBox:{background:st=>Te.getPageTheme({themeId:st.type}).backgroundImage}})),sn=({counter:Te,type:st,kind:le,url:ie})=>{const Z=Rt({type:st!=null?st:le}),B=st!=null?st:le;return f.createElement(c.rU,{to:ie,variant:"body2"},f.createElement(y.Z,{className:`${Z.card} ${Z.entityTypeBox}`,display:"flex",flexDirection:"column",alignItems:"center"},f.createElement(b.Z,{className:Z.bold,variant:"h6"},Te),f.createElement(b.Z,{className:Z.bold,variant:"h6"},xt()(B.toLocaleUpperCase("en-US"),Te)),st&&f.createElement(b.Z,{variant:"subtitle1"},le)))},un=({entity:Te,relationsType:st,isGroup:le,entityFilterKind:ie})=>{const Z=(0,n.tg)(C),{componentsWithCounters:B,loading:_e,error:de}=Pt(Te,st,le,ie);return _e?f.createElement(c.Ex,null):de?f.createElement(c.Gk,{error:de}):f.createElement(l.Z,{container:!0},B==null?void 0:B.map(Ie=>{var ze;return f.createElement(l.Z,{item:!0,xs:6,md:6,lg:4,key:(ze=Ie.type)!=null?ze:Ie.kind},f.createElement(sn,{counter:Ie.counter,kind:Ie.kind,type:Ie.type,url:`${Z()}/?${Ie.queryParams}`}))}))},Lt=(0,d.Z)(Te=>({list:{[Te.breakpoints.down("xs")]:{padding:"0 0 12px"}},listItemText:{[Te.breakpoints.down("xs")]:{paddingRight:0,paddingLeft:0}},listItemSecondaryAction:{[Te.breakpoints.down("xs")]:{width:"100%",top:"auto",right:"auto",position:"relative",transform:"unset"}}})),Ht=Te=>{const{variant:st,entityFilterKind:le,hideRelationsToggle:ie,relationsType:Z}=Te,B=ie===void 0?!1:ie,_e=Lt(),{entity:de}=(0,m.X2)(),Ie=de.kind==="Group",[ze,rt]=(0,f.useState)(Z||"direct");return f.createElement(c.rJ,{title:"Ownership",variant:st},!B&&f.createElement(V.Z,{dense:!0},f.createElement(t.Z,{className:_e.list},f.createElement(g.Z,{className:_e.listItemText}),f.createElement(w.Z,{className:_e.listItemSecondaryAction},"Direct Relations",f.createElement(re.ZP,{placement:"top",arrow:!0,title:`${ze==="direct"?"Direct":"Aggregated"} Relations`},f.createElement(A.Z,{color:"primary",checked:ze!=="direct",onChange:()=>rt(ze==="direct"?"aggregated":"direct"),name:"pin",inputProps:{"aria-label":"Ownership Type Switch"},disabled:!Ie})),"Aggregated Relations"))),f.createElement(un,{entity:de,relationsType:ze,isGroup:Ie,entityFilterKind:le}))},nn=Te=>{const{singularTitle:st,pluralTitle:le,icon:ie,filter:Z}=Te,B=(0,n.h_)(n.$4),_e=(0,n.h_)(m.Ah),de=(0,n.tg)(m.wi),{value:Ie}=(0,R.default)(async()=>{const ze=await B.getBackstageIdentity();return(await _e.getEntities({filter:[{kind:"group","relations.hasMember":ze.userEntityRef,...Z!=null?Z:{}}],fields:["metadata","kind"]})).items},[]);if(!(Ie!=null&&Ie.length))return null;if(Ie.length===1){const ze=Ie[0];return f.createElement(c.R6,{text:st,to:de((0,i.iB)(ze)),icon:ie})}return f.createElement(c.R6,{icon:ie,text:le},f.createElement(c.k2,{title:le},Ie==null?void 0:Ie.map(function(rt){return f.createElement(c.BT,{title:rt.metadata.title||rt.metadata.name,subtitle:rt.metadata.namespace!==i.zG?rt.metadata.namespace:void 0,to:de((0,i.iB)(rt)),icon:ie,key:(0,i.eE)(rt)})})))}},5083:function(Nt,u,e){e.d(u,{J$:function(){return V},Y2:function(){return f},g2:function(){return b},rG:function(){return l}});var n=e(32272),i=e(96279),m=e.n(i),d=e(9571),a=e(30195),l=(x=>(x.DENY="DENY",x.ALLOW="ALLOW",x.CONDITIONAL="CONDITIONAL",x))(l||{});function y(x,R){return x.name===R.name}function b(x,R){return"resourceType"in x?!R||x.resourceType===R:!1}function t(x){return x.attributes.action==="create"}function _(x){return x.attributes.action==="read"}function g(x){return x.attributes.action==="update"}function F(x){return x.attributes.action==="delete"}function j(x){return{authorize:async(R,c)=>await x.authorize(R,c),authorizeConditional(R,c){const O=R;return x.authorize(O,c)}}}function V({name:x,attributes:R,resourceType:c}){return c?{type:"resource",name:x,attributes:R,resourceType:c}:{type:"basic",name:x,attributes:R}}const re=a.z.lazy(()=>a.z.object({rule:a.z.string(),resourceType:a.z.string(),params:a.z.record(a.z.any()).optional()}).or(a.z.object({anyOf:a.z.array(re).nonempty()})).or(a.z.object({allOf:a.z.array(re).nonempty()})).or(a.z.object({not:re}))),w=a.z.object({result:a.z.literal(l.ALLOW).or(a.z.literal(l.DENY))}),A=a.z.union([a.z.object({result:a.z.literal(l.ALLOW).or(a.z.literal(l.DENY))}),a.z.object({result:a.z.literal(l.CONDITIONAL),pluginId:a.z.string(),resourceType:a.z.string(),conditions:re})]),D=(x,R)=>a.z.object({items:a.z.array(a.z.intersection(a.z.object({id:a.z.string()}),x)).refine(c=>c.length===R.size&&c.every(({id:O})=>R.has(O)),{message:"Items in response do not match request"})});class f{constructor(R){var c;this.discovery=R.discovery,this.enabled=(c=R.config.getOptionalBoolean("permission.enabled"))!=null?c:!1}async authorize(R,c){return this.makeRequest(R,w,c)}async authorizeConditional(R,c){return this.makeRequest(R,A,c)}async makeRequest(R,c,O){if(!this.enabled)return R.map(ct=>({result:l.ALLOW}));const T={items:R.map(ct=>({id:d.Z(),...ct}))},Ce=await this.discovery.getBaseUrl("permission"),we=await m()(`${Ce}/authorize`,{method:"POST",body:JSON.stringify(T),headers:{...this.getAuthorizationHeader(O==null?void 0:O.token),"content-type":"application/json"}});if(!we.ok)throw await n.VL.fromResponse(we);const nt=await we.json(),$t=D(c,new Set(T.items.map(({id:ct})=>ct))).parse(nt).items.reduce((ct,St)=>(ct[St.id]=St,ct),{});return T.items.map(ct=>$t[ct.id])}getAuthorizationHeader(R){return R?{Authorization:`Bearer ${R}`}:{}}}},56563:function(Nt,u,e){e.d(u,{RV:function(){return a},gI:function(){return y},iM:function(){return l},un:function(){return t}});var n=e(2784),i=e(30705),m=e(5083),d=e(49857);const a=(0,i.T0)({id:"plugin.permission.api"});class l{constructor(g,F){this.permissionClient=g,this.identityApi=F}static create(g){const{config:F,discovery:j,identity:V}=g,re=new m.Y2({discovery:j,config:F});return new l(re,V)}async authorize(g){return(await this.permissionClient.authorize([g],await this.identityApi.getCredentials()))[0]}}function y(_){const g=(0,i.h_)(a),{data:F,error:j}=(0,d.ZP)(_,async V=>{if((0,m.g2)(V.permission)&&!V.resourceRef)return m.rG.DENY;const{result:re}=await g.authorize(V);return re});return j?{error:j,loading:!1,allowed:!1}:F===void 0?{loading:!0,allowed:!1}:{loading:!1,allowed:F===m.rG.ALLOW}}const b=_=>{const{permission:g,resourceRef:F,errorComponent:j,...V}=_,re=y(isResourcePermission(g)?{permission:g,resourceRef:F}:{permission:g}),w=useApp(),{NotFoundErrorPage:A}=w.getComponents();let D=j===void 0?React.createElement(A,null):j;return re.loading?D=null:re.allowed&&(D=_.element),React.createElement(Route,{...V,element:D})};function t(_){const{permission:g,resourceRef:F}=_,j=y((0,m.g2)(g)?{permission:g,resourceRef:F}:{permission:g}),V=(0,i.qD)();if(j.loading)return null;if(j.allowed)return n.createElement(n.Fragment,null,_.children);if(_.errorPage)return n.createElement(n.Fragment,null,_.errorPage);const{NotFoundErrorPage:re}=V.getComponents();return n.createElement(re,null)}},32469:function(Nt,u,e){e.d(u,{A:function(){return Mn},B:function(){return wn},C:function(){return bn},E:function(){return Rt},F:function(){return Qe},L:function(){return gt},O:function(){return Z},R:function(){return rn},S:function(){return be},T:function(){return ne},V:function(){return jn},W:function(){return Cn},a:function(){return kn},b:function(){return Tn},c:function(){return Wt},d:function(){return gn},e:function(){return $n},f:function(){return Vt},g:function(){return te},h:function(){return me},i:function(){return oe},j:function(){return Ze},k:function(){return je},l:function(){return mn},m:function(){return Ye},n:function(){return Pt},o:function(){return Lt},p:function(){return Ht},q:function(){return un},r:function(){return Zt},s:function(){return hn},t:function(){return st},u:function(){return Te},v:function(){return Ot},w:function(){return ln},x:function(){return Mt},y:function(){return ie},z:function(){return Ke}});var n=e(34520),i=e(30705),m=e(32272),d=e(19126),a=e.n(d),l=e(82394),y=e.n(l),b=e(73495),t=e(86619),_=e(42494),g=e(95544),F=e(90436),j=e(5806),V=e(21324),re=e(79692),w=e(60905),A=e(4614),D=e(97136),f=e(27556),x=e(77277),R=e(88013),c=e(2784),O=e(64279),T=e(30195),Ce=e(68111),we=e(62155),nt=e(49462),ot=e(74828),$t=e(29611),ct=e(56939),St=e(49558),xt=e(48760),Q=e(82108),pn=e.n(Q),Ct=e(19996),Ge=e(25505),C=e(38016),Fe=e(31377),ve=e(34546),M=e(31625),G=e(12420),Re=e(49166),Ne=e(98281),Me=e(16874),Xe=e(72779),vt=e.n(Xe),ee=e(26228),ue=e(73557),Pe=e(70218),at=e(92233),bt=e(52160);const Wt=(0,i.T0)({id:"plugin.scaffolder.service"});class on{constructor(W){var Ae,De;this.discoveryApi=W.discoveryApi,this.fetchApi=(Ae=W.fetchApi)!=null?Ae:{fetch},this.scmIntegrationsApi=W.scmIntegrationsApi,this.useLongPollingLogs=(De=W.useLongPollingLogs)!=null?De:!1,this.identityApi=W.identityApi}async listTasks(W){if(!this.identityApi)throw new Error("IdentityApi is not available in the ScaffolderClient, please pass through the IdentityApi to the ScaffolderClient constructor in order to use the listTasks method");const Ae=await this.discoveryApi.getBaseUrl("scaffolder"),{userEntityRef:De}=await this.identityApi.getBackstageIdentity(),pt=a().stringify(W.filterByOwnership==="owned"?{createdBy:De}:{}),dt=await this.fetchApi.fetch(`${Ae}/v2/tasks?${pt}`);if(!dt.ok)throw await m.VL.fromResponse(dt);return await dt.json()}async getIntegrationsList(W){return{integrations:[...this.scmIntegrationsApi.azure.list(),...this.scmIntegrationsApi.bitbucket.list().filter(De=>!this.scmIntegrationsApi.bitbucketCloud.byHost(De.config.host)&&!this.scmIntegrationsApi.bitbucketServer.byHost(De.config.host)),...this.scmIntegrationsApi.bitbucketCloud.list(),...this.scmIntegrationsApi.bitbucketServer.list(),...this.scmIntegrationsApi.gerrit.list(),...this.scmIntegrationsApi.github.list(),...this.scmIntegrationsApi.gitlab.list()].map(De=>({type:De.type,title:De.title,host:De.config.host})).filter(De=>W.allowedHosts.includes(De.host))}}async getTemplateParameterSchema(W){const{namespace:Ae,kind:De,name:pt}=(0,n.of)(W,{defaultKind:"template"}),dt=await this.discoveryApi.getBaseUrl("scaffolder"),ft=[Ae,De,pt].map(en=>encodeURIComponent(en)).join("/"),yt=`${dt}/v2/templates/${ft}/parameter-schema`,Ft=await this.fetchApi.fetch(yt);if(!Ft.ok)throw await m.VL.fromResponse(Ft);return await Ft.json()}async scaffold(W){const{templateRef:Ae,values:De,secrets:pt={}}=W,dt=`${await this.discoveryApi.getBaseUrl("scaffolder")}/v2/tasks`,ft=await this.fetchApi.fetch(dt,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({templateRef:Ae,values:{...De},secrets:pt})});if(ft.status!==201){const Ft=`${ft.status} ${ft.statusText}`,an=await ft.text();throw new Error(`Backend request failed, ${Ft} ${an.trim()}`)}const{id:yt}=await ft.json();return{taskId:yt}}async getTask(W){const De=`${await this.discoveryApi.getBaseUrl("scaffolder")}/v2/tasks/${encodeURIComponent(W)}`,pt=await this.fetchApi.fetch(De);if(!pt.ok)throw await m.VL.fromResponse(pt);return await pt.json()}streamLogs(W){return this.useLongPollingLogs?this.streamLogsPolling(W):this.streamLogsEventStream(W)}async dryRun(W){const Ae=await this.discoveryApi.getBaseUrl("scaffolder"),De=await this.fetchApi.fetch(`${Ae}/v2/dry-run`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({template:W.template,values:W.values,secrets:W.secrets,directoryContents:W.directoryContents})});if(!De.ok)throw await m.VL.fromResponse(De);return De.json()}streamLogsEventStream({taskId:W,after:Ae}){return new(y())(De=>{const pt=new URLSearchParams;Ae!==void 0&&pt.set("after",String(Number(Ae))),this.discoveryApi.getBaseUrl("scaffolder").then(dt=>{const ft=`${dt}/v2/tasks/${encodeURIComponent(W)}/eventstream`,yt=new EventSource(ft,{withCredentials:!0});yt.addEventListener("log",Ft=>{if(Ft.data)try{De.next(JSON.parse(Ft.data))}catch(an){De.error(an)}}),yt.addEventListener("completion",Ft=>{if(Ft.data)try{De.next(JSON.parse(Ft.data))}catch(an){De.error(an)}yt.close(),De.complete()}),yt.addEventListener("error",Ft=>{De.error(Ft)})},dt=>{De.error(dt)})})}streamLogsPolling({taskId:W,after:Ae}){let De=Ae;return new(y())(pt=>{this.discoveryApi.getBaseUrl("scaffolder").then(async dt=>{for(;!pt.closed;){const ft=`${dt}/v2/tasks/${encodeURIComponent(W)}/events?${a().stringify({after:De})}`,yt=await this.fetchApi.fetch(ft);if(!yt.ok){await new Promise(an=>setTimeout(an,1e3));continue}const Ft=await yt.json();for(const an of Ft)if(De=Number(an.id),pt.next(an),an.type==="completion"){pt.complete();return}}})})}async listActions(){const W=await this.discoveryApi.getBaseUrl("scaffolder"),Ae=await this.fetchApi.fetch(`${W}/v2/actions`);if(!Ae.ok)throw await m.VL.fromResponse(Ae);return await Ae.json()}}function zt(H,W){return{schema:{returnValue:(0,Ce.ZP)(H),uiOptions:W?(0,Ce.ZP)(W):void 0},type:null,uiOptionsType:null}}const Pt=zt(T.z.string(),T.z.object({allowedKinds:T.z.array(T.z.string()).optional().describe("List of kinds of entities to derive options from"),defaultKind:T.z.string().optional().describe("The default entity kind. Options of this kind will not be prefixed."),allowArbitraryValues:T.z.boolean().optional().describe("Whether to allow arbitrary user input. Defaults to true"),defaultNamespace:T.z.union([T.z.string(),T.z.literal(!1)]).optional().describe("The default namespace. Options with this namespace will not be prefixed.")})).schema,Rt=H=>{var W,Ae,De,pt,dt;const{onChange:ft,schema:{title:yt="Entity",description:Ft="An entity from the catalog"},required:an,uiSchema:en,rawErrors:cn,formData:xn,idSchema:Dn}=H,Nn=(W=en["ui:options"])==null?void 0:W.allowedKinds,K=(Ae=en["ui:options"])==null?void 0:Ae.defaultKind,s=(De=en["ui:options"])==null?void 0:De.defaultNamespace,p=(0,i.h_)(b.Ah),{value:I,loading:X}=(0,O.default)(()=>p.getEntities(Nn?{filter:{kind:Nn}}:void 0)),xe=I==null?void 0:I.items.map(U=>(0,b.$3)(U,{defaultKind:K,defaultNamespace:s})),se=(0,c.useCallback)((U,ye)=>{ft(ye!=null?ye:void 0)},[ft]);return(0,c.useEffect)(()=>{(xe==null?void 0:xe.length)===1&&ft(xe[0])},[xe,ft]),c.createElement(_.Z,{margin:"normal",required:an,error:(cn==null?void 0:cn.length)>0&&!xn},c.createElement(R.ZP,{disabled:(xe==null?void 0:xe.length)===1,id:Dn==null?void 0:Dn.$id,value:xn||"",loading:X,onChange:se,options:xe||[],autoSelect:!0,freeSolo:(dt=(pt=en["ui:options"])==null?void 0:pt.allowArbitraryValues)!=null?dt:!0,renderInput:U=>c.createElement(t.Z,{...U,label:yt,margin:"dense",helperText:Ft,FormHelperTextProps:{margin:"dense",style:{marginLeft:0}},variant:"outlined",required:an,InputProps:U.InputProps})}))},un=zt(T.z.string()).schema,Lt=H=>{const{onChange:W,required:Ae,schema:{title:De="Name",description:pt="Unique name of the component"},rawErrors:dt,formData:ft,uiSchema:{"ui:autofocus":yt},idSchema:Ft,placeholder:an}=H;return c.createElement(t.Z,{id:Ft==null?void 0:Ft.$id,label:De,placeholder:an,helperText:pt,required:Ae,value:ft!=null?ft:"",onChange:({target:{value:en}})=>W(en),margin:"normal",error:(dt==null?void 0:dt.length)>0&&!ft,inputProps:{autoFocus:yt}})},Ht=(H,W)=>{n.y$.isValidObjectName(H)||W.addError("Must start and end with an alphanumeric character, and contain only alphanumeric characters, hyphens, underscores, and periods. Maximum length is 63 characters.")},Te=zt(T.z.array(T.z.string()),T.z.object({kinds:T.z.array(T.z.string()).optional().describe("List of kinds of entities to derive tags from"),showCounts:T.z.boolean().optional().describe("Whether to show usage counts per tag"),helperText:T.z.string().optional().describe("Helper text to display")})).schema,st=H=>{var W,Ae,De;const{formData:pt,onChange:dt,uiSchema:ft}=H,yt=(0,i.h_)(b.Ah),[Ft,an]=(0,c.useState)([]),[en,cn]=(0,c.useState)(""),[xn,Dn]=(0,c.useState)(!1),Nn=(0,n.In)().isValidTag,K=(W=ft["ui:options"])==null?void 0:W.kinds,s=(Ae=ft["ui:options"])==null?void 0:Ae.showCounts,p=(De=ft["ui:options"])==null?void 0:De.helperText,{loading:I,value:X}=(0,O.default)(async()=>{const se="metadata.tags",U={facets:[se]};K&&(U.filter={kind:K});const{facets:ye}=await yt.getEntityFacets(U),it=Object.fromEntries(ye[se].map(({value:Bt,count:Yt})=>[Bt,Yt]));return an(Object.keys(it).sort((Bt,Yt)=>s?it[Yt]-it[Bt]:Bt.localeCompare(Yt))),it}),xe=(se,U)=>{let ye=!1,it=!1;const Bt=pt||[];if((U==null?void 0:U.length)&&Bt.length<U.length){const Yt=U[U.length-1]=U[U.length-1].toLocaleLowerCase("en-US").trim();ye=!Nn(Yt),it=Bt.indexOf(Yt)!==-1}Dn(ye),cn(ye?en:""),!ye&&!it&&dt(U||[])};return(0,we.Z)(()=>dt(pt||[])),c.createElement(_.Z,{margin:"normal"},c.createElement(R.ZP,{multiple:!0,freeSolo:!0,filterSelectedOptions:!0,onChange:xe,value:pt||[],inputValue:en,loading:I,options:Ft,ChipProps:{size:"small"},renderOption:se=>s?`${se} (${X==null?void 0:X[se]})`:se,renderInput:se=>c.createElement(t.Z,{...se,label:"Tags",onChange:U=>cn(U.target.value),error:xn,helperText:p!=null?p:"Add any relevant tags, hit 'Enter' to add new tags. Valid format: [a-z0-9+#] separated by [-], at most 63 characters"})}))},ie=zt(T.z.string(),T.z.object({allowedKinds:T.z.array(T.z.string()).default(["Group","User"]).optional().describe("List of kinds of entities to derive options from. Defaults to Group and User"),allowArbitraryValues:T.z.boolean().optional().describe("Whether to allow arbitrary user input. Defaults to true"),defaultNamespace:T.z.union([T.z.string(),T.z.literal(!1)]).optional().describe("The default namespace. Options with this namespace will not be prefixed.")})).schema,Z=H=>{var W,Ae,De,pt;const{schema:{title:dt="Owner",description:ft="The owner of the component"},uiSchema:yt,...Ft}=H,an=(W=yt["ui:options"])==null?void 0:W.defaultNamespace,en={...yt,"ui:options":{allowedKinds:((Ae=yt["ui:options"])==null?void 0:Ae.allowedKinds)||["Group","User"],defaultKind:"Group",allowArbitraryValues:(pt=(De=yt["ui:options"])==null?void 0:De.allowArbitraryValues)!=null?pt:!0,...an!==void 0?{defaultNamespace:an}:{}}};return c.createElement(Rt,{...Ft,schema:{title:dt,description:ft},uiSchema:en})},B=H=>{const{allowedOwners:W=[],rawErrors:Ae,state:De,onChange:pt}=H,dt=W?W.map(yt=>({label:yt,value:yt})):[{label:"Loading...",value:"loading"}],{owner:ft}=De;return c.createElement(c.Fragment,null,c.createElement(_.Z,{margin:"normal",required:!0,error:(Ae==null?void 0:Ae.length)>0&&!ft},W!=null&&W.length?c.createElement(St.Ph,{native:!0,label:"Owner Available",onChange:yt=>pt({owner:String(Array.isArray(yt)?yt[0]:yt)}),disabled:W.length===1,selected:ft,items:dt}):c.createElement(c.Fragment,null,c.createElement(ct.Z,{htmlFor:"ownerInput"},"Owner"),c.createElement($t.Z,{id:"ownerInput",onChange:yt=>pt({owner:yt.target.value}),value:ft})),c.createElement(ot.Z,null,"The organization, user or project that this repo will belong to")))},_e=H=>{const{allowedOwners:W=[],state:Ae,onChange:De,rawErrors:pt}=H,dt=W?W.map(yt=>({label:yt,value:yt})):[{label:"Loading...",value:"loading"}],{owner:ft}=Ae;return c.createElement(c.Fragment,null,c.createElement(_.Z,{margin:"normal",required:!0,error:(pt==null?void 0:pt.length)>0&&!ft},W!=null&&W.length?c.createElement(St.Ph,{native:!0,label:"Owner Available",onChange:yt=>De({owner:String(Array.isArray(yt)?yt[0]:yt)}),disabled:W.length===1,selected:ft,items:dt}):c.createElement(c.Fragment,null,c.createElement(ct.Z,{htmlFor:"ownerInput"},"Owner"),c.createElement($t.Z,{id:"ownerInput",onChange:yt=>De({owner:yt.target.value}),value:ft})),c.createElement(ot.Z,null,"GitLab namespace where this repository will belong to. It can be the name of organization, group, subgroup, user, or the project.")))},de=H=>{const{allowedOrganizations:W=[],allowedOwners:Ae=[],rawErrors:De,state:pt,onChange:dt}=H,ft=W?W.map(en=>({label:en,value:en})):[{label:"Loading...",value:"loading"}],yt=Ae?Ae.map(en=>({label:en,value:en})):[{label:"Loading...",value:"loading"}],{organization:Ft,owner:an}=pt;return c.createElement(c.Fragment,null,c.createElement(_.Z,{margin:"normal",required:!0,error:(De==null?void 0:De.length)>0&&!Ft},W!=null&&W.length?c.createElement(St.Ph,{native:!0,label:"Organization",onChange:en=>dt({organization:String(Array.isArray(en)?en[0]:en)}),disabled:W.length===1,selected:Ft,items:ft}):c.createElement(c.Fragment,null,c.createElement(ct.Z,{htmlFor:"orgInput"},"Organization"),c.createElement($t.Z,{id:"orgInput",onChange:en=>dt({organization:en.target.value}),value:Ft})),c.createElement(ot.Z,null,"The Organization that this repo will belong to")),c.createElement(_.Z,{margin:"normal",required:!0,error:(De==null?void 0:De.length)>0&&!an},Ae!=null&&Ae.length?c.createElement(St.Ph,{native:!0,label:"Owner",onChange:en=>dt({owner:String(Array.isArray(en)?en[0]:en)}),disabled:Ae.length===1,selected:an,items:yt}):c.createElement(c.Fragment,null,c.createElement(ct.Z,{htmlFor:"ownerInput"},"Project"),c.createElement($t.Z,{id:"ownerInput",onChange:en=>dt({owner:en.target.value}),value:an})),c.createElement(ot.Z,null,"The Project that this repo will belong to")))},Ie=H=>{const{allowedOwners:W=[],allowedProjects:Ae=[],onChange:De,rawErrors:pt,state:dt}=H,{host:ft,workspace:yt,project:Ft}=dt,an=W?W==null?void 0:W.map(cn=>({label:cn,value:cn})):[],en=Ae?Ae==null?void 0:Ae.map(cn=>({label:cn,value:cn})):[];return(0,c.useEffect)(()=>{ft==="bitbucket.org"&&W.length&&De({workspace:W[0]})},[W,ft,De]),c.createElement(c.Fragment,null,ft==="bitbucket.org"&&c.createElement(_.Z,{margin:"normal",required:!0,error:(pt==null?void 0:pt.length)>0&&!yt},W!=null&&W.length?c.createElement(St.Ph,{native:!0,label:"Allowed Workspaces",onChange:cn=>De({workspace:String(Array.isArray(cn)?cn[0]:cn)}),disabled:W.length===1,selected:yt,items:an}):c.createElement(c.Fragment,null,c.createElement(ct.Z,{htmlFor:"workspaceInput"},"Workspace"),c.createElement($t.Z,{id:"workspaceInput",onChange:cn=>De({workspace:cn.target.value}),value:yt})),c.createElement(ot.Z,null,"The Workspace that this repo will belong to")),c.createElement(_.Z,{margin:"normal",required:!0,error:(pt==null?void 0:pt.length)>0&&!Ft},Ae!=null&&Ae.length?c.createElement(St.Ph,{native:!0,label:"Allowed Projects",onChange:cn=>De({project:String(Array.isArray(cn)?cn[0]:cn)}),disabled:Ae.length===1,selected:Ft,items:en}):c.createElement(c.Fragment,null,c.createElement(ct.Z,{htmlFor:"projectInput"},"Project"),c.createElement($t.Z,{id:"projectInput",onChange:cn=>De({project:cn.target.value}),value:Ft})),c.createElement(ot.Z,null,"The Project that this repo will belong to")))},ze=H=>{const{onChange:W,rawErrors:Ae,state:De}=H,{workspace:pt,owner:dt}=De;return c.createElement(c.Fragment,null,c.createElement(_.Z,{margin:"normal",error:(Ae==null?void 0:Ae.length)>0&&!pt},c.createElement(ct.Z,{htmlFor:"ownerInput"},"Owner"),c.createElement($t.Z,{id:"ownerInput",onChange:ft=>W({owner:ft.target.value}),value:dt}),c.createElement(ot.Z,null,"The owner of the project (optional)")),c.createElement(_.Z,{margin:"normal",required:!0,error:(Ae==null?void 0:Ae.length)>0&&!pt},c.createElement(ct.Z,{htmlFor:"parentInput"},"Parent"),c.createElement($t.Z,{id:"parentInput",onChange:ft=>W({workspace:ft.target.value}),value:pt}),c.createElement(ot.Z,null,"The project parent that the repo will belong to")))},rt=H=>{const{host:W,hosts:Ae,onChange:De,rawErrors:pt}=H,dt=(0,i.h_)(Wt),{value:{integrations:ft}={integrations:[]},loading:yt}=(0,O.default)(async()=>await dt.getIntegrationsList({allowedHosts:Ae!=null?Ae:[]}));(0,c.useEffect)(()=>{W||(Ae!=null&&Ae.length?De(Ae[0]):ft!=null&&ft.length&&De(ft[0].host))},[Ae,W,De,ft]);const Ft=ft?ft.filter(an=>Ae!=null&&Ae.length?Ae==null?void 0:Ae.includes(an.host):!0).map(an=>({label:an.title,value:an.host})):[{label:"Loading...",value:"loading"}];return yt?c.createElement(St.Ex,null):c.createElement(c.Fragment,null,c.createElement(_.Z,{margin:"normal",required:!0,error:(pt==null?void 0:pt.length)>0&&!W},c.createElement(St.Ph,{native:!0,disabled:(Ae==null?void 0:Ae.length)===1,label:"Host",onChange:an=>De(String(Array.isArray(an)?an[0]:an)),selected:W,items:Ft,"data-testid":"host-select"}),c.createElement(ot.Z,null,"The host where the repository will be created")))},kt=H=>{const{repoName:W,allowedRepos:Ae,onChange:De,rawErrors:pt}=H;(0,c.useEffect)(()=>{W||Ae!=null&&Ae.length&&De(Ae[0])},[Ae,W,De]);const dt=Ae?Ae.map(ft=>({label:ft,value:ft})):[{label:"Loading...",value:"loading"}];return c.createElement(c.Fragment,null,c.createElement(_.Z,{margin:"normal",required:!0,error:(pt==null?void 0:pt.length)>0&&!W},Ae!=null&&Ae.length?c.createElement(St.Ph,{native:!0,label:"Repositories Available",onChange:ft=>String(Array.isArray(ft)?ft[0]:ft),disabled:Ae.length===1,selected:W,items:dt}):c.createElement(c.Fragment,null,c.createElement(ct.Z,{htmlFor:"repoNameInput"},"Repository"),c.createElement($t.Z,{id:"repoNameInput",onChange:ft=>De(String(ft.target.value)),value:W})),c.createElement(ot.Z,null,"The name of the repository")))};function He(H){if(!H.host)return;const W=new URLSearchParams;return H.owner&&W.set("owner",H.owner),H.repoName&&W.set("repo",H.repoName),H.organization&&W.set("organization",H.organization),H.workspace&&W.set("workspace",H.workspace),H.project&&W.set("project",H.project),`${H.host}?${W.toString()}`}function z(H){let W="",Ae="",De="",pt="",dt="",ft="";try{if(H){const yt=new URL(`https://${H}`);W=yt.host,Ae=yt.searchParams.get("owner")||"",De=yt.searchParams.get("repo")||"",pt=yt.searchParams.get("organization")||"",dt=yt.searchParams.get("workspace")||"",ft=yt.searchParams.get("project")||""}}catch{}return{host:W,owner:Ae,repoName:De,organization:pt,workspace:dt,project:ft}}const be=(0,c.createContext)(void 0),je=({children:H})=>{const[W,Ae]=(0,c.useState)({});return c.createElement(be.Provider,{value:{secrets:W,setSecrets:Ae}},H)},ut=()=>{const H=(0,c.useContext)(be);if(!H)throw new Error("useTemplateSecrets must be used within a SecretsContextProvider");const{setSecrets:W}=H;return{setSecrets:(0,c.useCallback)(De=>{W(pt=>({...pt,...De}))},[W])}},Mt=zt(T.z.string(),T.z.object({allowedHosts:T.z.array(T.z.string()).optional().describe("List of allowed SCM platform hosts"),allowedOrganizations:T.z.array(T.z.string()).optional().describe("List of allowed organizations in the given SCM platform"),allowedOwners:T.z.array(T.z.string()).optional().describe("List of allowed owners in the given SCM platform"),allowedProjects:T.z.array(T.z.string()).optional().describe("List of allowed projects in the given SCM platform"),allowedRepos:T.z.array(T.z.string()).optional().describe("List of allowed repos in the given SCM platform"),requestUserCredentials:T.z.object({secretsKey:T.z.string().describe("Key used within the template secrets context to store the credential"),additionalScopes:T.z.object({gerrit:T.z.array(T.z.string()).optional().describe("Additional Gerrit scopes to request"),github:T.z.array(T.z.string()).optional().describe("Additional GitHub scopes to request"),gitlab:T.z.array(T.z.string()).optional().describe("Additional GitLab scopes to request"),bitbucket:T.z.array(T.z.string()).optional().describe("Additional BitBucket scopes to request"),azure:T.z.array(T.z.string()).optional().describe("Additional Azure scopes to request")}).optional().describe("Additional permission scopes to request")}).optional().describe("If defined will request user credentials to auth against the given SCM platform")})).schema,rn=H=>{var W,Ae;const{uiSchema:De,onChange:pt,rawErrors:dt,formData:ft}=H,[yt,Ft]=(0,c.useState)(z(ft)),an=(0,i.h_)(nt.q3),en=(0,i.h_)(nt.Om),{setSecrets:cn}=ut(),xn=(0,c.useMemo)(()=>{var ye,it;return(it=(ye=De==null?void 0:De["ui:options"])==null?void 0:ye.allowedHosts)!=null?it:[]},[De]),Dn=(0,c.useMemo)(()=>{var ye,it;return(it=(ye=De==null?void 0:De["ui:options"])==null?void 0:ye.allowedOrganizations)!=null?it:[]},[De]),Nn=(0,c.useMemo)(()=>{var ye,it;return(it=(ye=De==null?void 0:De["ui:options"])==null?void 0:ye.allowedOwners)!=null?it:[]},[De]),K=(0,c.useMemo)(()=>{var ye,it;return(it=(ye=De==null?void 0:De["ui:options"])==null?void 0:ye.allowedProjects)!=null?it:[]},[De]),s=(0,c.useMemo)(()=>{var ye,it;return(it=(ye=De==null?void 0:De["ui:options"])==null?void 0:ye.allowedRepos)!=null?it:[]},[De]),{owner:p,organization:I,project:X,repoName:xe}=yt;(0,c.useEffect)(()=>{pt(He(yt))},[yt,pt]),(0,c.useEffect)(()=>{Dn.length>0&&!I&&Ft(ye=>({...ye,organization:Dn[0]}))},[Ft,Dn,I]),(0,c.useEffect)(()=>{Nn.length>0&&!p&&Ft(ye=>({...ye,owner:Nn[0]}))},[Ft,Nn,p]),(0,c.useEffect)(()=>{K.length>0&&!X&&Ft(ye=>({...ye,project:K[0]}))},[Ft,K,X]),(0,c.useEffect)(()=>{s.length>0&&!xe&&Ft(ye=>({...ye,repoName:s[0]}))},[Ft,s,xe]);const se=(0,c.useCallback)(ye=>{Ft(it=>({...it,...ye}))},[Ft]);(0,xt.Z)(async()=>{var ye;const{requestUserCredentials:it}=(ye=De==null?void 0:De["ui:options"])!=null?ye:{};if(!it||!(yt.host&&yt.owner&&yt.repoName))return;const[Bt,Yt,fn]=[yt.host,yt.owner,yt.repoName].map(encodeURIComponent),{token:In}=await en.getCredentials({url:`https://${Bt}/${Yt}/${fn}`,additionalScope:{repoWrite:!0,customScopes:it.additionalScopes}});cn({[it.secretsKey]:In})},500,[yt,De]);const U=(Ae=yt.host&&((W=an.byHost(yt.host))==null?void 0:W.type))!=null?Ae:null;return c.createElement(c.Fragment,null,c.createElement(rt,{host:yt.host,hosts:xn,onChange:ye=>Ft(it=>({...it,host:ye})),rawErrors:dt}),U==="github"&&c.createElement(B,{allowedOwners:Nn,onChange:se,rawErrors:dt,state:yt}),U==="gitlab"&&c.createElement(_e,{allowedOwners:Nn,rawErrors:dt,state:yt,onChange:se}),U==="bitbucket"&&c.createElement(Ie,{allowedOwners:Nn,allowedProjects:K,rawErrors:dt,state:yt,onChange:se}),U==="azure"&&c.createElement(de,{allowedOrganizations:Dn,allowedOwners:Nn,rawErrors:dt,state:yt,onChange:se}),U==="gerrit"&&c.createElement(ze,{rawErrors:dt,state:yt,onChange:se}),c.createElement(kt,{repoName:yt.repoName,allowedRepos:s,onChange:ye=>Ft(it=>({...it,repoName:ye})),rawErrors:dt}))},ln=(H,W,Ae)=>{var De,pt;try{const{host:dt,searchParams:ft}=new URL(`https://${H}`),yt=Ae.apiHolder.get(nt.q3);dt?(((De=yt==null?void 0:yt.byHost(dt))==null?void 0:De.type)==="bitbucket"?(dt==="bitbucket.org"&&!ft.get("workspace")&&W.addError("Incomplete repository location provided, workspace not provided"),ft.get("project")||W.addError("Incomplete repository location provided, project not provided")):((pt=yt==null?void 0:yt.byHost(dt))==null?void 0:pt.type)!=="gerrit"&&(ft.get("owner")||W.addError("Incomplete repository location provided, owner not provided")),ft.get("repo")||W.addError("Incomplete repository location provided, repo not provided")):W.addError("Incomplete repository location provided, host not provided")}catch{W.addError("Unable to parse the Repository URL")}},Mn=zt(T.z.string(),T.z.object({allowedKinds:T.z.array(T.z.string()).optional().describe("List of kinds of entities to derive options from"),defaultKind:T.z.string().optional().describe("The default entity kind. Options of this kind will not be prefixed."),allowArbitraryValues:T.z.boolean().optional().describe("Whether to allow arbitrary user input. Defaults to true"),defaultNamespace:T.z.union([T.z.string(),T.z.literal(!1)]).optional().describe("The default namespace. Options with this namespace will not be prefixed.")})).schema,Ke=H=>{var W,Ae,De,pt,dt;const{onChange:ft,schema:{title:yt="Entity",description:Ft="An entity from the catalog"},required:an,uiSchema:en,rawErrors:cn,formData:xn,idSchema:Dn}=H,Nn=(W=en["ui:options"])==null?void 0:W.allowedKinds,K=(Ae=en["ui:options"])==null?void 0:Ae.defaultKind,s=(De=en["ui:options"])==null?void 0:De.defaultNamespace,p=(dt=(pt=en["ui:options"])==null?void 0:pt.allowArbitraryValues)!=null?dt:!0,{ownedEntities:I,loading:X}=Je(Nn),xe=I==null?void 0:I.items.map(U=>(0,b.$3)(U,{defaultKind:K,defaultNamespace:s})).filter(U=>U),se=(U,ye)=>{ft(ye||"")};return c.createElement(_.Z,{margin:"normal",required:an,error:(cn==null?void 0:cn.length)>0&&!xn},c.createElement(R.ZP,{id:Dn==null?void 0:Dn.$id,value:xn||"",loading:X,onChange:se,options:xe||[],autoSelect:!0,freeSolo:p,renderInput:U=>c.createElement(t.Z,{...U,label:yt,margin:"normal",helperText:Ft,variant:"outlined",required:an,InputProps:U.InputProps})}))};function Je(H){const W=(0,i.h_)(i.$4),Ae=(0,i.h_)(b.Ah),{loading:De,value:pt}=(0,O.default)(async()=>{const yt=(await W.getBackstageIdentity()).ownershipEntityRefs;return await Ae.getEntities(H?{filter:{kind:H,[`relations.${n.S4}`]:yt||[]}}:{filter:{[`relations.${n.S4}`]:yt||[]}})},[]),dt=(0,c.useMemo)(()=>pt,[pt]);return(0,c.useMemo)(()=>({loading:De,ownedEntities:dt}),[De,dt])}const Qe="scaffolder.extensions.wrapper.v1",oe="scaffolder.extensions.field.v1";function fe(H){return{expose(){const W=()=>null;return(0,i.R5)(W,oe,H),W}}}function We(H){return{expose(){const W=()=>null;return attachComponentData(W,oe,H),W}}}const Be=()=>null;(0,i.R5)(Be,Qe,!0);const Ze="scaffolder.layout.v1",gt="scaffolder.layouts.wrapper.v1";function It(H){return{expose(){const W=()=>null;return attachComponentData(W,Ze,H),W}}}const jt=()=>null;(0,i.R5)(jt,gt,!0);const Zt=(0,i.x8)({id:"register-component",optional:!0}),Ot=(0,i.x8)({id:"view-techdoc",optional:!0,params:["namespace","kind","name"]}),Vt=(0,i.NT)({id:"scaffolder"}),mn=(0,i.Rz)({id:"scaffolder/legacy/selected-template",parent:Vt,path:"/templates/:templateName"}),bn=(0,i.NT)({id:"scaffolder/next"}),hn=(0,i.Rz)({id:"scaffolder/selected-template",parent:Vt,path:"/templates/:namespace/:templateName"}),wn=(0,i.Rz)({id:"scaffolder/next/selected-template",parent:bn,path:"/templates/:namespace/:templateName"}),gn=(0,i.Rz)({id:"scaffolder/task",parent:Vt,path:"/tasks/:taskId"});(0,i.Rz)({id:"scaffolder/next/task",parent:bn,path:"/tasks/:taskId"});const Tn=(0,i.Rz)({id:"scaffolder/list-tasks",parent:Vt,path:"/tasks"}),kn=(0,i.Rz)({id:"scaffolder/actions",parent:Vt,path:"/actions"}),$n=(0,i.Rz)({id:"scaffolder/edit",parent:Vt,path:"/edit"}),Cn=(0,i.rx)({id:"scaffolder",apis:[(0,i.ni)({api:Wt,deps:{discoveryApi:i.NW,scmIntegrationsApi:nt.q3,fetchApi:i.gP,identityApi:i.$4},factory:({discoveryApi:H,scmIntegrationsApi:W,fetchApi:Ae,identityApi:De})=>new on({discoveryApi:H,scmIntegrationsApi:W,fetchApi:Ae,identityApi:De})})],routes:{root:Vt},externalRoutes:{registerComponent:Zt,viewTechDoc:Ot}}),zn=Cn.provide(fe({component:Rt,name:"EntityPicker",schema:Pt})),Sn=Cn.provide(fe({component:Lt,name:"EntityNamePicker",validation:Ht,schema:un})),Zn=Cn.provide(fe({component:rn,name:"RepoUrlPicker",validation:ln,schema:Mt})),Ln=Cn.provide(fe({component:Z,name:"OwnerPicker",schema:ie})),jn=Cn.provide((0,i.P4)({name:"ScaffolderPage",component:()=>Promise.all([e.e(4778),e.e(6637),e.e(7665),e.e(2041)]).then(e.bind(e,62041)).then(H=>H.Router),mountPoint:Vt})),Xn=Cn.provide(fe({component:Ke,name:"OwnedEntityPicker",schema:Mn})),or=Cn.provide(fe({component:st,name:"EntityTagsPicker",schema:Te})),gr=Cn.provide((0,i.P4)({name:"NextScaffolderPage",component:()=>Promise.all([e.e(4778),e.e(6637),e.e(7665),e.e(8526)]).then(e.bind(e,58526)).then(H=>H.Router),mountPoint:bn})),fr=c.createElement(Ge.Z,{fontSize:"small"}),Se=c.createElement(Ct.Z,{fontSize:"small"}),ne=()=>{const H=(0,i.h_)(i.$v),{error:W,loading:Ae,availableTypes:De,selectedTypes:pt,setSelectedTypes:dt}=(0,b.Uh)();return Ae?c.createElement(St.Ex,null):De?W?(H.post({message:"Failed to load entity types",severity:"error"}),null):c.createElement(g.Z,{pb:1,pt:1},c.createElement(F.Z,{variant:"button"},"Categories"),c.createElement(R.ZP,{multiple:!0,"aria-label":"Categories",options:De,value:pt,onChange:(ft,yt)=>dt(yt),renderOption:(ft,{selected:yt})=>c.createElement(j.Z,{control:c.createElement(V.Z,{icon:fr,checkedIcon:Se,checked:yt}),label:pn()(ft)}),size:"small",popupIcon:c.createElement(C.Z,{"data-testid":"categories-picker-expand"}),renderInput:ft=>c.createElement(t.Z,{...ft,variant:"outlined"})})):null};function ae(H,W){var Ae,De,pt;switch(W.type){case"INIT":{H.steps=W.data.spec.steps.reduce((dt,ft)=>(dt[ft.id]={status:"open",id:ft.id},dt),{}),H.stepLogs=W.data.spec.steps.reduce((dt,ft)=>(dt[ft.id]=[],dt),{}),H.loading=!1,H.error=void 0,H.completed=!1,H.task=W.data;return}case"LOGS":{const dt=W.data;for(const ft of dt){const yt=`${ft.createdAt} ${ft.body.message}`;if(!ft.body.stepId||!((Ae=H.steps)!=null&&Ae[ft.body.stepId]))continue;const Ft=(De=H.stepLogs)==null?void 0:De[ft.body.stepId],an=(pt=H.steps)==null?void 0:pt[ft.body.stepId];ft.body.status&&ft.body.status!==an.status&&(an.status=ft.body.status,an.status==="processing"&&(an.startedAt=ft.createdAt),["cancelled","failed","completed"].includes(an.status)&&(an.endedAt=ft.createdAt)),Ft==null||Ft.push(yt)}return}case"COMPLETED":{H.completed=!0,H.output=W.data.body.output,H.error=W.data.body.error;return}case"ERROR":{H.error=W.data,H.loading=!1,H.completed=!0;return}default:return}}const S=H=>{const W=(0,i.h_)(Wt),[Ae,De]=(0,at.C)(ae,{loading:!0,completed:!1,stepLogs:{},steps:{}});return(0,c.useEffect)(()=>{let pt=!1,dt,ft;return W.getTask(H).then(yt=>{if(pt)return;De({type:"INIT",data:yt});const Ft=W.streamLogs({taskId:H}),an=new Array;function en(){if(an.length){const cn=an.splice(0,an.length);De({type:"LOGS",data:cn})}}ft=setInterval(en,500),dt=Ft.subscribe({next:cn=>{switch(cn.type){case"log":return an.push(cn);case"completion":en(),De({type:"COMPLETED",data:cn});return;default:throw new Error(`Unhandled event type ${cn.type} in observer`)}},error:cn=>{en(),De({type:"ERROR",data:cn})}})},yt=>{pt||De({type:"ERROR",data:yt})}),()=>{pt=!0,dt&&dt.unsubscribe(),ft&&clearInterval(ft)}},[W,De,H]),Ae},ge=({error:H})=>{const W=(0,c.useRef)("");return(0,c.useEffect)(()=>{W.current=String(Math.random())},[H]),H?c.createElement(g.Z,null,c.createElement(St.SX,{id:W.current,variant:"warning",message:H.message})):null},L=(0,re.Z)({svgIcon:{display:"inline-block","& svg":{display:"inline-block",fontSize:"inherit",verticalAlign:"baseline"}}}),N=H=>{const{href:W,text:Ae,Icon:De,...pt}=H,dt=L();return c.createElement(w.Z,{container:!0,direction:"row",spacing:1},c.createElement(w.Z,{item:!0},c.createElement(F.Z,{component:"div",className:dt.svgIcon},De?c.createElement(De,null):c.createElement(bt.Z,null))),c.createElement(w.Z,{item:!0},c.createElement(St.rU,{to:W,...pt},Ae||W)))},me=({output:H})=>{const{links:W=[]}=H,Ae=(0,i.qD)(),De=(0,i.tg)(b.wi),pt=dt=>{var ft;return dt&&(ft=Ae.getSystemIcon(dt))!=null?ft:bt.Z};return c.createElement(g.Z,{px:3,pb:3},W.filter(({url:dt,entityRef:ft})=>dt||ft).map(({url:dt,entityRef:ft,title:yt,icon:Ft})=>{if(ft){const an=(0,n.of)(ft,{defaultKind:"<unknown>",defaultNamespace:"<unknown>"}),en=De(an);return{title:yt,icon:Ft,url:en}}return{title:yt,icon:Ft,url:dt}}).map(({url:dt,title:ft,icon:yt},Ft)=>c.createElement(N,{key:`output-link-${Ft}`,href:dt,text:ft!=null?ft:dt,Icon:pt(yt),target:"_blank"})))},et=e(75951),wt=(0,re.Z)(H=>(0,G.Z)({root:{width:"100%"},button:{marginBottom:H.spacing(2),marginLeft:H.spacing(2)},actionsContainer:{marginBottom:H.spacing(2)},resetContainer:{padding:H.spacing(3)},labelWrapper:{display:"flex",flex:1,flexDirection:"row",justifyContent:"space-between"},stepWrapper:{width:"100%"}})),h=({step:H})=>{const[W,Ae]=(0,c.useState)("");return(0,Pe.Z)(()=>{if(!H.startedAt){Ae("");return}const De=H.endedAt?ee.ou.fromISO(H.endedAt):ee.ou.local(),pt=ee.ou.fromISO(H.startedAt),dt=ee.Xp.fromDateTimes(pt,De).toDuration().valueOf();Ae(et(dt,{round:!0}))},1e3),c.createElement(F.Z,{variant:"caption"},W)},v=(0,re.Z)(H=>(0,G.Z)({root:{color:H.palette.text.disabled,display:"flex",height:22,alignItems:"center"},completed:{color:H.palette.status.ok},error:{color:H.palette.status.error}}));function k(H){const W=v(),{active:Ae,completed:De,error:pt}=H,dt=()=>Ae?c.createElement(A.Z,{size:"24px"}):De?c.createElement(Ne.Z,null):pt?c.createElement(Re.Z,null):c.createElement(Me.Z,null);return c.createElement("div",{className:vt()(W.root,{[W.completed]:De,[W.error]:pt})},dt())}const te=(0,c.memo)(H=>{const{steps:W,currentStepId:Ae,onUserStepChange:De}=H,pt=wt(H);return c.createElement("div",{className:pt.root},c.createElement(M.Z,{activeStep:W.findIndex(dt=>dt.id===Ae),orientation:"vertical",nonLinear:!0},W.map((dt,ft)=>{const yt=dt.status==="completed",Ft=dt.status==="failed",an=dt.status==="processing",en=dt.status==="skipped";return c.createElement(Fe.Z,{key:String(ft),expanded:!0},c.createElement(D.Z,{onClick:()=>De(dt.id)},c.createElement(ve.Z,{StepIconProps:{completed:yt,error:Ft,active:an},StepIconComponent:k,className:pt.stepWrapper},c.createElement("div",{className:pt.labelWrapper},c.createElement(F.Z,{variant:"subtitle2"},dt.name),en?c.createElement(F.Z,{variant:"caption"},"Skipped"):c.createElement(h,{step:dt})))))})))}),Ee=({links:H=[]})=>H.length>0,Ye=({loadingText:H})=>{const W=wt(),Ae=(0,ue.s0)(),De=(0,i.tg)(Vt),pt=(0,i.tg)(hn),[dt,ft]=(0,c.useState)(void 0),[yt,Ft]=(0,c.useState)(void 0),{taskId:an}=(0,i.Oi)(gn),en=S(an),cn=en.completed,xn=(0,c.useMemo)(()=>{var I,X;return(X=(I=en.task)==null?void 0:I.spec.steps.map(xe=>{var se;return{...xe,...(se=en==null?void 0:en.steps)==null?void 0:se[xe.id]}}))!=null?X:[]},[en]);(0,c.useEffect)(()=>{var I;const X=xn.find(xe=>["failed","processing"].includes(xe.status));if(cn&&!X){Ft((I=xn[xn.length-1])==null?void 0:I.id);return}Ft(X==null?void 0:X.id)},[xn,cn]);const Dn=dt!=null?dt:yt,Nn=(0,c.useMemo)(()=>{if(!Dn)return H||"Loading...";const I=en.stepLogs[Dn];return I!=null&&I.length?I.join(`
`):"Waiting for logs..."},[en.stepLogs,Dn,H]),K=en.completed===!0&&en.loading===!1&&!en.task,{output:s}=en,p=()=>{var I,X,xe;if(!en.task||!((X=(I=en.task)==null?void 0:I.spec.templateInfo)!=null&&X.entityRef)){Ae(De());return}const se=en.task.spec.parameters,{name:U,namespace:ye}=(0,n.of)((xe=en.task.spec.templateInfo)==null?void 0:xe.entityRef);Ae(`${pt({templateName:U,namespace:ye})}?${a().stringify({formData:JSON.stringify(se)})}`)};return c.createElement(St.T3,{themeId:"home"},c.createElement(St.h4,{pageTitleOverride:`Task ${an}`,title:"Task Activity",subtitle:`Activity for task: ${an}`}),c.createElement(St.VY,null,K?c.createElement(St.mf,{status:"404",statusMessage:"Task not found",additionalInfo:"No task found with this ID"}):c.createElement("div",null,c.createElement(w.Z,{container:!0},c.createElement(w.Z,{item:!0,xs:3},c.createElement(f.Z,null,c.createElement(te,{steps:xn,currentStepId:Dn,onUserStepChange:ft}),s&&Ee(s)&&c.createElement(me,{output:s}),c.createElement(x.Z,{className:W.button,onClick:p,disabled:!cn,variant:"contained",color:"primary"},"Start Over"))),c.createElement(w.Z,{item:!0,xs:9},!Dn&&c.createElement(St.Ex,null),c.createElement("div",{style:{height:"80vh"}},c.createElement(ge,{error:en.error}),c.createElement(St.nU,{text:Nn})))))))}},78990:function(Nt,u,e){e.d(u,{Ho:function(){return n.W},sG:function(){return n.V}});var n=e(32469),i=e(34520),m=e(30705),d=e(32272),a=e(19126),l=e.n(a),y=e(82394),b=e.n(y),t=e(73495),_=e(2784),g=e(68111),F=e(49462),j=e(49558),V=e(82108),re=e.n(V),w=e(72779),A=e.n(w),D=e(26228)},92573:function(Nt,u,e){e.d(u,{E1:function(){return zt},FA:function(){return Ne},GQ:function(){return Ie},Nd:function(){return at},Rx:function(){return Xe},US:function(){return on},ay:function(){return st},gK:function(){return M},lt:function(){return _e},qO:function(){return Pt},wy:function(){return He},yu:function(){return be}});var n=e(30705),i=e(2784),m=e(79692),d=e(50581),a=e(61837),l=e(74603),y=e(4614),b=e(86619),t=e(7089),_=e(42494),g=e(84899),F=e(5806),j=e(21324),V=e(56939),re=e(73698),w=e(12231),A=e(77277),D=e(28899),f=e(38402),x=e(86136),R=e(49378),c=e(95544),O=e(85256),T=e(48760),Ce=e(21853),we=e(33375),nt=e(76635),ot=e.n(nt),$t=e(64279),ct=e(25557),St=e(18473),xt=e(88013),Q=e(69294),pn=e(49558),Ct=e(35352),Ge=e(27742),C=e(19126),Fe=e.n(C),ve=e(48834).lW;const M=(0,n.T0)({id:"plugin.search.queryservice"});class G{constructor(fe){this.mockedResults=fe}query(){return Promise.resolve(this.mockedResults||{results:[]})}}const Re=(0,m.Z)(()=>({highlight:{}}),{name:"BackstageHighlightedSearchResultText"}),Ne=({text:oe,preTag:fe,postTag:We})=>{const Be=Re(),Ze=(0,i.useMemo)(()=>oe.split(new RegExp(`(${fe}.+?${We})`)),[We,fe,oe]);return i.createElement(i.Fragment,null,Ze.map((gt,It)=>gt.includes(fe)?i.createElement("mark",{className:Be.highlight,key:It},gt.replace(new RegExp(`${fe}|${We}`,"g"),"")):gt))},Me=(0,St.CT)("search-context"),Xe=()=>{const oe=(0,i.useContext)(Me);if(!oe)throw new Error("useSearch must be used within a SearchContextProvider");const fe=oe.atVersion(1);if(!fe)throw new Error("No SearchContext v1 found");return fe},vt=()=>(0,i.useContext)(Me)!==void 0,ee={term:"",types:[],filters:{},pageLimit:void 0,pageCursor:void 0},ue=(oe=ee)=>{var fe,We,Be,Ze;const gt=(0,n.h_)(M),[It,jt]=(0,i.useState)(oe.term),[Zt,Ot]=(0,i.useState)(oe.types),[Vt,mn]=(0,i.useState)(oe.filters),[bn,hn]=(0,i.useState)(oe.pageLimit),[wn,gn]=(0,i.useState)(oe.pageCursor),Tn=(0,ct.Z)(It),kn=(0,ct.Z)(Vt),$n=(0,$t.default)(()=>gt.query({term:It,types:Zt,filters:Vt,pageLimit:bn,pageCursor:wn}),[It,Zt,Vt,bn,wn]),Cn=!$n.loading&&!$n.error&&((fe=$n.value)==null?void 0:fe.nextPageCursor),zn=!$n.loading&&!$n.error&&((We=$n.value)==null?void 0:We.previousPageCursor),Sn=(0,i.useCallback)(()=>{var jn;gn((jn=$n.value)==null?void 0:jn.nextPageCursor)},[(Be=$n.value)==null?void 0:Be.nextPageCursor]),Zn=(0,i.useCallback)(()=>{var jn;gn((jn=$n.value)==null?void 0:jn.previousPageCursor)},[(Ze=$n.value)==null?void 0:Ze.previousPageCursor]);return(0,i.useEffect)(()=>{Tn!==void 0&&It!==Tn&&gn(void 0)},[It,Tn,gn]),(0,i.useEffect)(()=>{kn!==void 0&&!(0,nt.isEqual)(Vt,kn)&&gn(void 0)},[Vt,kn,gn]),{result:$n,term:It,setTerm:jt,types:Zt,setTypes:Ot,filters:Vt,setFilters:mn,pageLimit:bn,setPageLimit:hn,pageCursor:wn,setPageCursor:gn,fetchNextPage:Cn?Sn:void 0,fetchPreviousPage:zn?Zn:void 0}},Pe=oe=>{const{initialState:fe,children:We}=oe,Be=ue(fe);return i.createElement(n.fC,{attributes:{searchTypes:Be.types.sort().join(",")}},i.createElement(Me.Provider,{value:(0,St.EI)({1:Be})},We))},at=oe=>{const{initialState:fe,inheritParentContextIfAvailable:We,children:Be}=oe;return vt()&&We?i.createElement(i.Fragment,null,Be):i.createElement(Pe,{initialState:fe},Be)},bt=({children:oe})=>{var fe,We;const Be=Vt=>(0,ct.Z)(Vt)!==Vt,Ze=(0,n.z$)(),{term:gt,result:It}=Xe(),jt=(We=(fe=It.value)==null?void 0:fe.numberOfResults)!=null?We:void 0,Ot=Be(It.loading)&&!It.loading;return(0,i.useEffect)(()=>{gt&&Ot&&Ze.captureEvent("search",gt,{value:jt})},[Ze,gt,jt,Ot]),i.createElement(i.Fragment,null,oe)};function Wt(oe){return(0,i.forwardRef)((fe,We)=>i.createElement(at,{inheritParentContextIfAvailable:!0},i.createElement(oe,{...fe,ref:We})))}const on=Wt((0,i.forwardRef)((oe,fe)=>{const{onChange:We,onKeyDown:Be=()=>{},onClear:Ze=()=>{},onSubmit:gt=()=>{},debounceTime:It=200,clearButton:jt=!0,fullWidth:Zt=!0,value:Ot,placeholder:Vt,inputProps:mn={},endAdornment:bn,...hn}=oe,wn=(0,n.h_)(n.Ds),[gn,Tn]=(0,i.useState)("");(0,i.useEffect)(()=>{Tn(Ln=>Ln!==Ot?String(Ot):Ln)},[Ot]),(0,T.Z)(()=>We(gn),It,[gn]);const kn=(0,i.useCallback)(Ln=>{Tn(Ln.target.value)},[Tn]),$n=(0,i.useCallback)(Ln=>{Be&&Be(Ln),gt&&Ln.key==="Enter"&&gt()},[Be,gt]),Cn=(0,i.useCallback)(()=>{We(""),Ze&&Ze()},[We,Ze]),zn=Vt!=null?Vt:`Search in ${wn.getOptionalString("app.title")||"Backstage"}`,Sn=i.createElement(d.Z,{position:"start"},i.createElement(a.Z,{"aria-label":"Query",size:"small",disabled:!0},i.createElement(Ce.Z,null))),Zn=i.createElement(d.Z,{position:"end"},i.createElement(a.Z,{"aria-label":"Clear",size:"small",onClick:Cn},i.createElement(we.Z,null)));return i.createElement(bt,null,i.createElement(l.Z,{"data-testid":"search-bar-next",ref:fe,value:gn,placeholder:zn,startAdornment:Sn,endAdornment:jt?Zn:bn,inputProps:{"aria-label":"Search",...mn},fullWidth:Zt,onChange:kn,onKeyDown:$n,...hn}))})),zt=Wt((0,i.forwardRef)((oe,fe)=>{const{value:We="",onChange:Be,...Ze}=oe,{term:gt,setTerm:It}=Xe();(0,i.useEffect)(()=>{We&&It(String(We))},[We,It]);const jt=(0,i.useCallback)(Zt=>{Be?Be(Zt):It(Zt)},[Be,It]);return i.createElement(n.fC,{attributes:{pluginId:"search",extension:"SearchBar"}},i.createElement(on,{...Ze,ref:fe,value:gt,onChange:jt}))})),Pt=(oe=>fe=>i.createElement(at,{inheritParentContextIfAvailable:!0},i.createElement(oe,{...fe})))(function(fe){const{loading:We,value:Be,onChange:Ze=()=>{},options:gt=[],getOptionLabel:It=Cn=>String(Cn),inputPlaceholder:jt,inputDebounceTime:Zt,freeSolo:Ot=!0,fullWidth:Vt=!0,clearOnBlur:mn=!1,"data-testid":bn="search-autocomplete",...hn}=fe,{setTerm:wn}=Xe(),gn=(0,i.useCallback)(Cn=>Cn?typeof Cn=="string"?Cn:It(Cn):"",[It]),Tn=(0,i.useMemo)(()=>gn(Be),[Be,gn]),kn=(0,i.useCallback)((Cn,zn,Sn,Zn)=>{wn(gn(zn)),Ze(Cn,zn,Sn,Zn)},[gn,wn,Ze]),$n=(0,i.useCallback)(({InputProps:{ref:Cn,endAdornment:zn},InputLabelProps:Sn,...Zn})=>i.createElement(zt,{...Zn,ref:Cn,clearButton:!1,value:Tn,placeholder:jt,debounceTime:Zt,endAdornment:We?i.createElement(y.Z,{"data-testid":"search-autocomplete-progressbar",color:"inherit",size:20}):zn}),[We,Tn,jt,Zt]);return i.createElement(xt.ZP,{...hn,"data-testid":bn,value:Be,onChange:kn,options:gt,getOptionLabel:It,renderInput:$n,freeSolo:Ot,fullWidth:Vt,clearOnBlur:mn})}),Rt=({icon:oe,primaryText:fe,primaryTextTypographyProps:We,secondaryText:Be,secondaryTextTypographyProps:Ze,disableTextTypography:gt})=>React.createElement(React.Fragment,null,oe?React.createElement(ListItemIcon,null,oe):null,React.createElement(ListItemText,{primary:fe,primaryTypographyProps:We,secondary:Be,secondaryTypographyProps:Ze,disableTypography:gt})),sn=(oe,fe,We=[],Be=250)=>{const Ze=(0,i.useRef)({}),gt=oe||(()=>Promise.resolve([])),[It,jt]=(0,Q.default)(gt,[fe],{loading:!0});if((0,T.Z)(()=>{Ze.current[fe]===void 0&&(Ze.current[fe]=jt(fe).then(Ot=>(Ze.current[fe]=Ot,Ot)))},Be,[jt,fe]),We.length)return{loading:!1,value:We};const Zt=Ze.current[fe];return Array.isArray(Zt)?{loading:!1,value:Zt}:It},un=(oe,fe)=>{const{setFilters:We}=Xe();(0,i.useEffect)(()=>{fe&&[fe].flat().length>0&&We(Be=>({...Be,[oe]:fe}))},[])},Lt=oe=>{const{className:fe,defaultValue:We,name:Be,values:Ze,valuesDebounceMs:gt,label:It,filterSelectedOptions:jt,limitTags:Zt,multiple:Ot}=oe,[Vt,mn]=(0,i.useState)("");un(Be,We);const bn=typeof Ze=="function"?Ze:void 0,hn=typeof Ze=="function"?void 0:Ze,{value:wn,loading:gn}=sn(bn,Vt,hn,gt),{filters:Tn,setFilters:kn}=Xe(),$n=Tn[Be]||(Ot?[]:null),Cn=(Zn,Ln)=>{kn(jn=>{const{[Be]:Xn,...or}=jn;return Ln?{...or,[Be]:Ln}:{...or}})},zn=Zn=>i.createElement(b.Z,{...Zn,name:"search",variant:"outlined",label:It,fullWidth:!0}),Sn=(Zn,Ln)=>Zn.map((jn,Xn)=>i.createElement(t.Z,{label:jn,color:"primary",...Ln({index:Xn})}));return i.createElement(xt.ZP,{filterSelectedOptions:jt,limitTags:Zt,multiple:Ot,className:fe,id:`${Ot?"multi-":""}select-filter-${Be}--select`,options:wn||[],loading:gn,value:$n,onChange:Cn,onInputChange:(Zn,Ln)=>mn(Ln),renderInput:zn,renderTags:Sn})},Ht=(0,m.Z)({label:{textTransform:"capitalize"}}),nn=oe=>{const{className:fe,defaultValue:We,label:Be,name:Ze,values:gt=[],valuesDebounceMs:It}=oe,jt=Ht(),{filters:Zt,setFilters:Ot}=Xe();un(Ze,We);const Vt=typeof gt=="function"?gt:void 0,mn=typeof gt=="function"?void 0:gt,{value:bn=[],loading:hn}=sn(Vt,"",mn,It),wn=gn=>{const{target:{value:Tn,checked:kn}}=gn;Ot($n=>{const{[Ze]:Cn,...zn}=$n,Sn=(Cn||[]).filter(Ln=>Ln!==Tn),Zn=kn?[...Sn,Tn]:Sn;return Zn.length?{...zn,[Ze]:Zn}:zn})};return i.createElement(_.Z,{className:fe,disabled:hn,fullWidth:!0,"data-testid":"search-checkboxfilter-next"},Be?i.createElement(g.Z,{className:jt.label},Be):null,bn.map(gn=>{var Tn;return i.createElement(F.Z,{key:gn,control:i.createElement(j.Z,{color:"primary",tabIndex:-1,inputProps:{"aria-labelledby":gn},value:gn,name:gn,onChange:wn,checked:((Tn=Zt[Ze])!=null?Tn:[]).includes(gn)}),label:gn})}))},Te=oe=>{const{className:fe,defaultValue:We,label:Be,name:Ze,values:gt,valuesDebounceMs:It}=oe,jt=Ht();un(Ze,We);const Zt=typeof gt=="function"?gt:void 0,Ot=typeof gt=="function"?void 0:gt,{value:Vt=[],loading:mn}=sn(Zt,"",Ot,It),{filters:bn,setFilters:hn}=Xe(),wn=gn=>{const{target:{value:Tn}}=gn;hn(kn=>{const{[Ze]:$n,...Cn}=kn;return Tn?{...Cn,[Ze]:Tn}:Cn})};return i.createElement(_.Z,{disabled:mn,className:fe,variant:"filled",fullWidth:!0,"data-testid":"search-selectfilter-next"},Be?i.createElement(V.Z,{className:jt.label,margin:"dense"},Be):null,i.createElement(re.Z,{variant:"outlined",value:bn[Ze]||"",onChange:wn},i.createElement(w.Z,{value:""},i.createElement("em",null,"All")),Vt.map(gn=>i.createElement(w.Z,{key:gn,value:gn},gn))))},st=({component:oe,...fe})=>i.createElement(oe,{...fe});st.Checkbox=oe=>i.createElement(st,{...oe,component:nn}),st.Select=oe=>i.createElement(st,{...oe,component:Te}),st.Autocomplete=oe=>i.createElement(st,{...oe,component:Lt});const le=oe=>{const{children:fe}=oe,Be=Xe().result;return fe(Be)},ie=oe=>{const{query:fe,children:We}=oe,Be=(0,n.h_)(M),Ze=(0,$t.default)(()=>{const{term:gt="",types:It=[],filters:jt={},...Zt}=fe;return Be.query({...Zt,term:gt,types:It,filters:jt})},[fe]);return We(Ze)},Z=oe=>{const{query:fe,children:We}=oe;return fe?i.createElement(ie,{query:fe},We):i.createElement(le,null,We)},B=oe=>{const{query:fe,children:We}=oe;return i.createElement(Z,{query:fe},({loading:Be,error:Ze,value:gt})=>Be?i.createElement(pn.Ex,null):Ze?i.createElement(pn.Gk,{title:"Error encountered while fetching search results",error:Ze}):gt!=null&&gt.results.length?We(gt):i.createElement(pn.ub,{missing:"data",title:"Sorry, no results were found"}))},_e=oe=>i.createElement(n.fC,{attributes:{pluginId:"search",extension:"SearchResult"}},i.createElement(B,{...oe})),de=(0,m.Z)(oe=>({root:{display:"flex",justifyContent:"space-between",gap:oe.spacing(2),margin:oe.spacing(2,0)}})),Ie=()=>{const{fetchNextPage:oe,fetchPreviousPage:fe}=Xe(),We=de();return!oe&&!fe?i.createElement(i.Fragment,null):i.createElement("nav",{"aria-label":"pagination navigation",className:We.root},i.createElement(A.Z,{"aria-label":"previous page",disabled:!fe,onClick:fe,startIcon:i.createElement(Ct.Z,null)},"Previous"),i.createElement(A.Z,{"aria-label":"next page",disabled:!oe,onClick:oe,endIcon:i.createElement(Ge.Z,null)},"Next"))},ze=oe=>ve.from(oe.toString(),"utf-8").toString("base64"),rt=oe=>oe?Number(ve.from(oe,"base64").toString("utf-8")):0,kt=oe=>{const{total:fe=-1,cursor:We,onCursorChange:Be,limit:Ze=25,limitLabel:gt="Results per page:",limitText:It=({from:hn,to:wn})=>fe>0?`of ${fe}`:`${hn}-${wn}`,limitOptions:jt,onLimitChange:Zt,...Ot}=oe,Vt=(0,i.useMemo)(()=>rt(We),[We]),mn=(0,i.useCallback)((hn,wn)=>{Be==null||Be(ze(wn))},[Be]),bn=(0,i.useCallback)(hn=>{const wn=hn.target.value;Zt==null||Zt(parseInt(wn,10))},[Zt]);return i.createElement(D.Z,{...Ot,component:"div",count:fe,page:Vt,onPageChange:mn,rowsPerPage:Ze,labelRowsPerPage:gt,labelDisplayedRows:It,rowsPerPageOptions:jt,onRowsPerPageChange:bn})},He=oe=>{const{pageLimit:fe,setPageLimit:We,pageCursor:Be,setPageCursor:Ze}=Xe();return i.createElement(kt,{...oe,limit:fe,onLimitChange:We,cursor:Be,onCursorChange:Ze})},z=({result:oe,highlight:fe,rank:We,icon:Be,secondaryAction:Ze,lineClamp:gt=5})=>{const It=(0,n.z$)(),jt=()=>{It.captureEvent("discover",oe.title,{attributes:{to:oe.location},value:We})};return i.createElement(i.Fragment,null,i.createElement(f.Z,{alignItems:"center"},Be&&i.createElement(x.Z,null,Be),i.createElement(R.Z,{primaryTypographyProps:{variant:"h6"},primary:i.createElement(pn.rU,{noTrack:!0,to:oe.location,onClick:jt},fe!=null&&fe.fields.title?i.createElement(Ne,{text:(fe==null?void 0:fe.fields.title)||"",preTag:(fe==null?void 0:fe.preTag)||"",postTag:(fe==null?void 0:fe.postTag)||""}):oe.title),secondary:i.createElement("span",{style:{display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:gt,overflow:"hidden"}},fe!=null&&fe.fields.text?i.createElement(Ne,{text:fe.fields.text,preTag:fe.preTag,postTag:fe.postTag}):oe.text)}),Ze&&i.createElement(c.Z,{alignItems:"flex-end"},Ze)),i.createElement(O.Z,null))},be=oe=>i.createElement(n.fC,{attributes:{pluginId:"search",extension:"DefaultResultListItem"}},i.createElement(z,{...oe})),je=oe=>{const{loading:fe,error:We,resultItems:Be,renderResultItem:Ze=jt=>React.createElement(be,{key:jt.document.location,result:jt.document}),noResultsComponent:gt=React.createElement(EmptyState,{missing:"data",title:"Sorry, no results were found"}),...It}=oe;return React.createElement(List,{...It},fe?React.createElement(Progress,null):null,!fe&&We?React.createElement(ResponseErrorPanel,{title:"Error encountered while fetching search results",error:We}):null,!fe&&!We&&(Be==null?void 0:Be.length)?Be.map(Ze):null,!fe&&!We&&!(Be!=null&&Be.length)?React.createElement(ListItem,null,gt):null)},ut=oe=>{const{query:fe,disableRenderingWithNoResults:We,...Be}=oe;return React.createElement(AnalyticsContext,{attributes:{pluginId:"search",extension:"SearchResultList"}},React.createElement(Z,{query:fe},({loading:Ze,error:gt,value:It})=>{var jt;return!((jt=It==null?void 0:It.results)!=null&&jt.length)&&We?null:React.createElement(je,{...Be,loading:Ze,error:gt,resultItems:It==null?void 0:It.results})}))},Et=(0,m.Z)(oe=>({listSubheader:{display:"flex",alignItems:"center"},listSubheaderName:{marginLeft:oe.spacing(1),textTransform:"uppercase"},listSubheaderChip:{color:oe.palette.text.secondary,margin:oe.spacing(0,0,0,1.5)},listSubheaderFilter:{display:"flex",color:oe.palette.text.secondary,margin:oe.spacing(0,0,0,1.5)},listSubheaderLink:{marginLeft:"auto",display:"flex",alignItems:"center"},listSubheaderLinkIcon:{fontSize:"inherit",marginLeft:oe.spacing(.5)}})),Mt=oe=>{const fe=Et(),{label:We,children:Be,...Ze}=oe;return React.createElement(Chip,{...Ze,className:fe.listSubheaderFilter,variant:"outlined",label:React.createElement(React.Fragment,null,We,": ",Be)})},rn=()=>null,ln=(0,m.Z)(oe=>({root:{fontSize:"inherit","&:focus":{outline:"none",background:oe.palette.common.white},"&:not(:focus)":{cursor:"pointer",color:oe.palette.primary.main,"&:hover":{textDecoration:"underline"}}}})),Rn=oe=>{const fe=ln(),{label:We,value:Be="None",onChange:Ze,onDelete:gt}=oe,It=useCallback(jt=>{Ze(jt.target.value)},[Ze]);return React.createElement(Mt,{label:We,onDelete:gt},React.createElement(Typography,{role:"textbox",component:"span",className:fe.root,onChange:It,contentEditable:!0,suppressContentEditableWarning:!0},Be))},Mn=(0,m.Z)(oe=>({root:{fontSize:"inherit","&:not(:focus)":{cursor:"pointer",color:oe.palette.primary.main,"&:hover":{textDecoration:"underline"}},"&:focus":{outline:"none"},"&>div:first-child":{padding:0}}})),Ke=oe=>{const fe=Mn(),{label:We,value:Be="none",onChange:Ze,onDelete:gt,children:It}=oe,jt=useCallback(Zt=>{Ze(Zt.target.value)},[Ze]);return React.createElement(Mt,{label:We,onDelete:gt},React.createElement(Select,{className:fe.root,value:Be,onChange:jt,input:React.createElement(InputBase,null),IconComponent:rn},React.createElement(MenuItem,{value:"none"},"None"),It))};function Je(oe){const fe=Et(),[We,Be]=useState(null),{loading:Ze,error:gt,icon:It,title:jt,titleProps:Zt={},link:Ot=React.createElement(React.Fragment,null,"See all",React.createElement(ArrowForwardIosIcon,{className:fe.listSubheaderLinkIcon})),linkProps:Vt={},filterOptions:mn,renderFilterOption:bn=Sn=>React.createElement(MenuItem,{key:String(Sn),value:String(Sn)},Sn),filterFields:hn,renderFilterField:wn,resultItems:gn,renderResultItem:Tn=Sn=>React.createElement(be,{key:Sn.document.location,result:Sn.document}),noResultsComponent:kn=React.createElement(EmptyState,{missing:"data",title:"Sorry, no results were found"}),...$n}=oe,Cn=useCallback(Sn=>{Be(Sn.currentTarget)},[]),zn=useCallback(()=>{Be(null)},[]);return React.createElement(List,{...$n},React.createElement(ListSubheader,{className:fe.listSubheader},It,React.createElement(Typography,{className:fe.listSubheaderName,component:"strong",...Zt},jt),mn?React.createElement(Chip,{className:fe.listSubheaderChip,component:"button",icon:React.createElement(AddIcon,null),variant:"outlined",label:"Add filter","aria-controls":"filters-menu","aria-haspopup":"true",onClick:Cn}):null,mn?React.createElement(Menu,{id:"filters-menu",anchorEl:We,open:Boolean(We),onClose:zn,onClick:zn,keepMounted:!0},mn.map(bn)):null,hn==null?void 0:hn.map(Sn=>{var Zn;return(Zn=wn==null?void 0:wn(Sn))!=null?Zn:null}),React.createElement(Link,{className:fe.listSubheaderLink,to:"/search",...Vt},Ot)),Ze?React.createElement(Progress,null):null,!Ze&&gt?React.createElement(ResponseErrorPanel,{title:"Error encountered while fetching search results",error:gt}):null,!Ze&&!gt&&(gn==null?void 0:gn.length)?gn.map(Tn):null,!Ze&&!gt&&!(gn!=null&&gn.length)?React.createElement(ListItem,null,kn):null)}function Qe(oe){const{query:fe,linkProps:We={},disableRenderingWithNoResults:Be,...Ze}=oe,gt=`/search?${qs.stringify({query:fe.term,types:fe.types,filters:fe.filters,pageCursor:fe.pageCursor},{arrayFormat:"brackets"})}`;return React.createElement(AnalyticsContext,{attributes:{pluginId:"search",extension:"SearchResultGroup"}},React.createElement(Z,{query:fe},({loading:It,error:jt,value:Zt})=>{var Ot,Vt;return!((Ot=Zt==null?void 0:Zt.results)!=null&&Ot.length)&&Be?null:React.createElement(Je,{...Ze,loading:It,error:jt,linkProps:{to:gt,...We},resultItems:Zt==null?void 0:Zt.results,filterFields:Object.keys((Vt=fe.filters)!=null?Vt:{})})}))}},91448:function(Nt,u,e){e.d(u,{S:function(){return Le},a:function(){return Wt},b:function(){return at},c:function(){return Ht},e:function(){return Xe},f:function(){return vt},r:function(){return Ne},u:function(){return on}});var n=e(2784),i=e(60364),m=e(79249),d=e(27556),a=e(38724),l=e(60905),y=e(85256),b=e(11776),t=e(49429),_=e(8629),g=e(79692),F=e(94339),j=e(32552),V=e(24579),re=e(27616),w=e(8284),A=e(70660),D=e(38402),f=e(86136),x=e(49378),R=e(99152),c=e(6487),O=e(42494),T=e(56939),Ce=e(73698),we=e(7089),nt=e(12231),ot=e(21324),$t=e(69001),ct=e(92573),St=e(30705),xt=e(49558),Q=e(32272),pn=e(19126),Ct=e.n(pn),Ge=e(18473),C=e(25557),Fe=e(73557),ve=e(62155),M=e(38016),G=e(56881);class Re{constructor(st){this.discoveryApi=st.discoveryApi,this.identityApi=st.identityApi}async query(st){const{token:le}=await this.identityApi.getCredentials(),ie=Ct().stringify(st),Z=`${await this.discoveryApi.getBaseUrl("search/query")}?${ie}`,B=await fetch(Z,{headers:le?{Authorization:`Bearer ${le}`}:{}});if(!B.ok)throw await Q.VL.fromResponse(B);return B.json()}}const Ne=(0,St.NT)({id:"search"}),Me=(0,St.rx)({id:"search",apis:[(0,St.ni)({api:ct.gK,deps:{discoveryApi:St.NW,identityApi:St.$4},factory:({discoveryApi:Te,identityApi:st})=>new Re({discoveryApi:Te,identityApi:st})})],routes:{root:Ne}}),Xe=Me.provide((0,St.P4)({name:"SearchPage",component:()=>e.e(6061).then(e.bind(e,76061)).then(Te=>Te.SearchPage),mountPoint:Ne})),vt=Me.provide((0,St.CO)({name:"SidebarSearchModal",component:{lazy:()=>e.e(2520).then(e.bind(e,62520)).then(Te=>Te.SidebarSearchModal)}})),ee=Me.provide((0,St.CO)({name:"HomePageSearchBar",component:{lazy:()=>e.e(6719).then(e.bind(e,46719)).then(Te=>Te.HomePageSearchBar)}})),ue=(0,g.Z)(Te=>({container:{borderRadius:30,display:"flex",height:"2.4em"},input:{flex:1},paperFullWidth:{height:"calc(100% - 128px)"},dialogActionsContainer:{padding:Te.spacing(1,3)},viewResultsLink:{verticalAlign:"0.5em"}})),Pe=({toggleModal:Te})=>{const st=(0,St.tg)(Ne),le=ue(),{term:ie}=(0,ct.Rx)(),{focusContent:Z}=(0,xt.r0)(),{transitions:B}=(0,i.Z)(),_e=()=>{Te(),setTimeout(Z,B.duration.leavingScreen)},de=()=>{_e()};return n.createElement(n.Fragment,null,n.createElement(m.Z,null,n.createElement(d.Z,{className:le.container},n.createElement(ct.E1,{className:le.input}))),n.createElement(a.Z,null,n.createElement(l.Z,{container:!0,direction:"row-reverse",justifyContent:"flex-start",alignItems:"center"},n.createElement(l.Z,{item:!0},n.createElement(xt.rU,{onClick:()=>{Te(),setTimeout(Z,B.duration.leavingScreen)},to:`${st()}?query=${ie}`},n.createElement("span",{className:le.viewResultsLink},"View Full Results"),n.createElement($t.Z,{color:"primary"})))),n.createElement(y.Z,null),n.createElement(ct.lt,null,({results:Ie})=>n.createElement(b.Z,null,Ie.map(({document:ze,highlight:rt})=>n.createElement("div",{role:"button",tabIndex:0,key:`${ze.location}-btn`,onClick:_e,onKeyPress:de},n.createElement(ct.yu,{key:ze.location,result:ze,highlight:rt})))))),n.createElement(t.Z,{className:le.dialogActionsContainer},n.createElement(l.Z,{container:!0,direction:"row"},n.createElement(l.Z,{item:!0,xs:12},n.createElement(ct.GQ,null)))))},at=({open:Te=!0,hidden:st,toggleModal:le,children:ie})=>{var Z;const B=ue();return n.createElement(_.Z,{classes:{paperFullWidth:B.paperFullWidth},onClose:le,"aria-labelledby":"search-modal-title",fullWidth:!0,maxWidth:"lg",open:Te,hidden:st},Te&&n.createElement(ct.Nd,{inheritParentContextIfAvailable:!0},(Z=ie&&ie({toggleModal:le}))!=null?Z:n.createElement(Pe,{toggleModal:le})))},bt=(0,Ge.CT)("search-modal-context"),Wt=({children:Te,showInitially:st})=>{const le=on(st),ie=(0,Ge.EI)({1:le});return n.createElement(bt.Provider,{value:ie},Te)};function on(Te=!1){const st=(0,n.useContext)(bt),le=st==null?void 0:st.atVersion(1),[ie,Z]=(0,n.useState)({hidden:!Te,open:Te}),B=(0,n.useCallback)(()=>Z(de=>({open:!0,hidden:!de.hidden})),[]),_e=(0,n.useCallback)(de=>Z(Ie=>({open:Ie.open||de,hidden:!de})),[]);return le!=null&&le.state?le:{state:ie,toggleModal:B,setOpen:_e}}const zt=()=>{const Te=(0,Fe.TH)(),{term:st,setTerm:le,types:ie,setTypes:Z,pageCursor:B,setPageCursor:_e,filters:de,setFilters:Ie}=(0,ct.Rx)(),ze=(0,C.Z)(Te.search);return(0,n.useEffect)(()=>{if(Te.search===ze)return;const rt=Ct().parse(Te.search.substring(1),{arrayLimit:0})||{};rt.filters&&Ie(rt.filters),rt.query&&le(rt.query),rt.pageCursor&&_e(rt.pageCursor),rt.types&&Z(rt.types)},[ze,Te,le,Z,_e,Ie]),(0,n.useEffect)(()=>{const rt=Ct().stringify({query:st,types:ie,pageCursor:B,filters:de},{arrayFormat:"brackets"}),kt=`${window.location.pathname}?${rt}`;window.history.replaceState(null,document.title,kt)},[st,ie,B,de]),null},Le=()=>{const Te=(0,Fe.pC)();return n.createElement(ct.Nd,null,n.createElement(zt,null),Te)},Pt=(0,g.Z)(Te=>({card:{backgroundColor:"rgba(0, 0, 0, .11)"},cardContent:{paddingTop:Te.spacing(1)},icon:{color:Te.palette.common.black},list:{width:"100%"},listItemIcon:{width:"24px",height:"24px"},accordion:{backgroundColor:Te.palette.background.paper},accordionSummary:{minHeight:"auto","&.Mui-expanded":{minHeight:"auto"}},accordionSummaryContent:{margin:Te.spacing(2,0),"&.Mui-expanded":{margin:Te.spacing(2,0)}},accordionDetails:{padding:Te.spacing(0,0,1)}})),Rt=Te=>{const st=Pt(),{setPageCursor:le,setTypes:ie,types:Z}=(0,ct.Rx)(),[B,_e]=(0,n.useState)(!0),{defaultValue:de,name:Ie,types:ze}=Te,rt=()=>_e(be=>!be),kt=be=>()=>{ie(be!==""?[be]:[]),le(void 0),_e(!1)};(0,n.useEffect)(()=>{de&&ie([de])},[]);const He=[{value:"",name:"All",icon:n.createElement(G.Z,null)},...ze],z=Z[0]||"";return n.createElement(F.Z,{className:st.card},n.createElement(j.Z,{title:Ie,titleTypographyProps:{variant:"overline"}}),n.createElement(V.Z,{className:st.cardContent},n.createElement(re.Z,{className:st.accordion,expanded:B,onChange:rt},n.createElement(w.Z,{classes:{root:st.accordionSummary,content:st.accordionSummaryContent},expandIcon:n.createElement(M.Z,{className:st.icon}),IconButtonProps:{size:"small"}},B?"Collapse":He.filter(be=>be.value===z)[0].name),n.createElement(A.Z,{classes:{root:st.accordionDetails}},n.createElement(b.Z,{className:st.list,component:"nav","aria-label":"filter by type",disablePadding:!0,dense:!0},He.map(be=>n.createElement(n.Fragment,{key:be.value},n.createElement(y.Z,null),n.createElement(D.Z,{selected:Z[0]===be.value||Z.length===0&&be.value==="",onClick:kt(be.value),button:!0},n.createElement(f.Z,null,(0,n.cloneElement)(be.icon,{className:st.listItemIcon})),n.createElement(x.Z,{primary:be.name})))))))))},sn=(0,g.Z)(Te=>({tabs:{borderBottom:`1px solid ${Te.palette.textVerySubtle}`,padding:Te.spacing(0,4)},tab:{height:"50px",fontWeight:Te.typography.fontWeightBold,fontSize:Te.typography.pxToRem(13),color:Te.palette.textSubtle,minWidth:"130px"}})),un=Te=>{const st=sn(),{setPageCursor:le,setTypes:ie,types:Z}=(0,ct.Rx)(),{defaultValue:B,types:_e}=Te,de=(ze,rt)=>{ie(rt!==""?[rt]:[]),le(void 0)};(0,n.useEffect)(()=>{B&&ie([B])},[]);const Ie=[{value:"",name:"All"},..._e];return n.createElement(R.Z,{className:st.tabs,indicatorColor:"primary",value:Z.length===0?"":Z[0],onChange:de},Ie.map((ze,rt)=>n.createElement(c.Z,{key:rt,className:st.tab,disableRipple:!0,label:ze.name,value:ze.value})))},Lt=(0,g.Z)(Te=>({label:{textTransform:"capitalize"},chips:{display:"flex",flexWrap:"wrap",marginTop:Te.spacing(1)},chip:{margin:2}})),Ht=Te=>{const{className:st,defaultValue:le,name:ie,values:Z=[]}=Te,B=Lt(),{types:_e,setTypes:de}=(0,ct.Rx)();(0,ve.Z)(()=>{_e.length||(le&&Array.isArray(le)?de(le):le&&de([le]))});const Ie=ze=>{const rt=ze.target.value;de(rt)};return n.createElement(O.Z,{className:st,variant:"filled",fullWidth:!0,"data-testid":"search-typefilter-next"},n.createElement(T.Z,{className:B.label,margin:"dense"},ie),n.createElement(Ce.Z,{multiple:!0,variant:"outlined",value:_e,onChange:Ie,placeholder:"All Results",renderValue:ze=>n.createElement("div",{className:B.chips},ze.map(rt=>n.createElement(we.Z,{key:rt,label:rt,className:B.chip,size:"small"})))},Z.map(ze=>n.createElement(nt.Z,{key:ze,value:ze},n.createElement(ot.Z,{checked:_e.indexOf(ze)>-1}),n.createElement(x.Z,{primary:ze})))))};Ht.Accordion=Te=>n.createElement(Rt,{...Te}),Ht.Tabs=Te=>n.createElement(un,{...Te});const nn=Te=>{const st=useRouteRef(Ne),{focusContent:le}=useContent(),ie=useNavigate(),Z=useCallback(B=>{const _e=qs.stringify({query:B},{addQueryPrefix:!0});le(),ie(`${st()}${_e}`)},[le,ie,st]);return React.createElement(SidebarSearchField,{icon:Te.icon,onSearch:Z,to:"/search"})}},23778:function(Nt,u,e){e.d(u,{Sc:function(){return n.c},YC:function(){return n.f},Z9:function(){return n.e}});var n=e(91448),i=e(2784),m=e(92573),d=e(30705),a=e(49558),l=e(32272),y=e(19126),b=e.n(y),t=e(18473)},44741:function(Nt,u,e){e.d(u,{Wf:function(){return Te}});var n=e(49558),i=e(30705),m=e(2784),d=e(64279),a=e(79692),l=e(38724),y=e(49429),b=e(77277),t=e(29611),_=e(60905),g=e(8629),F=e(79249),j=e(35292),V=e(71346),re=e.n(V),w=e(62432),A=e(26506);const D=(0,i.T0)({id:"plugin.techradar.service"});var f=(le=>(le[le.Down=-1]="Down",le[le.NoChange=0]="NoChange",le[le.Up=1]="Up",le))(f||{});const x=(0,a.Z)(le=>({ring:{fill:"none",stroke:"#bbb",strokeWidth:"1px"},axis:{fill:"none",stroke:"#bbb",strokeWidth:"1px"},text:{pointerEvents:"none",userSelect:"none",fill:le.palette.text.primary,fontSize:"25px",fontWeight:800}})),R=le=>{const{radius:ie,rings:Z}=le,B=x(le),_e=(ze,rt)=>[m.createElement("circle",{key:`c${ze}`,cx:0,cy:0,r:rt,className:B.ring}),m.createElement("text",{key:`t${ze}`,y:rt!==void 0?-rt+42:void 0,textAnchor:"middle",className:B.text},Z[ze].name)],de=[m.createElement("line",{key:"x",x1:0,y1:-ie,x2:0,y2:ie,className:B.axis,"data-testid":"radar-grid-x-line"}),m.createElement("line",{key:"y",x1:-ie,y1:0,x2:ie,y2:0,className:B.axis,"data-testid":"radar-grid-y-line"})],Ie=Z.map(ze=>ze.outerRadius).map((ze,rt)=>_e(rt,ze));return m.createElement(m.Fragment,null,de.concat(...Ie))};function c(le){return Boolean(le&&le!=="#"&&le.length>0)}const O=({url:le,className:ie,children:Z})=>c(le)?m.createElement(n.rU,{className:ie,to:le},Z):m.createElement(m.Fragment,null,Z),T=le=>{const{open:ie,onClose:Z,title:B,description:_e,url:de}=le;return m.createElement(g.Z,{"data-testid":"radar-description",open:ie,onClose:Z},m.createElement(F.Z,{"data-testid":"radar-description-dialog-title"},B),m.createElement(l.Z,{dividers:!0},m.createElement(n.SA,{content:_e})),c(de)&&m.createElement(y.Z,null,m.createElement(b.Z,{component:n.rU,to:de,onClick:Z,color:"primary",startIcon:m.createElement(j.Z,null)},"LEARN MORE")))},Ce=(0,a.Z)(()=>({text:{pointerEvents:"none",userSelect:"none",fontSize:"9px",fill:"#fff",textAnchor:"middle"},link:{cursor:"pointer"}})),we=(le,ie)=>{const Z={fill:le};let B=m.createElement("circle",{r:9,style:Z});return ie&&ie>0?B=m.createElement("path",{d:"M -11,5 11,5 0,-13 z",style:Z}):ie&&ie<0&&(B=m.createElement("path",{d:"M -11,-5 11,-5 0,13 z",style:Z})),B},nt=le=>{const ie=Ce(le),[Z,B]=m.useState(!1),{moved:_e,description:de,title:Ie,color:ze,url:rt,value:kt,x:He,y:z,onMouseEnter:be,onMouseLeave:je,onClick:ut}=le,Et=we(ze,_e),Mt=()=>{B(!0)},rn=()=>{B(!1)},ln=()=>{B(!Z)};return m.createElement("g",{transform:`translate(${He}, ${z})`,onMouseEnter:be,onMouseLeave:je,onClick:ut,"data-testid":"radar-entry"}," ",Z&&m.createElement(T,{open:Z,onClose:rn,title:Ie||"no title",description:de||"no description",url:rt}),de?m.createElement("a",{className:ie.link,onClick:Mt,role:"button",href:"#",tabIndex:0,onKeyPress:ln},Et):m.createElement(O,{url:rt,className:ie.link},Et),m.createElement("text",{y:3,className:ie.text},kt))},ot=(0,a.Z)(()=>({bubble:{pointerEvents:"none",userSelect:"none",opacity:0},visibleBubble:{pointerEvents:"none",userSelect:"none",opacity:.8},background:{fill:"#333"},text:{pointerEvents:"none",userSelect:"none",fontSize:"10px",fill:"#fff"}})),$t=le=>{const ie=ot(le),{visible:Z,text:B}=le,_e=(0,m.useRef)(null),de=(0,m.useRef)(null),Ie=(0,m.useRef)(null),ze=(0,m.useRef)(null),rt=()=>{if(_e.current){const{x:kt,y:He}=le,z=_e.current.getBBox(),be=5,je=4;de.current&&de.current.setAttribute("transform",`translate(${kt-z.width/2}, ${He-z.height-je})`),Ie.current&&(Ie.current.setAttribute("x",String(-be)),Ie.current.setAttribute("y",String(-z.height)),Ie.current.setAttribute("width",String(z.width+2*be)),Ie.current.setAttribute("height",String(z.height+je))),ze.current&&ze.current.setAttribute("transform",`translate(${z.width/2-be}, ${je-1})`)}};return(0,m.useLayoutEffect)(()=>{rt()}),m.createElement("g",{ref:de,x:0,y:0,className:Z?ie.visibleBubble:ie.bubble,"data-testid":"radar-bubble"},m.createElement("rect",{ref:Ie,rx:4,ry:4,className:ie.background}),m.createElement("text",{ref:_e,className:ie.text},B),m.createElement("path",{ref:ze,d:"M 0,0 10,0 5,8 z",className:ie.background}))},ct=(0,a.Z)(le=>({text:{pointerEvents:"none",userSelect:"none",fontSize:"10px",fill:le.palette.text.secondary}})),St=le=>{const{x:ie,y:Z}=le,B=ct(le);return m.createElement("text",{"data-testid":"radar-footer",transform:`translate(${ie}, ${Z})`,className:B.text},"\u25B2 moved up\xA0\xA0\xA0\xA0\xA0\u25BC moved down")},xt=({url:le,description:ie,title:Z,classes:B})=>{const[_e,de]=m.useState(!1),Ie=()=>{de(!0)},ze=()=>{de(!1)},rt=()=>{de(!_e)};return ie?m.createElement(m.Fragment,null,m.createElement("span",{className:B.entryLink,onClick:Ie,role:"button",tabIndex:0,onKeyPress:rt},m.createElement("span",{className:B.entry},Z)),_e&&m.createElement(T,{open:_e,onClose:ze,title:Z||"no title",url:le,description:ie})):m.createElement(O,{url:le,className:B.entryLink},m.createElement("span",{className:B.entry},Z))},Q=({ring:le,entries:ie,classes:Z,onEntryMouseEnter:B,onEntryMouseLeave:_e})=>m.createElement("div",{"data-testid":"radar-ring",key:le.id,className:Z.ring},m.createElement("h3",{className:Z.ringHeading},le.name),ie.length===0?m.createElement("p",{className:Z.ringEmpty},"(empty)"):m.createElement("ol",{className:Z.ringList},ie.map(de=>m.createElement("li",{key:de.id,value:(de.index||0)+1,onMouseEnter:B&&(()=>B(de)),onMouseLeave:_e&&(()=>_e(de))},m.createElement(xt,{classes:Z,url:de.url,title:de.title,description:de.description}))))),pn=le=>{const ie={};for(const Z of le){const B=Z.quadrant.index,_e=Z.ring.index;let de={};B!==void 0&&(ie[B]===void 0&&(ie[B]={}),de=ie[B]);let Ie=[];_e!==void 0&&(de[_e]===void 0&&(de[_e]=[]),Ie=de[_e]),Ie.push(Z)}return ie},Ct=(le,ie,Z,B=0)=>{const _e=ie.index,de=Z.index,Ie=_e===void 0?{}:le[_e]||{};return de===void 0?[]:Ie[de+B]||[]},Ge=({segments:le,quadrant:ie,rings:Z,classes:B,onEntryMouseEnter:_e,onEntryMouseLeave:de})=>m.createElement("foreignObject",{key:ie.id,x:ie.legendX,y:ie.legendY,width:ie.legendWidth,height:ie.legendHeight,"data-testid":"radar-quadrant"},m.createElement("div",{className:B.quadrant},m.createElement("h2",{className:B.quadrantHeading},ie.name),m.createElement("div",{className:B.rings},Z.map(Ie=>m.createElement(Q,{key:Ie.id,ring:Ie,classes:B,entries:Ct(le,ie,Ie),onEntryMouseEnter:_e,onEntryMouseLeave:de}))))),C=(0,a.Z)(le=>({quadrant:{height:"100%",width:"100%",overflowY:"auto",scrollbarWidth:"thin"},quadrantHeading:{pointerEvents:"none",userSelect:"none",marginTop:0,marginBottom:le.spacing(2),fontSize:"18px"},rings:{columns:3},ring:{breakInside:"avoid-column",pageBreakInside:"avoid","-webkit-column-break-inside":"avoid",fontSize:"12px",marginBottom:le.spacing(2)},ringEmpty:{color:le.palette.text.secondary},ringHeading:{pointerEvents:"none",userSelect:"none",marginTop:0,marginBottom:le.spacing(1),fontSize:"12px",fontWeight:800},ringList:{listStylePosition:"inside",marginTop:0,paddingLeft:0,fontVariantNumeric:"proportional-nums","-moz-font-feature-settings":"pnum","-webkit-font-feature-settings":"pnum","font-feature-settings":"pnum"},entry:{pointerEvents:"visiblePainted",userSelect:"none",fontSize:"11px"},entryLink:{pointerEvents:"visiblePainted"}})),Fe=({quadrants:le,rings:ie,entries:Z,onEntryMouseEnter:B,onEntryMouseLeave:_e,...de})=>{const Ie=C(de);return m.createElement("g",{"data-testid":"radar-legend"},le.map(ze=>m.createElement(Ge,{key:ze.id,segments:pn(Z),quadrant:ze,rings:ie,classes:Ie,onEntryMouseEnter:B,onEntryMouseLeave:_e})))},ve=le=>{const{width:ie,height:Z,radius:B,quadrants:_e,rings:de,entries:Ie,activeEntry:ze,onEntryMouseEnter:rt,onEntryMouseLeave:kt}=le;return m.createElement("g",{"data-testid":"radar-plot"},m.createElement(Fe,{quadrants:_e,rings:de,entries:Ie,onEntryMouseEnter:rt&&(He=>rt(He)),onEntryMouseLeave:kt&&(He=>kt(He))}),m.createElement("g",{transform:`translate(${ie/2}, ${Z/2})`},m.createElement(R,{radius:B,rings:de}),m.createElement(St,{x:-.5*ie,y:.5*Z}),Ie.map(He=>m.createElement(nt,{key:He.id,x:He.x||0,y:He.y||0,color:He.color||"",value:((He==null?void 0:He.index)||0)+1,url:He.url,description:He.description,moved:He.moved,title:He.title,onMouseEnter:rt&&(()=>rt(He)),onMouseLeave:kt&&(()=>kt(He))})),m.createElement($t,{visible:!!ze,text:(ze==null?void 0:ze.title)||"",x:(ze==null?void 0:ze.x)||0,y:(ze==null?void 0:ze.y)||0})))};class M{constructor(ie,Z,B,_e){this.nextSeed=_e,this.polarMin={t:ie.radialMin,r:Z.innerRadius},this.polarMax={t:ie.radialMax,r:Z.outerRadius},this.cartesianMin={x:15*ie.offsetX,y:15*ie.offsetY},this.cartesianMax={x:B*ie.offsetX,y:B*ie.offsetY}}clipx(ie){const Z=Xe(ie,this.cartesianMin,this.cartesianMax),B=Me(G(Z),this.polarMin.r+15,this.polarMax.r-15);return ie.x=Re(B).x,ie.x}clipy(ie){const Z=Xe(ie,this.cartesianMin,this.cartesianMax),B=Me(G(Z),this.polarMin.r+15,this.polarMax.r-15);return ie.y=Re(B).y,ie.y}random(){return Re({t:this._randomBetween(this.polarMin.t,this.polarMax.t),r:this._normalBetween(this.polarMin.r,this.polarMax.r)})}_random(){const ie=Math.sin(this.nextSeed())*1e4;return ie-Math.floor(ie)}_randomBetween(ie,Z){return ie+this._random()*(Z-ie)}_normalBetween(ie,Z){return ie+(this._random()+this._random())*.5*(Z-ie)}}function G({x:le,y:ie}){return{t:Math.atan2(ie,le),r:Math.sqrt(le*le+ie*ie)}}function Re({r:le,t:ie}){return{x:le*Math.cos(ie),y:le*Math.sin(ie)}}function Ne(le,ie,Z){const B=Math.min(ie,Z),_e=Math.max(ie,Z);return Math.min(Math.max(le,B),_e)}function Me(le,ie,Z){return{t:le.t,r:Ne(le.r,ie,Z)}}function Xe(le,ie,Z){return{x:Ne(le.x,ie.x,Z.x),y:Ne(le.y,ie.y,Z.y)}}const vt=(le,ie,Z,B)=>{const de=[16,Z/2-ie-16,Z/2+ie+16,Z-16],Ie=[16,B/2-16,B/2,B-16],ze=[{x:de[2],y:Ie[2],width:de[3]-de[2],height:Ie[3]-Ie[2]},{x:de[0],y:Ie[2],width:de[1]-de[0],height:Ie[3]-Ie[2]},{x:de[0],y:Ie[0],width:de[1]-de[0],height:Ie[1]-Ie[0]},{x:de[2],y:Ie[0],width:de[3]-de[2],height:Ie[1]-Ie[0]}];return le.map((rt,kt)=>{const He=ze[kt%4];return{...rt,index:kt,radialMin:kt*Math.PI/2,radialMax:(kt+1)*Math.PI/2,offsetX:kt%4===0||kt%4===3?1:-1,offsetY:kt%4===0||kt%4===1?1:-1,legendX:He.x,legendY:He.y,legendWidth:He.width,legendHeight:He.height}})},ee=(le,ie,Z,B,_e)=>{let de=42;const Ie=le.map((rt,kt)=>{const He=ie.find(ut=>{const Et=typeof rt.quadrant=="object"?rt.quadrant.id:rt.quadrant;return ut.id===Et}),z=Z.find(ut=>{const Et=typeof rt.ring=="object"?rt.ring.id:rt.ring;return ut.id===Et});if(!He)throw new Error(`Unknown quadrant ${rt.quadrant} for entry ${rt.id}!`);if(!z)throw new Error(`Unknown ring ${rt.ring} for entry ${rt.id}!`);const be=new M(He,z,B,()=>de++),je=be==null?void 0:be.random();return{...rt,index:kt,quadrant:He,ring:z,segment:be,x:je.x,y:je.y,color:_e&&rt.id===(_e==null?void 0:_e.id)?rt.ring.color:re()(rt.ring.color).desaturate(.5).lighten(.1).string()}}),ze=(0,w.Z)().nodes(Ie).velocityDecay(.19).force("collision",(0,A.Z)().radius(12).strength(.85)).stop();for(let rt=0,kt=Math.ceil(Math.log(ze.alphaMin())/Math.log(1-ze.alphaDecay()));rt<kt;++rt){ze.tick();for(const He of Ie)He.segment&&(He.x=He.segment.clipx(He),He.y=He.segment.clipy(He))}return Ie},ue=(le,ie)=>le.map((Z,B)=>({...Z,index:B,outerRadius:(B+2)/(le.length+1)*ie,innerRadius:(B===0?0:B+1)/(le.length+1)*ie})),Pe=({width:le,height:ie,quadrants:Z,rings:B,entries:_e,...de})=>{const Ie=Math.min(le,ie)/2,[ze,rt]=(0,m.useState)(),kt=(0,m.useRef)(null),He=(0,m.useMemo)(()=>vt(Z,Ie,le,ie),[Z,Ie,le,ie]),z=(0,m.useMemo)(()=>ue(B,Ie),[Ie,B]),be=(0,m.useMemo)(()=>ee(_e,He,z,Ie,ze),[_e,He,z,Ie,ze]);return m.createElement("svg",{ref:kt,width:le,height:ie,...de.svgProps},m.createElement(ve,{width:le,height:ie,radius:Ie,entries:be,quadrants:He,rings:z,activeEntry:ze,onEntryMouseEnter:je=>rt(je),onEntryMouseLeave:()=>rt(void 0)}))},at=le=>{const ie=(0,i.h_)(i.VE),Z=(0,i.h_)(D),{error:B,value:_e,loading:de}=(0,d.default)(async()=>Z.load(le),[Z,le]);return(0,m.useEffect)(()=>{B&&ie.post(B)},[B,ie]),{loading:de,value:_e,error:B}};function bt(le){const ie=le==null?void 0:le.toLocaleLowerCase("en-US").split(/\s/).map(Z=>Z.trim()).filter(Boolean);return ie!=null&&ie.length?Z=>{var B;const _e=`${Z.title} ${((B=Z.timeline[0])==null?void 0:B.description)||""}`.toLocaleLowerCase("en-US");return ie.every(de=>_e.includes(de))}:()=>!0}function Wt(le){const{loading:ie,error:Z,value:B}=at(le.id),_e=de=>de.entries.filter(bt(le.searchText)).map(Ie=>({id:Ie.key,quadrant:de.quadrants.find(ze=>ze.id===Ie.quadrant),title:Ie.title,ring:de.rings.find(ze=>ze.id===Ie.timeline[0].ringId),timeline:Ie.timeline.map(ze=>({date:ze.date,ring:de.rings.find(rt=>rt.id===ze.ringId),description:ze.description,moved:ze.moved})),moved:Ie.timeline[0].moved,description:Ie.description||Ie.timeline[0].description,url:Ie.url}));return m.createElement(m.Fragment,null,ie&&m.createElement(n.Ex,null),!ie&&!Z&&B&&m.createElement(Pe,{...le,rings:B.rings,quadrants:B.quadrants,entries:_e(B)}))}const on=(0,a.Z)(()=>({overflowXScroll:{overflowX:"scroll"}}));function zt(le){const{title:ie="Tech Radar",subtitle:Z="Pick the recommended technologies for your projects",pageTitle:B="Company Radar",..._e}=le,de=on(),[Ie,ze]=m.useState("");return m.createElement(n.T3,{themeId:"tool"},m.createElement(n.h4,{title:ie,subtitle:Z}),m.createElement(n.VY,{className:de.overflowXScroll},m.createElement(n.yW,{title:B},m.createElement(t.Z,{id:"tech-radar-filter",type:"search",placeholder:"Filter",onChange:rt=>ze(rt.target.value)}),m.createElement(n.qt,null,m.createElement("p",null,"This is used for visualizing the official guidelines of different areas of software development such as languages, frameworks, infrastructure and processes. You can find an explanation for the radar at"," ",m.createElement(n.rU,{to:"https://opensource.zalando.com/tech-radar/"},"Zalando Tech Radar"),"."))),m.createElement(_.Z,{container:!0,spacing:3,direction:"row"},m.createElement(_.Z,{item:!0,xs:12,sm:6,md:4},m.createElement(Wt,{searchText:Ie,..._e})))))}var Le=Object.freeze({__proto__:null,RadarPage:zt});const Pt=new Array;Pt.push({id:"adopt",name:"ADOPT",color:"#93c47d"}),Pt.push({id:"trial",name:"TRIAL",color:"#93d2c2"}),Pt.push({id:"assess",name:"ASSESS",color:"#fbdb84"}),Pt.push({id:"hold",name:"HOLD",color:"#efafa9"});const Rt=new Array;Rt.push({id:"infrastructure",name:"Infrastructure"}),Rt.push({id:"frameworks",name:"Frameworks"}),Rt.push({id:"languages",name:"Languages"}),Rt.push({id:"process",name:"Process"});const sn=new Array;sn.push({timeline:[{moved:0,ringId:"adopt",date:new Date("2020-08-06"),description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua"}],url:"#",key:"javascript",id:"javascript",title:"JavaScript",quadrant:"languages",description:'Excepteur **sint** occaecat *cupidatat* non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\n\n```ts\nconst x = "3";\n```\n'}),sn.push({timeline:[{moved:-1,ringId:"adopt",date:new Date("2020-08-06"),description:"Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat"}],url:"#",key:"typescript",id:"typescript",title:"TypeScript",quadrant:"languages",description:"Itaque earum rerum hic tenetur a sapiente delectus, ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat"}),sn.push({timeline:[{moved:1,ringId:"adopt",date:new Date("2020-08-06"),description:"Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur"}],url:"https://webpack.js.org/",key:"webpack",id:"webpack",title:"Webpack",quadrant:"frameworks"}),sn.push({timeline:[{moved:0,ringId:"adopt",date:new Date("2020-08-06")}],url:"https://reactjs.org/",key:"react",id:"react",title:"React",quadrant:"frameworks"}),sn.push({timeline:[{moved:0,ringId:"adopt",date:new Date("2020-08-06")}],url:"#",key:"code-reviews",id:"code-reviews",title:"Code Reviews",quadrant:"process"}),sn.push({timeline:[{moved:0,ringId:"assess",date:new Date("2020-08-06")}],url:"#",key:"mob-programming",id:"mob-programming",title:"Mob Programming",quadrant:"process"}),sn.push({timeline:[{moved:0,ringId:"adopt",date:new Date("2020-08-06")}],url:"#",key:"docs-like-code",id:"docs-like-code",title:"Docs-like-code",quadrant:"process"}),sn.push({timeline:[{ringId:"hold",date:new Date("2020-08-06")}],url:"#",key:"force-push",id:"force-push",title:"Force push to master",quadrant:"process"}),sn.push({timeline:[{ringId:"adopt",date:new Date("2020-08-06"),description:"long description"}],url:"https://github.com",key:"github-actions",id:"github-actions",title:"GitHub Actions",quadrant:"infrastructure"});const un={entries:sn,quadrants:Rt,rings:Pt};class Lt{async load(){return un}}const Ht=(0,i.NT)({id:"tech-radar"}),Te=(0,i.rx)({id:"tech-radar",routes:{root:Ht},apis:[(0,i.ni)(D,new Lt)]}).provide((0,i.P4)({name:"TechRadarPage",component:()=>Promise.resolve().then(function(){return Le}).then(le=>le.RadarPage),mountPoint:Ht})),st=null},65609:function(Nt,u,e){e.d(u,{EU:function(){return sn}});var n=e(30705),i=e(74163),m=e(2784),d=e(87370),a=e(15459),l=e(77277),y=e(79692),b=e(8560),t=e(27556),_=e(11433),g=e(60364),F=e(12231),j=e(49378),V=e(90436),re=e(95544),w=e(61837),A=e(51209),D=e(38016),f=e(82717),x=e.n(f),R=e(1854),c=e(49462),O=e(31654),T=e(49558),Ce=e(65549),we=e(17373);const nt=".md-nav__item--nested .md-toggle",ot="@backstage/techdocs-addons/nav-expanded",$t=(0,a.Z)({root:{position:"absolute",left:"220px",top:"19px",padding:0,minWidth:0}})(l.Z),ct=(0,a.Z)({root:{height:"20px",width:"20px"}})(A.Z),St=(0,a.Z)({root:{height:"20px",width:"20px"}})(D.Z),xt=()=>{const Lt={expandAllNestedNavs:!1},{value:Ht,set:nn}=(0,d.Z)(ot,{defaultValue:Lt}),[Te,st]=(0,m.useState)(!1),[...le]=(0,i.pV)([nt]),ie=(0,m.useCallback)(B=>{const _e=B.checked,de=Ht==null?void 0:Ht.expandAllNestedNavs;return!!(de&&!_e||!de&&_e)},[Ht]);(0,m.useEffect)(()=>{!(le!=null&&le.length)||(st(!0),le.forEach(B=>{ie(B)&&B.click()}))},[Ht,ie,le]);const Z=()=>{nn(B=>({expandAllNestedNavs:!(B!=null&&B.expandAllNestedNavs)}))};return m.createElement(m.Fragment,null,Te?m.createElement($t,{size:"small",onClick:Z,"aria-label":Ht!=null&&Ht.expandAllNestedNavs?"collapse-nav":"expand-nav"},Ht!=null&&Ht.expandAllNestedNavs?m.createElement(St,null):m.createElement(ct,null)):null)},Q="techdocs-report-issue",pn=`#${Q}`,Ct='[title^="Edit this page"]',Ge='[title^="Leave feedback for"]',C='[data-md-component="main"] .md-content',Fe=(Lt,Ht)=>Ht==="github"?(0,R.BT)(Lt,"blob"):Ht==="gitlab"?(0,R.ah)(Lt,"blob"):(console.error(`Invalid SCM type ${Ht} found in ReportIssue addon for URL ${Lt}!`),Lt),ve=Lt=>{const Ht=Lt.toString().substring(0,70),nn=Ht.length===70?"...":"";return`Documentation feedback: ${Ht}${nn}`},M=(Lt,Ht,nn)=>{const Te="## Documentation Feedback \u{1F4DD}",st="#### The highlighted text:",le="#### The comment on the text:",ie="_>replace this line with your comment<_",Z=Lt.toString().trim().split(`
`).map(_e=>`> ${_e.trim()}`).join(`
`),B=[`${nn} URL: <${window.location.href}> 
Markdown URL: <${Ht}>`];return`${Te}

 ${st} 

 ${Z}

 ${le} 
 ${ie}

 ___
${B}`},G=Lt=>{var Ht,nn;const Te={title:"",body:""},st=(0,i.oi)(Lt),[le]=(0,i.pV)([Ct]),ie=(Ht=le==null?void 0:le.href)!=null?Ht:"",Z=(0,n.h_)(c.q3),_e=(0,n.h_)(n.Ds).getOptionalString("app.title")||"Backstage";if(!st||!ie)return Te;const de=(nn=Z.byUrl(ie))==null?void 0:nn.type;return de?{title:ve(st),body:M(st,Fe(ie,de),_e)}:Te},Re=()=>{var Lt,Ht;const nn=(0,n.h_)(c.q3),[Te]=(0,i.pV)([Ct]),st=(Lt=Te==null?void 0:Te.href)!=null?Lt:"";if(!st)return null;const le=(Ht=nn.byUrl(st))==null?void 0:Ht.type;return le?{...x()(Fe(st,le)),type:le}:null},Ne=(0,y.Z)(Lt=>({root:{display:"grid",gridGap:Lt.spacing(1),gridAutoFlow:"column",justifyContent:"center",alignItems:"center",color:Lt.palette.common.black,fontSize:Lt.typography.button.fontSize}})),Me=({type:Lt})=>Lt==="github"?T.fy:O.Z,Xe=({type:Lt})=>Lt==="github"?"Github":"Gitlab",vt=(Lt,Ht)=>{const{title:nn,body:Te}=Ht,st=encodeURIComponent(nn),le=encodeURIComponent(Te),{protocol:ie,resource:Z,owner:B,name:_e,type:de}=Lt,Ie=encodeURIComponent(B),ze=encodeURIComponent(_e),rt=`${ie}://${Z}/${Ie}/${ze}`;return de==="github"?`${rt}/issues/new?title=${st}&body=${le}`:`${rt}/issues/new?issue[title]=${st}&issue[description]=${le}`},ee=({template:Lt,repository:Ht})=>{const nn=Ne(),Te=Me(Ht),st=vt(Ht,Lt);return m.createElement(T.rU,{className:nn.root,to:st,target:"_blank"},m.createElement(Te,null)," Open new ",Xe(Ht)," issue")},ue=(0,y.Z)(Lt=>({root:{transform:"translate(-100%, -100%)",position:"absolute",padding:Lt.spacing(1),zIndex:Lt.zIndex.tooltip,background:Lt.palette.common.white}})),Pe=({debounceTime:Lt=500,templateBuilder:Ht})=>{const nn=ue(),[Te,st]=(0,m.useState)(),le=Re(),ie=G(Lt),Z=(0,i.oi)(Lt),[B,_e]=(0,i.pV)([C,Ge]);let[de]=(0,i.pV)([pn]);return _e&&(_e.style.display="none"),(0,m.useEffect)(()=>{if(!le||!Z||!Z.containsNode(B,!0)||(Z==null?void 0:Z.containsNode(de,!0)))return;const Ie=B.getBoundingClientRect(),ze=Z.getRangeAt(0).getBoundingClientRect();st({top:`${ze.top-Ie.top-16}px`,left:`${ze.left+ze.width/2}px`})},[Z,B,de]),!Z||!le||!["github","gitlab"].includes(le.type)?null:(de||(de=document.createElement("div"),de.setAttribute("id",Q),B.prepend(de)),m.createElement(b.Z,{container:de},m.createElement(t.Z,{"data-testid":"report-issue-addon",className:nn.root,style:Te},m.createElement(ee,{repository:le,template:Ht?Ht({selection:Z}):ie}))))},at="0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.13),0 0 0 1px rgba(0,0,0,0.02)",bt=(0,a.Z)(Lt=>({root:{height:2,padding:"15px 0"},thumb:{height:18,width:18,backgroundColor:Lt.palette.common.white,boxShadow:at,marginTop:-9,marginLeft:-9,"&:focus, &:hover, &$active":{boxShadow:"0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.3),0 0 0 1px rgba(0,0,0,0.02)","@media (hover: none)":{boxShadow:at}}},active:{},valueLabel:{top:"100%",left:"50%",transform:"scale(1) translate(-50%, -5px) !important","& *":{color:Lt.palette.common.black,fontSize:Lt.typography.caption.fontSize,background:"transparent"}},track:{height:2},rail:{height:2,opacity:.5},mark:{height:10,width:1,marginTop:-4},markActive:{opacity:1,backgroundColor:"currentColor"}}))(_.Z),Wt={key:"techdocs.addons.settings.textsize",defaultValue:100},on=[{value:90},{value:100},{value:115},{value:130},{value:150}],zt=(0,y.Z)(Lt=>({container:{color:Lt.palette.textSubtle,display:"flex",alignItems:"center",margin:0,minWidth:200},menuItem:{"&:hover":{background:"transparent"}},decreaseButton:{marginRight:Lt.spacing(1)},increaseButton:{marginLeft:Lt.spacing(1)}})),Le=()=>{const Lt=zt(),Ht=(0,g.Z)(),[nn]=(0,i.pV)(["body"]),[Te,st]=(0,m.useState)(()=>{const rt=localStorage==null?void 0:localStorage.getItem(Wt.key);return rt?parseInt(rt,10):Wt.defaultValue}),le=(0,m.useMemo)(()=>on.map(rt=>rt.value),[]),ie=(0,m.useMemo)(()=>le.indexOf(Te),[le,Te]),Z=(0,m.useMemo)(()=>le[0],[le]),B=(0,m.useMemo)(()=>le[le.length-1],[le]),_e=(0,m.useCallback)(()=>`${Te}%`,[Te]),de=(0,m.useCallback)((rt,kt)=>{Array.isArray(kt)||(st(kt),localStorage==null||localStorage.setItem(Wt.key,String(kt)))},[st]),Ie=(0,m.useCallback)(rt=>{de(rt,le[ie-1])},[ie,le,de]),ze=(0,m.useCallback)(rt=>{de(rt,le[ie+1])},[ie,le,de]);return(0,m.useEffect)(()=>{var rt,kt;if(!nn)return;const He=(kt=(rt=Ht.typography)==null?void 0:rt.htmlFontSize)!=null?kt:16;nn.style.setProperty("--md-typeset-font-size",`${He*(Te/100)}px`)},[nn,Te,Ht]),m.createElement(F.Z,{className:Lt.menuItem,button:!0,disableRipple:!0},m.createElement(j.Z,{primary:m.createElement(V.Z,{variant:"subtitle2",color:"textPrimary"},"Text size"),secondary:m.createElement(re.Z,{className:Lt.container},m.createElement(w.Z,{className:Lt.decreaseButton,size:"small",edge:"start",disabled:Te===Z,onClick:Ie,"aria-label":"Decrease text size"},m.createElement(we.Z,null)),m.createElement(bt,{value:Te,"aria-labelledby":"text-size-slider",getAriaValueText:_e,valueLabelDisplay:"on",valueLabelFormat:_e,marks:on,step:null,min:Z,max:B,onChangeCommitted:de}),m.createElement(w.Z,{className:Lt.increaseButton,size:"small",edge:"end",disabled:Te===B,onClick:ze,"aria-label":"Increase text size"},m.createElement(Ce.Z,null))),disableTypography:!0}))},Pt=(0,n.rx)({id:"techdocsModuleAddonsContrib"}),Rt=Pt.provide((0,i.KY)({name:"ExpandableNavigation",location:i.oZ.PrimarySidebar,component:xt})),sn=Pt.provide((0,i.KY)({name:"ReportIssue",location:i.oZ.Content,component:Pe})),un=Pt.provide((0,i.KY)({name:"TextSize",location:i.oZ.Settings,component:Le}))},74163:function(Nt,u,e){e.d(u,{Ox:function(){return Sn},jM:function(){return Be},Zz:function(){return Ze},oZ:function(){return zn},DR:function(){return gt},ZS:function(){return $n},VA:function(){return jn},KY:function(){return jt},gT:function(){return bn},Dl:function(){return hn},ux:function(){return Ln},pV:function(){return or},oi:function(){return fr},$L:function(){return mn},x1:function(){return Cn}});var n=e(2784),i=e(73557),m=e(30705),d=e(64279),a=e(34520),l=e(18473),y=e(7896),b=e(20653),t=e(87371),_=e(81665),g=e(80753),F=e(31461),j={}.constructor;function V(Se){if(Se==null||typeof Se!="object")return Se;if(Array.isArray(Se))return Se.map(V);if(Se.constructor!==j)return Se;var ne={};for(var ae in Se)ne[ae]=V(Se[ae]);return ne}function re(Se,ne,ae){Se===void 0&&(Se="unnamed");var S=ae.jss,ge=V(ne),L=S.plugins.onCreateRule(Se,ge,ae);return L||(Se[0],null)}var w=function(ne,ae){for(var S="",ge=0;ge<ne.length&&ne[ge]!=="!important";ge++)S&&(S+=ae),S+=ne[ge];return S},A=function(ne,ae){if(ae===void 0&&(ae=!1),!Array.isArray(ne))return ne;var S="";if(Array.isArray(ne[0]))for(var ge=0;ge<ne.length&&ne[ge]!=="!important";ge++)S&&(S+=", "),S+=w(ne[ge]," ");else S=w(ne,", ");return!ae&&ne[ne.length-1]==="!important"&&(S+=" !important"),S};function D(Se){return Se&&Se.format===!1?{linebreak:"",space:""}:{linebreak:`
`,space:" "}}function f(Se,ne){for(var ae="",S=0;S<ne;S++)ae+="  ";return ae+Se}function x(Se,ne,ae){ae===void 0&&(ae={});var S="";if(!ne)return S;var ge=ae,L=ge.indent,N=L===void 0?0:L,me=ne.fallbacks;ae.format===!1&&(N=-1/0);var et=D(ae),wt=et.linebreak,h=et.space;if(Se&&N++,me)if(Array.isArray(me))for(var v=0;v<me.length;v++){var k=me[v];for(var te in k){var Ee=k[te];Ee!=null&&(S&&(S+=wt),S+=f(te+":"+h+A(Ee)+";",N))}}else for(var Ye in me){var H=me[Ye];H!=null&&(S&&(S+=wt),S+=f(Ye+":"+h+A(H)+";",N))}for(var W in ne){var Ae=ne[W];Ae!=null&&W!=="fallbacks"&&(S&&(S+=wt),S+=f(W+":"+h+A(Ae)+";",N))}return!S&&!ae.allowEmpty||!Se?S:(N--,S&&(S=""+wt+S+wt),f(""+Se+h+"{"+S,N)+f("}",N))}var R=/([[\].#*$><+~=|^:(),"'`\s])/g,c=typeof CSS!="undefined"&&CSS.escape,O=function(Se){return c?c(Se):Se.replace(R,"\\$1")},T=function(){function Se(ae,S,ge){this.type="style",this.isProcessed=!1;var L=ge.sheet,N=ge.Renderer;this.key=ae,this.options=ge,this.style=S,L?this.renderer=L.renderer:N&&(this.renderer=new N)}var ne=Se.prototype;return ne.prop=function(S,ge,L){if(ge===void 0)return this.style[S];var N=L?L.force:!1;if(!N&&this.style[S]===ge)return this;var me=ge;(!L||L.process!==!1)&&(me=this.options.jss.plugins.onChangeValue(ge,S,this));var et=me==null||me===!1,wt=S in this.style;if(et&&!wt&&!N)return this;var h=et&&wt;if(h?delete this.style[S]:this.style[S]=me,this.renderable&&this.renderer)return h?this.renderer.removeProperty(this.renderable,S):this.renderer.setProperty(this.renderable,S,me),this;var v=this.options.sheet;return v&&v.attached,this},Se}(),Ce=function(Se){(0,_.Z)(ne,Se);function ne(S,ge,L){var N;N=Se.call(this,S,ge,L)||this;var me=L.selector,et=L.scoped,wt=L.sheet,h=L.generateId;return me?N.selectorText=me:et!==!1&&(N.id=h((0,g.Z)((0,g.Z)(N)),wt),N.selectorText="."+O(N.id)),N}var ae=ne.prototype;return ae.applyTo=function(ge){var L=this.renderer;if(L){var N=this.toJSON();for(var me in N)L.setProperty(ge,me,N[me])}return this},ae.toJSON=function(){var ge={};for(var L in this.style){var N=this.style[L];typeof N!="object"?ge[L]=N:Array.isArray(N)&&(ge[L]=A(N))}return ge},ae.toString=function(ge){var L=this.options.sheet,N=L?L.options.link:!1,me=N?(0,y.Z)({},ge,{allowEmpty:!0}):ge;return x(this.selectorText,this.style,me)},(0,t.Z)(ne,[{key:"selector",set:function(ge){if(ge!==this.selectorText){this.selectorText=ge;var L=this.renderer,N=this.renderable;if(!(!N||!L)){var me=L.setSelector(N,ge);me||L.replaceRule(N,this)}}},get:function(){return this.selectorText}}]),ne}(T),we={onCreateRule:function(ne,ae,S){return ne[0]==="@"||S.parent&&S.parent.type==="keyframes"?null:new Ce(ne,ae,S)}},nt={indent:1,children:!0},ot=/@([\w-]+)/,$t=function(){function Se(ae,S,ge){this.type="conditional",this.isProcessed=!1,this.key=ae;var L=ae.match(ot);this.at=L?L[1]:"unknown",this.query=ge.name||"@"+this.at,this.options=ge,this.rules=new on((0,y.Z)({},ge,{parent:this}));for(var N in S)this.rules.add(N,S[N]);this.rules.process()}var ne=Se.prototype;return ne.getRule=function(S){return this.rules.get(S)},ne.indexOf=function(S){return this.rules.indexOf(S)},ne.addRule=function(S,ge,L){var N=this.rules.add(S,ge,L);return N?(this.options.jss.plugins.onProcessRule(N),N):null},ne.toString=function(S){S===void 0&&(S=nt);var ge=D(S),L=ge.linebreak;if(S.indent==null&&(S.indent=nt.indent),S.children==null&&(S.children=nt.children),S.children===!1)return this.query+" {}";var N=this.rules.toString(S);return N?this.query+" {"+L+N+L+"}":""},Se}(),ct=/@media|@supports\s+/,St={onCreateRule:function(ne,ae,S){return ct.test(ne)?new $t(ne,ae,S):null}},xt={indent:1,children:!0},Q=/@keyframes\s+([\w-]+)/,pn=function(){function Se(ae,S,ge){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var L=ae.match(Q);L&&L[1]?this.name=L[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=ge;var N=ge.scoped,me=ge.sheet,et=ge.generateId;this.id=N===!1?this.name:O(et(this,me)),this.rules=new on((0,y.Z)({},ge,{parent:this}));for(var wt in S)this.rules.add(wt,S[wt],(0,y.Z)({},ge,{parent:this}));this.rules.process()}var ne=Se.prototype;return ne.toString=function(S){S===void 0&&(S=xt);var ge=D(S),L=ge.linebreak;if(S.indent==null&&(S.indent=xt.indent),S.children==null&&(S.children=xt.children),S.children===!1)return this.at+" "+this.id+" {}";var N=this.rules.toString(S);return N&&(N=""+L+N+L),this.at+" "+this.id+" {"+N+"}"},Se}(),Ct=/@keyframes\s+/,Ge=/\$([\w-]+)/g,C=function(ne,ae){return typeof ne=="string"?ne.replace(Ge,function(S,ge){return ge in ae?ae[ge]:S}):ne},Fe=function(ne,ae,S){var ge=ne[ae],L=C(ge,S);L!==ge&&(ne[ae]=L)},ve={onCreateRule:function(ne,ae,S){return typeof ne=="string"&&Ct.test(ne)?new pn(ne,ae,S):null},onProcessStyle:function(ne,ae,S){return ae.type!=="style"||!S||("animation-name"in ne&&Fe(ne,"animation-name",S.keyframes),"animation"in ne&&Fe(ne,"animation",S.keyframes)),ne},onChangeValue:function(ne,ae,S){var ge=S.options.sheet;if(!ge)return ne;switch(ae){case"animation":return C(ne,ge.keyframes);case"animation-name":return C(ne,ge.keyframes);default:return ne}}},M=function(Se){(0,_.Z)(ne,Se);function ne(){return Se.apply(this,arguments)||this}var ae=ne.prototype;return ae.toString=function(ge){var L=this.options.sheet,N=L?L.options.link:!1,me=N?(0,y.Z)({},ge,{allowEmpty:!0}):ge;return x(this.key,this.style,me)},ne}(T),G={onCreateRule:function(ne,ae,S){return S.parent&&S.parent.type==="keyframes"?new M(ne,ae,S):null}},Re=function(){function Se(ae,S,ge){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=ae,this.style=S,this.options=ge}var ne=Se.prototype;return ne.toString=function(S){var ge=D(S),L=ge.linebreak;if(Array.isArray(this.style)){for(var N="",me=0;me<this.style.length;me++)N+=x(this.at,this.style[me]),this.style[me+1]&&(N+=L);return N}return x(this.at,this.style,S)},Se}(),Ne=/@font-face/,Me={onCreateRule:function(ne,ae,S){return Ne.test(ne)?new Re(ne,ae,S):null}},Xe=function(){function Se(ae,S,ge){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=ae,this.style=S,this.options=ge}var ne=Se.prototype;return ne.toString=function(S){return x(this.key,this.style,S)},Se}(),vt={onCreateRule:function(ne,ae,S){return ne==="@viewport"||ne==="@-ms-viewport"?new Xe(ne,ae,S):null}},ee=function(){function Se(ae,S,ge){this.type="simple",this.isProcessed=!1,this.key=ae,this.value=S,this.options=ge}var ne=Se.prototype;return ne.toString=function(S){if(Array.isArray(this.value)){for(var ge="",L=0;L<this.value.length;L++)ge+=this.key+" "+this.value[L]+";",this.value[L+1]&&(ge+=`
`);return ge}return this.key+" "+this.value+";"},Se}(),ue={"@charset":!0,"@import":!0,"@namespace":!0},Pe={onCreateRule:function(ne,ae,S){return ne in ue?new ee(ne,ae,S):null}},at=[we,St,ve,G,Me,vt,Pe],bt={process:!0},Wt={force:!0,process:!0},on=function(){function Se(ae){this.map={},this.raw={},this.index=[],this.counter=0,this.options=ae,this.classes=ae.classes,this.keyframes=ae.keyframes}var ne=Se.prototype;return ne.add=function(S,ge,L){var N=this.options,me=N.parent,et=N.sheet,wt=N.jss,h=N.Renderer,v=N.generateId,k=N.scoped,te=(0,y.Z)({classes:this.classes,parent:me,sheet:et,jss:wt,Renderer:h,generateId:v,scoped:k,name:S,keyframes:this.keyframes,selector:void 0},L),Ee=S;S in this.raw&&(Ee=S+"-d"+this.counter++),this.raw[Ee]=ge,Ee in this.classes&&(te.selector="."+O(this.classes[Ee]));var Ye=re(Ee,ge,te);if(!Ye)return null;this.register(Ye);var H=te.index===void 0?this.index.length:te.index;return this.index.splice(H,0,Ye),Ye},ne.get=function(S){return this.map[S]},ne.remove=function(S){this.unregister(S),delete this.raw[S.key],this.index.splice(this.index.indexOf(S),1)},ne.indexOf=function(S){return this.index.indexOf(S)},ne.process=function(){var S=this.options.jss.plugins;this.index.slice(0).forEach(S.onProcessRule,S)},ne.register=function(S){this.map[S.key]=S,S instanceof Ce?(this.map[S.selector]=S,S.id&&(this.classes[S.key]=S.id)):S instanceof pn&&this.keyframes&&(this.keyframes[S.name]=S.id)},ne.unregister=function(S){delete this.map[S.key],S instanceof Ce?(delete this.map[S.selector],delete this.classes[S.key]):S instanceof pn&&delete this.keyframes[S.name]},ne.update=function(){var S,ge,L;if(typeof(arguments.length<=0?void 0:arguments[0])=="string"?(S=arguments.length<=0?void 0:arguments[0],ge=arguments.length<=1?void 0:arguments[1],L=arguments.length<=2?void 0:arguments[2]):(ge=arguments.length<=0?void 0:arguments[0],L=arguments.length<=1?void 0:arguments[1],S=null),S)this.updateOne(this.map[S],ge,L);else for(var N=0;N<this.index.length;N++)this.updateOne(this.index[N],ge,L)},ne.updateOne=function(S,ge,L){L===void 0&&(L=bt);var N=this.options,me=N.jss.plugins,et=N.sheet;if(S.rules instanceof Se){S.rules.update(ge,L);return}var wt=S.style;if(me.onUpdate(ge,S,et,L),L.process&&wt&&wt!==S.style){me.onProcessStyle(S.style,S,et);for(var h in S.style){var v=S.style[h],k=wt[h];v!==k&&S.prop(h,v,Wt)}for(var te in wt){var Ee=S.style[te],Ye=wt[te];Ee==null&&Ee!==Ye&&S.prop(te,null,Wt)}}},ne.toString=function(S){for(var ge="",L=this.options.sheet,N=L?L.options.link:!1,me=D(S),et=me.linebreak,wt=0;wt<this.index.length;wt++){var h=this.index[wt],v=h.toString(S);!v&&!N||(ge&&(ge+=et),ge+=v)}return ge},Se}(),zt=function(){function Se(ae,S){this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=(0,y.Z)({},S,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),S.Renderer&&(this.renderer=new S.Renderer(this)),this.rules=new on(this.options);for(var ge in ae)this.rules.add(ge,ae[ge]);this.rules.process()}var ne=Se.prototype;return ne.attach=function(){return this.attached?this:(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy(),this)},ne.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},ne.addRule=function(S,ge,L){var N=this.queue;this.attached&&!N&&(this.queue=[]);var me=this.rules.add(S,ge,L);return me?(this.options.jss.plugins.onProcessRule(me),this.attached?(this.deployed&&(N?N.push(me):(this.insertRule(me),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0))),me):(this.deployed=!1,me)):null},ne.insertRule=function(S){this.renderer&&this.renderer.insertRule(S)},ne.addRules=function(S,ge){var L=[];for(var N in S){var me=this.addRule(N,S[N],ge);me&&L.push(me)}return L},ne.getRule=function(S){return this.rules.get(S)},ne.deleteRule=function(S){var ge=typeof S=="object"?S:this.rules.get(S);return!ge||this.attached&&!ge.renderable?!1:(this.rules.remove(ge),this.attached&&ge.renderable&&this.renderer?this.renderer.deleteRule(ge.renderable):!0)},ne.indexOf=function(S){return this.rules.indexOf(S)},ne.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},ne.update=function(){var S;return(S=this.rules).update.apply(S,arguments),this},ne.updateOne=function(S,ge,L){return this.rules.updateOne(S,ge,L),this},ne.toString=function(S){return this.rules.toString(S)},Se}(),Le=function(){function Se(){this.plugins={internal:[],external:[]},this.registry={}}var ne=Se.prototype;return ne.onCreateRule=function(S,ge,L){for(var N=0;N<this.registry.onCreateRule.length;N++){var me=this.registry.onCreateRule[N](S,ge,L);if(me)return me}return null},ne.onProcessRule=function(S){if(!S.isProcessed){for(var ge=S.options.sheet,L=0;L<this.registry.onProcessRule.length;L++)this.registry.onProcessRule[L](S,ge);S.style&&this.onProcessStyle(S.style,S,ge),S.isProcessed=!0}},ne.onProcessStyle=function(S,ge,L){for(var N=0;N<this.registry.onProcessStyle.length;N++)ge.style=this.registry.onProcessStyle[N](ge.style,ge,L)},ne.onProcessSheet=function(S){for(var ge=0;ge<this.registry.onProcessSheet.length;ge++)this.registry.onProcessSheet[ge](S)},ne.onUpdate=function(S,ge,L,N){for(var me=0;me<this.registry.onUpdate.length;me++)this.registry.onUpdate[me](S,ge,L,N)},ne.onChangeValue=function(S,ge,L){for(var N=S,me=0;me<this.registry.onChangeValue.length;me++)N=this.registry.onChangeValue[me](N,ge,L);return N},ne.use=function(S,ge){ge===void 0&&(ge={queue:"external"});var L=this.plugins[ge.queue];L.indexOf(S)===-1&&(L.push(S),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce(function(N,me){for(var et in me)et in N&&N[et].push(me[et]);return N},{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},Se}(),Pt=function(){function Se(){this.registry=[]}var ne=Se.prototype;return ne.add=function(S){var ge=this.registry,L=S.options.index;if(ge.indexOf(S)===-1){if(ge.length===0||L>=this.index){ge.push(S);return}for(var N=0;N<ge.length;N++)if(ge[N].options.index>L){ge.splice(N,0,S);return}}},ne.reset=function(){this.registry=[]},ne.remove=function(S){var ge=this.registry.indexOf(S);this.registry.splice(ge,1)},ne.toString=function(S){for(var ge=S===void 0?{}:S,L=ge.attached,N=(0,F.Z)(ge,["attached"]),me=D(N),et=me.linebreak,wt="",h=0;h<this.registry.length;h++){var v=this.registry[h];L!=null&&v.attached!==L||(wt&&(wt+=et),wt+=v.toString(N))}return wt},(0,t.Z)(Se,[{key:"index",get:function(){return this.registry.length===0?0:this.registry[this.registry.length-1].options.index}}]),Se}(),Rt=new Pt,sn=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"&&window.Math===Math?window:typeof self!="undefined"&&self.Math===Math?self:Function("return this")(),un="2f1acc6c3a606b082e5eef5e54414ffb";sn[un]==null&&(sn[un]=0);var Lt=sn[un]++,Ht=1e10,nn=function(ne){ne===void 0&&(ne={});var ae=0,S=function(L,N){ae+=1,ae>Ht;var me="",et="";return N&&(N.options.classNamePrefix&&(et=N.options.classNamePrefix),N.options.jss.id!=null&&(me=String(N.options.jss.id))),ne.minify?""+(et||"c")+Lt+me+ae:et+L.key+"-"+Lt+(me?"-"+me:"")+"-"+ae};return S},Te=function(ne){var ae;return function(){return ae||(ae=ne()),ae}},st=function(ne,ae){try{return ne.attributeStyleMap?ne.attributeStyleMap.get(ae):ne.style.getPropertyValue(ae)}catch{return""}},le=function(ne,ae,S){try{var ge=S;if(Array.isArray(S)&&(ge=A(S,!0),S[S.length-1]==="!important"))return ne.style.setProperty(ae,ge,"important"),!0;ne.attributeStyleMap?ne.attributeStyleMap.set(ae,ge):ne.style.setProperty(ae,ge)}catch{return!1}return!0},ie=function(ne,ae){try{ne.attributeStyleMap?ne.attributeStyleMap.delete(ae):ne.style.removeProperty(ae)}catch{}},Z=function(ne,ae){return ne.selectorText=ae,ne.selectorText===ae},B=Te(function(){return document.querySelector("head")});function _e(Se,ne){for(var ae=0;ae<Se.length;ae++){var S=Se[ae];if(S.attached&&S.options.index>ne.index&&S.options.insertionPoint===ne.insertionPoint)return S}return null}function de(Se,ne){for(var ae=Se.length-1;ae>=0;ae--){var S=Se[ae];if(S.attached&&S.options.insertionPoint===ne.insertionPoint)return S}return null}function Ie(Se){for(var ne=B(),ae=0;ae<ne.childNodes.length;ae++){var S=ne.childNodes[ae];if(S.nodeType===8&&S.nodeValue.trim()===Se)return S}return null}function ze(Se){var ne=Rt.registry;if(ne.length>0){var ae=_e(ne,Se);if(ae&&ae.renderer)return{parent:ae.renderer.element.parentNode,node:ae.renderer.element};if(ae=de(ne,Se),ae&&ae.renderer)return{parent:ae.renderer.element.parentNode,node:ae.renderer.element.nextSibling}}var S=Se.insertionPoint;if(S&&typeof S=="string"){var ge=Ie(S);if(ge)return{parent:ge.parentNode,node:ge.nextSibling}}return!1}function rt(Se,ne){var ae=ne.insertionPoint,S=ze(ne);if(S!==!1&&S.parent){S.parent.insertBefore(Se,S.node);return}if(ae&&typeof ae.nodeType=="number"){var ge=ae,L=ge.parentNode;L&&L.insertBefore(Se,ge.nextSibling);return}B().appendChild(Se)}var kt=Te(function(){var Se=document.querySelector('meta[property="csp-nonce"]');return Se?Se.getAttribute("content"):null}),He=function(ne,ae,S){try{"insertRule"in ne?ne.insertRule(ae,S):"appendRule"in ne&&ne.appendRule(ae)}catch{return!1}return ne.cssRules[S]},z=function(ne,ae){var S=ne.cssRules.length;return ae===void 0||ae>S?S:ae},be=function(){var ne=document.createElement("style");return ne.textContent=`
`,ne},je=function(){function Se(ae){this.getPropertyValue=st,this.setProperty=le,this.removeProperty=ie,this.setSelector=Z,this.hasInsertedRules=!1,this.cssRules=[],ae&&Rt.add(ae),this.sheet=ae;var S=this.sheet?this.sheet.options:{},ge=S.media,L=S.meta,N=S.element;this.element=N||be(),this.element.setAttribute("data-jss",""),ge&&this.element.setAttribute("media",ge),L&&this.element.setAttribute("data-meta",L);var me=kt();me&&this.element.setAttribute("nonce",me)}var ne=Se.prototype;return ne.attach=function(){if(!(this.element.parentNode||!this.sheet)){rt(this.element,this.sheet.options);var S=Boolean(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&S&&(this.hasInsertedRules=!1,this.deploy())}},ne.detach=function(){if(!!this.sheet){var S=this.element.parentNode;S&&S.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent=`
`)}},ne.deploy=function(){var S=this.sheet;if(!!S){if(S.options.link){this.insertRules(S.rules);return}this.element.textContent=`
`+S.toString()+`
`}},ne.insertRules=function(S,ge){for(var L=0;L<S.index.length;L++)this.insertRule(S.index[L],L,ge)},ne.insertRule=function(S,ge,L){if(L===void 0&&(L=this.element.sheet),S.rules){var N=S,me=L;if(S.type==="conditional"||S.type==="keyframes"){var et=z(L,ge);if(me=He(L,N.toString({children:!1}),et),me===!1)return!1;this.refCssRule(S,et,me)}return this.insertRules(N.rules,me),me}var wt=S.toString();if(!wt)return!1;var h=z(L,ge),v=He(L,wt,h);return v===!1?!1:(this.hasInsertedRules=!0,this.refCssRule(S,h,v),v)},ne.refCssRule=function(S,ge,L){S.renderable=L,S.options.parent instanceof zt&&(this.cssRules[ge]=L)},ne.deleteRule=function(S){var ge=this.element.sheet,L=this.indexOf(S);return L===-1?!1:(ge.deleteRule(L),this.cssRules.splice(L,1),!0)},ne.indexOf=function(S){return this.cssRules.indexOf(S)},ne.replaceRule=function(S,ge){var L=this.indexOf(S);return L===-1?!1:(this.element.sheet.deleteRule(L),this.cssRules.splice(L,1),this.insertRule(ge,L))},ne.getRules=function(){return this.element.sheet.cssRules},Se}(),ut=0,Et=function(){function Se(ae){this.id=ut++,this.version="10.8.2",this.plugins=new Le,this.options={id:{minify:!1},createGenerateId:nn,Renderer:b.Z?je:null,plugins:[]},this.generateId=nn({minify:!1});for(var S=0;S<at.length;S++)this.plugins.use(at[S],{queue:"internal"});this.setup(ae)}var ne=Se.prototype;return ne.setup=function(S){return S===void 0&&(S={}),S.createGenerateId&&(this.options.createGenerateId=S.createGenerateId),S.id&&(this.options.id=(0,y.Z)({},this.options.id,S.id)),(S.createGenerateId||S.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),S.insertionPoint!=null&&(this.options.insertionPoint=S.insertionPoint),"Renderer"in S&&(this.options.Renderer=S.Renderer),S.plugins&&this.use.apply(this,S.plugins),this},ne.createStyleSheet=function(S,ge){ge===void 0&&(ge={});var L=ge,N=L.index;typeof N!="number"&&(N=Rt.index===0?0:Rt.index+1);var me=new zt(S,(0,y.Z)({},ge,{jss:this,generateId:ge.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:N}));return this.plugins.onProcessSheet(me),me},ne.removeStyleSheet=function(S){return S.detach(),Rt.remove(S),this},ne.createRule=function(S,ge,L){if(ge===void 0&&(ge={}),L===void 0&&(L={}),typeof S=="object")return this.createRule(void 0,S,ge);var N=(0,y.Z)({},L,{name:S,jss:this,Renderer:this.options.Renderer});N.generateId||(N.generateId=this.generateId),N.classes||(N.classes={}),N.keyframes||(N.keyframes={});var me=re(S,ge,N);return me&&this.plugins.onProcessRule(me),me},ne.use=function(){for(var S=this,ge=arguments.length,L=new Array(ge),N=0;N<ge;N++)L[N]=arguments[N];return L.forEach(function(me){S.plugins.use(me)}),this},Se}(),Mt=function(ne){return new Et(ne)},rn=null,ln=typeof CSS=="object"&&CSS!=null&&"number"in CSS;function Rn(Se){var ne=null;for(var ae in Se){var S=Se[ae],ge=typeof S;if(ge==="function")ne||(ne={}),ne[ae]=S;else if(ge==="object"&&S!==null&&!Array.isArray(S)){var L=Rn(S);L&&(ne||(ne={}),ne[ae]=L)}}return ne}/**
 * A better abstraction over CSS.
 *
 * @copyright Oleg Isonen (Slobodskoi) / Isonen 2014-present
 * @website https://github.com/cssinjs/jss
 * @license MIT
 */var Mn=Mt(),Ke=null,Je=e(50236),Qe=e(19219),oe=e(49558),fe=e(54073),We=e.n(fe);const Be="techdocs.addons.addon.v1",Ze="techdocs.addons.wrapper.v1",gt=()=>null;(0,m.R5)(gt,Ze,!0);const It=Se=>`${Be}.${Se.toLocaleLowerCase("en-US")}`;function jt(Se){const{name:ne,component:ae}=Se;return(0,m.YO)({name:ne,component:{sync:S=>n.createElement(ae,{...S})},data:{[Be]:Se,[It(ne)]:!0}})}const Zt=(Se,ne)=>Se.selectByComponentData({key:ne}).getElements()[0],Ot=Se=>Se.selectByComponentData({key:Ze}).selectByComponentData({key:Be}),Vt=Se=>Se.selectByComponentData({key:Ze}).findComponentData({key:Be}),mn=()=>{const Se=(0,i.pC)(),ne=(0,m.vJ)(Se,Ot),ae=(0,m.vJ)(Se,Vt),S=(0,n.useCallback)(N=>{var me;if(!ne||!N)return null;const et=It(N.name);return(me=Zt(ne,et))!=null?me:null},[ne]),ge=(0,n.useCallback)(N=>{const me=ae.find(et=>et.name===N);return me?S(me):null},[ae,S]),L=(0,n.useCallback)(N=>{const me=ae.filter(et=>et.location===N);return me.length?me.map(S):null},[ae,S]);return{renderComponentByName:ge,renderComponentsByLocation:L}},bn=(0,m.T0)({id:"plugin.techdocs.service"}),hn=(0,m.T0)({id:"plugin.techdocs.storageservice"});function wn(Se,ne){return ne.getOptionalBoolean("techdocs.legacyUseCaseSensitiveTripletPaths")||(Se.kind=Se.kind.toLocaleLowerCase(),Se.name=Se.name.toLocaleLowerCase(),Se.namespace=Se.namespace.toLocaleLowerCase()),Se}const gn=(Se,ne)=>(0,a.eE)(Se)===(0,a.eE)(ne),Tn={title:"",subtitle:"",setTitle:()=>{},setSubtitle:()=>{},setShadowRoot:()=>{},metadata:{loading:!0},entityMetadata:{loading:!0},entityRef:{kind:"",name:"",namespace:""}},kn=(0,l.CT)("techdocs-reader-page-context"),$n=(0,n.memo)(({entityRef:Se,children:ne})=>{const ae=(0,m.h_)(bn),S=(0,m.h_)(m.Ds),ge=(0,d.default)(async()=>ae.getTechDocsMetadata(Se),[Se]),L=(0,d.default)(async()=>ae.getEntityMetadata(Se),[Se]),[N,me]=(0,n.useState)(Tn.title),[et,wt]=(0,n.useState)(Tn.subtitle),[h,v]=(0,n.useState)(Tn.shadowRoot),k={metadata:ge,entityRef:wn(Se,S),entityMetadata:L,shadowRoot:h,setShadowRoot:v,title:N,setTitle:me,subtitle:et,setSubtitle:wt},te=(0,l.EI)({1:k});return n.createElement(m.fC,{attributes:{entityRef:(0,a.eE)(Se)}},n.createElement(kn.Provider,{value:te},ne instanceof Function?ne(k):ne))},(Se,ne)=>gn(Se.entityRef,ne.entityRef)),Cn=()=>{const Se=(0,n.useContext)(kn);if(Se===void 0)return Tn;const ne=Se.atVersion(1);if(ne===void 0)throw new Error("No context found for version 1.");return ne},zn=Object.freeze({Header:"Header",Subheader:"Subheader",Settings:"Settings",PrimarySidebar:"PrimarySidebar",SecondarySidebar:"SecondarySidebar",Content:"Content"}),Sn="TECH_DOCS_SHADOW_DOM_STYLE_LOAD",Zn=Se=>{(0,n.useEffect)(()=>{var ne;if(!Se)return()=>{};const ae=Se.querySelectorAll('head > link[rel="stylesheet"]');let S=(ne=ae==null?void 0:ae.length)!=null?ne:0;const ge=new CustomEvent(Sn);if(!S)return Se.dispatchEvent(ge),()=>{};const L=()=>{--S===0&&Se.dispatchEvent(ge)};return ae==null||ae.forEach(N=>{N.addEventListener("load",L)}),()=>{ae==null||ae.forEach(N=>{N.removeEventListener("load",L)})}},[Se])},Ln=Se=>{const[ne,ae]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{if(!Se)return()=>{};ae(!0);const S=Se.style;S.setProperty("opacity","0");const ge=()=>{ae(!1),S.setProperty("opacity","1")};return Se.addEventListener(Sn,ge),()=>{Se.removeEventListener(Sn,ge)}},[Se]),ne},jn=({element:Se,onAppend:ne,children:ae})=>{const[S,ge]=(0,n.useState)(Mt({...(0,Je.Z)(),insertionPoint:void 0}));Zn(Se);const L=Ln(Se),N=(0,n.useCallback)(me=>{if(!Se||!me)return;ge(Mt({...(0,Je.Z)(),insertionPoint:Se.querySelector("head")||void 0}));let et=me.shadowRoot;et||(et=me.attachShadow({mode:"open"})),et.replaceChildren(Se),typeof ne=="function"&&ne(et)},[Se,ne]);return n.createElement(n.Fragment,null,L&&n.createElement(oe.Ex,null),n.createElement(Qe.ZP,{jss:S,sheetsManager:new Map},n.createElement("div",{ref:N,"data-testid":"techdocs-native-shadowroot"}),ae))},Xn=()=>{const{shadowRoot:Se}=Cn();return Se},or=Se=>{const ne=Xn();return ne?Se.map(ae=>ne==null?void 0:ne.querySelectorAll(ae)).filter(ae=>ae.length).map(ae=>Array.from(ae)).flat():[]},gr=Se=>Se.toString()&&Se.rangeCount&&Se.getRangeAt(0).getBoundingClientRect().top,fr=(Se=0)=>{const ne=Xn(),[ae,S]=(0,n.useState)(null),ge=(0,n.useMemo)(()=>We()(()=>{const L=ne,N=L.getSelection?L.getSelection():document.getSelection();N&&gr(N)?S(N):S(null)},Se),[ne,S,Se]);return(0,n.useEffect)(()=>(window.document.addEventListener("selectionchange",ge),()=>window.document.removeEventListener("selectionchange",ge)),[ge]),ae}},15879:function(Nt,u,e){e.d(u,{D:function(){return p},E:function(){return Bt},T:function(){return X},a:function(){return an},b:function(){return yt},c:function(){return ft},e:function(){return fn},g:function(){return In},p:function(){return z},t:function(){return ye}});var n=e(30705),i=e(32272),m=e(76372),d=e.n(m),a=e(2784),l=e(73557),y=e(74163),b=e(64279),t=e(77446),_=e(49558),g=e(79692),F=e(49378),j=e(38402),V=e(86136),re=e(85256),w=e(27556),A=e(12420),D=e(60905),f=e(90436),x=e(61837),R=e(77277),c=e(4190),O=e(4614),T=e(41128),Ce=e(60364),we=e(15459),nt=e(80030),ot=e(72379),$t=e(41547),ct=e(41156),St=e(8560),xt=e(15223),Q=e(95544),pn=e(48348),Ct=e(94339),Ge=e(16111),C=e(24579),Fe=e(14503),ve=e(92573),M=e(99688),G=e(98069),Re=e(87685),Ne=e(49462),Me=e(35368),Xe=e.n(Me),vt=e(1854),ee=e(67097),ue=e(28316),Pe=e(82717),at=e.n(Pe),bt=e(44882),Wt=e(18671),on=e(73250),zt=e(73495),Le=e(34520),Pt=e(76635),Rt=e.n(Pt),sn=e(47603),un=e(95074),Lt=e(39981),Ht=e(2337),nn=e(11640),Te=e(28347);const st=(0,n.T0)({id:"plugin.techdocs.storageservice"}),le=(0,n.T0)({id:"plugin.techdocs.service"});class ie{constructor(pe){this.configApi=pe.configApi,this.discoveryApi=pe.discoveryApi,this.fetchApi=pe.fetchApi}async getApiOrigin(){return await this.discoveryApi.getBaseUrl("techdocs")}async getTechDocsMetadata(pe){const{kind:ke,namespace:mt,name:Dt}=pe,tn=`${await this.getApiOrigin()}/metadata/techdocs/${mt}/${ke}/${Dt}`,dn=await this.fetchApi.fetch(`${tn}`);if(!dn.ok)throw await i.VL.fromResponse(dn);return await dn.json()}async getEntityMetadata(pe){const{kind:ke,namespace:mt,name:Dt}=pe,tn=`${await this.getApiOrigin()}/metadata/entity/${mt}/${ke}/${Dt}`,dn=await this.fetchApi.fetch(`${tn}`);if(!dn.ok)throw await i.VL.fromResponse(dn);return await dn.json()}}class Z{constructor(pe){this.configApi=pe.configApi,this.discoveryApi=pe.discoveryApi,this.identityApi=pe.identityApi,this.fetchApi=pe.fetchApi}async getApiOrigin(){return await this.discoveryApi.getBaseUrl("techdocs")}async getStorageUrl(){var pe;return(pe=this.configApi.getOptionalString("techdocs.storageUrl"))!=null?pe:`${await this.discoveryApi.getBaseUrl("techdocs")}/static/docs`}async getBuilder(){return this.configApi.getString("techdocs.builder")}async getEntityDocs(pe,ke){const{kind:mt,namespace:Dt,name:Xt}=pe,dn=`${await this.getStorageUrl()}/${Dt}/${mt}/${Xt}/${ke}`,An=await this.fetchApi.fetch(`${dn.endsWith("/")?dn:`${dn}/`}index.html`);let On="";switch(An.status){case 404:throw On="Page not found. ",ke||(On+="This could be because there is no index.md file in the root of the docs directory of this repository."),new i.dR(On);case 500:throw On="Could not generate documentation or an error in the TechDocs backend. ",new Error(On)}return An.text()}async syncEntityDocs(pe,ke=()=>{}){const{kind:mt,namespace:Dt,name:Xt}=pe,dn=`${await this.getApiOrigin()}/sync/${Dt}/${mt}/${Xt}`,{token:An}=await this.identityApi.getCredentials();return new Promise((On,Fn)=>{const Un=new m.EventSourcePolyfill(dn,{withCredentials:!0,headers:An?{Authorization:`Bearer ${An}`}:{}});Un.addEventListener("log",En=>{En.data&&ke(JSON.parse(En.data))}),Un.addEventListener("finish",En=>{let ar=!1;En.data&&({updated:ar}=JSON.parse(En.data)),On(ar?"updated":"cached")}),Un.onerror=En=>{switch(Un.close(),En.status){case 404:Fn(new i.dR(En.message));return;default:Fn(new Error(En.data));return}}})}async getBaseUrl(pe,ke,mt){const{kind:Dt,namespace:Xt,name:tn}=ke,An=`${await this.getApiOrigin()}/static/docs/${Xt}/${Dt}/${tn}/${mt}`;return new URL(pe,An.endsWith("/")?An:`${An}/`).toString()}}function B({contentLoading:Y,content:pe,activeSyncState:ke}){return Y||ke==="BUILD_READY_RELOAD"||!pe&&ke==="CHECKING"?"CHECKING":!pe&&ke==="BUILDING"?"INITIAL_BUILD":pe?ke==="BUILDING"?"CONTENT_STALE_REFRESHING":ke==="BUILD_READY"?"CONTENT_STALE_READY":ke==="ERROR"?"CONTENT_STALE_ERROR":"CONTENT_FRESH":"CONTENT_NOT_FOUND"}function _e(Y,pe){const ke={...Y};switch(pe.type){case"sync":pe.state==="CHECKING"&&(ke.buildLog=[]),ke.activeSyncState=pe.state,ke.syncError=pe.syncError;break;case"contentLoading":ke.contentLoading=!0,ke.contentError=void 0;break;case"content":typeof pe.path=="string"&&(ke.path=pe.path),ke.contentLoading=!1,ke.content=pe.content,ke.contentError=pe.contentError;break;case"buildLog":ke.buildLog=ke.buildLog.concat(pe.log);break;default:throw new Error}return["BUILD_READY","BUILD_READY_RELOAD"].includes(ke.activeSyncState)&&["contentLoading","content"].includes(pe.type)&&(ke.activeSyncState="UP_TO_DATE",ke.buildLog=[]),ke}function de(Y,pe,ke,mt){var Dt,Xt;const[tn,dn]=(0,a.useReducer)(_e,{activeSyncState:"CHECKING",path:mt,contentLoading:!0,buildLog:[]}),An=(0,n.h_)(y.Dl),{retry:On}=(0,t.Z)(async()=>{dn({type:"contentLoading"});try{const En=await An.getEntityDocs({kind:Y,namespace:pe,name:ke},mt);return dn({type:"content",content:En,path:mt}),En}catch(En){dn({type:"content",contentError:En,path:mt})}},[An,Y,pe,ke,mt]),Fn=(0,a.useRef)({content:void 0,reload:()=>{}});return Fn.current={content:tn.content,reload:On},(0,b.default)(async()=>{dn({type:"sync",state:"CHECKING"});const En=setTimeout(()=>{dn({type:"sync",state:"BUILDING"})},1e3);try{switch(await An.syncEntityDocs({kind:Y,namespace:pe,name:ke},pr=>{dn({type:"buildLog",log:pr})})){case"updated":Fn.current.content?dn({type:"sync",state:"BUILD_READY"}):(Fn.current.reload(),dn({type:"sync",state:"BUILD_READY_RELOAD"}));break;case"cached":dn({type:"sync",state:"UP_TO_DATE"});break;default:dn({type:"sync",state:"ERROR",syncError:new Error("Unexpected return state")});break}}catch(ar){dn({type:"sync",state:"ERROR",syncError:ar})}finally{clearTimeout(En)}},[Y,ke,pe,An,dn,Fn]),{state:(0,a.useMemo)(()=>B({activeSyncState:tn.activeSyncState,contentLoading:tn.contentLoading,content:tn.content}),[tn.activeSyncState,tn.content,tn.contentLoading]),contentReload:On,path:tn.path,content:tn.content,contentErrorMessage:(Dt=tn.contentError)==null?void 0:Dt.toString(),syncErrorMessage:(Xt=tn.syncError)==null?void 0:Xt.toString(),buildLog:tn.buildLog}}const Ie=(0,a.createContext)({}),ze=()=>(0,a.useContext)(Ie),rt=({children:Y})=>{const{"*":pe=""}=(0,l.UO)(),{entityRef:ke}=(0,y.x1)(),{kind:mt,namespace:Dt,name:Xt}=ke,tn=de(mt,Dt,Xt,pe);return a.createElement(Ie.Provider,{value:tn},Y instanceof Function?Y(tn):Y)},kt=Y=>pe=>a.createElement(rt,null,a.createElement(Y,{...pe})),He=(0,g.Z)({flexContainer:{flexWrap:"wrap"},itemText:{width:"100%",marginBottom:"1rem"}}),z=Y=>{const{result:pe,highlight:ke,rank:mt,lineClamp:Dt=5,asListItem:Xt=!0,asLink:tn=!0,title:dn,icon:An}=Y,On=He(),Fn=(0,n.z$)(),Un=()=>{Fn.captureEvent("discover",pe.title,{attributes:{to:pe.location},value:mt})},En=({children:er})=>tn?a.createElement(_.rU,{noTrack:!0,to:pe.location,onClick:Un},er):a.createElement(a.Fragment,null,er),ar=()=>{const er=ke!=null&&ke.fields.title?a.createElement(ve.FA,{text:ke.fields.title,preTag:ke.preTag,postTag:ke.postTag}):pe.title,vr=ke!=null&&ke.fields.entityTitle?a.createElement(ve.FA,{text:ke.fields.entityTitle,preTag:ke.preTag,postTag:ke.postTag}):pe.entityTitle,J=ke!=null&&ke.fields.name?a.createElement(ve.FA,{text:ke.fields.name,preTag:ke.preTag,postTag:ke.postTag}):pe.name;return a.createElement(F.Z,{className:On.itemText,primaryTypographyProps:{variant:"h6"},primary:a.createElement(En,null,dn||a.createElement(a.Fragment,null,er," | ",vr!=null?vr:J," docs")),secondary:a.createElement("span",{style:{display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:Dt,overflow:"hidden"}},ke!=null&&ke.fields.text?a.createElement(ve.FA,{text:ke.fields.text,preTag:ke.preTag,postTag:ke.postTag}):pe.text)})},pr=({children:er})=>Xt?a.createElement(a.Fragment,null,a.createElement(j.Z,{alignItems:"flex-start"},An&&a.createElement(V.Z,null,An),a.createElement("div",{className:On.flexContainer},er)),a.createElement(re.Z,{component:"li"})):a.createElement(a.Fragment,null,er);return a.createElement(pr,null,a.createElement(ar,null))},be=(0,g.Z)(Y=>({root:{width:"100%"},bar:{padding:Y.spacing(1)}})),je=Y=>Y==null?void 0:Y.document,ut=Y=>{const{entityId:pe,entityTitle:ke,debounceTime:mt=150}=Y,[Dt,Xt]=(0,a.useState)(!1),tn=(0,l.s0)(),{setFilters:dn,result:{loading:An,value:On}}=(0,ve.Rx)(),Fn=be(),[Un,En]=(0,a.useState)([]);(0,a.useEffect)(()=>{let J=!0;if(J&&On){const ce=On.results.slice(0,10);En(ce)}return()=>{J=!1}},[An,On]);const{kind:ar,name:pr,namespace:er}=pe;(0,a.useEffect)(()=>{dn(J=>({...J,kind:ar,namespace:er,name:pr}))},[ar,er,pr,dn]);const vr=(J,ce)=>{if(je(ce)){const{location:$e}=ce.document;tn($e)}};return a.createElement(w.Z,{className:Fn.bar,variant:"outlined"},a.createElement(ve.qO,{classes:{root:Fn.root},"data-testid":"techdocs-search-bar",size:"small",open:Dt,getOptionLabel:()=>"",filterOptions:J=>J,onClose:()=>{Xt(!1)},onFocus:()=>{Xt(!0)},onChange:vr,blurOnSelect:!0,noOptionsText:"No results found",value:null,options:Un,renderOption:({document:J,highlight:ce})=>a.createElement(z,{result:J,lineClamp:3,asListItem:!1,asLink:!1,title:J.title,highlight:ce}),loading:An,inputDebounceTime:mt,inputPlaceholder:`Search ${ke||pe.name} docs`,freeSolo:!1}))},Et=Y=>{const pe={term:"",types:["techdocs"],pageCursor:"",filters:Y.entityId};return a.createElement(ve.Nd,{initialState:pe},a.createElement(ut,{...Y}))},Mt=(0,g.Z)(Y=>(0,A.Z)({paper:{width:"100%",[Y.breakpoints.up("sm")]:{width:"75%"},[Y.breakpoints.up("md")]:{width:"50%"},padding:Y.spacing(2.5)},root:{height:"100%",overflow:"hidden"},logs:{background:Y.palette.background.default}})),rn=({buildLog:Y,onClose:pe})=>{const ke=Mt(),mt=Y.length===0?"Waiting for logs...":Y.join(`
`);return a.createElement(D.Z,{container:!0,direction:"column",className:ke.root,spacing:0,wrap:"nowrap"},a.createElement(D.Z,{item:!0,container:!0,justifyContent:"space-between",alignItems:"center",spacing:0,wrap:"nowrap"},a.createElement(f.Z,{variant:"h5"},"Build Details"),a.createElement(x.Z,{key:"dismiss",title:"Close the drawer",onClick:pe,color:"inherit"},a.createElement(Re.Z,null))),a.createElement(_.nU,{text:mt,classes:{root:ke.logs}}))},ln=({buildLog:Y})=>{const pe=Mt(),[ke,mt]=(0,a.useState)(!1);return a.createElement(a.Fragment,null,a.createElement(R.Z,{color:"inherit",onClick:()=>mt(!0)},"Show Build Logs"),a.createElement(c.ZP,{classes:{paper:pe.paper},anchor:"right",open:ke,onClose:()=>mt(!1)},a.createElement(rn,{buildLog:Y,onClose:()=>mt(!1)})))},Rn=({errorMessage:Y})=>{const pe=(0,n.h_)(n.Ds).getOptionalString("techdocs.builder");let ke="";return pe!=="local"&&(ke="Note that techdocs.builder is not set to 'local' in your config, which means this Backstage app will not generate docs if they are not found. Make sure the project's docs are generated and published by some external process (e.g. CI/CD pipeline). Or change techdocs.builder to 'local' to generate docs from this Backstage instance."),a.createElement(_.mf,{status:"404",statusMessage:Y||"Documentation not found",additionalInfo:ke})},Mn=(0,g.Z)(Y=>({root:{marginBottom:Y.spacing(2)},message:{wordBreak:"break-word",overflowWrap:"anywhere"}})),Ke=()=>{let Y=null;const pe=Mn(),{state:ke,contentReload:mt,contentErrorMessage:Dt,syncErrorMessage:Xt,buildLog:tn}=ze();return ke==="INITIAL_BUILD"&&(Y=a.createElement(M.Z,{classes:{root:pe.root},variant:"outlined",severity:"info",icon:a.createElement(O.Z,{size:"24px"}),action:a.createElement(ln,{buildLog:tn})},"Documentation is accessed for the first time and is being prepared. The subsequent loads are much faster.")),ke==="CONTENT_STALE_REFRESHING"&&(Y=a.createElement(M.Z,{variant:"outlined",severity:"info",icon:a.createElement(O.Z,{size:"24px"}),action:a.createElement(ln,{buildLog:tn}),classes:{root:pe.root}},"A newer version of this documentation is being prepared and will be available shortly.")),ke==="CONTENT_STALE_READY"&&(Y=a.createElement(M.Z,{variant:"outlined",severity:"success",action:a.createElement(R.Z,{color:"inherit",onClick:()=>mt()},"Refresh"),classes:{root:pe.root}},"A newer version of this documentation is now available, please refresh to view.")),ke==="CONTENT_STALE_ERROR"&&(Y=a.createElement(M.Z,{variant:"outlined",severity:"error",action:a.createElement(ln,{buildLog:tn}),classes:{root:pe.root,message:pe.message}},"Building a newer version of this documentation failed."," ",Xt)),ke==="CONTENT_NOT_FOUND"&&(Y=a.createElement(a.Fragment,null,Xt&&a.createElement(M.Z,{variant:"outlined",severity:"error",action:a.createElement(ln,{buildLog:tn}),classes:{root:pe.root,message:pe.message}},"Building a newer version of this documentation failed."," ",Xt),a.createElement(Rn,{errorMessage:Dt}))),Y},Je=/main\.[A-Fa-f0-9]{8}\.min\.css$/,Qe=/^https:\/\/fonts\.googleapis\.com/,oe=/^https:\/\/fonts\.gstatic\.com/,fe=Y=>Y.nodeName==="LINK",We=Y=>{const pe=(Y==null?void 0:Y.getAttribute("href"))||"",ke=pe.match(Je),mt=pe.match(Qe),Dt=pe.match(oe);return ke||mt||Dt},Be=Y=>(fe(Y)&&!We(Y)&&Y.remove(),Y),Ze=Y=>Y.nodeName==="IFRAME",gt=(Y,pe)=>{const ke=Y.getAttribute("src")||"";try{const{host:mt}=new URL(ke);return pe.includes(mt)}catch{return!1}},It=Y=>pe=>(Ze(pe)&&!gt(pe,Y)&&pe.remove(),pe),jt=()=>{const Y=(0,n.h_)(n.Ds);return(0,a.useMemo)(()=>Y.getOptionalConfig("techdocs.sanitizer"),[Y])},Zt=()=>{const Y=jt();return(0,a.useCallback)(async pe=>{const ke=Y==null?void 0:Y.getOptionalStringArray("allowedIframeHosts");Xe().addHook("beforeSanitizeElements",Be);const mt=["link"];return ke&&(mt.push("iframe"),Xe().addHook("beforeSanitizeElements",It(ke))),Xe().sanitize(pe.innerHTML,{ADD_TAGS:mt,FORBID_TAGS:["style"],WHOLE_DOCUMENT:!0,RETURN_DOM:!0})},[Y])};var Ot=({theme:Y})=>`
/*==================  Variables  ==================*/
/*
  As the MkDocs output is rendered in shadow DOM, the CSS variable definitions on the root selector are not applied. Instead, they have to be applied on :host.
  As there is no way to transform the served main*.css yet (for example in the backend), we have to copy from main*.css and modify them.
*/

:host {
  /* FONT */
  --md-default-fg-color: ${Y.palette.text.primary};
  --md-default-fg-color--light: ${Y.palette.text.secondary};
  --md-default-fg-color--lighter: ${(0,T.$n)(Y.palette.text.secondary,.7)};
  --md-default-fg-color--lightest: ${(0,T.$n)(Y.palette.text.secondary,.3)};

  /* BACKGROUND */
  --md-default-bg-color:${Y.palette.background.default};
  --md-default-bg-color--light: ${Y.palette.background.paper};
  --md-default-bg-color--lighter: ${(0,T.$n)(Y.palette.background.paper,.7)};
  --md-default-bg-color--lightest: ${(0,T.$n)(Y.palette.background.paper,.3)};

  /* PRIMARY */
  --md-primary-fg-color: ${Y.palette.primary.main};
  --md-primary-fg-color--light: ${Y.palette.primary.light};
  --md-primary-fg-color--dark: ${Y.palette.primary.dark};
  --md-primary-bg-color: ${Y.palette.primary.contrastText};
  --md-primary-bg-color--light: ${(0,T.$n)(Y.palette.primary.contrastText,.7)};

  /* ACCENT */
  --md-accent-fg-color: var(--md-primary-fg-color);

  /* SHADOW */
  --md-shadow-z1: ${Y.shadows[1]};
  --md-shadow-z2: ${Y.shadows[2]};
  --md-shadow-z3: ${Y.shadows[3]};

  /* EXTENSIONS */
  --md-admonition-fg-color: var(--md-default-fg-color);
  --md-admonition-bg-color: var(--md-default-bg-color);
  /* Admonitions and others are using SVG masks to define icons. These masks are defined as CSS variables. */
  --md-admonition-icon--note: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>');
  --md-admonition-icon--abstract: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 5h16v2H4V5m0 4h16v2H4V9m0 4h16v2H4v-2m0 4h10v2H4v-2z"/></svg>');
  --md-admonition-icon--info: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 9h-2V7h2m0 10h-2v-6h2m-1-9A10 10 0 002 12a10 10 0 0010 10 10 10 0 0010-10A10 10 0 0012 2z"/></svg>');
  --md-admonition-icon--tip: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17.55 11.2c-.23-.3-.5-.56-.76-.82-.65-.6-1.4-1.03-2.03-1.66C13.3 7.26 13 4.85 13.91 3c-.91.23-1.75.75-2.45 1.32-2.54 2.08-3.54 5.75-2.34 8.9.04.1.08.2.08.33 0 .22-.15.42-.35.5-.22.1-.46.04-.64-.12a.83.83 0 01-.15-.17c-1.1-1.43-1.28-3.48-.53-5.12C5.89 10 5 12.3 5.14 14.47c.04.5.1 1 .27 1.5.14.6.4 1.2.72 1.73 1.04 1.73 2.87 2.97 4.84 3.22 2.1.27 4.35-.12 5.96-1.6 1.8-1.66 2.45-4.32 1.5-6.6l-.13-.26c-.2-.46-.47-.87-.8-1.25l.05-.01m-3.1 6.3c-.28.24-.73.5-1.08.6-1.1.4-2.2-.16-2.87-.82 1.19-.28 1.89-1.16 2.09-2.05.17-.8-.14-1.46-.27-2.23-.12-.74-.1-1.37.18-2.06.17.38.37.76.6 1.06.76 1 1.95 1.44 2.2 2.8.04.14.06.28.06.43.03.82-.32 1.72-.92 2.27h.01z"/></svg>');
  --md-admonition-icon--success: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2m-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>');
  --md-admonition-icon--question: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.07 11.25l-.9.92C13.45 12.89 13 13.5 13 15h-2v-.5c0-1.11.45-2.11 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41a2 2 0 00-2-2 2 2 0 00-2 2H8a4 4 0 014-4 4 4 0 014 4 3.2 3.2 0 01-.93 2.25M13 19h-2v-2h2M12 2A10 10 0 002 12a10 10 0 0010 10 10 10 0 0010-10c0-5.53-4.5-10-10-10z"/></svg>');
  --md-admonition-icon--warning: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 14h-2v-4h2m0 8h-2v-2h2M1 21h22L12 2 1 21z"/></svg>');
  --md-admonition-icon--failure: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2c5.53 0 10 4.47 10 10s-4.47 10-10 10S2 17.53 2 12 6.47 2 12 2m3.59 5L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41 15.59 7z"/></svg>');
  --md-admonition-icon--danger: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11.5 20l4.86-9.73H13V4l-5 9.73h3.5V20M12 2c2.75 0 5.1 1 7.05 2.95C21 6.9 22 9.25 22 12s-1 5.1-2.95 7.05C17.1 21 14.75 22 12 22s-5.1-1-7.05-2.95C3 17.1 2 14.75 2 12s1-5.1 2.95-7.05C6.9 3 9.25 2 12 2z"/></svg>');
  --md-admonition-icon--bug: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 12h-4v-2h4m0 6h-4v-2h4m6-6h-2.81a5.985 5.985 0 00-1.82-1.96L17 4.41 15.59 3l-2.17 2.17a6.002 6.002 0 00-2.83 0L8.41 3 7 4.41l1.62 1.63C7.88 6.55 7.26 7.22 6.81 8H4v2h2.09c-.05.33-.09.66-.09 1v1H4v2h2v1c0 .34.04.67.09 1H4v2h2.81c1.04 1.79 2.97 3 5.19 3s4.15-1.21 5.19-3H20v-2h-2.09c.05-.33.09-.66.09-1v-1h2v-2h-2v-1c0-.34-.04-.67-.09-1H20V8z"/></svg>');
  --md-admonition-icon--example: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 13v-2h14v2H7m0 6v-2h14v2H7M7 7V5h14v2H7M3 8V5H2V4h2v4H3m-1 9v-1h3v4H2v-1h2v-.5H3v-1h1V17H2m2.25-7a.75.75 0 01.75.75c0 .2-.08.39-.21.52L3.12 13H5v1H2v-.92L4 11H2v-1h2.25z"/></svg>');
  --md-admonition-icon--quote: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 17h3l2-4V7h-6v6h3M6 17h3l2-4V7H5v6h3l-2 4z"/></svg>');
  --md-footnotes-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 7v4H5.83l3.58-3.59L8 6l-6 6 6 6 1.41-1.42L5.83 13H21V7h-2z"/></svg>');
  --md-details-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>');
  --md-tasklist-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"/></svg>');
  --md-tasklist-icon--checked: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>');
  --md-nav-icon--prev: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>');
  --md-nav-icon--next: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>');
  --md-toc-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg>');
  --md-clipboard-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 21H8V7h11m0-2H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2m-3-4H4a2 2 0 0 0-2 2v14h2V3h12V1z"/></svg>');
  --md-search-result-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h7c-.41-.25-.8-.56-1.14-.9-.33-.33-.61-.7-.86-1.1H6V4h7v5h5v1.18c.71.16 1.39.43 2 .82V8l-6-6m6.31 16.9c1.33-2.11.69-4.9-1.4-6.22-2.11-1.33-4.91-.68-6.22 1.4-1.34 2.11-.69 4.89 1.4 6.22 1.46.93 3.32.93 4.79.02L22 23.39 23.39 22l-3.08-3.1m-3.81.1a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5z"/></svg>');
  --md-source-forks-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M5 3.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm0 2.122a2.25 2.25 0 1 0-1.5 0v.878A2.25 2.25 0 0 0 5.75 8.5h1.5v2.128a2.251 2.251 0 1 0 1.5 0V8.5h1.5a2.25 2.25 0 0 0 2.25-2.25v-.878a2.25 2.25 0 1 0-1.5 0v.878a.75.75 0 0 1-.75.75h-4.5A.75.75 0 0 1 5 6.25v-.878zm3.75 7.378a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm3-8.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5z"/></svg>');
  --md-source-repositories-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M2 2.5A2.5 2.5 0 0 1 4.5 0h8.75a.75.75 0 0 1 .75.75v12.5a.75.75 0 0 1-.75.75h-2.5a.75.75 0 1 1 0-1.5h1.75v-2h-8a1 1 0 0 0-.714 1.7.75.75 0 0 1-1.072 1.05A2.495 2.495 0 0 1 2 11.5v-9zm10.5-1V9h-8c-.356 0-.694.074-1 .208V2.5a1 1 0 0 1 1-1h8zM5 12.25v3.25a.25.25 0 0 0 .4.2l1.45-1.087a.25.25 0 0 1 .3 0L8.6 15.7a.25.25 0 0 0 .4-.2v-3.25a.25.25 0 0 0-.25-.25h-3.5a.25.25 0 0 0-.25.25z"/></svg>');
  --md-source-stars-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8 .25a.75.75 0 0 1 .673.418l1.882 3.815 4.21.612a.75.75 0 0 1 .416 1.279l-3.046 2.97.719 4.192a.75.75 0 0 1-1.088.791L8 12.347l-3.766 1.98a.75.75 0 0 1-1.088-.79l.72-4.194L.818 6.374a.75.75 0 0 1 .416-1.28l4.21-.611L7.327.668A.75.75 0 0 1 8 .25zm0 2.445L6.615 5.5a.75.75 0 0 1-.564.41l-3.097.45 2.24 2.184a.75.75 0 0 1 .216.664l-.528 3.084 2.769-1.456a.75.75 0 0 1 .698 0l2.77 1.456-.53-3.084a.75.75 0 0 1 .216-.664l2.24-2.183-3.096-.45a.75.75 0 0 1-.564-.41L8 2.694v.001z"/></svg>');
  --md-source-version-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M2.5 7.775V2.75a.25.25 0 0 1 .25-.25h5.025a.25.25 0 0 1 .177.073l6.25 6.25a.25.25 0 0 1 0 .354l-5.025 5.025a.25.25 0 0 1-.354 0l-6.25-6.25a.25.25 0 0 1-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 0 1 0 2.474l-5.026 5.026a1.75 1.75 0 0 1-2.474 0l-6.25-6.25A1.75 1.75 0 0 1 1 7.775zM6 5a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"/></svg>');
  --md-version-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="m310.6 246.6-127.1 128c-7.1 6.3-15.3 9.4-23.5 9.4s-16.38-3.125-22.63-9.375l-127.1-128C.224 237.5-2.516 223.7 2.438 211.8S19.07 192 32 192h255.1c12.94 0 24.62 7.781 29.58 19.75s3.12 25.75-6.08 34.85z"/></svg>');
}

:host > * {
  /* CODE */
  --md-code-fg-color: ${Y.palette.text.primary};
  --md-code-bg-color: ${Y.palette.background.paper};
  --md-code-hl-color: ${(0,T.Fq)(Y.palette.warning.main,.5)};
  --md-code-hl-keyword-color: ${Y.palette.type==="dark"?Y.palette.primary.light:Y.palette.primary.dark};
  --md-code-hl-function-color: ${Y.palette.type==="dark"?Y.palette.secondary.light:Y.palette.secondary.dark};
  --md-code-hl-string-color: ${Y.palette.type==="dark"?Y.palette.success.light:Y.palette.success.dark};
  --md-code-hl-number-color: ${Y.palette.type==="dark"?Y.palette.error.light:Y.palette.error.dark};
  --md-code-hl-constant-color: var(--md-code-hl-function-color);
  --md-code-hl-special-color: var(--md-code-hl-function-color);
  --md-code-hl-name-color: var(--md-code-fg-color);
  --md-code-hl-comment-color: var(--md-default-fg-color--light);
  --md-code-hl-generic-color: var(--md-default-fg-color--light);
  --md-code-hl-variable-color: var(--md-default-fg-color--light);
  --md-code-hl-operator-color: var(--md-default-fg-color--light);
  --md-code-hl-punctuation-color: var(--md-default-fg-color--light);

  /* TYPESET */
  --md-typeset-font-size: 1rem;
  --md-typeset-color: var(--md-default-fg-color);
  --md-typeset-a-color: var(--md-accent-fg-color);
  --md-typeset-table-color: ${Y.palette.text.primary};
  --md-typeset-del-color: ${Y.palette.type==="dark"?(0,T.Fq)(Y.palette.error.dark,.5):(0,T.Fq)(Y.palette.error.light,.5)};
  --md-typeset-ins-color: ${Y.palette.type==="dark"?(0,T.Fq)(Y.palette.success.dark,.5):(0,T.Fq)(Y.palette.success.light,.5)};
  --md-typeset-mark-color: ${Y.palette.type==="dark"?(0,T.Fq)(Y.palette.warning.dark,.5):(0,T.Fq)(Y.palette.warning.light,.5)};
}

@media screen and (max-width: 76.1875em) {
  :host > * {
    /* TYPESET */
    --md-typeset-font-size: .9rem;
  }
}

@media screen and (max-width: 600px) {
  :host > * {
    /* TYPESET */
    --md-typeset-font-size: .7rem;
  }
}
`,Vt=({theme:Y})=>`
/*==================  Reset  ==================*/

body {
  --md-text-color: var(--md-default-fg-color);
  --md-text-link-color: var(--md-accent-fg-color);
  --md-text-font-family: ${Y.typography.fontFamily};
  font-family: var(--md-text-font-family);
  background-color: unset;
}
`;const mn="224px";var bn=({theme:Y,sidebar:pe})=>`
/*==================  Layout  ==================*/

.md-grid {
  max-width: 100%;
  margin: 0;
}

.md-nav {
  font-size: calc(var(--md-typeset-font-size) * 0.9);
}
.md-nav__link {
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.md-nav__icon {
  height: 20px !important;
  width: 20px !important;
  margin-left:${Y.spacing(1)}px;
}
.md-nav__icon svg {
  margin: 0;
  width: 20px !important;
  height: 20px !important;
}
.md-nav__icon:after {
  width: 20px !important;
  height: 20px !important;
}

.md-nav__item--active > .md-nav__link, a.md-nav__link--active {
  text-decoration: underline;
  color: var(--md-typeset-a-color);
}

.md-main__inner {
  margin-top: 0;
}

.md-sidebar {
  bottom: 75px;
  position: fixed;
  width: 16rem;
  overflow-y: auto;
  overflow-x: hidden;
  scrollbar-color: rgb(193, 193, 193) #eee;
  scrollbar-width: thin;
}
.md-sidebar .md-sidebar__scrollwrap {
  width: calc(12.1rem);
}
.md-sidebar--secondary {
  right: ${Y.spacing(3)}px;
}
.md-sidebar::-webkit-scrollbar {
  width: 5px;
}
.md-sidebar::-webkit-scrollbar-button {
  width: 5px;
  height: 5px;
}
.md-sidebar::-webkit-scrollbar-track {
  background: #eee;
  border: 1 px solid rgb(250, 250, 250);
  box-shadow: 0px 0px 3px #dfdfdf inset;
  border-radius: 3px;
}
.md-sidebar::-webkit-scrollbar-thumb {
  width: 5px;
  background: rgb(193, 193, 193);
  border: transparent;
  border-radius: 3px;
}
.md-sidebar::-webkit-scrollbar-thumb:hover {
  background: rgb(125, 125, 125);
}

.md-content {
  max-width: calc(100% - 16rem * 2);
  margin-left: 16rem;
  margin-bottom: 50px;
}

.md-footer {
  position: fixed;
  bottom: 0px;
}
.md-footer__title {
  background-color: unset;
}
.md-footer-nav__link {
  width: 16rem;
}

.md-dialog {
  background-color: unset;
}

@media screen and (min-width: 76.25em) {
  .md-sidebar {
    height: auto;
  }
}

@media screen and (max-width: 76.1875em) {
  .md-nav {
    transition: none !important;
    background-color: var(--md-default-bg-color)
  }
  .md-nav--primary .md-nav__title {
    cursor: auto;
    color: var(--md-default-fg-color);
    font-weight: 700;
    white-space: normal;
    line-height: 1rem;
    height: auto;
    display: flex;
    flex-flow: column;
    row-gap: 1.6rem;
    padding: 1.2rem .8rem .8rem;
    background-color: var(--md-default-bg-color);
  }
  .md-nav--primary .md-nav__title~.md-nav__list {
    box-shadow: none;
  }
  .md-nav--primary .md-nav__title ~ .md-nav__list > :first-child {
    border-top: none;
  }
  .md-nav--primary .md-nav__title .md-nav__button {
    display: none;
  }
  .md-nav--primary .md-nav__title .md-nav__icon {
    color: var(--md-default-fg-color);
    position: static;
    height: auto;
    margin: 0 0 0 -0.2rem;
  }
  .md-nav--primary > .md-nav__title [for="none"] {
    padding-top: 0;
  }
  .md-nav--primary .md-nav__item {
    border-top: none;
  }
  .md-nav--primary :is(.md-nav__title,.md-nav__item) {
    font-size : var(--md-typeset-font-size);
  }
  .md-nav .md-source {
    display: none;
  }

  .md-sidebar {
    height: 100%;
  }
  .md-sidebar--primary {
    width: 12.1rem !important;
    z-index: 200;
    left: ${pe.isPinned?`calc(-12.1rem + ${mn})`:"calc(-12.1rem + 72px)"} !important;
  }
  .md-sidebar--secondary:not([hidden]) {
    display: none;
  }

  .md-content {
    max-width: 100%;
    margin-left: 0;
  }

  .md-header__button {
    margin: 0.4rem 0;
    margin-left: 0.4rem;
    padding: 0;
  }

  .md-overlay {
    left: 0;
  }

  .md-footer {
    position: static;
    padding-left: 0;
  }
  .md-footer-nav__link {
    /* footer links begin to overlap at small sizes without setting width */
    width: 50%;
  }
}

@media screen and (max-width: 600px) {
  .md-sidebar--primary {
    left: -12.1rem !important;
    width: 12.1rem;
  }
}
`;const hn=["h1","h2","h3","h4","h5","h6"];var wn=({theme:Y})=>`
/*==================  Typeset  ==================*/

.md-typeset {
  font-size: var(--md-typeset-font-size);
}

${hn.reduce((pe,ke)=>{var mt;const Dt=(mt=Y.typography.htmlFontSize)!=null?mt:16,Xt=Y.typography[ke],{lineHeight:tn,fontFamily:dn,fontWeight:An,fontSize:On}=Xt,Fn=Un=>{let En=1;return typeof Un=="number"&&(En=Un/Dt*.6),typeof Un=="string"&&(En=Un.replace("rem","")),`calc(${En} * var(--md-typeset-font-size))`};return pe.concat(`
    .md-typeset ${ke} {
      color: var(--md-default-fg-color);
      line-height: ${tn};
      font-family: ${dn};
      font-weight: ${An};
      font-size: ${Fn(On)};
    }
  `)},"")}

.md-typeset .md-content__button {
  color: var(--md-default-fg-color);
}

.md-typeset hr {
  border-bottom: 0.05rem dotted ${Y.palette.divider};
}

.md-typeset details {
  font-size: var(--md-typeset-font-size) !important;
}
.md-typeset details summary {
  padding-left: 2.5rem !important;
}
.md-typeset details summary:before,
.md-typeset details summary:after {
  top: 50% !important;
  width: 20px !important;
  height: 20px !important;
  transform: rotate(0deg) translateY(-50%) !important;
}
.md-typeset details[open] > summary:after {
  transform: rotate(90deg) translateX(-50%) !important;
}

.md-typeset blockquote {
  color: var(--md-default-fg-color--light);
  border-left: 0.2rem solid var(--md-default-fg-color--light);
}

.md-typeset table:not([class]) {
  font-size: var(--md-typeset-font-size);
  border: 1px solid var(--md-default-fg-color);
  border-bottom: none;
  border-collapse: collapse;
}
.md-typeset table:not([class]) th {
  font-weight: bold;
}
.md-typeset table:not([class]) td, .md-typeset table:not([class]) th {
  border-bottom: 1px solid var(--md-default-fg-color);
}

.md-typeset pre > code::-webkit-scrollbar-thumb {
  background-color: hsla(0, 0%, 0%, 0.32);
}
.md-typeset pre > code::-webkit-scrollbar-thumb:hover {
  background-color: hsla(0, 0%, 0%, 0.87);
}
`,gn=()=>`
/*==================  Animations  ==================*/
/*
  Disable CSS animations on link colors as they lead to issues in dark mode.
  The dark mode color theme is applied later and theirfore there is always an animation from light to dark mode when navigation between pages.
*/
.md-dialog, .md-nav__link, .md-footer__link, .md-typeset a, .md-typeset a::before, .md-typeset .headerlink {
  transition: none;
}
`,Tn=({theme:Y})=>`
/*==================  Extensions  ==================*/

/* HIGHLIGHT */
.highlight .md-clipboard:after {
  content: unset;
}

.highlight .nx {
  color: ${Y.palette.type==="dark"?"#ff53a3":"#ec407a"};
}

/* CODE HILITE */
.codehilite .gd {
  background-color: ${Y.palette.type==="dark"?"rgba(248,81,73,0.65)":"#fdd"};
}

.codehilite .gi {
  background-color: ${Y.palette.type==="dark"?"rgba(46,160,67,0.65)":"#dfd"};
}

/* TABBED */
.tabbed-set>input:nth-child(1):checked~.tabbed-labels>:nth-child(1),
.tabbed-set>input:nth-child(2):checked~.tabbed-labels>:nth-child(2),
.tabbed-set>input:nth-child(3):checked~.tabbed-labels>:nth-child(3),
.tabbed-set>input:nth-child(4):checked~.tabbed-labels>:nth-child(4),
.tabbed-set>input:nth-child(5):checked~.tabbed-labels>:nth-child(5),
.tabbed-set>input:nth-child(6):checked~.tabbed-labels>:nth-child(6),
.tabbed-set>input:nth-child(7):checked~.tabbed-labels>:nth-child(7),
.tabbed-set>input:nth-child(8):checked~.tabbed-labels>:nth-child(8),
.tabbed-set>input:nth-child(9):checked~.tabbed-labels>:nth-child(9),
.tabbed-set>input:nth-child(10):checked~.tabbed-labels>:nth-child(10),
.tabbed-set>input:nth-child(11):checked~.tabbed-labels>:nth-child(11),
.tabbed-set>input:nth-child(12):checked~.tabbed-labels>:nth-child(12),
.tabbed-set>input:nth-child(13):checked~.tabbed-labels>:nth-child(13),
.tabbed-set>input:nth-child(14):checked~.tabbed-labels>:nth-child(14),
.tabbed-set>input:nth-child(15):checked~.tabbed-labels>:nth-child(15),
.tabbed-set>input:nth-child(16):checked~.tabbed-labels>:nth-child(16),
.tabbed-set>input:nth-child(17):checked~.tabbed-labels>:nth-child(17),
.tabbed-set>input:nth-child(18):checked~.tabbed-labels>:nth-child(18),
.tabbed-set>input:nth-child(19):checked~.tabbed-labels>:nth-child(19),
.tabbed-set>input:nth-child(20):checked~.tabbed-labels>:nth-child(20) {
  color: var(--md-accent-fg-color);
  border-color: var(--md-accent-fg-color);
}

/* TASK-LIST */
.task-list-control .task-list-indicator::before {
  background-color: ${Y.palette.action.disabledBackground};
}
.task-list-control [type="checkbox"]:checked + .task-list-indicator:before {
 background-color: ${Y.palette.success.main};
}

/* ADMONITION */
.admonition {
  font-size: var(--md-typeset-font-size) !important;
}
.admonition .admonition-title {
  padding-left: 2.5rem !important;
}

.admonition .admonition-title:before {
  top: 50% !important;
  width: 20px !important;
  height: 20px !important;
  transform: translateY(-50%) !important;
}
`;const kn=[Ot,Vt,bn,wn,gn,Tn],$n=()=>(0,_.Pf)(),Cn=()=>{const Y=$n(),pe=(0,Ce.Z)();return(0,a.useMemo)(()=>{const ke={theme:pe,sidebar:Y};return kn.reduce((mt,Dt)=>mt+Dt(ke),"")},[pe,Y])},zn=()=>{const Y=Cn();return(0,a.useCallback)(pe=>(pe.getElementsByTagName("head")[0].insertAdjacentHTML("beforeend",`<style>${Y}</style>`),pe),[Y])},Sn=(Y,pe,ke)=>{const mt=Y==="src"&&pe.endsWith(".svg"),Dt=!pe.match(/^([a-z]*:)?\/\//i),Xt=pe.startsWith(ke);return mt&&(Dt||Xt)},Zn=({techdocsStorageApi:Y,entityId:pe,path:ke})=>async mt=>{const Dt=await Y.getApiOrigin(),Xt=async(tn,dn)=>{for(const An of tn)if(An.hasAttribute(dn)){const On=An.getAttribute(dn);if(!On)return;const Fn=await Y.getBaseUrl(On,pe,ke);if(Sn(dn,On,Dt))try{const En=await(await fetch(Fn,{credentials:"include"})).text();An.setAttribute(dn,`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(En)))}`)}catch{An.setAttribute("alt",`Error: ${On}`)}else An.setAttribute(dn,Fn)}};return await Promise.all([Xt(mt.querySelectorAll("img"),"src"),Xt(mt.querySelectorAll("script"),"src"),Xt(mt.querySelectorAll("source"),"src"),Xt(mt.querySelectorAll("link"),"href"),Xt(mt.querySelectorAll("a[download]"),"href")]),mt},Ln=Y=>pe=>{var ke;const mt=pe.querySelector('[title="Edit this page"]');if(!mt||!mt.href)return pe;const Dt=new URL(mt.href),Xt=Y.byUrl(Dt);if((Xt==null?void 0:Xt.type)!=="github"&&(Xt==null?void 0:Xt.type)!=="gitlab")return pe;const tn=((ke=pe.querySelector("article>h1"))==null?void 0:ke.childNodes[0].textContent)||"",dn=encodeURIComponent(`Documentation Feedback: ${tn}`),An=encodeURIComponent(`Page source:
${mt.href}

Feedback:`),On=(Xt==null?void 0:Xt.type)==="github"?(0,vt.BT)(Dt.href,"blob"):Dt.href,Fn=at()(On),Un=`/${Fn.organization}/${Fn.name}`,En=mt.cloneNode();switch(Xt==null?void 0:Xt.type){case"gitlab":En.href=`${Dt.origin}${Un}/issues/new?issue[title]=${dn}&issue[description]=${An}`;break;case"github":En.href=`${Dt.origin}${Un}/issues/new?title=${dn}&body=${An}`;break;default:return pe}return ue.render(a.createElement(ee.Z),En),En.style.paddingLeft="5px",En.title="Leave feedback for this page",En.id="git-feedback-link",mt==null||mt.insertAdjacentElement("beforebegin",En),pe},jn=()=>Y=>{const pe=Y.querySelector('.md-header label[for="__drawer"]'),ke=Y.querySelector("article");if(!pe||!ke)return Y;const mt=pe.cloneNode();return ue.render(a.createElement(bt.Z),mt),mt.id="toggle-sidebar",mt.title="Toggle Sidebar",mt.classList.add("md-content__button"),mt.style.setProperty("padding","0 0 0 5px"),mt.style.setProperty("margin","0.4rem 0 0.4rem 0.4rem"),ke==null||ke.prepend(mt),Y},Xn=()=>Y=>(((ke,mt)=>{Array.from(ke).filter(Dt=>Dt.hasAttribute(mt)).forEach(Dt=>{const Xt=Dt.getAttribute(mt);if(Xt){Xt.match(/^https?:\/\//i)&&Dt.setAttribute("target","_blank");try{const tn=or(window.location.href);Dt.setAttribute(mt,new URL(Xt,tn).toString())}catch{Dt.replaceWith(Dt.textContent||Xt)}}})})(Array.from(Y.getElementsByTagName("a")),"href"),Y);function or(Y){const pe=new URL(Y);return!pe.pathname.endsWith("/")&&!pe.pathname.endsWith(".html")&&(pe.pathname+="/"),pe.toString()}const gr=({baseUrl:Y,onClick:pe})=>ke=>(Array.from(ke.getElementsByTagName("a")).forEach(mt=>{mt.addEventListener("click",Dt=>{const tn=mt.getAttribute("href");!tn||tn.startsWith(Y)&&!mt.hasAttribute("download")&&(Dt.preventDefault(),pe(Dt,tn))})}),ke),fr=(0,we.Z)(Y=>({tooltip:{fontSize:"inherit",color:Y.palette.text.primary,margin:0,padding:Y.spacing(.5),backgroundColor:"transparent",boxShadow:"none"}}))(nt.ZP),Se=()=>a.createElement(ot.Z,null,a.createElement("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"})),ne=({text:Y})=>{const[pe,ke]=(0,a.useState)(!1),mt=(0,a.useCallback)(()=>{window.navigator.clipboard.writeText(Y),ke(!0)},[Y]),Dt=(0,a.useCallback)(()=>{ke(!1)},[ke]);return a.createElement(fr,{title:"Copied to clipboard",placement:"left",open:pe,onClose:Dt,leaveDelay:1e3},a.createElement(R.Z,{className:"md-clipboard md-icon",onClick:mt},a.createElement(Se,null)))},ae=Y=>pe=>{var ke;const mt=pe.querySelectorAll("pre > code");for(const Dt of mt){const Xt=Dt.textContent||"",tn=document.createElement("div");(ke=Dt==null?void 0:Dt.parentElement)==null||ke.prepend(tn),ue.render(a.createElement($t.Z,{theme:Y},a.createElement(ne,{text:Xt})),tn)}return pe},S=()=>Y=>{var pe;return(pe=Y.querySelector(".md-header"))==null||pe.remove(),Y},ge=()=>Y=>{var pe,ke;return(pe=Y.querySelector(".md-footer .md-copyright"))==null||pe.remove(),(ke=Y.querySelector(".md-footer-copyright"))==null||ke.remove(),Y},L=({onLoading:Y,onLoaded:pe})=>ke=>(Y(),ke.addEventListener(y.Ox,function mt(){pe(),ke.removeEventListener(y.Ox,mt)}),ke),N=()=>Y=>(setTimeout(()=>{var pe;if(window.location.hash){const ke=window.location.hash.slice(1);(pe=Y==null?void 0:Y.querySelector(`[id="${ke}"]`))==null||pe.scrollIntoView()}},200),Y),me=()=>Y=>(setTimeout(()=>{const pe=Y==null?void 0:Y.querySelectorAll("li.md-nav__item--active");pe.length!==0&&(pe.forEach(mt=>{const Dt=mt==null?void 0:mt.querySelector("input");Dt!=null&&Dt.checked||Dt==null||Dt.click()}),pe[pe.length-1].scrollIntoView())},200),Y),et=async(Y,pe)=>{let ke;if(typeof Y=="string")ke=new DOMParser().parseFromString(Y,"text/html").documentElement;else if(Y instanceof Element)ke=Y;else throw new Error("dom is not a recognized type");for(const mt of pe)ke=await mt(ke);return ke},wt="screen and (max-width: 76.1875em)",h=Y=>{const pe=(0,l.s0)(),ke=(0,Ce.Z)(),mt=(0,ct.Z)(wt),Dt=Zt(),Xt=zn(),tn=(0,n.z$)(),dn=(0,n.h_)(y.Dl),An=(0,n.h_)(Ne.q3),{state:On,path:Fn,content:Un}=ze(),[En,ar]=(0,a.useState)(null),pr=(0,y.ux)(En),er=(0,a.useCallback)(()=>{if(!En)return;En.querySelectorAll(".md-sidebar").forEach(Oe=>{var qe,ht,lt;if(mt)Oe.style.top="0px";else{const At=document==null?void 0:document.querySelector(".techdocs-reader-page"),Kt=(qe=At==null?void 0:At.getBoundingClientRect().top)!=null?qe:0;let Jt=(ht=En.getBoundingClientRect().top)!=null?ht:0;const Qt=En.querySelector(".md-container > .md-tabs"),qt=(lt=Qt==null?void 0:Qt.getBoundingClientRect().height)!=null?lt:0;Jt<Kt&&(Jt=Kt),Oe.style.top=`${Math.max(Jt,0)+qt}px`}Oe.style.setProperty("opacity","1")})},[En,mt]);(0,a.useEffect)(()=>(window.addEventListener("resize",er),window.addEventListener("scroll",er,!0),()=>{window.removeEventListener("resize",er),window.removeEventListener("scroll",er,!0)}),[En,er]);const vr=(0,a.useCallback)(()=>{if(!En)return;const $e=En.querySelector(".md-footer");$e&&($e.style.width=`${En.getBoundingClientRect().width}px`)},[En]);(0,a.useEffect)(()=>(window.addEventListener("resize",vr),()=>{window.removeEventListener("resize",vr)}),[En,vr]),(0,a.useEffect)(()=>{pr||(vr(),er())},[On,pr,vr,er]);const J=(0,a.useCallback)(($e,Oe)=>et($e,[Dt,Zn({techdocsStorageApi:dn,entityId:Y,path:Oe}),Xn(),jn(),S(),ge(),Ln(An),Xt]),[Y,An,dn,Dt,Xt]),ce=(0,a.useCallback)(async $e=>et($e,[N(),me(),ae(ke),gr({baseUrl:window.location.origin,onClick:(Oe,qe)=>{var ht,lt;const At=Oe.ctrlKey||Oe.metaKey,Kt=new URL(qe),Jt=`${Kt.pathname}${Kt.search}${Kt.hash}`,Qt=((ht=Oe.target)==null?void 0:ht.innerText)||qe,qt=qe.replace(window.location.origin,"");tn.captureEvent("click",Qt,{attributes:{to:qt}}),Kt.hash?At?window.open(Jt,"_blank"):(pe(Jt),(lt=$e==null?void 0:$e.querySelector(`[id="${Kt.hash.slice(1)}"]`))==null||lt.scrollIntoView()):At?window.open(Jt,"_blank"):pe(Jt)}}),L({onLoading:()=>{},onLoaded:()=>{var Oe;(Oe=$e.querySelector(".md-nav__title"))==null||Oe.removeAttribute("for")}}),L({onLoading:()=>{Array.from($e.querySelectorAll(".md-sidebar")).forEach(qe=>{qe.style.setProperty("opacity","0")})},onLoaded:()=>{}})]),[ke,pe,tn]);return(0,a.useEffect)(()=>{if(!Un)return()=>{};let $e=!0;return J(Un,Fn).then(async Oe=>{if(!(Oe!=null&&Oe.innerHTML)||!$e)return;window.scroll({top:0});const qe=await ce(Oe);ar(qe)}),()=>{$e=!1}},[Un,Fn,J,ce]),En},v=()=>{const Y=(0,y.$L)(),{shadowRoot:pe}=(0,y.x1)(),ke=pe==null?void 0:pe.querySelector('[data-md-component="content"]'),mt=pe==null?void 0:pe.querySelector('div[data-md-component="sidebar"][data-md-type="navigation"], div[data-md-component="navigation"]');let Dt=mt==null?void 0:mt.querySelector('[data-techdocs-addons-location="primary sidebar"]');Dt||(Dt=document.createElement("div"),Dt.setAttribute("data-techdocs-addons-location","primary sidebar"),mt==null||mt.prepend(Dt));const Xt=pe==null?void 0:pe.querySelector('div[data-md-component="sidebar"][data-md-type="toc"], div[data-md-component="toc"]');let tn=Xt==null?void 0:Xt.querySelector('[data-techdocs-addons-location="secondary sidebar"]');return tn||(tn=document.createElement("div"),tn.setAttribute("data-techdocs-addons-location","secondary sidebar"),Xt==null||Xt.prepend(tn)),a.createElement(a.Fragment,null,a.createElement(St.Z,{container:Dt},Y.renderComponentsByLocation(y.oZ.PrimarySidebar)),a.createElement(St.Z,{container:ke},Y.renderComponentsByLocation(y.oZ.Content)),a.createElement(St.Z,{container:tn},Y.renderComponentsByLocation(y.oZ.SecondarySidebar)))},k=(0,g.Z)({search:{width:"100%","@media (min-width: 76.1875em)":{width:"calc(100% - 34.4rem)",margin:"0 auto"}}}),te=kt(Y=>{var pe;const{withSearch:ke=!0,onReady:mt}=Y,Dt=k(),{entityMetadata:{value:Xt,loading:tn},entityRef:dn,setShadowRoot:An}=(0,y.x1)(),On=h(dn),Fn=(0,a.useCallback)(Un=>{An(Un),mt instanceof Function&&mt()},[An,mt]);return tn===!1&&!Xt?a.createElement(_.mf,{status:"404",statusMessage:"PAGE NOT FOUND"}):On?a.createElement(_.VY,null,a.createElement(D.Z,{container:!0},a.createElement(D.Z,{xs:12,item:!0},a.createElement(Ke,null)),ke&&a.createElement(D.Z,{className:Dt.search,xs:"auto",item:!0},a.createElement(Et,{entityId:dn,entityTitle:(pe=Xt==null?void 0:Xt.metadata)==null?void 0:pe.title})),a.createElement(D.Z,{xs:12,item:!0},a.createElement(y.VA,{element:On,onAppend:Fn},a.createElement(v,null))))):a.createElement(_.VY,null,a.createElement(D.Z,{container:!0},a.createElement(D.Z,{xs:12,item:!0},a.createElement(Ke,null))))}),Ee=null,Ye=(0,n.NT)({id:"techdocs:index-page"}),H=(0,n.NT)({id:"techdocs:reader-page",params:["namespace","kind","name"]}),W=(0,n.NT)({id:"techdocs:catalog-reader-view"}),Ae=a.createElement(G.Z,{animation:"wave",variant:"text",height:40}),De=Y=>{const{children:pe}=Y,ke=(0,y.$L)(),mt=(0,n.h_)(n.Ds),{title:Dt,setTitle:Xt,subtitle:tn,setSubtitle:dn,entityRef:An,metadata:{value:On,loading:Fn},entityMetadata:{value:Un,loading:En}}=(0,y.x1)();(0,a.useEffect)(()=>{!On||(Xt(On.site_name),dn(()=>{let{site_description:lt}=On;return(!lt||lt==="None")&&(lt=""),lt}))},[On,Xt,dn]);const ar=mt.getOptional("app.title")||"Backstage",pr=[Dt,tn,ar].filter(Boolean).join(" | "),{locationMetadata:er,spec:vr}=Un||{},J=vr==null?void 0:vr.lifecycle,ce=Un?(0,zt.hF)(Un,Le.S4):[],$e=(0,n.tg)(Ye)(),Oe=a.createElement(a.Fragment,null,a.createElement(_.i9,{label:(0,Pt.capitalize)((Un==null?void 0:Un.kind)||"entity"),value:a.createElement(zt.dx,{color:"inherit",entityRef:An,title:Un==null?void 0:Un.metadata.title,defaultKind:"Component"})}),ce.length>0&&a.createElement(_.i9,{label:"Owner",value:a.createElement(zt.rI,{color:"inherit",entityRefs:ce,defaultKind:"group"})}),J?a.createElement(_.i9,{label:"Lifecycle",value:J}):null,er&&er.type!=="dir"&&er.type!=="file"?a.createElement(_.i9,{label:"",value:a.createElement(D.Z,{container:!0,direction:"column",alignItems:"center",style:{color:"#fff"}},a.createElement(D.Z,{style:{padding:0},item:!0},a.createElement(on.Z,{style:{marginTop:"-25px"}})),a.createElement(D.Z,{style:{padding:0},item:!0},"Source")),url:er.target}):null);return!En&&Un===void 0||!Fn&&On===void 0?null:a.createElement(_.h4,{type:"Documentation",typeLink:$e,title:Dt||Ae,subtitle:tn===""?void 0:tn||Ae},a.createElement(Wt.Z,{titleTemplate:"%s"},a.createElement("title",null,pr)),Oe,pe,ke.renderComponentsByLocation(y.oZ.Header))},pt=(0,g.Z)(Y=>({root:{gridArea:"pageSubheader",flexDirection:"column",minHeight:"auto",padding:Y.spacing(3,3,0)}})),dt=Y=>{const pe=pt(),[ke,mt]=(0,a.useState)(null),Dt=(0,a.useCallback)(Un=>{mt(Un.currentTarget)},[]),Xt=(0,a.useCallback)(()=>{mt(null)},[]),{entityMetadata:{value:tn,loading:dn}}=(0,y.x1)(),An=(0,y.$L)(),On=An.renderComponentsByLocation(y.oZ.Subheader),Fn=An.renderComponentsByLocation(y.oZ.Settings);return!On&&!Fn||dn===!1&&!tn?null:a.createElement(xt.Z,{classes:pe,...Y.toolbarProps},a.createElement(Q.Z,{display:"flex",justifyContent:"flex-end",width:"100%",flexWrap:"wrap"},On,Fn?a.createElement(a.Fragment,null,a.createElement(nt.ZP,{title:"Settings"},a.createElement(x.Z,{"aria-controls":"tech-docs-reader-page-settings","aria-haspopup":"true",onClick:Dt},a.createElement(sn.Z,null))),a.createElement(pn.Z,{id:"tech-docs-reader-page-settings",getContentAnchorEl:null,anchorEl:ke,anchorOrigin:{vertical:"bottom",horizontal:"right"},open:Boolean(ke),onClose:Xt,keepMounted:!0},Fn)):null))},ft=({withSearch:Y,withHeader:pe=!0})=>a.createElement(_.T3,{themeId:"documentation"},pe&&a.createElement(De,null),a.createElement(dt,null),a.createElement(te,{withSearch:Y})),yt=Y=>{const{kind:pe,name:ke,namespace:mt}=(0,n.Oi)(H),{children:Dt,entityRef:Xt={kind:pe,name:ke,namespace:mt}}=Y,tn=(0,l.pC)();if(!Dt){const On=(tn?a.Children.toArray(tn.props.children):[]).flatMap(Fn=>{var Un,En;return(En=(Un=Fn==null?void 0:Fn.props)==null?void 0:Un.children)!=null?En:[]}).find(Fn=>!(0,n.IY)(Fn,y.Zz)&&!(0,n.IY)(Fn,y.jM));return a.createElement(y.ZS,{entityRef:Xt},On||a.createElement(ft,null))}return a.createElement(y.ZS,{entityRef:Xt},({metadata:dn,entityMetadata:An,onReady:On})=>a.createElement("div",{className:"techdocs-reader-page"},a.createElement(_.T3,{themeId:"documentation"},Dt instanceof Function?Dt({entityRef:Xt,techdocsMetadataValue:dn.value,entityMetadataValue:An.value,onReady:On}):Dt)))};function Ft(Y,pe){return pe.getOptionalBoolean("techdocs.legacyUseCaseSensitiveTripletPaths")?Y:Y.toLocaleLowerCase("en-US")}const an=Y=>{const{entities:pe}=Y,ke=(0,n.tg)(H),mt=(0,n.h_)(n.Ds);return pe?a.createElement(_.Oh,{"data-testid":"docs-explore"},pe!=null&&pe.length?pe.map((Dt,Xt)=>{var tn,dn;return a.createElement(Ct.Z,{key:Xt},a.createElement(Ge.Z,null,a.createElement(_.hu,{title:(tn=Dt.metadata.title)!=null?tn:Dt.metadata.name})),a.createElement(C.Z,null,Dt.metadata.description),a.createElement(Fe.Z,null,a.createElement(_.zx,{to:ke({namespace:Ft((dn=Dt.metadata.namespace)!=null?dn:"default",mt),kind:Ft(Dt.kind,mt),name:Ft(Dt.metadata.name,mt)}),color:"primary","data-testid":"read_docs"},"Read Docs")))}):null):null},en={title:"All Documentation",filterPredicate:()=>!0},cn=({entities:Y,group:pe})=>{const{loading:ke,isOwnedEntity:mt}=useEntityOwnership(),Dt=Y.filter(tn=>pe.filterPredicate==="ownedByUser"?ke?!1:mt(tn):typeof pe.filterPredicate=="function"&&pe.filterPredicate(tn)),Xt=(()=>typeof pe.title=="string"?React.createElement(ContentHeader,{title:pe.title}):pe.title)();return Dt.length===0?null:React.createElement(Content,null,Xt,React.createElement(an,{entities:Dt}))},xn=({groups:Y})=>{const{loading:pe,error:ke,entities:mt}=useEntityList();return ke?React.createElement(WarningPanel,{severity:"error",title:"Could not load available documentation."},React.createElement(CodeSnippet,{language:"text",text:ke.toString()})):pe?React.createElement(Progress,null):mt.length===0?React.createElement("div",{"data-testid":"doc-not-found"},React.createElement(Typography,{variant:"body2"},"No documentation found that match your filter. Learn more about"," ",React.createElement(Link,{to:"https://backstage.io/docs/features/techdocs/creating-and-publishing"},"publishing documentation"),".")):(mt.sort((Dt,Xt)=>{var tn,dn;return((tn=Dt.metadata.title)!=null?tn:Dt.metadata.name).localeCompare((dn=Xt.metadata.title)!=null?dn:Xt.metadata.name)}),React.createElement(Content,null,(Y||[en]).map((Dt,Xt)=>React.createElement(cn,{entities:mt,group:Dt,key:`${Dt.title}-${Xt}`}))))},Dn=(0,Ht.Z)({root:{color:"#f3ba37"}})(nn.Z),Nn={createCopyDocsUrlAction(Y){return pe=>({icon:()=>a.createElement(Lt.Z,{fontSize:"small"}),tooltip:"Click to copy documentation link to clipboard",onClick:()=>Y(`${window.location.origin}${pe.resolved.docsUrl}`)})},createStarEntityAction(Y,pe){return({entity:ke})=>{const mt=Y(ke);return{cellStyle:{paddingLeft:"1em"},icon:()=>mt?a.createElement(Dn,null):a.createElement(Te.Z,null),tooltip:mt?"Remove from favorites":"Add to favorites",onClick:()=>pe(ke)}}}};function K(Y){return Y.metadata.title||Y.metadata.name}const s={createNameColumn(){return{title:"Document",field:"entity.metadata.name",highlight:!0,render:Y=>a.createElement(_.uw,{value:a.createElement(_.rU,{to:Y.resolved.docsUrl},K(Y.entity)),subvalue:Y.entity.metadata.description})}},createOwnerColumn(){return{title:"Owner",field:"resolved.ownedByRelationsTitle",render:({resolved:Y})=>a.createElement(zt.rI,{entityRefs:Y.ownedByRelations,defaultKind:"group"})}},createTypeColumn(){return{title:"Type",field:"entity.spec.type"}}},p=Y=>{const{entities:pe,title:ke,loading:mt,columns:Dt,actions:Xt}=Y,[,tn]=(0,un.Z)(),dn=(0,n.tg)(H),An=(0,n.h_)(n.Ds);if(!pe)return null;const On=pe.map(En=>{var ar;const pr=(0,zt.hF)(En,Le.S4);return{entity:En,resolved:{docsUrl:dn({namespace:Ft((ar=En.metadata.namespace)!=null?ar:"default",An),kind:Ft(En.kind,An),name:Ft(En.metadata.name,An)}),ownedByRelations:pr,ownedByRelationsTitle:pr.map(er=>(0,zt.$3)(er,{defaultKind:"group"})).join(", ")}}}),Fn=[s.createNameColumn(),s.createOwnerColumn(),s.createTypeColumn()],Un=[Nn.createCopyDocsUrlAction(tn)];return a.createElement(a.Fragment,null,mt||On&&On.length>0?a.createElement(_.iA,{isLoading:mt,options:{paging:!0,pageSize:20,search:!0,actionsColumnIndex:-1},data:On,columns:Dt||Fn,actions:Xt||Un,title:ke?`${ke} (${On.length})`:`All (${On.length})`}):a.createElement(_.ub,{missing:"data",title:"No documents to show",description:"Create your own document. Check out our Getting Started Information",action:a.createElement(_.zx,{color:"primary",to:"https://backstage.io/docs/features/techdocs/getting-started",variant:"contained"},"DOCS")}))};p.columns=s,p.actions=Nn;const I=Y=>{var pe,ke;const{columns:mt,actions:Dt}=Y,{loading:Xt,error:tn,entities:dn,filters:An}=(0,zt.wp)(),{isStarredEntity:On,toggleStarredEntity:Fn}=(0,zt.CR)(),[,Un]=(0,un.Z)(),En=(0,Pt.capitalize)((ke=(pe=An.user)==null?void 0:pe.value)!=null?ke:"all"),ar=[Nn.createCopyDocsUrlAction(Un),Nn.createStarEntityAction(On,Fn)];return tn?a.createElement(_.GB,{severity:"error",title:"Could not load available documentation."},a.createElement(_.Oi,{language:"text",text:tn.toString()})):a.createElement(p,{title:En,entities:dn,loading:Xt,actions:Dt||ar,columns:mt})};I.columns=s,I.actions=Nn;const X=Y=>{var pe;const{children:ke}=Y,Dt=`Documentation available in ${(pe=(0,n.h_)(n.Ds).getOptionalString("organization.name"))!=null?pe:"Backstage"}`;return a.createElement(_.g9,{title:"Documentation",subtitle:Dt,themeId:"documentation"},ke)};class xe{getCatalogFilters(){return{"metadata.annotations.backstage.io/techdocs-ref":zt.n3}}}const se=()=>{const{updateFilters:Y}=(0,zt.wp)();return(0,a.useEffect)(()=>{Y({techdocs:new xe})},[Y]),null},U=Y=>{const{initialFilter:pe="owned",columns:ke,actions:mt}=Y;return a.createElement(X,null,a.createElement(_.VY,null,a.createElement(_.yW,{title:""},a.createElement(_.qt,null,"Discover documentation in your ecosystem.")),a.createElement(zt.UO,null,a.createElement(zt._i,null,a.createElement(zt._i.Filters,null,a.createElement(se,null),a.createElement(zt.EW,{initialFilter:pe}),a.createElement(zt.dq,null),a.createElement(zt.xE,null)),a.createElement(zt._i.Content,null,a.createElement(I,{actions:mt,columns:ke}))))))},ye=(0,n.rx)({id:"techdocs",apis:[(0,n.ni)({api:y.Dl,deps:{configApi:n.Ds,discoveryApi:n.NW,identityApi:n.$4,fetchApi:n.gP},factory:({configApi:Y,discoveryApi:pe,identityApi:ke,fetchApi:mt})=>new Z({configApi:Y,discoveryApi:pe,identityApi:ke,fetchApi:mt})}),(0,n.ni)({api:y.gT,deps:{configApi:n.Ds,discoveryApi:n.NW,fetchApi:n.gP},factory:({configApi:Y,discoveryApi:pe,fetchApi:ke})=>new ie({configApi:Y,discoveryApi:pe,fetchApi:ke})})],routes:{root:Ye,docRoot:H,entityContent:W}}),it=ye.provide((0,n.P4)({name:"TechdocsPage",component:()=>Promise.resolve().then(function(){return Ir}).then(Y=>Y.Router),mountPoint:Ye})),Bt=ye.provide((0,n.P4)({name:"EntityTechdocsContent",component:()=>Promise.resolve().then(function(){return Ir}).then(Y=>Y.EmbeddedDocsRouter),mountPoint:W})),Yt=ye.provide((0,n.P4)({name:"TechDocsCustomHome",component:()=>e.e(3232).then(e.bind(e,63232)).then(Y=>Y.TechDocsCustomHome),mountPoint:Ye})),fn=ye.provide((0,n.P4)({name:"TechDocsIndexPage",component:()=>Promise.resolve().then(function(){return Gn}).then(Y=>Y.TechDocsIndexPage),mountPoint:Ye})),In=ye.provide((0,n.P4)({name:"TechDocsReaderPage",component:()=>e.e(8477).then(e.bind(e,68477)).then(Y=>Y.TechDocsReaderPage),mountPoint:H})),Vn=({entity:Y})=>{const pe=(0,Le.iB)(Y);return a.createElement(In,{entityRef:pe},a.createElement(dt,null),a.createElement(te,{withSearch:!1}))},Bn=Y=>(0,l.pC)()||a.createElement(U,{...Y});var Gn=Object.freeze({__proto__:null,TechDocsIndexPage:Bn});const Wn="backstage.io/techdocs-ref";var Ir=Object.freeze({__proto__:null,isTechDocsAvailable:Y=>{var pe,ke;return Boolean((ke=(pe=Y==null?void 0:Y.metadata)==null?void 0:pe.annotations)==null?void 0:ke[Wn])},Router:()=>a.createElement(l.Z5,null,a.createElement(l.AW,{path:"/",element:a.createElement(Bn,null)}),a.createElement(l.AW,{path:"/:namespace/:kind/:name/*",element:a.createElement(yt,null)})),EmbeddedDocsRouter:Y=>{var pe;const{children:ke}=Y,{entity:mt}=(0,zt.X2)(),Dt=(0,l.V$)([{path:"/*",element:a.createElement(Vn,{entity:mt}),children:[{path:"*",element:ke}]}]);return((pe=mt.metadata.annotations)==null?void 0:pe[Wn])?Dt:a.createElement(_.sk,{annotation:Wn})}})},70557:function(Nt,u,e){e.d(u,{$d:function(){return n.E},I6:function(){return n.g},Jl:function(){return n.e},bf:function(){return n.p},s4:function(){return n.t}});var n=e(15879),i=e(30705),m=e(32272),d=e(76372),a=e.n(d),l=e(2784),y=e(74163),b=e(49558),t=e(92573),_=e(49462),g=e(35368),F=e.n(g),j=e(1854),V=e(28316),re=e(82717),w=e.n(re),A=e(18671),D=e(73495),f=e(34520),x=e(76635),R=e.n(x)},43229:function(Nt,u,e){e.d(u,{F0:function(){return ze},H2:function(){return G},Zr:function(){return Re},kG:function(){return Pt}});var n=e(53907),i=e(32272),m=e(82394),d=e.n(m),a=e(30705),l=e(2784),y=e(47603),b=e(49558),t=e(73557),_=e(90436),g=e(77277),F=e(79692),j=e(43434),V=e(38402),re=e(86136),w=e(49378),A=e(80030),D=e(60905),f=e(9520),x=e(11776),R=e(82938),c=e(86619),O=e(61837),T=e(48348),Ce=e(12231),we=e(11640),nt=e(33375),ot=e(64279),$t=e(71554),ct=e(43054),St=e(72164),xt=e(59324),Q=e(13737),pn=e(31168),Ct=e(7089);const Ge={"Content-Type":"application/json; charset=utf-8",Accept:"application/json"},C=new Map;class Fe{constructor(z,be,je,ut,Et,Mt){this.namespace=z,this.fetchApi=be,this.discoveryApi=je,this.errorApi=ut,this.identityApi=Et,this.fallback=Mt,this.subscribers=new Set,this.observables=new Map}static create(z){var be;return new Fe((be=z.namespace)!=null?be:"default",z.fetchApi,z.discoveryApi,z.errorApi,z.identityApi,WebStorage.create({namespace:z.namespace,errorApi:z.errorApi}))}forBucket(z){const be=`${this.namespace}.${z}`;return C.has(be)||C.set(be,new Fe(be,this.fetchApi,this.discoveryApi,this.errorApi,this.identityApi,this.fallback)),C.get(be)}async remove(z){const be=await this.getFetchUrl(z),je=await this.fetchApi.fetch(be,{method:"DELETE"});if(!je.ok&&je.status!==404)throw await ResponseError.fromResponse(je);this.notifyChanges({key:z,presence:"absent"})}async set(z,be){if(!await this.isSignedIn()){await this.fallback.set(z,be),this.notifyChanges({key:z,presence:"present",value:be});return}const je=await this.getFetchUrl(z),ut=await this.fetchApi.fetch(je,{method:"PUT",headers:Ge,body:JSON.stringify({value:be})});if(!ut.ok)throw await ResponseError.fromResponse(ut);const{value:Et}=await ut.json();this.notifyChanges({key:z,value:Et,presence:"present"})}observe$(z){return this.observables.has(z)||this.observables.set(z,new ObservableImpl(be=>(this.subscribers.add(be),Promise.resolve().then(()=>this.get(z)).then(je=>be.next(je)).catch(je=>this.errorApi.post(je)),()=>{this.subscribers.delete(be)})).filter(({key:be})=>be===z)),this.observables.get(z)}snapshot(z){return{key:z,presence:"unknown"}}async get(z){if(!await this.isSignedIn())return this.fallback.snapshot(z);const be=await this.getFetchUrl(z),je=await this.fetchApi.fetch(be);if(je.status===404)return{key:z,presence:"absent"};if(!je.ok)throw await ResponseError.fromResponse(je);try{const{value:ut}=await je.json(),Et=JSON.parse(JSON.stringify(ut),(Mt,rn)=>(typeof rn=="object"&&rn!==null&&Object.freeze(rn),rn));return{key:z,presence:"present",value:Et}}catch{return{key:z,presence:"absent"}}}async getFetchUrl(z){const be=await this.discoveryApi.getBaseUrl("user-settings"),je=encodeURIComponent(this.namespace),ut=encodeURIComponent(z);return`${be}/buckets/${je}/keys/${ut}`}async notifyChanges(z){for(const be of this.subscribers)try{be.next(z)}catch{}}async isSignedIn(){try{const z=await this.identityApi.getCredentials();return!!(z!=null&&z.token)}catch{return!1}}}const ve=(0,a.NT)({id:"user-settings"}),G=(0,a.rx)({id:"user-settings",routes:{settingsPage:ve}}).provide((0,a.P4)({name:"UserSettingsPage",component:()=>e.e(7415).then(e.bind(e,97415)).then(He=>He.SettingsPage),mountPoint:ve})),Re=He=>{const z=(0,a.tg)(ve),be=He.icon?He.icon:y.Z;return l.createElement(b.R6,{text:"Settings",to:z(),icon:be})},Ne=`auth:
  providers:
    google:
      development:
        clientId: \${AUTH_GOOGLE_CLIENT_ID}
        clientSecret: \${AUTH_GOOGLE_CLIENT_SECRET}
`,Me=()=>l.createElement(b.ub,{missing:"content",title:"No Authentication Providers",description:"You can add Authentication Providers to Backstage which allows you to use these providers to authenticate yourself.",action:l.createElement(l.Fragment,null,l.createElement(_.Z,{variant:"body1"},"Open ",l.createElement("code",null,"app-config.yaml")," and make the changes as highlighted below:"),l.createElement(b.Oi,{text:Ne,language:"yaml",showLineNumbers:!0,highlightedNumbers:[3,4,5,6,7,8],customStyle:{background:"inherit",fontSize:"115%"}}),l.createElement(g.Z,{variant:"contained",color:"primary",href:"https://backstage.io/docs/auth/add-auth-provider"},"Read More"))}),Xe=(0,F.Z)(He=>({avatar:{width:({size:z})=>z,height:({size:z})=>z,fontSize:({size:z})=>z*.7,border:`1px solid ${He.palette.textSubtle}`}})),vt=({size:He,picture:z})=>{const{iconSize:be}=b.po,je=Xe(He?{size:He}:{size:be});return l.createElement(j.Z,{src:z,className:je.avatar})},ee=He=>{const{title:z,description:be,icon:je,apiRef:ut}=He,Et=(0,a.h_)(ut),Mt=(0,a.h_)(a.VE),[rn,ln]=(0,l.useState)(!1),Rn={},[Mn,Ke]=(0,l.useState)(Rn);return(0,l.useEffect)(()=>{let Je=!1;const Qe=Et.sessionState$().subscribe(oe=>{Je||Et.getProfile({optional:!0}).then(fe=>{Je||(oe===a.sM.SignedIn&&ln(!0),fe&&Ke(fe))})});return()=>{Je=!0,Qe.unsubscribe()}},[Et]),l.createElement(V.Z,null,l.createElement(re.Z,null,l.createElement(je,null)),l.createElement(w.Z,{primary:z,secondary:l.createElement(A.ZP,{placement:"top",arrow:!0,title:be},l.createElement("span",null,l.createElement(D.Z,{container:!0,spacing:6},l.createElement(D.Z,{item:!0},l.createElement(vt,{size:48,picture:Mn.picture})),l.createElement(D.Z,{item:!0,xs:12,sm:!0,container:!0},l.createElement(D.Z,{item:!0,xs:!0,container:!0,direction:"column",spacing:2},l.createElement(D.Z,{item:!0,xs:!0},l.createElement(_.Z,{variant:"subtitle1",color:"textPrimary",gutterBottom:!0},Mn.displayName),l.createElement(_.Z,{variant:"body2",color:"textSecondary"},Mn.email),l.createElement(_.Z,{variant:"body2",color:"textSecondary"},be))))))),secondaryTypographyProps:{noWrap:!0,style:{width:"80%"}}}),l.createElement(f.Z,null,l.createElement(A.ZP,{placement:"top",arrow:!0,title:rn?`Sign out from ${z}`:`Sign in to ${z}`},l.createElement(g.Z,{variant:"outlined",color:"primary",onClick:()=>{(rn?Et.signOut():Et.signIn()).catch(Qe=>Mt.post(Qe))}},rn?"Sign out":"Sign in"))))},ue=He=>{const{configuredProviders:z}=He;return l.createElement(l.Fragment,null,z.includes("google")&&l.createElement(ee,{title:"Google",description:"Provides authentication towards Google APIs and identities",apiRef:a.Kp,icon:we.Z}),z.includes("microsoft")&&l.createElement(ee,{title:"Microsoft",description:"Provides authentication towards Microsoft APIs and identities",apiRef:a.p_,icon:we.Z}),z.includes("github")&&l.createElement(ee,{title:"GitHub",description:"Provides authentication towards GitHub APIs",apiRef:a.F4,icon:we.Z}),z.includes("gitlab")&&l.createElement(ee,{title:"GitLab",description:"Provides authentication towards GitLab APIs",apiRef:a.ux,icon:we.Z}),z.includes("okta")&&l.createElement(ee,{title:"Okta",description:"Provides authentication towards Okta APIs",apiRef:a.D,icon:we.Z}),z.includes("bitbucket")&&l.createElement(ee,{title:"Bitbucket",description:"Provides authentication towards Bitbucket APIs",apiRef:a.bq,icon:we.Z}),z.includes("onelogin")&&l.createElement(ee,{title:"OneLogin",description:"Provides authentication towards OneLogin APIs",apiRef:a.gW,icon:we.Z}),z.includes("atlassian")&&l.createElement(ee,{title:"Atlassian",description:"Provides authentication towards Atlassian APIs",apiRef:a.uB,icon:we.Z}))},Pe=He=>{const{providerSettings:z}=He,je=(0,a.h_)(a.Ds).getOptionalConfig("auth.providers"),ut=(je==null?void 0:je.keys())||[],Et=z!=null?z:l.createElement(ue,{configuredProviders:ut});return!z&&!(ut!=null&&ut.length)?l.createElement(Me,null):l.createElement(b.rJ,{title:"Available Providers"},l.createElement(x.Z,{dense:!0},Et))},at=`import { createPlugin } from '@backstage/core-plugin-api';

export default createPlugin({
  id: 'plugin-name',
  featureFlags: [{ name: 'enable-example-feature' }],
});
`,bt=()=>l.createElement(b.ub,{missing:"content",title:"No Feature Flags",description:"Feature Flags make it possible for plugins to register features in Backstage for users to opt into. You can use this to split out logic in your code for manual A/B testing, etc.",action:l.createElement(l.Fragment,null,l.createElement(_.Z,{variant:"body1"},"An example for how to add a feature flag is highlighted below:"),l.createElement(b.Oi,{text:at,language:"typescript",showLineNumbers:!0,highlightedNumbers:[6],customStyle:{background:"inherit",fontSize:"115%"}}),l.createElement(g.Z,{variant:"contained",color:"primary",href:"https://backstage.io/docs/api/utility-apis"},"Read More"))}),Wt=({flag:He,enabled:z,toggleHandler:be})=>l.createElement(V.Z,{divider:!0,button:!0,onClick:()=>be(He.name)},l.createElement(re.Z,null,l.createElement(A.ZP,{placement:"top",arrow:!0,title:z?"Disable":"Enable"},l.createElement(R.Z,{color:"primary",checked:z,name:He.name}))),l.createElement(w.Z,{primary:He.name,secondary:`Registered in ${He.pluginId} plugin`})),on=()=>{const He=(0,a.h_)(a.W0),z=He.getRegisteredFlags(),be=Object.fromEntries(z.map(({name:Qe})=>[Qe,He.isActive(Qe)])),[je,ut]=(0,l.useState)(be),[Et,Mt]=(0,l.useState)(""),rn=l.useRef(),ln=(0,l.useCallback)(Qe=>{const oe=He.isActive(Qe)?a.CL.None:a.CL.Active;He.save({states:{[Qe]:oe},merge:!0}),ut(fe=>({...fe,[Qe]:oe===a.CL.Active}))},[He]);if(!z.length)return l.createElement(bt,null);const Rn=()=>{var Qe;Mt(""),(Qe=rn==null?void 0:rn.current)==null||Qe.focus()};let Mn=Array.from(z);Et.split(/\s/).map(Qe=>Qe.trim().toLocaleLowerCase("en-US")).forEach(Qe=>Mn=Mn.filter(oe=>oe.name.toLocaleLowerCase("en-US").includes(Qe)));const Je=()=>l.createElement(D.Z,{container:!0,style:{justifyContent:"space-between"}},l.createElement(D.Z,{item:!0,xs:6,md:8},l.createElement(_.Z,{variant:"h5"},"Feature Flags")),z.length>=10&&l.createElement(D.Z,{item:!0,xs:6,md:4},l.createElement(c.Z,{label:"Filter",style:{display:"flex",justifyContent:"flex-end"},inputRef:Qe=>Qe&&Qe.focus(),InputProps:{...Et.length&&{endAdornment:l.createElement(O.Z,{"aria-label":"Clear filter",onClick:Rn,edge:"end"},l.createElement(nt.Z,null))}},onChange:Qe=>Mt(Qe.target.value),value:Et})));return l.createElement(b.rJ,{title:l.createElement(Je,null)},l.createElement(x.Z,{dense:!0},Mn.map(Qe=>{const oe=Boolean(je[Qe.name]);return l.createElement(Wt,{key:Qe.name,flag:Qe,enabled:oe,toggleHandler:ln})})))},zt=()=>{var He;const z=(0,a.h_)(a.$4),be=(0,a.h_)(a.$v),{value:je,loading:ut,error:Et}=(0,ot.default)(async()=>({profile:await z.getProfileInfo(),identity:await z.getBackstageIdentity()}),[]);return(0,l.useEffect)(()=>{Et&&be.post({message:`Failed to load user identity: ${Et}`,severity:"error"})},[Et,be]),ut||Et?{profile:{},displayName:"",loading:ut}:{profile:je.profile,backstageIdentity:je.identity,displayName:(He=je.profile.displayName)!=null?He:je.identity.userEntityRef,loading:ut}},Le=(0,F.Z)(He=>({avatar:{width:({size:z})=>z,height:({size:z})=>z,fontSize:({size:z})=>z*.7,border:`1px solid ${He.palette.textSubtle}`}})),Pt=He=>{const{size:z}=He,{iconSize:be}=b.po,je=Le(z?{size:z}:{size:be}),{profile:ut}=zt();return l.createElement(j.Z,{src:ut.picture,className:je.avatar,alt:"Profile picture"})},Rt=()=>{const He=(0,a.h_)(a.VE),z=(0,a.h_)(a.$4),[be,je]=l.useState(!1),[ut,Et]=l.useState(void 0),Mt=ln=>{Et(ln.currentTarget),je(!0)},rn=()=>{Et(void 0),je(!1)};return l.createElement(l.Fragment,null,l.createElement(O.Z,{"data-testid":"user-settings-menu","aria-label":"more",onClick:Mt},l.createElement(ct.Z,null)),l.createElement(T.Z,{anchorEl:ut,open:be,onClose:rn},l.createElement(Ce.Z,{"data-testid":"sign-out",onClick:()=>z.signOut().catch(ln=>He.post(ln))},l.createElement(re.Z,null,l.createElement($t.Z,null)),"Sign Out")))},sn=()=>{const{profile:He,displayName:z}=zt();return l.createElement(b.rJ,{title:"Profile",variant:"gridItem"},l.createElement(D.Z,{container:!0,spacing:6},l.createElement(D.Z,{item:!0},l.createElement(Pt,{size:96})),l.createElement(D.Z,{item:!0,xs:12,sm:!0,container:!0},l.createElement(D.Z,{item:!0,xs:!0,container:!0,direction:"column",spacing:2},l.createElement(D.Z,{item:!0,xs:!0},l.createElement(_.Z,{variant:"subtitle1",gutterBottom:!0},z),l.createElement(_.Z,{variant:"body2",color:"textSecondary"},He.email))),l.createElement(D.Z,{item:!0},l.createElement(Rt,null)))))},un=()=>{const{isPinned:He,toggleSidebarPinState:z}=(0,b.Pf)();return l.createElement(V.Z,null,l.createElement(w.Z,{primary:"Pin Sidebar",secondary:"Prevent the sidebar from collapsing"}),l.createElement(f.Z,null,l.createElement(A.ZP,{placement:"top",arrow:!0,title:`${He?"Unpin":"Pin"} Sidebar`},l.createElement(R.Z,{color:"primary",checked:He,onChange:()=>z(),name:"pin",inputProps:{"aria-label":"Pin Sidebar Switch"}}))))},Lt=({id:He,activeId:z,icon:be})=>be?(0,l.cloneElement)(be,{color:z===He?"primary":void 0}):l.createElement(xt.Z,{color:z===He?"primary":void 0}),Ht=(0,F.Z)(He=>({container:{display:"flex",flexWrap:"wrap",width:"100%",justifyContent:"space-between",alignItems:"center",paddingBottom:8,paddingRight:16},list:{width:"initial",[He.breakpoints.down("xs")]:{width:"100%",padding:"0 0 12px"}},listItemText:{paddingRight:0,paddingLeft:0},listItemSecondaryAction:{position:"relative",transform:"unset",top:"auto",right:"auto",paddingLeft:16,[He.breakpoints.down("xs")]:{paddingLeft:0}}})),nn=({children:He,title:z,value:be,...je})=>l.createElement(A.ZP,{placement:"top",arrow:!0,title:z},l.createElement(Q.Z,{value:be,...je},He)),Te=()=>{const He=Ht(),z=(0,a.h_)(a.hg),be=(0,St.Z)(z.activeThemeId$(),z.getActiveThemeId()),je=z.getInstalledThemes(),ut=(Et,Mt)=>{je.some(rn=>rn.id===Mt)?z.setActiveThemeId(Mt):z.setActiveThemeId(void 0)};return l.createElement(V.Z,{className:He.list,classes:{container:He.container}},l.createElement(w.Z,{className:He.listItemText,primary:"Theme",secondary:"Change the theme mode"}),l.createElement(f.Z,{className:He.listItemSecondaryAction},l.createElement(pn.Z,{exclusive:!0,size:"small",value:be!=null?be:"auto",onChange:ut},je.map(Et=>{var Mt;const rn=(Mt=je.find(ln=>ln.id===Et.id))==null?void 0:Mt.icon;return l.createElement(nn,{key:Et.id,title:`Select ${Et.title}`,value:Et.id},l.createElement(l.Fragment,null,Et.title,"\xA0",l.createElement(Lt,{id:Et.id,icon:rn,activeId:be})))}),l.createElement(A.ZP,{placement:"top",arrow:!0,title:"Select auto theme"},l.createElement(Q.Z,{value:"auto",selected:be===void 0},"Auto\xA0",l.createElement(xt.Z,{color:be===void 0?"primary":void 0}))))))},st=()=>{const{isMobile:He}=(0,b.Pf)();return l.createElement(b.rJ,{title:"Appearance",variant:"gridItem"},l.createElement(x.Z,{dense:!0},l.createElement(Te,null),!He&&l.createElement(un,null)))},le=()=>{const{backstageIdentity:He}=zt();return l.createElement(b.rJ,{title:"Backstage Identity"},l.createElement(D.Z,{container:!0,spacing:6},l.createElement(D.Z,{item:!0,xs:12,sm:!0,container:!0},l.createElement(D.Z,{item:!0,xs:!0,container:!0,direction:"column",spacing:2},l.createElement(D.Z,{item:!0,xs:!0},l.createElement(_.Z,{variant:"subtitle1",gutterBottom:!0},"User Entity:"," ",l.createElement(Ct.Z,{label:He==null?void 0:He.userEntityRef,variant:"outlined",size:"small"})),l.createElement(_.Z,{variant:"subtitle1"},"Ownership Entities:"," ",He==null?void 0:He.ownershipEntityRefs.map(z=>l.createElement(Ct.Z,{label:z,variant:"outlined",size:"small"}))))))))},ie=()=>l.createElement(D.Z,{container:!0,direction:"row",spacing:3},l.createElement(D.Z,{item:!0,xs:12,md:6},l.createElement(sn,null)),l.createElement(D.Z,{item:!0,xs:12,md:6},l.createElement(st,null)),l.createElement(D.Z,{item:!0,xs:12,md:6},l.createElement(le,null))),Z="plugin.user-settings.settingsLayout",B="plugin.user-settings.settingsLayoutRoute",_e=()=>null;(0,a.R5)(_e,B,!0),(0,a.R5)(_e,"core.gatherMountPoints",!0);const de=He=>{const{title:z,children:be}=He,{isMobile:je}=(0,b.Pf)(),ut=(0,a.vJ)(be,Et=>Et.selectByComponentData({key:B,withStrictError:"Child of SettingsLayout must be an SettingsLayout.Route"}).getElements().map(Mt=>Mt.props));return l.createElement(b.T3,{themeId:"home"},!je&&l.createElement(b.h4,{title:z!=null?z:"Settings"}),l.createElement(b.tn,{routes:ut}))};(0,a.R5)(de,Z,!0),de.Route=_e;const Ie=He=>{const{providerSettings:z,tabs:be}=He;return l.createElement(de,null,l.createElement(de.Route,{path:"general",title:"General"},l.createElement(ie,null)),l.createElement(de.Route,{path:"auth-providers",title:"Authentication Providers"},l.createElement(Pe,{providerSettings:z})),l.createElement(de.Route,{path:"feature-flags",title:"Feature Flags"},l.createElement(on,null)),be)},ze=He=>{const{providerSettings:z}=He,be=(0,t.pC)(),je=(0,a.vJ)(be,Et=>Et.selectByComponentData({key:Z}).getElements()),ut=(0,a.vJ)(be,Et=>Et.selectByComponentData({key:B}).getElements());return l.createElement(l.Fragment,null,je.length!==0&&je||l.createElement(Ie,{tabs:ut,providerSettings:z}))},rt=B,kt=He=>l.createElement(de.Route,{path:He.path,title:He.title},l.createElement(l.Fragment,null,"props.children"));(0,a.R5)(kt,rt,"UserSettingsTab")},18473:function(Nt,u,e){e.d(u,{CT:function(){return y},EI:function(){return l},Vt:function(){return b},uW:function(){return a}});var n=e(2784);function i(){return typeof window!="undefined"&&window.Math===Math?window:typeof self!="undefined"&&self.Math===Math?self:Function("return this")()}const m=i(),d=_=>`__@backstage/${_}__`;function a(_,g){const F=d(_);let j=m[F];return j||(j=g(),m[F]=j,j)}function l(_){Object.freeze(_);const g={atVersion(F){return _[F]}};return Object.defineProperty(g,"$map",{configurable:!0,enumerable:!0,get(){return _}}),g}function y(_){return a(_,()=>(0,n.createContext)(void 0))}function b(_){return(0,n.useContext)(y(_))}function t(_){return{set(g){globalThis[`__@backstage/${_}__`]=createContext(l(g))},reset(){delete globalThis[`__@backstage/${_}__`]}}}},85310:function(Nt){Nt.exports=JSON.parse('{"$id":"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#","description":"Meta-schema for $data reference (JSON AnySchema extension proposal)","type":"object","required":["$data"],"properties":{"$data":{"type":"string","anyOf":[{"format":"relative-json-pointer"},{"format":"json-pointer"}]}},"additionalProperties":false}')},51020:function(Nt){Nt.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"http://json-schema.org/draft-07/schema#","title":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"nonNegativeInteger":{"type":"integer","minimum":0},"nonNegativeIntegerDefault0":{"allOf":[{"$ref":"#/definitions/nonNegativeInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"uniqueItems":true,"default":[]}},"type":["object","boolean"],"properties":{"$id":{"type":"string","format":"uri-reference"},"$schema":{"type":"string","format":"uri"},"$ref":{"type":"string","format":"uri-reference"},"$comment":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"default":true,"readOnly":{"type":"boolean","default":false},"examples":{"type":"array","items":true},"multipleOf":{"type":"number","exclusiveMinimum":0},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"number"},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"number"},"maxLength":{"$ref":"#/definitions/nonNegativeInteger"},"minLength":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"$ref":"#"},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":true},"maxItems":{"$ref":"#/definitions/nonNegativeInteger"},"minItems":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"contains":{"$ref":"#"},"maxProperties":{"$ref":"#/definitions/nonNegativeInteger"},"minProperties":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"$ref":"#"},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"propertyNames":{"format":"regex"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"propertyNames":{"$ref":"#"},"const":true,"enum":{"type":"array","items":true,"minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"contentMediaType":{"type":"string"},"contentEncoding":{"type":"string"},"if":{"$ref":"#"},"then":{"$ref":"#"},"else":{"$ref":"#"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"default":true}')}}]);})();

//# sourceMappingURL=module-backstage.35c15edf.js.map