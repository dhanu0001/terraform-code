{"version":3,"sources":["webpack://app/../node_modules/@backstage/plugin-catalog-graph/dist/esm/index-34aaa122.esm.js"],"names":["useStyles","height","CatalogGraphCard","props","variant","relationPairs","maxDepth","unidirectional","mergeRelations","kinds","relations","direction","title","zoom","entity","entityName","catalogEntityRoute","catalogGraphRoute","navigate","classes","analytics","onNodeClick","node","_","_a","nodeEntityName","path","catalogGraphParams","catalogGraphUrl"],"mappings":"oTAiBA,MAAMA,G,EAAY,KAChB,CACE,KAAM,CAAC,CAAE,OAAAC,CAAO,KAAO,CACrB,QAAS,OACT,cAAe,SACf,UAAWA,EACX,UAAWA,CACb,GACA,MAAO,CACL,KAAM,EACN,UAAW,CACb,CACF,EACA,CAAE,KAAM,oCAAqC,CAC/C,EACMC,EAAoBC,GAAU,CAClC,KAAM,CACJ,QAAAC,EAAU,WACV,cAAAC,EAAgB,KAChB,SAAAC,EAAW,EACX,eAAAC,EAAiB,GACjB,eAAAC,EAAiB,GACjB,MAAAC,EACA,UAAAC,EACA,UAAAC,EAAY,gBACZ,OAAAV,EACA,MAAAW,EAAQ,YACR,KAAAC,EAAO,iBACT,EAAIV,EACE,CAAE,OAAAW,CAAO,G,EAAI,MAAU,EACvBC,G,EAAa,MAAqBD,CAAM,EACxCE,G,EAAqB,MAAY,IAAc,EAC/CC,G,EAAoB,MAAY,IAAoB,EACpDC,G,EAAW,MAAY,EACvBC,EAAUnB,EAAU,CAAE,OAAAC,CAAO,CAAC,EAC9BmB,G,EAAY,MAAa,EACzBC,G,EAAc,eAClB,CAACC,EAAMC,IAAM,CACX,IAAIC,EACJ,MAAMC,G,EAAiB,MAAeH,EAAK,EAAE,EACvCI,EAAOV,EAAmB,CAC9B,KAAMS,EAAe,KAAK,kBAAkB,OAAO,EACnD,UAAWA,EAAe,UAAU,kBAAkB,OAAO,EAC7D,KAAMA,EAAe,IACvB,CAAC,EACDL,EAAU,aACR,SACCI,EAAKF,EAAK,QAAU,KAAOE,G,EAAK,MAAkBC,CAAc,EACjE,CAAE,WAAY,CAAE,GAAIC,CAAK,CAAE,CAC7B,EACAR,EAASQ,CAAI,CACf,EACA,CAACV,EAAoBE,EAAUE,CAAS,CAC1C,EACMO,EAAqB,cACzB,CACE,eAAgB,E,EAAC,MAAmBb,CAAM,CAAC,EAC3C,SAAUR,EAAW,EACrB,eAAAC,EACA,eAAAC,EACA,MAAAC,EACA,UAAAC,EACA,UAAAC,CACF,EACA,CAAE,YAAa,WAAY,eAAgB,EAAK,CAClD,EACMiB,EAAkB,GAAGX,EAAkB,IAAIU,IACjD,OAAuB,gBACrB,KACA,CACE,MAAAf,EACA,cAAeO,EAAQ,KACvB,QAAAf,EACA,UAAW,GACX,SAAU,CACR,MAAO,aACP,KAAMwB,CACR,CACF,EACgB,gBACd,KACA,CACE,gBAAiBb,EACjB,SAAAT,EACA,eAAAC,EACA,eAAAC,EACA,MAAAC,EACA,UAAAC,EACA,UAAAC,EACA,YAAAU,EACA,UAAWF,EAAQ,MACnB,cAAAd,EACA,KAAAQ,CACF,CACF,CACF,CACF,C","file":"static/9962.0e6563bf.chunk.js","sourcesContent":["import { getCompoundEntityRef, parseEntityRef, stringifyEntityRef } from '@backstage/catalog-model';\nimport { InfoCard } from '@backstage/core-components';\nimport { useRouteRef, useAnalytics } from '@backstage/core-plugin-api';\nimport { useEntity, entityRouteRef, humanizeEntityRef } from '@backstage/plugin-catalog-react';\nimport { makeStyles } from '@material-ui/core';\nimport qs from 'qs';\nimport React, { useCallback } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { ALL_RELATION_PAIRS, Direction, catalogGraphRouteRef, EntityRelationsGraph } from '../index.esm.js';\nimport 'classnames';\nimport '@material-ui/core/styles/makeStyles';\nimport '@material-ui/core/styles';\nimport '@material-ui/icons/Work';\nimport 'react-use/lib/useDebounce';\nimport 'p-limit';\nimport 'react-use/lib/useAsyncFn';\n\nconst useStyles = makeStyles(\n  {\n    card: ({ height }) => ({\n      display: \"flex\",\n      flexDirection: \"column\",\n      maxHeight: height,\n      minHeight: height\n    }),\n    graph: {\n      flex: 1,\n      minHeight: 0\n    }\n  },\n  { name: \"PluginCatalogGraphCatalogGraphCard\" }\n);\nconst CatalogGraphCard = (props) => {\n  const {\n    variant = \"gridItem\",\n    relationPairs = ALL_RELATION_PAIRS,\n    maxDepth = 1,\n    unidirectional = true,\n    mergeRelations = true,\n    kinds,\n    relations,\n    direction = Direction.LEFT_RIGHT,\n    height,\n    title = \"Relations\",\n    zoom = \"enable-on-click\"\n  } = props;\n  const { entity } = useEntity();\n  const entityName = getCompoundEntityRef(entity);\n  const catalogEntityRoute = useRouteRef(entityRouteRef);\n  const catalogGraphRoute = useRouteRef(catalogGraphRouteRef);\n  const navigate = useNavigate();\n  const classes = useStyles({ height });\n  const analytics = useAnalytics();\n  const onNodeClick = useCallback(\n    (node, _) => {\n      var _a;\n      const nodeEntityName = parseEntityRef(node.id);\n      const path = catalogEntityRoute({\n        kind: nodeEntityName.kind.toLocaleLowerCase(\"en-US\"),\n        namespace: nodeEntityName.namespace.toLocaleLowerCase(\"en-US\"),\n        name: nodeEntityName.name\n      });\n      analytics.captureEvent(\n        \"click\",\n        (_a = node.title) != null ? _a : humanizeEntityRef(nodeEntityName),\n        { attributes: { to: path } }\n      );\n      navigate(path);\n    },\n    [catalogEntityRoute, navigate, analytics]\n  );\n  const catalogGraphParams = qs.stringify(\n    {\n      rootEntityRefs: [stringifyEntityRef(entity)],\n      maxDepth: maxDepth + 1,\n      unidirectional,\n      mergeRelations,\n      kinds,\n      relations,\n      direction\n    },\n    { arrayFormat: \"brackets\", addQueryPrefix: true }\n  );\n  const catalogGraphUrl = `${catalogGraphRoute()}${catalogGraphParams}`;\n  return /* @__PURE__ */ React.createElement(\n    InfoCard,\n    {\n      title,\n      cardClassName: classes.card,\n      variant,\n      noPadding: true,\n      deepLink: {\n        title: \"View graph\",\n        link: catalogGraphUrl\n      }\n    },\n    /* @__PURE__ */ React.createElement(\n      EntityRelationsGraph,\n      {\n        rootEntityNames: entityName,\n        maxDepth,\n        unidirectional,\n        mergeRelations,\n        kinds,\n        relations,\n        direction,\n        onNodeClick,\n        className: classes.graph,\n        relationPairs,\n        zoom\n      }\n    )\n  );\n};\n\nexport { CatalogGraphCard };\n//# sourceMappingURL=index-34aaa122.esm.js.map\n"],"sourceRoot":""}